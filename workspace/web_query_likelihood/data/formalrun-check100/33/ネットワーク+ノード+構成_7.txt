前述したように、今回の開発はPS呼をIPルーティングさせるものであり、対向ノードとの接続に関しても、IPルータ網を有効に利用した接続構成に積極的に変更していく必要があった。
接続仕様の検討に関しては、既存仕様の踏襲および対向ノードへの影響を最小化することを前提に、サービスごとにIPルータ網が提供できる最適なインタフェースの検討を行った。
また、現実の設備状況を加味した上で、お客様に影響を与えずに構成の移行が可能なシステムを設計する必要があった。例えば、xGSNはMMSと同一ビルに設置されることを前提にしていないため、MMSと同一ビルに設置されて
いる対向ノードとの接続分界点装置(子ルータ)との接続に対し、設置場所を変更することなく移行できるような接続仕様が必須となった。
まず、基本的な検討ポイントとしてATMベースで考えられたMMSの接続仕様をxGSNのEthernetベースのIPルータ網接続仕様に改版する必要があり、これに関しては下位インタフェース仕様のみを変更することで実現できた。具体的には、各APNをPVC(Permanent Virtual Channel)ごとに割付していた仕様を、IEEE(Institute of Electrical and Electronics Engineers)標準化仕様のIEEE802.1Q[2]を用いたEthernetのVLAN(Virtual Local Area Network)間通信に変更した。APNごとの接続構成を図5に示す。
また、その他の検討ポイントとして、次の2点が挙げられる。
xGSNとWPCG/XPCG(eXtended wireless Protocol Conversion Gateway)との接続を、伝送路コストと設備コストを考慮してn:mの接続構成に見直す方向で検討した。接続条件としては、xGSNから見て複数WPCG、WPCGから見て複数xGSNとそれぞれ通信する必要があり、これら通信を可能とするL3VPN(Layer3 Virtual Private Network)の接続構成を採用した。L3VPNはIPアドレスによるVPN内のルーティングが可能であり、n:mのようなフルメッシュでの接続に最も適した接続方法である。しかし、1つのVPNで構成する場合、L3VPNの動作上、WPCG/XPCGユニットの配下でIPアドレスの重複ができないため、移動端末に割り当てられるIPアドレスの体系上困難なことが判明した。そのため、VPNが増えるが通信上問題のないWPCG/XPCG ユニット単位でL3VPNを設定し、各xGSNを接続するn:1の仕様にすることで問題を解決した。
i-mode呼以外の接続仕様は既存対向ノードの装置設定内容を変更しない要求があり、既存のアドレス体系のままで接続をしなければならないため、IPルータ網でのL3VPNを用いた接続仕様が不可能であった。そのため、L2VPN(Layer2 Virtual Private Network)というIPルーティングではなく、L2ベースのVPNサービスを採用することで本課題を解決した。本方式では、設備コストやIPルータ網内のVPN数が増大するというデメリットがあったが、同一ビル内に設置されている子ルータに対して、L2VPN内でIEEE802.1QによるVLAN重畳を行うことで回避した。
5.あとがきへ
本記事は、テクニカル・ジャーナルVol.12 No.3に、掲載されています。
4.4 他ノードとの接続構成 | 企業情報 | NTTドコモ
