
ホーム >
基礎知識 >
その他の基礎知識 >
動画ファイル ～ 主なファイル形式と特徴 ～
動画ファイルの形式も画像や音声ファイルのように多くの種類があり、同様に目的や用途によって選択、決定されます。
また、動画ファイルには画像や音声ファイルも絡んでくるため、理解するのはより複雑になってきます。(したがって、本項を学習する前に、まず前項の 音声ファイル を学習してください)
前項でも解説のとおり、動画ファイルは「映像」と「音声」の大きな2つのファイル形式をその中に格納しなければなりません。また、それぞれに多くの形式があるため、その組み合せも考慮しなければならないのです。
さて、では動画というものを理解するためのポイントとして、やはり最も重要なのが、
になります。コーデックとファイルフォーマットについては、前項でも解説しましたが、両者は全くの別物と考えなければなりません。
コーデックとは、映像や音声を記録したアナログ信号をデジタル化した素のデータを、様々な形式で利用できるように符号化するためのプログラムで、ほとんどの場合は、圧縮されて符号化されます。
コーデックによって符号化されたデータは、様々な機器やアプリケーションソフトで取り扱うことのできるファイルフォーマットに格納されます。
音声の場合は、格納するファイルが音声だけのため、コーデックで符号化したデータをそのままフォーマットに格納して形式化することもできるし、複数の符号化データを格納することができる「コンテナ」に格納することもできます。
動画の場合は、音声と映像の最低2つの符号化データを格納しなければならないので、基本的にすべてコンテナファイルになります。
こうして、ファイルフォーマットとして形式化された動画や音声のファイルを再生するためには、そのフォーマットに対応した「プレーヤーソフト」と、圧縮されて納められている符号化データを伸張するための「圧縮に使用したコーデック」の両方が必要になります。
動画を再生するプレーヤーには、「MediaPlayer」「RealPlayer」「QuickTime」「GOM Player」などがありますが、動画の再生には、圧縮に使われたコーデックを用いて再生時にファイルを解凍(伸張)なければなりません。(プレーヤーソフトには、代表的な多くのコーデックが事前にインストールされています)
ただし、前項でも解説のとおり、コーデックはフォーマットの拡張子では判断できない場合があります。なぜなら、コーデックとフォーマットは1対1の関係ではない場合があり、拡張子はファイルフォーマットを表しているにすぎないからです。
例えば、複数のコーデックで符号化したデータを格納できるコンテナファイルの拡張子からは、符号化に使われているコーデックが何かまで判断することはできません。
よくあるケースに、2つの同じ拡張子の動画ファイルがあるとして、一方のファイルは再生できるのに、もう一方のファイルは再生できないといったケース、また、映像は見れるのに音がでない、音だけが流れて映像は真っ黒というケースもよくあります。
こういった場合は、再生できないファイル(音声・映像・または両方)の圧縮に使われたコーデックを探してインストールしなければなりません。
ファイルフォーマットとコーデックは、とかく混同されやすく区分があいまいな表現も多いので、両者の違いについてはしっかり理解しておくことが大切です。(詳しくは、前項を参照してください)
では、実際の動画コンテナフォーマットとコーデックについて解説していきましょう。
動画も画像や音声と同様に、「非可逆圧縮」と「可逆圧縮」に分類することができますが、動画の場合、膨大なデータ量になるので圧縮が必須であり、「非圧縮」は当然として「可逆圧縮」も現実的ではありません。
そのため、ほとんどすべての動画フォーマットは「非可逆圧縮」となります。非可逆圧縮の基本的な仕組みは、映像の中で変化の少ない部分の情報を減らすこと、また連続する映像の前後で、動きのある部分だけを記録することによってファイルサイズを縮小するというものです。
また、非可逆か可逆かというのはファイルフォーマットで決まるのではなく、コーデックによって決まります。ファイルフォーマットはコーデックで圧縮した符号化データの入れ物にすぎません。以下は、代表的なファイルフォーマット(コンテナ)とそれに対応するコーデックを解説しています。
MPEG(エムペグ)
MPEGは「Moving Picture Experts Group」の略で、ISOにおけるカラー動画の符号化方式の標準化を進めるワーキンググループの名称がそのまま使われており、そのグループで規定された符号化方式および符号化形式の総称を「MPEG」と言います。
MPEGには、「MPEG-1」「MPEG-2」「MPEG-4」の代表的な3タイプがありますが、拡張子は、MPEG-1とMPEG-2では、それぞれに統一した規格がないため「.mpg」が使われます。MPEG-4については後述します。
符号化方式というと「コーデック」の意味で使われますが、MPEGは「総称」と解説したとおり、動画や音声の符号化形式、それらの連結システム、復号化の手順、ファイルフォーマットなどを規定した「規格」になります。
MPEG-4に至っては、動画・音声全般が対象で規定範囲が広いため、複数の符号化形式や新たなコンテナ形式が規定されており、現在も追加・拡張が続いています。
つまり、動画に関するトータル的な規格であり、例えば「MPEG-1」であるなら、MPEG-1に規定されている形式に圧縮された音声や動画の符号化形式を、MPEG-1に既定されているコンテナに格納したファイル形式と考えれば良いと思います。
ただし、復号化方式が規定されているため、符号化方法については自由度が高く(または規定がなく)、最終的な符号化形式がMPEG規格に適合していれば良いという特徴があります。
そのため、他の形式のような任意のコーデックを必要とせず、エンコーダ(詳しくは、前項を参照してください)や、テレビを録画するためのビデオキャプチャ等で、MPEG規格に適合(変換)させてしまえば、対応するプレーヤーで再生することが可能になります。
また、符号化の自由度が高いということは、ビットレートの選択など、エンコーダの性能によって圧縮後の画質が大きく左右されるということでもあります。(MPEGエンコーダは様々な種類のものが販売・提供されています)
MPEG-1(エムペグ ワン)
ビデオCDなどでの使用を想定して標準化された符号化形式の規格で、拡張子は「.mpg」になります。
ビットレート(詳しくは、前項を参照してください)は1MB程度で、CDに1時間程度の動画を記録することができます。CDの容量は700MB程度なので、1時間の動画が約700MB程度に圧縮できる形式になります。
画質はVHSビデオ程度で、動画の音声部分には、MP2～MP3が規定されていますが、MP3が使われるのが一般的です。
MPEG-2(エムペグ ツー)
テレビ放送やDVDビデオなどでの使用を想定して標準化された符号化形式の規格で、拡張子はMPEG-1と同じ「.mpg」になります。
厳密には復号化の手順のみが規定されている規格であり、つまり、符号化については、最終的な符号化形式がMPEG-2規格に適合していればどのような手順で符号化しても良いということになります。
ビットレートの制限がなくなり、高画質化した規格で、動画の音声部分には、AACやDolby Digital(拡張子「.ac3」)が使われます。
ただし、DVDビデオに記録されているMPEG-2形式のファイルは、VOB(ブイオービー)というコンテナファイルに格納されている場合が多く、拡張子も「.vob」となっています。VOB形式は動画や音声の他に、メニューや字幕、プロテクト情報なども格納することができます。
MPEG-2は著作権保護の機能を持っていないため(MPEG-1もそうですが)、映画などをDVDビデオで販売するためには、VOBに格納するメリットが高いと言えます。
また、地上波デジタル放送などの高精細テレビ放送用にMPEG-3が策定される予定でしたが、基本技術が同じであるため、MPEG-2に吸収され、高精細テレビ放送もMPEG-2が利用されています。
MPEG-4(エムペグ フォー)
MPEG-1とMPEG-2は、CDやDVDのビデオ動画を規定するものですが、MPEG-4は、主にモバイル機器によるネットワークでの動画利用に主眼をおいて規定された規格になります。
そのため、ストリーミング再生に対応しており、高圧縮ですが画質の劣化が少なく、CPU負荷も比較的小さいと言う特徴があります。
ただし、その規定範囲はとても広範囲に及び、ネットワークでの利用はもちろん、3Dグラフィックスや合成、テキストなども規格しており、携帯電話用のコンテンツから、ハイビジョン動画の配信、さらには映像以外の画像やテキストといった広いニーズに対応できるように設計された柔軟な規格です。
そのため、MPEG-1、MPEG-2とは異なり、複数の符号化形式、コーデックが明確に規定されています。また、MPEG-4では、ファイルフォーマットとして、MPEG-4で規定された動画や音声の符号化形式を格納するコンテナファイル「MP4(エムピー フォー)」が規定されています。
ビットレートは、携帯端末等でのネットワークを介した動画再生を目的とした低いビットレートに注目されがちですが、実際にはMPEG-2以上のビットレートを範囲を含んでいます。
具体的には、MPEG-4は、MPEG-1、MPEG-2よりも低いビットレートで同質の画質に圧縮することができ、2時間程度の動画をCD1枚に収める事ができます。
また、デジカメや携帯の動画機能もMotion JPEG(詳しくは、前項を参照してください)から、MPEG-4が主流になりつつあります。
ただし、MPEG-4では様々な符号化形式(コーデック)が規定されているため、画質はコーデックやエンコーダの性能に左右されます。(デジカメなどでは、画質はMotion
JPEGの方が良いようです)MPEG-4のコーデック等については、以下のMP4で後述します。
このように、とても広範囲に対応する規格であるため、モバイル環境を主に、あらゆる分野で普及していると言いたいところですが、実際にはそこまで普及していません。
この他、MPEGでは、SVGのようにXMLをベースとしたマルチメディア用のメタデータの記述方式を規定した「MPEG-7(エムペグ セブン)」や、マルチメディアの著作権保護について規定した「MPEG-21(エムペグ トゥウェンティーワン)」が策定されています。
MPEG-21の「21」は、21世紀に重要になるとの意味で付けられています。また、MPEG-5とMPEG-6は欠番になっています。(SVGについては、画像ファイル を参照してください)
MP4(エムピー フォー)
MP4は、MPEG-4で規定されているコンテナフォーマットです。したがって、MPEG-4の一部ですが、MPEG-4とイコールではないので注意が必要です。
MPEG-1、MPEG-2と異なり、MPEG-4はその規定範囲が広いために、複数の符号化形式が規定されています。そのため、それらを格納するためのコンテナ形式が規定されているのです。
MP4は、AppleのQuickTimeフォーマットをベースに開発されており、Apple社製品ではよく利用されていて、相性が良いようです。
MP4コンテナには、音声符号化形式(コーデック)として、主にAACが使用され、他にもMP3など多くの符号化形式を格納することができます。また、音声コーデックのみを格納することもできます。
コーデックには、MPEG-4コーデック、 H.264(エイチ ニーロクヨン)などが主に使用されますが、音声同様に多くの符号化形式を格納することができます。したがって、どのような符号化形式が格納されているかは内部を解析してみないとわかりません。
※ H.264は、ITU(国際電気通信連合)によって規定された映像データの符号化方式で、携帯から高精細テレビ放送までカバーする高圧縮率のコーデックです。MPEG-4規格では「MPEG-4 AVC」という別名で規定されているため、「H.264/AVC」と併記する場合があります。
共通の拡張子は「.mp4」ですが、これでは音声ファイルなのか動画ファイルなのか区別がつかないため、音声ファイル「.m4a」、動画ファイル「.m4v」とすることが多いです。
AVI(エーブイアイ)
AVIは「Audio Video Interleave」の略で、AppleのQuickTime(MOV)に対抗するために開発されたWindows標準の動画コンテナフォーマットです。拡張子は「.avi」となります。
複数のコーデックで符号化された形式に対応しており、そのため、再生には圧縮に使用されているコーデックを用意する必要があります。しかし、ファイルの拡張子ではコーデックを判断することができません。コーデックによる再生トラブルが多い形式です。
AVIは比較的古い形式であり、ファイルの内容が不完全な状態(例えば、ダウンロードが完了していないファイルなど)では再生ができないため、修復を行わなければならず、ストリーミング配信には向いていません。また、AVI1.0では、最大2GBまでのサイズ制限があります。(AVI2.0では解決)
AVIコンテナは、多くの符号化形式に対応しており(無圧縮形式を格納することも可能)、使われるコーデックは多数ありますが、主に音声コーデックでは、MP3やAAC、動画コーデックでは、DivX(デイビックス)、Xvid(エックスビッド)、MPEG-4、 H.264などが使われています。(Divx、Xvidについては後述します)
MOV(エムオーブイ)
Appleのマルチメディア技術であるQuickTime(クイックタイム)によって作成された符号化形式を格納するコンテナフォーマットで、拡張子は「.mov」になります。
QuickTimeと言えば、ファイルを再生する「QuickTime Player」を指すことが一般的ですが、iTunes(アイチューンズ)の音楽ファイルの再生や管理に使われたり、こうしたアプリケーションソフトやマルチメディアに使われている技術の総称になります。
前述のとおり、MOVはMP4のベースとなっており、MPEG-4もQuickTimeをベースとしています。したがって、MPEG-4規格の符号化形式を格納することもできます。主に音声コーデックでは、MP3やAAC、動画コーデックでは、MPEG-4、 H.264などが使われています。
ASF(エーエスエフ)
ASFは「Advanced Systems Format」の略で、Microsoft社が開発したAVIの後継にあたるコンテナフォーマットです。
AVIとは異なり、ストリーミングに対応しており、プレーヤーソフトとして「Windows Media Player」が提供されています。ASFには、MP4やVOBと同様に音声や動画の符号化形式の他に、字幕やメタデータなども格納することができます。
多くのコーデックに対応しており、音声コーデックでは、WMA(Windows Media Audio)やMP3、動画コーデックでは、MS-MPEG4、WMV(Windows Media Video)コーデック、DivXなどが使われています。
拡張子は「.asf」ですが、一般的には、WMA(Windows Media Audio)コーデックで符号化したデータを格納している音声ファイルの場合は「.wma」、WMV(Windows Media Video)コーデックで符号化したデータを格納している動画ファイルの場合は「.wmv」となり、Windows Mediaコーデックを使用していない場合のみ「.asf」となります。
Ogg(オッグ)
Oggは、ライセンスフリーのコンテナフォーマットで、最も代表的な内容物は、音声コーデックのVorbisで符号化した形式で、それを格納したOggは「Ogg
Vorbis」と呼ばれています。
動画コーデックは、「Theora(セオラ)」が標準で使われており、音声コーデックはVorbisの他に、MP3やAAC、可逆音声のFLACなどの符号化データも格納することができます。他にも、テキストデータや音声コーデックのみを格納することもできます。
動画の場合、AVIとは異なり、ファイルの内容が不完全な状態(例えば、ダウンロードが完了していないファイルなど)でも、その箇所まで再生することが可能です。
共通の拡張子は「.ogg」ですが、MP4と同様に、これでは音声ファイルなのか動画ファイルなのか区別がつかないため、音声ファイル「.oga」、動画ファイル「.ogv」とすることが多いです。
前項でも解説しましたが、共通の拡張子は当初「.ogg」とされていましたが、「.ogx」に変更されています。ただし、非推奨ですが「.ogg」は互換性のために残されています。
Matroska(マトリョーシカ)
Oggの後継フォーマットで、Oggよりも高品質で、さらに格納できる符号化形式を拡張したライセンスフリーのコンテナフォーマットです。
ロシアの入れ子式人形マトリョーシカにちなんで名付けられた形式で、その名のとおり、多種多様の動画、音声ファイル、さらに複数の字幕を格納することができます。
AVIにはないチャプター機能や字幕の切り替え、英語音声と日本語音声を格納し、再生時に選択できるなど、DVDビデオのような機能を有しています。
また、Matroskaの字幕はUnicodeベースであるため、Matroskaに格納した字幕は世界中で正しく再生できるという特徴があります。(Unicodeについては、文字コードとは を参照してください)
拡張子は、動画ファイルが「.mkv」、音声のみが「.mka」、字幕のみが「.mks」となります。
この他にも、「Real Media」や「Flash Video」などのフォーマット(コンテナ)がありますが、これらが一般的な非可逆圧縮のファイルフォーマットになります。MPEG(1と2)やReal Mediaは特殊ですが、他はいずれも複数のコーデックに対応しています。
動画ファイルの画質は、コーデックによって決まるといっても良く、高圧縮、高画質のコーデックがこれからも開発されて行くことでしょう。
では、解説しきれなかったコーデックについて補足しておきます。
DivX(デイビックス)
DivXの起源は、MS-MPEG4コーデックの開発に由来します。MS-MPEG4は前述のとおり、MPEG-4の策定が長引いたことから、Microsoft社が独自に開発して命名した動画コーデックです。
Microsoft社は、MS-MPEG4のコンテナであるASFがMPEG-4の標準になるだろうと予測しましたが、MPEG-4のコンテナであるMP4は、Apple社のQuickTimeフォーマットをベースに開発されてしまいました。
そのため、MS-MPEG4の次バージョンは、混乱を避けるため「WMV」となったという経緯があります。ただ、MS-MPEG4の性能が良かったため、これがきっかけとなり、その後、DivXやXvidなどの亜流(模倣)コーデックが次々と誕生したのです。
DivXは、高い画像品質を保ちながら高圧縮化を可能にしたコーデックで、多くのプレーヤーや家電製品でDivX形式での動画再生が可能となっています。
したがって、DivX形式のコンテナフォーマット「DivX Media Format(DMF)」も開発されており、DMFに格納された場合は、「.divx」の拡張子となります。(DMFは、AVI2.0をもとに開発)
ただし、DivXで圧縮された符号化形式は、AVIコンテナに格納されることが推奨されており、AVI形式に格納されているのが一般的です。またバージョン7では、Matroska(MKV)を標準コンテナとしています。
Xvid(エックスビッド)
Xvidは、DivXから派生したコーデックで、DivXコーデックが商用製品へと戦略変更したことに反発したグループが開発したフリーの動画コーデックです。XvidはDivXを反対にした名称になります。
Xvidコーデックによる符号化ファイルも、DivX同様にAVIコンテナやMKVコンテナに格納されるのが一般的です。
以上が、代表的な逆圧縮のファイルフォーマットとコーデックです。
では次に、可逆圧縮のコーデックです。前述のとおり、動画の場合ファイルサイズが膨大になるので、可逆圧縮は一般的ではありません。
家庭用のデジタルビデオカメラなどは非可逆圧縮で保存されており、可逆圧縮は主に業務用(テレビやアニメなど)動画制作に使われています。
したがって、可逆圧縮のコーデックはいくつかの種類がありますが、本項では代表的な一つのコーデックのみ解説したいと思います。
Huffyuv(ハーフワイユーブイ)
Huffyuvは、AVIコンテナに格納される可逆圧縮の動画コーデックです。huffyuvで圧縮したAVIファイルは、映像を劣化なしで保存することができます。
ただし、圧縮率は元の非圧縮データの3分の2程度で、具体的には、720×480の解像度で、3分の動画が約1.7GBものファイルサイズになります。
つまり、実用としては、マスターファイルとしての保存用途や、さらに非可逆コーデックで圧縮するまでの中間処理的な用途に使われるコーデックになります。
さて、以上が代表的な動画ファイルフォーマットとコーデックになります。動画ファイルは、ほとんどすべてが非可逆圧縮形式であり、その画質はコーデックによって決まります。
今後も、より高画質で高圧縮のコーデックが開発され、動画配信がより身近なものになってくるでしょう。しかし、コーデックには統一した規格がないために、乱立しているのが現状です。
動画が再生できない場合など、コーデックを調べるには色々なアプリケーションソフトがありますが、「真空波動研」というフリーソフトが有名です。
真空波動研ダウンロード(黒羽研究所)
ソフトの使い方は割愛しますが、トップページの「つくりもの」「生産物」からダウンロードして、そのプレーヤーソフトで動画を再生してみでください。アプリケーション上の任意の位置にカーソルを置くと、コーデック等のファイルの内容が表示されます。
よく使われている一般的なコーデックやプレーヤーソフトの入手については、下記の 参考サイト を参照してみてください。
ただし、むやみやたらにコーデックをインストールすると、コーデック同士が干渉してパソコンの動作に支障を来す場合があるので、必要なコーデック以外はインストールしないのが賢明です。
また、主なコーデックをまとめた「コーデックパック」というものもありますが、プレーヤーの関連付けを変更されたり不具合が起こることもあるので、特に初心者の場合は、必要ないコーデックはインストールしないように注意しましょう。
更新日:2009年11月2日(更新内容は本ページ下部に記述)
前ページ、次ページへのリンクバーは本ページ下部にあります。
ページトップへ戻る
関連情報&オススメ
『ニューズウィーク』は『タイム』とともに世界的に購読されているアメリカのニュース雑誌です。日本に関する記事は少ないですが、世界的な視点で編集されており、国際社会の様々な価値観を知ることができます。
様々な意見を取り上げ、いい意味で画一的でないので、私は、毎週読んでいくうちに「自分自身の考え」を持てるようになりました。国際情勢や経済、地域紛争などについて、自分がその歴史や背景、登場人物を認識していて意見できるくらいの知識を得ることができるようになったと思います。
読み始めた当初は、ほとんどのことが理解できないくらい難しい内容に感じました。たとえば、円高や金利などの経済の仕組みや国際社会の地政学的な背景などの基礎知識がなかったからです。しかし、「毎週全部の記事を読む」「わからないことはネットで調べる」と自分に決め、一年間読み続けたらなんとか理解できるようになり、記事を読むのが本当に楽しくなりました。
また、日本のメディアにはない視点に立って書かれている記事が多いので、感心させられることや考えさせられることも多々あります。例えば、日本では「クジラ食文化」は断固として守らなければならないという視点で記事が書かれますが、「クジラを食することを文化としてる日本人はどれだけいるのか」という視点から記事が掘り下げられていきます。
そこには、画一的な報道からでは見えない「気づき」があります。多角的な視点を持つことで、ニュースの裏に透けて見える矛盾や戦略を感じとる皮膚感覚が身についてきたように思います。
さらに、各国の元閣僚や大物財界人、ビッグスターの寄稿も多く、デービット・ベッカムが札幌でPKを決めたときの気持ちをつづったコラム(その前回のワールドカップで退場になった因縁のアルゼンチン戦)で、「もう、大丈夫だと思った」という言葉は今でも印象に残っています。
先進国の世界的不況や中東の動乱、そして東日本大震災における援助や報道など、世界の中で、国際社会と複雑に絡み合う時代に生きていることを教えてくれます。ひとつ上の目線と価値観を与えてくれた雑誌です。
決して安くはありませんが、1年購読は18,520円(一冊定価460円)です。
ニューズウィーク日本版 Newsweek Japan 
ページトップへ戻る
更新履歴
2009年11月2日
ページを公開。
2009年11月2日
ページをXHTML1.0とCSS2.1で、Web標準化。レイアウト変更。
2014年5月24日
内容修正。
ページトップへ戻る
参考文献・ウェブサイト
当ページの作成にあたり、以下の文献およびウェブサイトを参考にさせていただきました。
動画のファイル形式やコーデックなどの解説 - DVDコピーの東京ダビングセンター
http://www.tokyo-dc.jp/movie-service/
動画とは? | GOM PLAYER【ゴムプレイヤー】
http://www.gomplayer.jp/knowledge/knowledge.html
ファイル形式 | GOM PLAYER【ゴムプレイヤー】
http://www.gomplayer.jp/knowledge/format.html
お気楽CODEC講座−初心者のコーデック基礎
http://www.hanamoku.com/codec/
コーデックインストール
http://www.exsite.co.jp/soft/codec.html
デジカメ動画
http://www.pit-japan.com/ws30/digi_movie.html
ページトップへ戻る
次ページ:「LANケーブルの種類とイーサネット規格 ～ カテゴリとは ～」へ進む
前ページ:「音声ファイル ～ 主なファイル形式と特徴 ～」へ戻る
基礎知識:「メニューページ」へ戻る
ホームへ戻る
動画ファイルの主な形式と特徴｜コーデック・AVI・MPEG
