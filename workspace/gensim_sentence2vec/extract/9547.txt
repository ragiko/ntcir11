
ソーシャルサービスでは、ユーザ間のつながりやユーザ同士の類似性がとても重要です。
つながりの近いユーザや自分と似ているユーザを「もしかして友だち?」とサジェストすることでユーザ間のつながりを伸展させることができます。
そこで、ユーザの「つながり」具合が似ているユーザを「友だちかもしれないユーザ」としてサジェストを行うことを考えました。
しかし「つながり」のデータというのはユーザ数のベキ乗であるため、容量が大きくなりやすい性質があります。
即ち、「つながり」類似度の算出には時間がかかる、ということです。
この「つながり」類似度算出を高速に行うため、ウェーブレット行列をインデックスとして使ったシステムを提案致します。
補足
本レポートで使用するプログラムコードはすべてscalaで記述しました。
requirement >= scala2.10
目次
1. ウェーブレット行列とは
ウェーブレット行列は計算量が定数時間のrank, selectなどをサポートする簡潔データ構造です。
「ウェーブレット行列とは」を説明することはこのレポートの趣旨ではないので、詳細は下記のスライドをご参照ください。
ウェーブレット木の世界
2. システム概要
本レポートで提案するシステムは、
ユーザ間のリレーションデータからwavelet行列インデックスを作成
wavelet行列インデックスから類似度検索
を主軸とします。
2-1. システム概要図
下記に検索システムの概要図を掲載します。
リレーションデータストア:ノード間のリレーション(フォロー/フォロワーなど)を保持しているデータストアです。
これらのデータはRDBに保持されていることもあればKVSに保持されていることもあるでしょう。APIから取得するケースも考えられます。
wavelet行列データストア:wavelet行列を格納するためのデータストアです。
2-2. データモデル
下記にリレーションデータのデータモデル例とwavelet行列のデータモデルを表示します。
wavelet行列で高速な「もしかして友だち?」検索 | 株式会社サイバーエージェント
