
ネットワークトポロジのマッピング
ネットワークの物理的な構造を示すマップをまだ作成していない場合は、それを作成します。このマップには、ルーターやクライアントの場所と、ネットワークサービスを提供するサーバーの場所を明示してください。ネットワークトポロジを示すこのマップは、どのサーバーから DHCP サービスを提供するかや、どのような構成情報をクライアントに提供するかを決める上で役立ちます。
ネットワークの計画については、第 2 章TCP/IP ネットワークの計画 (手順)を参照してください。
DHCP 構成プロセスは、サーバーのシステムファイルとネットワークファイルから、いくつかのネットワーク情報を検索できます。これらのファイルについては、
「システムファイルとネットマスクテーブルの更新」を参照してください。ただし、クライアントにほかのサービス情報を提供したい場合には、サーバーのマクロに入力する必要があります。ネットワークトポロジを点検する際には、クライアントが認識する必要があるサーバーの IP アドレスを控えておいてください。たとえば、次のサーバーがネットワークでサービスを提供している場合があります。しかし、DHCP 構成では、これらのサーバーは検出されません。
タイムサーバー
ログサーバー
プリントサーバー
インストールサーバー
ブートサーバー
Web プロキシサーバー
スワップサーバー
X Window フォントサーバー
Trivial File Transfer Protocol (TFTP) サーバー
避けなければならないネットワークトポロジ
IP ネットワーク環境によっては、いくつかのローカルエリアネットワーク (LAN) が同じネットワークハードウェアメディアを共有していることがあります。このようなネットワークでは、複数のネットワークハードウェアインタフェースが使用されていたり、複数の論理インタフェースが使用されていたりします。このような共有メディアネットワークでは、DHCP はうまく動作しません。同じ物理ネットワークで複数の LAN が動作していると、DHCP クライアントの要求はすべてのネットワークハードウェアインタフェースに送信されます。そのため、クライアントは、すべての IP ネットワークに同時に接続されているものとみなされます。
DHCP は、適切な IP アドレスをクライアントに割り当てられるように、クライアントのネットワークアドレスを特定できる必要があります。同じハードウェアメディアに複数のネットワークが存在していると、サーバーは、クライアントのネットワークを特定できないため、IP アドレスを割り当てることができません。
DHCP は、複数のネットワークの 1 つでしか実行できません。1 つのネットワークがユーザーの DHCP ニーズと合わない場合は、すべてのネットワークを再構成する必要があります。次のヒントを参考にしてください。
サブネットに対して可変長サブネットマスク (VLSM) を使用して、現在の IP アドレス空間をより有効に活用します。これにより、同じ物理ネットワーク上で複数のネットワークを使用する必要がなくなるかもしれません。可変長サブネットの実装については、netmasks(4) のマニュアルページを参照してください。Classless Inter-Domain Routing (CIDR) と VLSM の詳細は、http://www.ietf.org/rfc/rfc1519.txt を参照してください。
スイッチ上のポートを構成し、デバイスを別の物理 LAN に割り当てます。これにより、Oracle Solaris DHCP の要件である、1 つの LAN から 1 つの IP ネットワークへのマッピングが維持されます。ポートの構成については、スイッチに関する技術資料を参照してください。
DHCP サーバー数の決定
DHCP クライアントをサポートするために必要なサーバーの数は、データストアに何を使用するかによって異なります。次の表は、1 つの DHCP サーバーで DHCP と BOOTP クライアントをいくつまでサポートできるかをデータストア別に示したものです。
表 13&ndash;1  DHCP サーバーによってサポートされると見込まれる最大のクライアント数
データストア 
サポートされる最大のクライアント数 

