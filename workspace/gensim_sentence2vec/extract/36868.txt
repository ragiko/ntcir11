コミットされていない変更をマージする¶
複数のブランチを持っており、間違えて別のブランチを変更し始めた場合、訂正をとるステップは次のとおりです。
ブランチ bar で作業したかったのに、ブランチ foo で作業を始めてしまったという場合を前提とします:
bar ブランチに移動する
bzr merge --uncommitted foo を実行する
やってくる変更をチェックする (bzr diff)
foo ブランチに変更する
bzr revert を実行する
リベースする¶
通常のマージの別のオプションは リベース(rebase) です。
すなわち、現在のブランチが本来とは異なる地点をベースにするようにします。
リベースは rebase プラグインによって提供される rebase コマンドによってサポートされます。
rebase コマンドは現在の作業ディレクトリ内のリベースされるブランチ上で別のブランチの位置をとります。
ブランチが指定されないと親のブランチが使われ、通常これは望まれる結果です。
最初のステップは現在のブランチのものであるが親のブランチではないリビジョンを特定することです。
現在のブランチはターゲットブランチと同じリビジョンに設定され、それぞれのリビジョンはブランチのトップで再現されます。
プロセスの終了時に現在のブランチがターゲットの最終リビジョンからブランチされたようになります。
再現されるそれぞれのリビジョンがツリーの中で衝突を起こすことがあります。
これが起きたらコマンドは停止してそれらを修正しなければなりません。
merge するためにコミットを解消し、それらが解消されたものとしてマークするために
bzr resolve を実行します。
すべての衝突を解消したら、リベースオペレーションを続けるために bzr rebase-continue
を実行します。
衝突に遭遇せず続けないことを決めたら、 bzr rebase-abort を実行できます。
リプレイされるコミットの一覧を表示するために rebase-todo を利用することもできます。
注: マージトラッキング機能が貧弱なVCSツールから来たユーザーの中にはリベースを好む人がいます。
古いツールでの作業方法に似ている、もしくは”完璧にきれいな” 履歴が重要だからです。
Bazaarでリベースする前に、通常のマージがベターな選択肢ではないのか考えてください。
とりわけ、始める前にプライベートなブランチをリベースするのは大丈夫ですが、
他の誰かとブランチを共有した後のリベースは 強く非推奨 です。
疑似マージ &mdash; Bazaar 2.3.5dev documentation
