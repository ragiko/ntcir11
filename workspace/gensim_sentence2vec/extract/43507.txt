[VerUp]「現在地からの距離順」ソート
仕組みとしては現在地からの距離を算出してソートするだけとそれほど難しくはないです。
ただ、タイミングや見せ方にちょっと苦労しました。
・リアルタイム(地図移動中)での算出はちょっと難しい。たぶんできないことは無いけど。
(移動終了後の再演算は検討中。要望が多ければ付けます)
・プルダウンに、他のソートと同様に並べると、クリックで更新ができない。
・他のカテゴリに移動した際に、マーキング後に現在地が確定する
ということから、現在のボタン式になりました。ただ、プルダウンの表示があると、現在のソート状態が分かりづらいため、フォームの前に印を置くことで明示するようにしています。
ちなみに、距離の算出は、こちら を参考にしました。精度の高い計算式は 国土地理院の計算式 に載っていますが、ループ処理の負荷と私の数学能力を考えると断念しました。
Permalink | トラックバック(0) 
「現在地からの距離順」ソート - 汎用 Google Maps API スクリプト “ KsGMap ” 開発日記
