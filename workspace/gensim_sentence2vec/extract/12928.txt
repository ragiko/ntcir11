
第7章 オンラインシステムの構成とシステムの信頼性
1 オンラインシステムの構成
オンラインシステムとは、トランザクション処理や対話型処理、リアルタイム制御処理な
どのために、コンピュータと端末装置を通信回線で結んだシステムのことである。オンライ
ンシステムの構成要素としては、CPUや主記憶装置、補助記憶装置、通信制御装置(CC
U)などがある。これらの構成要素の組合せにより、処理能力の向上や信頼性の向上をはか
っている。特に信頼性の面で、フェールセーフやフェールソフトといった方式が取り入れら
れている。フェールセーフとは、コンピュータシステムに障害が発生しても、処理機能の低
下を最小限に抑え、全体としてシステムの安全性が保たれるような方式であり、フェールソ
フトとは、障害が発生して処理機能が低下しても基本的機能が継続して働くようにする方式
である。このように、コンピュータシステムに障害が発生しても、システムの冗長性により
処理を継続する方式をフォールトトレラントとよぶ。
1.1 シンプレックスシステム
必要最低限の装置で構成されたシステムであり、小規模なオンラインシステムに使用され
る。システム構成が直列であるため、いずれか1か箇所でも故障が発生するとシステム全体
が停止し、システムダウンとなってしまう。信頼性は低いがコストを低く抑えることができ
るため、規模の小さい生産管理システムなどに使用されることが多い。
図表7.1 シンプレックスシステム
1.2 デュプレックスシステム
2系列の主記憶装置とCPUで構成されたシステムであり、それぞれの系列を、主系、待
機系とよぶ。通常、主系でオンライン処理を行ない、待機系でバッチ処理やソフトウェアの
開発業務などを行なう。主系がシステムダウンした場合や保守点検の場合、待機系に切り替
えてオンライン処理が続行できるため、フェールセーフシステムといえる。
図表7.2 デュプレックスシステム
また、このシステム構成は、待機系の運用形態により、コールドスタンバイとホットスタ
ンバイに分類することができる。
(1) コールドスタンバイ
オンライン処理とは別の処理を待機系で行なっている状態のことである。
コールドスタンバイでは、主系で障害が発生した場合、待機系の処理を中断させて、オン
ラインシステムの再立上げを行なわなければならない。このため、主系のオンライン処理を
待機系に切り替えて代行処理させるのに時間がかかる。
(2) ホットスタンバイ
オンライン処理を動作させるオペレーティングシステムのもとで待機系が稼働している状
態のことである。
ホットスタンバイでは、主系で障害が発生した場合、待機系でオンライン処理をすぐに引
き継ぐことができる。このため、主系から待機系に切り替えて処理を代行させるのに必要な
時間は短くてすむ。
1.3 デュアルシステム
すべての装置やファイルを2系列もち、それぞれで同一の処理を実行し、その処理結果を
照合するシステムである。一方の系列で障害が発生した場合は、その系列を切り離して処理
を続行するため、フェールセーフシステムともいえる。他のシステム構成と比べ信頼性が非
常に高いので、一時的にもシステムダウンが許されないシステムに使われる。しかし、すべ
ての装置装置を2系列用意しなければならないためコストは高くなる。
図表7.3  デュアルシステム
1.4 マルチプロセッサシステム
密結多重プロセッサともよび、複数のCPUが、主記憶装置やファイルを共有するシステ
ムである。ひとつのオペレーティングシステムの下で複数のCPUがいくつかの仕事を分担
して処理するため、CPUの負荷は分散される。そのため、応答時間は短くなり、処理能力
は向上する。ひとつのCPUに故障が発生した場合、処理能力は低下してしまうが、故障し
たCPUを切り離すことにより処理を続行することができるため、フェールソフトシステム
といえる。
図表7・4 マルチプロセッサシステム
1.5 タンデムシステム
疎結合多重プロセッサのひとつであり、複数のCPU直列につないで、それぞれのCPU
が専門の機能を受け持つシステムである。データ通信の制御をフロントエンドプロセッサが
行い、データベースなどの検索や更新をバックエンドプロセッサが行うので、メインのCP
Uではデータ処理のみを行うことになる。このように各CPUに機能を分散させているため、
処理能力の向上を図ることができる。しかし、直列に接続しているため、ひとつの装置に障
害が発生するとシステムダウンしてしまう。
図表7・5 タンデムシステム
1.6 ロードシェアシステム
疎結合多重プロセッサのひとつであり、負荷分散システムともよぶ。交換装置により、処
理データを複数のコンピュータに分配することで、各コンピュータシステムの負荷を軽減し、
システム全体の処理能力を向上させることができるシステムである。ピーク時のCPUにか
かる負荷分散を目的としており、一方のCPUに障害が発生しても、他のCPUで処理が継
続できるため、フェールソフトシステムといえる。
図表7・6 ロードシェアシステム
2 コンピュータシステムの信頼性
2.1 信頼性の評価尺度
コンピュータシステムの信頼性や安全性などを表す言葉にRASISがある。
RASISとは、信頼性(Reliability)、可用性(Availabili−
ty)、保守性(Serviceability)、保全性(Integrity)、機密
性(Security)の五つの頭文字をとったものであるが、コンピュータシステムの信
頼性の評価は、このうち信頼性、可溶性、保守性の三つによりおこなうことができる。
(1) 信頼性
コンピュータシステムが、故障せずに目的の機能を実行することができる度合である。
この評価尺度としては、故障と故障の間の時間の平均である平均故障間隔(MTBF)が用
いられる。MTBFが長いほど、信頼性は高くなる。
平均故障間隔は、つぎの式より求めることができる。
累積稼働時間
平均故障間隔(MTBF)=
故障件数
(2) 保守性
コンピュータシステムの故障に対する修理(保守)のしやすさを示す度合である。この尺
度には、修理に要した時間の平均である平均修理時間(MTTR)が用いられる。MTTR
が短いほど、保守性は高くなる。
平均修理時間は、つぎの式により求めることができる。
累積故障修理時間
平均修理時間(MTTR)=
故障件数
(3) 可溶性
コンピュータシステムでジョブを処理するとき、システムが使用可能である確率である。
この評価尺度には、稼働率が用いられる。稼働率が高いほど、可用性は高くなる。
稼働率は、MTBFとMTTRを使って、つぎの式により求めることができる。
MTBF
稼働率=
MTBF+MTTR
MTBFとMTTRを図で示したのが図表7・7である。
図表7・7 MTBFとMTTR
稼働時間1+稼働時間2+稼働時間3
MTBF=
3
修理時間1+修理時間2+修理時間3
MTTR=
3
たとえば、それぞれの時間が図表7・8の場合、MTBFゃMTTR、稼働率はつぎのよ
うになる。
図表7・8 稼働時間と修理時間
192+180+210
MTBF==194
3
7+6+5
MTTR==6
3
194
稼働率==0.97
194+6
2.2コンピュータシステムの稼働率
コンピュータシステム全体の稼働率は、システムを構成するそれぞれの装置の稼働率によ
り求めることができる。また、その稼働率は、装置の接続の方法により異なってくる。
(1)直列システムの稼働率
シンプレックスシステムやタンデムシステムなどのように、各装置が直列に接続されてい
システム構成を直列システムとよぶ。このような構成のシステムは、ひとつの装置に障害が
発生するとシステムダウンしてしまうことになる。
直列システムの稼働率は図表7・9のようにもとめる。
図表7・9 直列システムの稼働率
たとえば、装置1の稼働率が0.98、装置2の稼働率が0.92の場合、システム全体
の稼働率はつぎのようになる。
システム全体の稼働率=0.98×0.92=0.9016
また、n個の装置が直列に接続されている場合は、図表7・10のように求める。
図表7・10 n個接続された直列システムの稼働率
(2) 並列システム
デュプレックスシステムやデュアルシステムのように、ある装置に障害が発生しても残り
の装置が動作可能であれば、処理が続行できるシステム構成を並列システムとよぶ。
並列システムの稼働率は、接続されている装置の数により計算の仕方が異なる。
① 二つの装置が接続されている並列システムの稼働率
図表7・11に示す並列システムの稼働率はつぎのように求めることができる。
図表7・11 並列システム(2系)
まずそれぞれの故障を求める。故障は次の式で求めることができる。
故障率=1 − 稼働率
図表7・11に示すそれぞれの装置の稼働率は、つぎのようになる。
装置1の稼働率=1−A
装置2の故障率=1−B
つぎに、二つの装置が同時に故障する確率を求める。これは、各装置の故障率の積か
ら求めることができる。
二つの装置が同時に故障する確率=(1−A)×(1−B)
システム全体の稼働率は、二つの装置が同時に故障する確率(システムが動作しない
確率)を、1から引くことにより求めることができる。したがって、図表7・11に示
す並列システムの稼働率の計算式はつぎのようになる。
システム全体の稼働率=1−(1−A)×(1−B)
たとえば、装置1の稼働率が0.98、装置2の稼働率が0.92の場合、システム
全体の稼働率はつぎのようになる。
システム全体の稼働率=1−(1−0.98)×(1−0.92)=0.9984
② 三つ以上の装置が接続されている並列システムK稼働率
たとえば、三つの装置が接続されている並列システムの場合、三つの装置の場合、の
うち二つ以上の装置が稼働していれば、システム全体が稼働しているとみなす2−ou
t−of−3システムと、三つのうちひとつ以上の装置が稼働していれば、全体が稼働
しているとみなす1−out−of−3システムがある。
図表7・12に示す並列システムの稼働率は、おのおのつぎのように求めることがで
できる。なお、図表7・13にN−out−of−3システムの稼働状況を示す。
図表7・12 並列システム(3系)
図表7・13 N−out−of−3システムの稼働状況
a 2−out−of−3システムの稼働率
2−out−of−3システムの稼働率は、三つの装置がすべて稼働している確立
と、三つの装置のうちひとつだけが故障している確立の和により求めることができる。
2−out−of−3システムの稼働率の計算式は次のとおりである。
2−out−of−3システム
の稼働率=AXBXC      3台とも稼働・・・・・①
+(1−A)XBXC  装置1だけが故障・・・②
+AX(1−B)XC    装置2だけが故障・・・③
+AXBX(1−C)  装置3だけが故障・・・④
この計算式を簡単にするとつぎのようになる。
2−out−of−3システムの稼働率=AXB+AXC+BXC−2XAXBXC
b 1−out−of−3システムの稼働率
1−out−of−3システムの稼働率は、2−out−of−3システムの稼働率
と、三つの装置のうちひとつの装置が稼働している確立の和により求めることができる。
1−out−of−3システムの稼働率の計算式はつぎのとおりである。
1−out−of−3システムの稼働率=A×B+A×C+B×C−2×A×B×C
+A×(1−B)×(1−C) 装置1だけが稼働・・・⑤
+(1−A)×B×(1−C) 装置2だけが稼働・・・⑥
+(1−A)×(1−B)×C 装置3だけが稼働・・・④
この計算式を簡単にするとつぎのようになる。
1−out−of−3システムの稼働率=
A+B+C−AXB−AXC−BXC+AXBXC
1−out−of−3システムの稼働率は、このほかに三つの装置がすべて停止して
いる確率を、1から引くことにより簡単に求めることができる。その計算式をつぎに示
す。
1−out−of−3システムの稼働率=1−(1−A)X(1−B)X(1−C)
(3) 直列と並列が混在するシステムの稼働率
直列と並列が混在するシステムの稼働率は、システムを直列と並列に分けて求める。
たとえば、図表7・14のような接続の場合はつぎの手順で計算を行う。
図表7・14 直列と並列が混在するシステム
装置2と装置3が並列に接続されているので、まず並列システムとして、①の部分の稼働
率から計算する。
①の部分の稼働率=1−(1−B)X(1−C)
装置1と①は直列に接続されていると見なし、直列システムとして計算する。
システム全体の稼働率=AX｛1−(1−B)X(1−C)｝
また、図表7・15のような接続の場合は、つぎの手順により求めることができる。
図表7・15 直列と並列が混在するシステム
①の部分は、、装置1と装置2が直列に接続されているので、直列システムとして計算す
る。
①の部分の稼働率=AXB   (この稼働率をχとする)
②の部分は、同じく装置3と装置4が直列に接続されているので、直列システムとして計
算する。
②の部分の稼働率=CXD  (この稼働率をYとする)
①と②は並列に接続されているので、この二つを並列システムとして計算する。
システム全体の稼働率=1−(1−χ)X(1−Y)
加藤成明soft7
