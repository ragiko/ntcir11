4.2. Lesson: ラベルツール¶
オブジェクトに関する情報を表示するためにラベルを地図に追加することができます。任意のベクタレイヤはそれに関連するラベルを持つことができます。ラベルの内容はレイヤの属性データに依存します。
4.2.1.  Follow Along: ラベルの使用¶
ラベルツールにアクセスする前に、それがアクティブになっていることを確認する必要があります。
メニュー項目 ビュー ‣ ツールバー に移動します。
ラベル アイテムの横にチェックマークがあることを確認して下さい。もしなければ ラベル アイテムをクリックするとアクティブになります。
レイヤリスト で places レイヤをクリックしてハイライト表示させます。
このツールバーのボタンをクリックします: 
レイヤラベリング設定 ダイアログが表示されます。
このレイヤのラベル の隣のボックスをチェックします。
ラベルに使用する属性フィールドを選択します。前のレッスンであなたはこの目的には NAME フィールドが最も適していると決めました。
リストから name を選択します:
OK をクリックします。
今、地図にはこのようなラベルが表示されるはずです:
4.2.2.  Follow Along: ラベルオプションの変更¶
以前のレッスンであなたが選択したスタイルによってはラベルが適切にフォーマットされず、重複していたりポイントマーカーから遠く離れていたりしているかもしれません。
前のようにツールバーのボタンを押して ラベルツール を再度開きます。
左側のオプションリストで テキスト が選択されていることを確認し、ここに示されているものと同じになるようにテキスト書式設定を更新します:
フォントの問題が解決されました! では、ポイントにラベルが重なる問題を見てみましょう。しかし、その前に バッファ オプションを見てみます。
ラベルツール ダイアログを開きます。
左側のオプションリストから バッファ を選択します。
テキスト縁取りの描画 の隣のチェックボックスをチェックし、ここに示されているものと同じになるようにテキスト書式設定を更新します:
適用 をクリックします。
着色されたバッファまたは境界線が場所ラベルに追加されて地図上で見分けやすくなりました:
ポイントマーカーに相対的なラベルの配置に取りかかります。
ラベルツール ダイアログで 配置 タブに移ります。
距離 の値を 2mm に変更して、ポイント周辺 が選択されていることを確認します:
適用 をクリックします。
ラベルはもはやポイントマーカーに重なっていません。
4.2.3.  Follow Along: レイヤシンボロジの代わりにラベルを使用する¶
多くの場合、ポイントの位置はあまり的確である必要はありません。たとえば、 places レイヤのポイントのほとんどは町全体や郊外を指し示し、そのような地物に関連するポイントは大縮尺ではそれほど的確ではありません。実際には、詳細すぎるポイントを与えるとしばしば地図を読む人に混乱を招くことがあります。
例を挙げると: 例えば、世界地図上では欧州連合のために与えられた点はポーランドのどこかにあります。 European Union のラベルの付いたポイントがポーランドにあるので、地図を読んでいる人には欧州連合の首都はポーランドにあるように見える場合があります。
だから、この種の誤解を防ぐためにポイントシンボルを非アクティブ化してラベルに完全に置き換えるのがよい場合があります。
QGISではラベルが参照するポイントの直上にラベルの位置を変更することによってこれを行うことができます。
places レイヤの レイヤラベリング設定 ダイアログを開きます。
オプションリストの中から 配置 オプションを選択します。
ポイントからのオフセット ボタンをクリックします。
ポイントマーカーとの相対位置でラベルの位置を設定することのできる 象限 オプションが現れます。この場合、私たちはラベルは点を中心に配置したいので中央の象限を選択します:
ポイントシンボルを隠すためにいつものようにレイヤスタイルを編集して、 楕円マーカー の幅と高さのサイズを 0 に設定します:
OK をクリックすると、この結果が表示されます:
マップ上でズームアウトした場合にはラベルの一部がより小さな縮尺では重なりを避けるために消えていることがわかりました。これは多くのポイントを持つデータセットを扱う場合に都合がよい場合がありますが、有用な情報を失ってしまう場合もあります。このレッスンの後ほどのエクササイズでは、このような場合で処理するための別の手段を取り上げます。
4.2.5.  Follow Along: ラインのラベリング¶
今、あなたはラベリングがどのように動作するか知っていますが、まだ別の問題があります。ポイントとポリゴンにラベルを付けるのは簡単ですが、ラインはどうでしょうか? ポイントと同じようにラベルを付ける場合、このようになります:
では、 roads レイヤのラベルの体裁を理解しやすいように再調整します。
気が散らないように Places レイヤを非表示にします。
streets レイヤのラベルを前のように有効化します。
より多くのラベルが表示されるようにフォント サイズ を 10 に設定します。
Swellendam の市街地にズームインします。
ラベルツール ダイアログの 配置 オプションで次の設定をします:
おそらく、テキストスタイルが既定値を使用していてその結果としてラベルは非常に読みづらいことがわかります。ラベルテキストの書式に暗い灰または黒の 色 と淡黄色の バッファ を設定します。
地図は縮尺に応じてこのように見えます:
いくつかの道路名が複数回表示されますがいつも必要だとは限りません。これを防ぐには:
レイヤラベリング設定 ダイアログで レンダリング オプションを選択し、 重複ラベルを除去するために接続するラインを結合する を選択します:
OK をクリックします
もう1つの有用な機能はラベルを付けるには短すぎる地物にラベルが描画されないようにするものです。
同じ レンダリング パネルで これより地物が小さい場合ラベリングを行わない の値を 5mm に設定します。 適用 ボタンをクリックした時に表示される結果に注目して下さい。
同様にして異なる 配置 設定を試してみて下さい。前に見てきたように 水平 オプションはこの場合にはお勧めできません。その代わりに 曲がって オプションを試してみましょう。
レイヤラベリング設定 ダイアログの 配置 パネルで 曲がって オプションを選択します。
この結果です:
ご覧のように、それらのいくつかは曲がりくねった街路に沿わせると判読可能な状態ではなくなってしまうせいで以前表示されていたラベルの多くが非表示になります。より有用であるようにと考えるか、またはより格好がよくなるようにと考えるかによって、これらのオプションのどれを使うかを決めることができます。
4.2. Lesson: ラベルツール
