
<?xml version='1.0' encoding='UTF-8'?>
<tt xmlns='http://www.w3.org/ns/ttml' xml:lang='en' >
<body>
<div>
<p begin="00:00:01.878" end="00:00:05.334" >Good day everyone, my name is John Smith</p>
<p begin="00:00:08.608" end="00:00:15.296" >This video teaches you how to<br/>build a sand castle on any beach</p>
</div>
</body>
</tt>
TTML ファイルには、XML バージョンとエンコードの種類、ルート要素 ("<tt>") の名前空間宣言と言語が含まれます。その後に、"<body>" と "<div>" 要素が続きます。"<div>" 要素の中にタイミング キューを指定します。実際の時間は、開始段落タグ (<p>) の属性 (begin、end) として設定され、テキストは終了タグ </p> によって記述されます。空白行と空白は無視されます。複数の行がある場合、各行は <br/> タグで定義されます。
TTML ファイルの MIME タイプは application/ttml+xml です。詳しくは、TTML 仕様のセクション 5.2 を参照してください。
HTML5 のビデオ キャプション メーカーを使う
ビデオ ファイル自体のように、HTML5 ビデオ プレーヤーには適切に構築されたトラック ファイルが必要で、これは手動で実行する場合には難しいことがあります。HTML5 のビデオ キャプション メーカーのテスト ドライブ デモはシンプルですが、WebVTT または TTML 形式のファイルのどちらを作るにも効果的なツールです。
このツールにより、mp4 形式のビデオ ファイルの表示、キューの設定とテキスト キャプションの追加、作成したファイルの保存ができます。作成済みのファイルを読み込んで編集することもできます。 HTML5 のビデオ キャプション メーカーは Internet Explorer10 または Windows Internet Explorer9 のどちらかで実行されます。ただし、現時点では track 要素は Internet Explorer10 でしかサポートされません。
開始するには、ブラウザーで HTML5 のビデオ キャプション メーカーを実行します。ツールの感覚をつかむには、[Load Sample] (サンプルを読み込む) をクリックして、サンプル ビデオとタイミングが設定されたテキスト ファイルを読み込みます。ビデオ プレーヤーでは組み込みのコントロールが有効になっているので、プレーヤーの [再生] をクリックするか、プレーヤーの下の [再生] ボタンを使用できます。
次に、Internet Explorer10 での HTML5 のビデオ キャプション メーカーのスクリーン ショットを示します。
ビデオ ファイルを読み込む
ビデオ ファイルとテキスト トラック ファイルの最も簡単な処理方法は、ファイルをローカルに保存することです。ビデオ ファイルをキャプション メーカーに読み込むには、次の手順を実行します。
[Enter URL of video file] (ビデオ ファイルの URL を入力してください) フィールドに、ローカル .mp4 ファイルのパスを入力するか貼り付けます。 
[読み込む] をクリックします。ビデオのサイズにより異なりますが、数秒間で、ビデオ プレーヤーにファイルが表示されます。
[Load Existing Caption File [optional]] (既存のキャプション ファイルを読み込む [オプション]) のリンクをクリックします。これにより、[Enter URL of caption file] (キャプション ファイルの URL を入力してください) フィールドが展開され、サンプルのタイミングが設定されたテキスト ファイルを読み込むか、独自のパスを入力できます。Internet Explorer 10 では、ファイルを参照できます。
タイミングが設定されたテキスト ファイルをビデオから構築する
キャプション ファイルを作るには、ビデオを再生して一時停止し、表示しているセグメントに対してキャプションを入力します。そこで保存して、次のセグメントに移動できます。HTML5 のビデオ キャプション メーカーは開始時間と終了時間を自動的に記録します。
標準では、タイミングが設定されたテキストは、開始時間と終了時間が連続する必要があるとは指定されません。時間にギャップがある場合や、時間が重なっていても、ビデオ プレーヤーはファイルを読み取ります。しかし、わかりやすくするために、HTML5 のビデオ キャプション メーカーでは、開始時間と終了時間が連続する、タイミングが設定されたテキスト ファイルを作ります。キャプションのないセクションにする場合、キャプションは空白のままにしますが、セグメントは保存します。 
開始するには [再生] をクリックしてビデオを開始します。ビデオを再生すると、現在のイン点とアウト点で更新されるというメッセージが表示されます。たとえば、開始したときに、ビデオ プレーヤーの下に "Pause to enter caption for segment from 00:00.000 to 00:05.340 (00:00.000 から 00:05.340 までのセグメントにキャプションを入力するために一時停止してください)" というメッセージが表示されます。
ビデオの再生中は、キャプション フィールドは無効になります。[一時停止] をクリックすると、ビデオが停止してフィールドが有効になり、キャプションを入力できます。これは複数行テキスト フィールドであるため、フォーム フィールドと同様に、テキストの切り取りと貼り付け、挿入、削除ができます。"Enter" キーを押して改行を挿入し、複数行のキャプションを作ることができます。HTML5 のビデオ キャプション メーカーは選んだファイル形式用の複数行のキャプションの形式を自動的に設定します。
キャプションを保存するには、[保存] または [保存して続行] をクリックします。[保存] をクリックするとキャプションは保存されますが、ビデオは再開されません。[再生] をクリックして次のセグメントに進む必要があります。 ただし、ビデオの再生を再開していなければ、キャプションを編集してもう一度保存することができます。[保存して続行] をクリックするとキャプションは保存され、ビデオは直ちに再開されます。このオプションにより、最小限のクリックでビデオをすばやく処理できます。
右側のウィンドウのリストで変更するものをクリックして、保存されたキャプションを編集します。すぐにビデオ プレーヤーでセクションが再生され、キャプションを編集できるようになります。キャプション リストに保存したキャプションを変更するには、[保存] をクリックします。[Save & Continue] (保存して続行) をクリックして次のキャプションに進むこともできるので、その地点からキャプションを処理することができます。
HTML5 のビデオ キャプション メーカーによりキャプションは編集できますが、現在、ツールで時間の変更はできません。ただし、ファイルを保存した後、メモ帳などのテキスト エディターで開いて変更することができます。 注HTML5 のビデオ キャプション メーカーが使う時間形式では、時間、分、秒に先頭のゼロ、また、秒の小数部用に小数点の右側に 3 桁があります。テキスト エディターで時間を編集する場合は、同じ時間形式を維持することをお勧めします。秒の小数部は 1,000 分の 1 秒単位で表されますが、Web ページの記述を開始するときに、ビデオ プレーヤーは ontimeupdate イベントを 1 秒間に約 4 回だけ発生させることがわかります。詳しくは、「HTML5 ビデオ イベントの使用」をご覧ください。
タイミング設定されたテキスト ファイルを保存する
ビデオのキャプションを作り終えたら、そのファイルを WebVTT 形式または TTML 形式のファイルとして保存できます。ファイル形式を選ぶには、キャプション フィールドの下の [Choose caption file format] (キャプション ファイル形式を選択する) の下にある適切なラジオ ボタンをクリックします。
次のスクリーン ショットに WebVTT 形式のファイルの選択を示します。WebVTT 形式は読み取りやすい比較的単純な形式です。
この画面は TTML 形式のファイルを示しています。TTML ファイルは XML ベースで、WebVTT 形式より、もう少し多くの情報を含んでいます。Internet Explorer10 では、適切な形式であれば、どちらの形式も理解できます。次に示す、タイミングが設定されたテキスト形式は、アプリで使うことができる video と track タグの例を示すコード スニペットであることがわかります。
キャプションのファイル形式を選んだ後、次の手順を実行します。
[クリップボードにコピー] をクリックします。
表示されたダイアログ ボックスで [アクセスを許可する] をクリックし、Internet Explorer がクリップボードにアクセスできるようにします。
メモ帳などのテキスト エディターを開き、その内容を貼り付けます。
エディターの [名前を付けて保存] オプションを使って保存すると、ファイル名を指定できます。
TTML を選ぶ場合、ファイル拡張子は ".ttml" です。
ファイルが WebVTT の場合、拡張子は ".vtt" です。
メモ帳で、ファイル パス フィールドの下の [エンコード] オプションを [UTF-8] に変更します。
同様に、[保存の種類] を [すべてのファイル (*.*)] に変更して、".txt" 拡張子が追加されるのを防ぐ必要があります。
サーバーの考慮事項
独自のメディア コンテンツをホストする場合、サーバー構成に次の MIME の種類を追加して、タイミングが設定されたテキスト ファイルが正しく処理されるようにします。
処理するトラック ファイル拡張子の設定Mime タイプの設定
キャプション メーカーを使った WebVTT ファイルまたは TTML ファイルの作成 (Windows)
