Summary
IEには、JavaScriptを使ってProxyサーバの構成を自動的に行うという自動構成ファイル機能がある。
自動構成ファイル中でreturn "DIRECT"を使うと、インターネットをアクセスしているにもかかわらず、IEのセキュリティ・ゾーンがイントラネット・ゾーンになってしまう可能性がある。これはIE4以降のすべてで起こる。
これを防ぐには［イントラネット］のセキュリティ設定で［プロキシ サーバーを使用しないサイトをすべて含める］のチェック・ボックスをオフにする。
Internet Explorer(以下IEと略記)には、アクセスする先のサイトに応じてIEのセキュリティ設定などを切り替える、「セキュリティ ゾーン」と呼ばれる機能がある。ゾーンごとに、Cookieの扱いやJavaScript、ActiveXコントロールなどを許可するかどうかを決めることにより、例えばインターネットへアクセスする場合はセキュリティを強固にしておき、イントラネットのサーバへアクセスする場合はActiveXなどの実行を許可して、社内アプリケーションを実行できるようにする、というふうに使い分ける。
IEのゾーンには「インターネット ゾーン」「イントラネット ゾーン」「信頼済みサイト」「制限付きサイト」の全部で4つがある。それぞれのゾーンにおける機能の制約やCookieなどの扱いについては、別項の「IE 6のプライバシ管理機能—7.既存のCookieの削除」や「TIPS—IEのセキュリティ設定を変更してセキュリティ機能を強化する」などが詳しいので参考にしていただきたい。4つのゾーンのうち「信頼済みサイト」と「制限付きサイト」はユーザー自身が自分でサイトを登録するものであり、デフォルトではここに属するサイトはない。残りの2つが実際によく使われるゾーンである。
ユーザーがアクセスするサイトが「インターネット ゾーン」と「イントラネット ゾーン」のどちらに属するのかは、IE自身が判断して、自動的に使い分けることになっている。「イントラネット」とはファイアウォールの内側にある社内ネットワークのゾーンであり、具体的にはWindowsネットワークのUNCでアクセス可能な共有フォルダやファイル(例「\\computername\folder」)、インターネットのドメイン名(FQDN名)ではなく、ピリオド(「.」)を含まないURL(例「http://computername/」)で参照可能なホストなどが含まれる。そしてこれ以外のすべてのサイトが「インターネット ゾーン」に含まれることになる。ただしユーザーが明示的に特定のサイトを「イントラネット ゾーン」に追加することも可能であり、社内に複数のドメインがあるような場合に利用することになる。
ユーザーのIEが、現在どのゾーンで動作しているかは、IEのステータス・バーの右端に表示されているので、簡単に確認することができる。インターネット上のサイトを閲覧している場合は、「インターネット」になっていることを確認しておこう。もしこれが「イントラネット」になっていたりすると、(デフォルトのセキュリティ設定では)いくらかセキュリティ的に望ましくない状態になっている可能性があるからだ。
自動構成ファイルにおける“DIRECT”の意味を理解する:IEの自動Proxy設定とセキュリティ・ゾーン (1/2) - @IT
