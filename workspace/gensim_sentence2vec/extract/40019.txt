
FC−03Z、FCSS for Windows Ver.2.5の改良点
FC−03Zの改良点
空燃比計連動機能でのフィードバック比率を従来の2段階から5段階に細分化(アドバンスモード)できる様になりました。これにより従来より応答スピードの遅い空燃比計でも使用できる様になりました。
マップの学習機能で噴射量マップの学習を止めて、スロットル開度補正マップのみに学習させる事ができる様になりました。
パスNo.をセットすることでパラメータ(データ)の読出し、変更(書込み)に制限を掛ける事ができる様になりました。
FCSS for Windows Ver2.5の改良点
FC−03Zの新機能に対応しました。
従来FDメディアでの供給だったものが、CDメディアになりました。
通信ポートの自動検索機能が付き、COM No.が不明でも通信できる様になりました。
通信エラーが起こってもリトライを行なう様にしたので、ノイズなどでソフトが停止する事が少なくなりました。
パラメータ(データ)の互換性について
以前のFreedom ComputerのパラメータをFC−03Zに転送して使用する場合の注意事項
本体バージョン(INTERNAL Ver.)が8.2xおよび8.3xのパラメータはそのまま使用できます。
本体バージョンが8.0xおよび8.1xの場合で、NA6CE用、NA8C用、NB8C用の場合はそのまま使用できます。
上記以外のFC−03Kの場合はパラメータを転送後に、UP800850を転送してください(転送しなくても動作しますがクランク角センサの測定精度が落ちる場合があります)。
FC−03b以前(−03a、−03を含む)のFreedom Computerのパラメータは互換性がないので使用できません。
空燃比計連動機能におけるアドバンスモードの使用方法
空燃比計を使用した空燃比フィードバックについて十分理解した上で使用する必要があります。下記の「空燃比計の応答スピードと空燃比フィードバック」をご覧になり、理解、納得した上で御使用ください。
「回転数指定値(低回転)」、「低負荷指定値」、「回転数指定値(高回転)」に適当な値を設定します。「回転数指定値(低回転)」は1500〜2000rpm、「低負荷指定値は」350〜550mmHg、「回転数指定値(高回転)」は4000〜6000rpm程度が適当と思います。
「低回転フィードバック比率」、「低負荷フィードバック比率」、「高回転フィードバック比率」を設定します。推奨の空燃比計を使用する場合の初期値は「低回転フィードバック比率」は0.150、「低負荷フィードバック比率」は0.200、「高回転フィードバック比率」は0.400が適当です。この値はフィードバックの状態(ハンチングが出る)で下げる必要がある場合があります、逆にフィードバックがスムーズに働いている場合は上げる事ができます(値が大きければそれだけ目標空燃比に達する時間が短縮されますが、ハンチングを起こしやすくなります)。
「アドバンスモードフラグ」に1をセットします。
推奨以外の空燃比計を使用される場合や、推奨空燃比計でもセンサの取付位置や状態によっては、応答スピードが遅くなりますので上記フィードバック比率を下げて使用する事が必要です。PLXなどボッシュ製センサ使用の空燃比計を使用する場合のおおよその目安としては、「低回転フィードバック比率」が0.050、「低負荷フィードバック比率」が0.080、「高回転フィードバック比率」が0.200、また、通常の空燃比計連動機能の係数の「フィードバック比率」を0.100、「フィードバック比率(アイドル)」を0.030程度で試してみるのが良いと思います。
各指定値とその領域の概念は図の様になっています。
空燃比計の応答スピードと空燃比フィードバック
空燃比フィードバックの様な制御においては、フィードバックによる制御(噴射時間の変更)が行われてから、その効果(空燃比の変化)が測定されるまでの、時間遅れが制御に大きく影響を与えます。
時間遅れが大きい場合は、その分過去の測定値に基づいて制御が行われる為、結果として目標を行き過ぎたり、目標周辺で行ったり来たりを繰り返す(ハンチングと言います)事になります。この場合、制御量(フィードバック比率)を小さくすれば行き過ぎたり、ハンチングを起こす量や時間を減らせます。
例えば車を停止線でピタッと止める事を考えてみてください。ただし、この時見る景色はカメラで撮った映像が、少し遅れて写る画面を見るとします。仮に歩く程度のスピード(1m/s)で進んできて一気に止めるとした時、映像の遅れが1秒あれば、実際に止まった位置は1m行き過ぎます(制動距離は無視します)。1秒後に行き過ぎた事に気付き、急いでバックさせたとしてもまた行き過ぎる(戻り過ぎる)事になります。この時、初めのスピードがもっと遅かったら行き過ぎる距離は短くて済みます。これと基本的に同じ事が空燃比のフィードバックで起こってきます。
実際の空燃比計連動機能の制御をシミュレートしたのが下図です。フィードバック比率は係数の「フィードバック比率」の初期値と同じ0.300で行なっています。フィードバック開始時の空燃比は12.0で目標空燃比は15.0です。
遅れが0.4秒では目標空燃比にスムーズに収まっていますが、0.6秒になるとオーバーシュート(行き過ぎ)が2回出ています。遅れが1.0秒まで大きくなるとハンチングを繰り返してなかなか目標空燃比に収まらなくなり、1.2秒になるとハンチングの幅がどんどん大きくなって制御不能になっています(発散すると言います)。
実用的には0.6秒の遅れが限界である事が分かりますし、遅れが少し大きくなり過ぎれば制御不能になることが判ると思います。
実際には回転数や吸気圧の条件が全く変動しないことはほとんど有り得ませんし、空燃比が変動すればエンジントルクが変化する為、運転中であれば無意識にアクセルコントロールが入るので条件も変動し、この図のようなはっきりした変化が起きる事はあまりありませんが、遅れの大小でどのような事が起きるかが端的に分かる思います(アイドリングだとこのような空燃比の変化がはっきり出る場合があります)。
では、遅れが大きい場合はどのように対処すれば良いかが分かるのが次の図です。この図は遅れが1.2秒の場合でフィードバック比率を変えた場合の変化を見ています。
フィードバック比率が0.300の場合(上図と同じ)は発散していますが、0.150では数回のハンチングで収まっていますし、0.080ではほぼオーバーシュート無しでスムーズに目標空燃比に達しています。
つまり遅れが大きい場合はそれに応じてフィードバック比率を小さくすれば、ハンチングや発散は起きない事が分かります。
しかし、両方の図を見比べて分かる様に目標空燃比に達する時間が大幅に異なっています。上図で遅れ0.4秒フィードバック比率0.300の場合は1.5秒程で目標空燃比に達していますが、下図の遅れ1.2秒フィードバック比率0.080では5秒以上掛かっています。つまり、遅れが大きいとそれに合せてフィードバック比率を下げる事で使用可能になりますが、フィードバック自体に時間が掛かる様になるという事です。
実際の使用時にはマップの学習において、このフィードバックの時間がかなり影響してきます。特に加速時など回転数が変化している状況で5秒の遅れは、実質的にほとんど学習されない事になります。したがって、5分割された領域毎にハンチングを起こさない範囲で極力フィードバック比率を上げて使うのが、空燃比計連動機能をより有効に使う方法になります。
スロットル開度補正マップのみに学習させる方法
新たに用意した「噴射量マップ学習無しフラグ」に1を設定することで、噴射量マップは学習させずにスロットル開度補正マップのみ学習させられます。
なお、従来からスロットル開度が10%未満か吸気圧が725mmHg未満の場合はスロットル開度補正マップへの学習は行ないませんが、「低スロットル開度学習比率」に1.000以下の任意の数値(1.000で100%、0.500で50%の学習量)を設定することで、この領域でもスロットル開度補正マップを学習させる事ができます。
FCSSの環境設定のエンジン、車種の選択で「0、共通」を選択している場合は、「噴射量マップ学習無しフラグ」、「低スロットル開度学習比率」は「係数」の中の「その他の係数」の中の「空燃比フィードバック補正」の中に、エンジン、車種の選択が「0、共通」以外を選択している場合は、「噴射量マップ学習無しフラグ」は「係数」の中の「フラグ類」の中にあります。
パスNo.について
パスNo.をセットする事で、Freedom ComputerのパラメータをFCSSによって読出し/書込みの両方、または、書込みができない様に設定できます。パスNo.がセットしてある場合、制限された操作を行なおうとすると、パスNo.の入力を求める画面が表示されます。
なお、パスNo.をセットしても学習によるパラメータの変更は行われます。
FC−03Z、FCSS for Windows Ver.2.5の改良点
