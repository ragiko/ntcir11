
基幹系システムの汎用データベースとして利用されているRDBMSですが、近年では情報系システムでも広く利用されています。今回は情報系システムの特徴を踏まえた上で、汎用データベースの課題について考えてみたいと思います。
情報系システムにおける処理の特徴
情報系システムのデータ基盤として知られるDWH。DWHという言葉は知っていても、DWH特有のデータモデルやSQLは意外と知られていないように見受けられますが、皆さんはいかがでしょうか。
DWHならではのテーブル設計とSQLとは一体どのようなものなのか、まずは確認していきたいと思います。
情報系システムのテーブル設計
DWHの代表的なデータモデルであるスタースキーマを例に説明します。以下の図のように、スタースキーマはER図で表すと、中央のテーブルから放射状に各テーブルが配置されるため、その星状の形からそのように呼ばれています。
分析対象となるファクト表を中央に配置し、分析軸となるディメンジョン表をその周りに配置することで、データを分析するユーザから見てもわかりやすいモデルだと言えます。
ここに例示したスタースキーマは、DWH向けのベンチマークツール(Star Schema Benchmark)から引用したものです。
Star Schema Benchmarkでは、LINEORDER表がファクト表であり、商品の購入履歴が時系列に蓄積されます。ファクト表は、分析対象となる実績値が格納される明細データであり、データ件数は億単位になります。
そして、残りの表(CUSTOMER表、SUPPLIER表、PART表、DATE1表)がディメンジョン表であり、顧客やサプライヤなどの識別キーや名称などが格納されます。ディメンジョン表は、ビジネス上の分析の軸になるマスターデータであり、データ件数は少ないのが特徴です。
また、スタースキーマにすることで、ファクト表に購入者の名前や住所といった冗長な文字列を保持する必要がなくなり、データ量の増加を抑えるメリットもあります。
情報系システムのSQL 
次に、情報系システムで用いられるSQLの特徴について見ます。ここでも、Star Schema BenchmarkのSQLを引用します。以下の図のSQLには次のような特徴が確認できます。
情報系システムにおける汎用データベースの課題 | コラム | InfiniDB技術情報サイト ～データ活用/分析基盤として利用されているInfiniDBの技術情報ナレッジサイト～
