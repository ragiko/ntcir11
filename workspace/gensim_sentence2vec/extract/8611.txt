クラスター(cluster)とは、英語で「房」「集団」「群れ」のことで、似たものがたくさん集まっている様子を表します。クラスター分析とは、異なる性質のものが混ざり合った集団から、互いに似た性質を持つものを集め、クラスターを作る方法です。対象となるサンプル(人、行)や変数(項目、列)をいくつかのグループに分ける、簡単にいえば「似たもの集めの手法」です。
クラスター分析は、あらかじめ分類の基準が決まっておらず、分類のための外的基準や評価が与えられていない「教師無しの分類法」です。従って、データを単純に男女別や年代別に分けた塊をクラスターとは呼びません。
図28.クラスター分析のイメージ
クラスター分析は、ビッグデータの分析、その中でもOne to oneマーケティングに用いる分析手法としては、最も重要な地位を占めており、最もよく使われる手法の1つです。情報が氾濫するなか、いかに消費者にとって有用な情報のみを提示するか、いかに施策のコンバージョンを上げることができるかが最大の関心事ですが、そのためには、顧客を緻密にクラスタリングし、購買を予測し、的確なアクションを打つことが求められます。
クラスター分析を始めるときに決めなくてはならないことは、一般的には以下の4つで、それぞれ、どれを選択するかがポイントになります。
グループ分けの対象
サンプルを分類するのか、変数を分類するのか
分類の形式(種類、生成)
階層的方法か非階層的方法か
分類に用いる対象間の距離(類似度)
ユークリッド距離、マハラノビス距離、コサイン距離 ・・・
クラスターの合併方法(クラスター間の距離の測定方法)
ウォード法、群平均法、最短距離法、最長距離法・・・
「1.グループ分けの対象」は目的が決まれば自動的に決まりますし、「2.分類の形式」はビッグデータにおいてはほとんどが非階層的方法を用いるので迷うことはほとんどありません。「4.クラスター合併方法」も非階層的方法ではあまり選択する必要はありません。最も難しいのが 「3.分類に用いる対象間の距離」の選択です。クラスター分析は「似たもの集めの手法」だと述べましたが、「似ている」または「似ていない」をどう定義するかが、ビッグデータにおけるクラスター分析では、最も大きな問題にも関わらず遅れている分野といっても過言ではありません。
クラスター分析は指定するパラメータの種類が多く、「クラスター分析のクラスター分析をしなくてはならない」といわれるほどで、「これが最適」という選択方法や「これが最高」というクラスターの定義もありません。例えば、最適なクラスター数はいくつかという質問がよくあるのですが、正解はありません。そのほか、初期値をどう設定するかによって結果が異なるというやっかいな問題もあり、とても難しい分析手法の1つに数えられます。
サンプル間の距離測定方法
距離には、『距離の公理』というものがあります。簡単に表現すると、
(1)距離はマイナスにはならない
(2)同一であれば距離はゼロ
(3)2つの距離はどちらから測っても同じ
(4)三角形の2辺の距離の合計は、もう1辺の距離より大きい
といったものです。しかし、この距離の公理を満たす定義は、無限にあります。我々が最もよく使う距離はユークリッド距離といわれるもので、ピタゴラスの定理で求められるような直線距離を指します。
一方、距離と似ていることばに「類似度」というものがあります。クラスター分析は、「似たもの集めの手法」でしたから、似ているものを集める必要があります。「類似度」と似ていることばに「距離」があります。類似度と距離の関係は、
似ている=類似度が高い=距離が近い(小さい)
似ていない=類似度が低い=距離が遠い(大きい)
ということになりますが、クラスター分析では、各データのもつ性質の差=距離ととらえ、その距離の大小により類似性を表現します。データ間の差を用いて距離にはいくつか種類がありますが、最も優れたものはなく、そのデータの性質により用いる距離を選択する必要があります。
n次元ベクトルの距離
(1)ユークリッド距離(平面ならピタゴラスの定理)
日常で用いる距離で、もっとも一般的なものです。平面なら2点の座標が求まればピタゴラスの定理で表せます。これをn次元空間に拡張したものが、以下の式で表せます。
クラスター分析の手法1(概要)｜分析力をコアとするマーケティングソリューションカンパニー・株式会社ALBERT(アルベルト)
