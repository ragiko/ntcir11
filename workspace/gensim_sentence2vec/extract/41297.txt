
4 リアルタイムなデータベースのパフォーマンスの監視
Oracle Enterprise Manager(Enterprise Manager)の「パフォーマンス」ページには、リアルタイムでデータベースの全体のパフォーマンスを評価するために使用できる3つのセクションの情報が表示されます。
図4-1は「パフォーマンス」ページを示しています。
一般的に、自動データベース診断モニター(ADDM)の自動診断機能を使用して、第3章「データベースのパフォーマンスの自動監視」で説明しているように、データベースでパフォーマンスの問題を識別します。場合によっては、リアルタイムでデータベースのパフォーマンスを監視して、パフォーマンスの問題が発生したときにそれらを識別します。たとえば、ADDMはデフォルトで1時間ごとの自動ワークロード・リポジトリ(AWR)・スナップショットの後、分析を実行します。ただし、「パフォーマンス」ページのデータベース・アクティビティで突然のスパイクに気づいた場合、次のADDM分析の前にインシデントを調査する必要があります。
「パフォーマンス」ページからその他のページにドリルダウンして、リアルタイムのデータベースのパフォーマンスの問題を識別できます。問題を検出した場合は、ADDMを手動で実行して、次のADDM分析を待たずにすぐにその問題を分析できます。ADDMを手動で実行する方法は、「現在のデータベースのパフォーマンスを分析するADDMの手動実行」を参照してください。
この章の内容は次のとおりです。
ユーザー・アクティビティの監視
インスタンス・アクティビティの監視
ホスト・アクティビティの監視
データベース・アクティビティのスパイクの原因の確認
「データベース・パフォーマンス」ページのカスタマイズ
ユーザー・アクティビティの監視
「パフォーマンス」ページの「平均アクティブ・セッション」グラフには、データベースの負荷の平均が示されます。ある期間の平均アクティブ・セッションは、その期間内のすべてのセッションの合計DB時間を、その期間の経過時間(実経過時間)で割った値に等しくなります。このグラフには、CPUで実行されているアクティブなセッションと、イベントを待機しているアクティブなセッションが示されています。
第2章「Oracle Databaseのパフォーマンス・メソッド」で説明されているパフォーマンス・メソッドに従って、グラフからドリルダウンしてインスタンスに関連するパフォーマンスの問題の原因を識別し、解決できます。
ユーザー・アクティビティの監視手順: 
データベースのホームページで、「パフォーマンス」をクリックします。
「パフォーマンス」ページが表示されます。
「平均アクティブ・セッション」グラフで、急激な増大を確認します。
各コンポーネントには、指定した時間内に指定した状態であったアクティブ・セッションの平均数が表示されます。たとえば、1つのセッションのみがアクティブであった場合、CPUの値が0.8であるとすると、ターゲット時間にサンプリングされた5回の時間(秒)のうち4回でセッションがCPUを使用したことを示します。最大CPU数はシステム上のCPU数と同じになります。「使用中のCPU」の値が「最大CPU」の線に到達している場合、そのホスト・システムでは、データベース・インスタンスがCPU時間の100%を使用しています。
待機クラスでは、ディスクI/Oなどのリソースに対する待機によって、どのくらいのデータベース・アクティビティが使用されているのかが表示されます。アクティブ・セッションの大きなブロックを使用する値は、凡例で関連する色で示されている特定の待機クラスが原因のボトルネックを示します。
図4-2に示すグラフでは、午後3:35以降のアクティビティの最大量が濃い緑色で表示されます。これは「使用中のCPU」待機クラスに対応しています。
各待機クラスを識別するには、クラスに対応する「平均アクティブ・セッション」グラフのブロックにカーソルを移動します。
対応する待機クラスは、グラフの凡例で強調表示されます。
グラフ上で最大のカラー・ブロックをクリックするか、または凡例内の対応する待機クラスをクリックして、アクティブ・セッション数が最も多い待機クラスにドリルダウンします。
「使用中のCPU」をクリックした場合、その待機クラスに対する実行中のアクティブ・セッション・ページが表示されます。「ユーザーI/O」などの、異なった待機クラスをクリックした場合、実行中のアクティブ・セッション・ページが表示されます。
リアルタイムなデータベースのパフォーマンスの監視
