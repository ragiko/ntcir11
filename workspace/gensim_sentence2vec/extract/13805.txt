次の手順は、必要最小限のコンピューターを使用してテスト ラボを構成するためのものです。各コンピューターでは、ネットワーク上で提供されるサービスを分け、必要な機能をはっきりと表示する必要があります。この構成は、ベスト プラクティスを反映したものでも、運用ネットワーク用の望ましい構成や推奨される構成を反映したものでもありません。この構成は、IP アドレスやその他すべての構成パラメーターを含め、隔離されたテスト ラボ ネットワークでのみ動作するよう設計されています。
Windows Server® 2008 R2 には、DHCP サーバー展開で利用可能な 2 つの高可用性オプションが用意されています。どちらのオプションにも、いくつかの克服する課題があります。
Windows フェールオーバー クラスター内への DHCP 配置。このオプションでは、DHCP サービスが構成された別のサーバーが存在するクラスター内に DHCP サーバーを配置します。プライマリ DHCP サーバーで障害が発生した場合には、もう一方のサーバーがその作業を引き継ぎます。このクラスタリング展開オプションでは、単一の共有記憶域が使用されます。そのために記憶域が単一障害点になり、記憶域の冗長性を確保するための追加の投資が必要になります。また、クラスタリングでは比較的複雑なセットアップおよび管理が必要になります。
分割スコープ DHCP。分割スコープ DHCP では、2 台の独立した DHCP サーバーが、1 つのスコープを分割して対応します。一般に、スコープのアドレスの 70% はプライマリ サーバーに割り当てられ、残りの 30% はバックアップ サーバーに割り当てられます。クライアントがプライマリ サーバーに到達できない場合は、セカンダリ サーバーから IP 構成を取得できます。分割スコープ展開は、IP アドレスの継続性を維持できず、スコープのアドレス空間の使用率が既に高い状況では使用できません (Internet Protocol version 4 (IPv4) 展開ではよくある状況です)。
Windows Server 2012 の DHCP フェールオーバーを利用すると、管理者は回復力の高い DHCP サービスを展開して大規模な企業をサポートできます。その際、ここで説明したオプションの問題点に悩まされることもありません。この機能の主な目的は次のとおりです。
企業ネットワークで DHCP サービスを途切れることなく実現します。
DHCP サーバーに到達できなくなると、DHCP クライアントは企業ネットワーク内の他の DHCP サーバーに接続して、現在の IP アドレスのリースを延長できます。
DHCP サーバーのフェールオーバー機能は、2 台の DHCP サーバーが、同じサブネット (スコープ) に IP アドレスおよびオプション構成を提供することによって、DHCP サービスの継続的な可用性を実現します。2 台の DHCP サーバーは互いにリース情報をレプリケートし合い、一方のサーバーが使用できなくなると、もう一方のサーバーが、サブネット全体のクライアントに対するサービスを担います。フェールオーバーを負荷分散構成にして、フェールオーバー リレーションシップの 2 台のサーバーにクライアントからの要求を分散させることもできます。
Windows Server 2012 の DHCP フェールオーバーは最大で 2 台の DHCP サーバーをサポートしており、フェールオーバー リレーションシップは IPv4 スコープおよびサブネットに限定されています。Internet Protocol version 6 (IPv6) を使用するネットワーク ノードは、通常、ステートレスな IP 自動構成を使用して、独自の IPv6 アドレスを決定します。このモードでは、DHCP サーバーは DHCP オプション構成のみを提供し、リース状態の情報を一切管理しません。ステートレスな DHCPv6 の高可用性展開は、単に同一のオプション構成を持つ 2 台のサーバーをセットアップするだけで実現できます。ステートフルな DHCPv6 展開の場合も、スコープのアドレス使用率は高くならないので、高可用性のソリューションとして分割スコープを利用できます。
ステップ バイ ステップ: フェールオーバー用の DHCP の構成
