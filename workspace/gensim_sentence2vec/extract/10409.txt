
2007年現在、現存メーカーも、世界6社中3社が日本企業(富士通、日立製作所、日本電気)である。公共機関への出荷が多い(後述)。
特徴[編集]
メインフレームは長い歴史と複数のアーキテクチャを持ち、また専用のハードウェアと専用のソフトウェアが一体として設計・拡張されているため単純な特徴の説明は難しい。一般的な特徴と傾向は、以下が挙げられる。
各メーカー独自のハードウェア、OSなどを備える場合が多い(ただしオープン対応も進められている)
複数業務の並行稼動性に優れている(I/Oを含めた平行稼働、ワークロード管理)
特に大規模バッチ、大規模帳票出力業務などに強い(安定したスループット)
各種の信頼性(徹底した冗長化、問題判別用の各種トレース、細かい単体FIXの迅速な提供など)
販売価格、保守費用とも非常に高価(個別見積もり、リース利用が大半)
筐体が大きい(過去には複数フロアー占有、CMOS空冷化以降はUNIXハイエンドと同規模)
良くも悪くもベンダーへの依存度が高まりやすい(他社との単純比較は困難、詳細な運用情報のガイド等)
以下は主にIBM系(IBM、富士通、日立製作所)を中心に説明する。
CPU[編集]
マイクロプロセッサの時代以前は、メインフレームの「本体」と言うべき筐体がCentral Processing Unitすなわち「CPU」であった(そもそもそれが「メインフレーム」であるわけだが)。マイクロプロセッサが生まれた後も、性能上の理由から(マイクロプロセッサはMOS(初期以降はほぼCMOS)であり、メインフレームで使われていたTTLやECLに比べて遅い)メインフレームのCPUは複数チップから構成されていた(CMOSに比べて集積度が上げられないため)。
1980年代までは、そのため発熱も大きく、とくに上位モデルでは液冷(水冷)とする機が多かった。1990年代に各社ともCMOSマイクロプロセッサに移行し、同時に発熱量が下がったため空冷として低価格・小型化した。その余裕をマルチプロセッサ化に振り向けることで性能は保たれた。ECLを使用した最後に近いものとしては1999年日立のMP6000がある。2001年発表のAP8000ではCMOS化した。
現在は、独自仕様のマイクロプロセッサを複数(最大64個など)搭載するものが多い。
IBMのアーキテクチャでは、System/360は32ビット(アドレス24ビット)、System/370-XA 以後は32ビット(論理31ビット。1ビットは互換性のために使用)、z/Architecture 以後は64ビットである。
GE・ハネウェル系である日本電気のACOS-6系はワードマシンであり、独自アーキテクチャである。同社のACOS-4やBullのGCOS 8は、バイトマシンであり、仮想化技術を使用してItanium 2によるエミュレーションに移行した。またACOS-2はXeonに移行した。しかし2012年にはi-PX9800/A100を発表し、将来性や性能面から上位機種はItanium2から独自開発プロセッサの「NOAH-6」に戻った[13]。
日本国内でも、メインフレームの需要が減少したことから、メインフレームの製造は減少しているが、日立(AP8800E)と富士通(GS21)は共に独自プロセッサによるメインフレームを続けている。前述のようにIA-64プロセッサによるエミュレーションに移行した日本電気も、上位機種で独自プロセッサを再開した(詳細は#メインフレームの再評価(2000年代)を参照)。なお日立は2000年に北米市場での新規営業を停止している[14]。
ただし、日立とIBMのプロセッサは2001年の発表によれば共同開発である[15]。
ユニシスの場合、大型機では独自のプロセッサを搭載している。中小型機では、Xeonを搭載し、OS2200系及びMCP系中型機ではLinuxベースのファームウェアによるエミュレーション、MCP系小型機ではWindows Server上で稼働するエミュレータ(MCPvm)によりそれぞれ独自OSを稼働させている。大型機・中型機の場合、コンソール制御用にオペレーション・サーバと呼ばれるXeon搭載のWindows Serverを搭載しており、また、Javaアプリケーション実行用に、JProcessorと呼ばれるXeon搭載のLinuxサーバを搭載可能である。
各社に共通して、メインフレームではCPUの性能は全体性能に比例するとは限らない。汎用マイクロプロセッサをほぼそのまま使用するIAサーバやUNIXサーバと異なり、チャネルなどの専用IOを多数搭載し、ファームウェアが性能に大きな比重を占める(使用頻度の高い命令群のファームウェア化、使用頻度の低下したファームウェア機能の削除など)ためである。
IBM System zでは、チャネル以外の専用プロセッサには、Linux専用プロセッサー (IFL : Integrated Facility for Linux)、Java専用プロセッサー (zAAP : System z Application Assist Processor)、DB 専用プロセッサー (zIIP : System z Integrated Information Processor) などがある。これらのプロセッサを使うことでCPUの負荷を低減できるとともに、ソフトウェアのライセンス料の低減も行うことができる。
I/O[編集]
チャネルと呼ばれるI/O専用プロセッサを多数(モデルにより最大1024個など)搭載できる。チャネルはI/Oに伴うCPUの負荷を軽減する。オープン系で一般的なインテリジェントな外部バスと異なり、接続経路が高負荷(ビジー)な場合には別経路を選択して使用する、I/Oの飛び越し(優先度の高いI/O要求が来た場合、既に実行中の他のI/Oに優先して結果を返す)などができる。
一般に「メインフレームのCPUは高速と思えないのに、高負荷時にも安定稼動して一定の応答時間も得られる」、「オープン系のCPUは高速なのに、負荷がある時点に達すると急速にスループットが低下する」などはI/Oの基本設計の違いによる場合が多い。これは、メインフレームの場合、I/Oの制御をOSから切り離し、上記の専用プロセッサに任せているためである。したがって、一つの重いI/O要求が発生しても、OSは併行してタスク処理を進めるので、著しいレスポンスの低下を回避できる。これに対し、オープン系は、I/O要求が発生するとWIO (Wait I/O) 状態となり、CPU側でビジー状態ではないにもかかわらず、資源が使えなくなる事がある。よって、高速CPUを用いても、I/O処理が重い、高負荷等の事象が重なると必然的にレスポンス低下に至る。以前はメインフレームも似たような方式であったが、1980年代頃より現在の制御方式となり、I/O処理の部分がさらに強化された。なお現在のIBMメインフレームでは、各チャネルの内部的には複数のPOWER系プロセッサが搭載されている。
また周辺機器との物理接続は、昔は同軸が主流だったが、現在はファイバー(FICON、ファイバーチャネル、FIBARCなど)が主流である。同軸ケーブルの場合、接続上の制約(パラレル転送による制限長)やケーブリング自体の負荷(1つのチャネルに直径3 - 4cmの同軸ケーブル2本の敷設が必要)など、インフラ面での設計が容易ではなかったが、FICON以降、軽減されている。
クラスタリング[編集]
メインフレームでは複数のOSが同一の磁気ディスク装置を共有(シェアー)する事は一般的であり、整合性を保つためのキャッシュやロックなどの排他制御は、OSレベルで実現している(IBM IRLM、並列シスプレックスなど)。
更にミドルウェアのクラスタリング機能(IBM XRFなど)を組み合わせた場合は、障害発生時にディスクやプロセスの引継ぎをする事なく、待機系(アクティブスタンバイ)が瞬時に処理を引き継ぎ、ユーザーには瞬間的な業務停止も見せない、更には障害機で処理中であったトランザクションも、TPモニタのログから可能な限り復元し引き継ぐ事ができる。
これらの機能は1980年代には一般的で、2008年現在でも多数の金融機関などで使用されている。
OS[編集]
メインフレームでは各社の複数の独自OSに加え、一部はオープン系のOSも同時稼働できる。
メインフレーム - Wikipedia
