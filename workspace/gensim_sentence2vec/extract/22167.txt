
Cygwinの具体的な日本語対応の方法
Windows環境でUNIX/Linux/BSD風のコンパイル環境を利用できるフリーソフトウェアCygwinで日本語を利用するに当たり、CygwinのセットアップとCygwin日本語パッケージのインストールと日本語環境設定でCygwinをインストールし、lsやcatで表示される日本語は正しく表示できるようになったと思います。
これらの設定を行った上でshellやコマンド等が出力するメッセージが文字化けする場合には、ソフトウェアの国際化に関連したメッセージカタログ(po/mo形式)とのミスマッチがその要因として濃厚で参照しているのはバイナリ形式の拡張子が.moのファイルであることがわかり、それを編集すればよさそうだという概要まで見てきましたので、ここでは、その具体的な方法を書きます。
尚、メッセージカタログの編集をしたのに反映されないとか、日本語用ファイルをインストールした等の場合で日本語表示されるはずのメッセージが英語であるという場合には、環境変数NLSPATHを追加登録します。
その上で文字化けが起こる場合には、やはりメッセージカタログに起因するものと思われ、その場合も以降の編集が必要です。
LC_MESSAGESディレクトリ
まず、メッセージカタログのバイナリであるmo形式のファイルは、複数まとまって1つのディレクトリに格納されている場合と国際化を行うソフトウェア個々に専用のディレクトリを持っている場合がありますが、何れにしてもmo形式があるそのディレクトリはLC_MESSAGES、1つ上のディレクトリはロケール正式名やロケールの言語名と決められています。
mo形式のファイルのあるLC_MESSAGESディレクトリには、普通、それぞれの国ごとに多くのサブディレクトリがあり、日本語関連のディレクトリ名には、ja、またはjaで始まるロケール正式名やロケールの言語名が付けられています。
localeコマンド/言語圏設定確認
文字化けを解消する為には、文字コードに注目する必要があり、文字コードに注目すると言語圏による違いを吸収する設定(国際化)に着目することになり、国際化に着目するとそれらしい環境変数に着目する必要があるらしいことがわかり、そのためには、localeコマンドを使うとよさそうだという話になります。
尚、localコマンドとlocaleコマンドは似て非なるコマンドでbashの場合、localは変数の局所化の為のbashシェル組み込みコマンド、localeは、UNIX/Linuxシステムコマンド(shell共通であるはず)の言語圏固有の設定表示コマンドで、英語localeの一般的な日本語では「場所」「背景」等、IT用語では「国・地域」・「言語圏」を意味します。
というわけでlocaleで現時点で各種システム環境変数に設定されている文字コードを調べてみるとデフォルトまたは、設定ファイルなどで意図的に環境変数LANGに設定した値が表示されます。
Cygwin 日本語対応と方法 webzoit.net
