
4.3.3 変換符号化
変換符号化は、離散余弦変換(DCT)などの直交変換を用いて動画像データを空間周波数領域に変換する。隣接画素との相関を利用して低域周波数領域に変換係数を偏らせ、データ圧縮を行う。
画像の変換符号化の概念を図4.3.3-1に示す。画素が16(4行、4列)ある場合を仮定する。直交変換された結果は、16個の基底(または基底ベクトル)と呼ばれる基本パターンとその変換係数(a1〜a16)の積で表される。基底の変換係数a1から高次の変換係数a16は、図の下段に示すように、4×4のマトリクスで表示される。変換係数はa1からa16までジグザグ走査して出力される。
図4.3.3-1 画像の変換符号化
4.3.4 量子化
量子化は前段の変換符号化による変換係数の値を、量子化ステップ幅の倍数で表し、データ圧縮を行う。動画像データ出力を一定のデータレートにするために、符号量制御部からの制御により量子化ステップ幅を変化させ、データ圧縮量を制御する。画像のシーン切換が連続する場合などは予測差分(予測誤差)が大きくなるため、符号量制御部は量子化ステップ幅を大きくしてデータ量の増加を抑える。
しかし一方では、量子化ステップ幅を大きくすると、隣接ブロックとのレベル差によるブロック歪みの発生の原因、高域周波数成分の減少によるモスキートノイズの発生の原因となる。
4.3.5 符号割当
符号割当は、シンボルの出現確率に応じて可変長符号を割当て、出力されるデータの平均符号長を最小にする。動画像データの符号割当には、ベクトルデータにはハフマン符号、予測差分(変換係数の量子化出力)データには2次元ハフマン符号が用いられる。
ハフマン符号による符号割当は、出現確率の高いシンボルには短い符号を、また出現確率の低いシンボルには長い符号を割当て、データの平均符号長を最小にする符号化技術である。ハフマン符号による符号割当の例を図4.3.5-1に示す。文字E、T、A、O、X、J、Q、Zにおいて、出現確率を、E:1/2、T:1/8、A:1/8、O:1/16、X:1/16、J:1/16、Q:1/32、Z:1/32とすると、各文字に割当てられるハフマン符号は図のようになる。出現確率が最も高いEに対して最も短い符号である「0」が割当てられ、出現確率が最も低いQとZには「11110」、「11111」の長い符号が割当てられる。
図4.3.5-1 ハフマン符号による符号割当
2次元ハフマン符号による符号割当はデータの連続する「0」の数(ラン数)と「0」以外の値(レベル値)の組合せから1個のハフマン符号を符号割当する技術である。予測差分データの高域周波数領域のデータには「0」の連続が多く、圧縮率を向上させる。あらかじめラン数とレベル値の出現確率が高い組合せは符号化テーブルにハフマン符号が用意してある。表4.3.5-1にMPEG符号化方式で用いる2次元ハフマン符号化テーブル例(一部分のみ)を示す。
ただし、出現確率の低い組合せは、ハフマン符号では逆に符号長が長くなるため固定長符号で符号割当されている。
表4.3.5-1 MPEG符号化方式の2次元ハフマン符号化テーブル例(一部分のみ)
無題ドキュメント
