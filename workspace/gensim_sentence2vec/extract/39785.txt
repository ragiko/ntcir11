11月28日にCAS-UB V2.2を正式版としました。バージョンアップで強化したポイントの一つがEPUB目次の自動生成機能です。
EPUBの目次関連機能には、次の3つがあります。
1.ナビゲーション目次 
2.本文目次
3.ランドマーク
EPUB3に上の3つの目次を用意して、たとえば、Readiumで表示しますと次の図1、図2のようになります。
図1 ナビゲーション目次と本文目次を表示
図2 ランドマークを表示。ランドマークで本扉を選択
1.ナビゲーション目次について
EPUB3の正式な目次(必須)です。
ナビゲーション目次の表示方法はEPUBリーダー依存になります。多くのEPUBリーダーは専用のパネルに表示します。
ナビゲーション目次にレイアウトを指定したとき、その表示はEPUBリーダー依存です。多くのリーダーは横書きのみですが、例えばiBooksは縦組みでも表示できます。多くのリーダーではナビゲーション目次にはルビや文字の装飾はできません。このようにナビゲーション目次の表示は、EPUBリーダーによって、まったくばらばらです。
CAS-UBは、記事のタイトルおよび記事の見出しを集めてナビゲーション目次の内容を作ります。この内容を論理目次と呼びます。(ナビゲーション目次は入れ物であり、論理目次はその内容という考え方です。)
論理目次に、どのレベルの見出しまで含めるかを、「生成」-「一般」のメニュー、記事のタイトルのみ～レベル5の見出しまでの範囲で指定できます。
このとき、見出しと目次に、番号を自動的に付与することができます。番号の形式は、「生成」−「その他」で指定します。
ナビゲーション目次の内容として、論理目次の代わりに、ランドマーク(後述)を割り当てることもできます。
2.本文目次について
通常の記事と同じ扱いの目次です。
レイアウト機能は、本文と同等になりますので、縦組み、ルビ、縦中横、文字の飾りなどは本文同様の指定ができます。EPUB3リーダーであれば、縦組み、ルビなど表示可能でしょう。
CAS-UBのV2.2では、本文目次を自動生成する機能を新規に追加しました。本文目次を作るかどうか、また、目次にどのレベルの見出しまで含めるか、などは論理目次の生成と同様です。
本文目次は手作りできます。その場合、「記事の種類」に「ユーザー作成目次」を指定します。但し、手作りの目次(「ユーザー作成目次」を指定した記事)がある場合は、本文目次を「作成する」にしても、実際には作成しないで、手作りの目次を優先します。
3.ランドマークについて
ランドマークに設定する項目は決まっていませんが、『EPUB3 Best Practices』(EPUB3の仕様策定者が書いた解説本)によりますと、本の大きな構成部分をあらわすことになっています。
ランドマークを表示できるEPUB3リーダーは、Readium位です。あまり多くありません。
CAS-UBでは、ランドマークには、カバー(表紙)、本扉(オープニング)、目次(本文目次)、参考文献、索引を指定します。但し、該当する記事が存在しない場合は、指定しません。
1～3によって、EPUB3で指定することのできる目次機能を自動的に作る機能の使いこなしができるようになりました。
あとは、ページリスト・・・。PDFの生成結果とリンクするページ番号を自動的に入れることができると良いのですが、AH Formatterに生成結果のページ番号を出力する機能があったかナ? 忘れてしまいました。 なければ作ってもらうということですが・・・ 
EPUB目次自動作成機能を大幅に強化! CAS-UB V2.2 を正式版としました。 | 電子書籍、電子出版のCAS-UBブログ
