速度向上のポイント
RWin設定で回線速度が1.5倍～3倍に!
(注意!)Windows Vista・Windows 7では、以下の方法を使って速度を向上させることはできませんのでご了承ください。
※説明を読まずに、手っ取り早く速度を上げたい方は、前半の説明を飛ばして、4.RWinの設定方法をご覧ください。
1.はじめに
光ファイバユーザで、東京以外に在住の方は、RWinを増やすことで劇的な速度向上が期待できます。Windows 98/Me/2000ユーザはもちろん、Windows XPユーザもRWinの設定によって速度が大幅に向上します。
回線速度(契約速度)が100Mbpsであっても、RWinがWindowsの初期値のままだと受信速度に限界があります。
例えば、後で説明するように、大阪に在住の方は、Windows XPデフォルトのRWinだと最大で約35Mbpsしか出すことができません。
この「壁」は、RWinを設定することで容易に100Mbps程度まで引き上げることが可能です。
2.RWinによる受信速度の限界
受信速度(帯域)の上限値は理論上、以下の式で計算されます。
RWinとは、
簡単に言えば、サーバから一度にまとめて送ってもらいたいデータ量です。RWinが大きいほど、一度にたくさんのデータを受け取ることができるので、転送効率が良くなって速度が速くなります。
RTTとは、
サーバとの往復(遅延)時間のことです。いわゆるpingの応答時間がそれです。RTTを最も決定付けるのが物理的な距離で、距離が遠いほど信号の伝送に時間がかかるのでRTTが大きくなります。また、回線種類(光ファイバやADSL)によってもRTTは若干前後します。無線LAN環境の場合もRTTが大きくなります。
RTTが大きいほど、サーバに「ここまでのデータを受け取りました。次のデータを送ってください。」と返事をするのに時間がかかるので、効率が悪くなって速度が低下します。
RTTは距離によって概ね決定される値ですから、RTTを小さくすることは物理的に限界があります。しかしながら、RTTが大きい場合でも、RWinを上げてデータを一度に沢山送ってもらえば、転送効率が上がって速度が向上します。
では、上の式を使って、具体的に、東京・大阪間の受信帯域の上限を計算してみましょう。
・Windows XPでのRWinの初期値は65535byteです。
・東京・大阪間のRTTは、光ファイバの場合15msくらいあります。
このとき、受信帯域の上限は、
65535 x 8 / 15 x 1000 = 約35Mbps
となります。
つまり、アクセス回線の容量が100Mbpsであっても、RWinの設定がWindows初期値のままだと、大阪ユーザが東京サーバから受信したときは最大でも約35Mbpsしか速度が出ないのです。
同様に、札幌や福岡は、東京に対するRTTが光ファイバの場合25msもありますので、帯域は約20Mbpsが上限になり、せっかくの100Mbps回線の80%が有効利用されません。
そこで、次の項目の通りRWinの設定を増やして、帯域の上限を100Mbps近くまで引き上げることが速度向上に直結します。
1.基本的な考え方
RWinが大きいほど帯域の上限が高くはなるのですが、しかし一方で、RWinが大きすぎるとパケットロスが発生したときに再送に時間がかかり、かえって転送速度が低下したり転送速度にムラができたりします。
従って、RWinは必要以上に増やさないようにしましょう。
なお、RWinは65535 x 2の累乗倍の値で設定します。例えば、65535(65535の1倍)、131070(65535の2倍)、262140(65535の4倍)、、という値しか取れないことに注意してください。
次に、ADSLの場合と光ファイバの場合の適正値について解説します。
2.ADSLのRWin適正値
ADSLは、47～50Mbpsサービスであってもリンク速度が最大で30Mbps程度であり回線容量があまり大きくないので、大半のADSL環境では、Windows XPの初期値のRWin=65535で十分です。
ただし、Windows 98/Me/2000はRWinのデフォルトが16384以下となっておりRWinが小さすぎるので、これらのOSをご利用の方は、どの地方にお住まいでも、65535に増やしたほうがいいでしょう。増やし方は後述の「4.RWinの設定方法」で説明していますのでお読みください。
また、高遅延環境(北海道や中国・九州地方)の方で、リンク速度が15Mbps以上(線路長が約1km以下)の場合は、RWinが若干不足ぎみなので、131070に増やしてみましょう。
ADSLサービスでの地方別RWin推奨値
地方
東京に対する
RTT
RWin=65535
の場合の帯域上限
RWin推奨値
ブロードバンドスピードテスト(回線速度・通信速度測定診断サイト)
