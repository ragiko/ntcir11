
EIGRP - bandwidth / delay / reliability / load / MTU 
EIGRP - メトリック
RIPv1/RIPv2のメトリックはホップ数、OSPFのメトリックはコスト、EIGRPのメトリックは複合メトリック。
複合メトリックとは帯域幅 (bandwidth)、遅延 (delay)、信頼性 (reliability)、負荷(load)、MTUの5つのことです。
ただし実際に使用されるメトリックは帯域幅と遅延の2項目です。これらの値はshow intで確認することができます。
EIGRPで使用するメトリック
説明
帯域幅 ( bandwidth )
ローカルルータから宛先ネットワークに至るまでの最小帯域幅
遅延 ( delay )
ローカルルータから宛先ネットワークに至るまでの遅延の合計値
EIGRPで使用するメトリック
メトリック値を算出する公式
帯域幅 ( bandwidth )
10000 ÷ 最小帯域幅(Mbps) × 256
遅延 ( delay )
遅延(10マイクロ秒)の合計値 × 256
EIGRPで使用するメトリック
例えば、100Mbpsのインターフェースの場合
帯域幅 ( bandwidth )
show int では「BW 100000Kbps」と表示されるので、単位をMbpsにして「100」となる。
遅延 ( delay )
show int では「DLY 100μsec」と表示されるので、100 ÷10 にして「10」となる。
※ show int で確認すると DLY 100μsec ではなく DLY 100 usec と表示されますが μ(マイクロ) が表示できないからです。
例えば下図で、R1からの192.168.5.0/24へは、ローカルルータ(R1)から宛先ネットワーク (192.168.5.0/24)
に至るまでの最小帯域幅は100Mbps。遅延の合計値は「30」。これらの値を公式に当てはめて加算します。
帯域幅のメトリック値 : 10000 ÷ 100 × 256 = 25600
遅延のメトリック値   : 30 × 256 = 7680
R1から「192.168.5.0/24」へのメトリック値 : 25600 + 7680 = 33280
R1でshow ip routeで確認するとネットワーク(192.168.5.0/24)へのメトリック値は 33280と表示されます。
なお、K値と呼ばれる値を参照することでメトリック値が算出されます。デフォルトでK値は以下であることから
EIGRPのメトリックは「帯域幅+遅延」となります。
K1(帯域幅) = 1  K2(負荷) = 0  K3(遅延) = 1  K4(信頼性) = 0  K5(MTU) = 0
色々と解説しましたが、結局のところこれらは自動計算されますし、簡単にいえば「EIGRPは帯域幅の大きい
パスを使用していく」ということです。そして、実際の企業ネットワーク環境でネットワークエンジニアが
EIGRPで経路制御する場合、遅延の値をdelayコマンドで変更すればほとんどの要件は満たせます。例えば
1Gbpsの2つのパスがありプライマリ、バックアップとして使用したいならdelay 1、delay 2と設定するだけです。
※ 上記例は前提として2つのパスが宛先ネットワークまで同帯域のリンクがシンメトリー(対称)にあること。
EIGRP - 5種類のパケット ( Hello, Update, Query / Reply / Ack ) EIGRP - サクセサとフィージブルサクセサ 
ネットワークエンジニアとして
Copyright(C) 2002-2014 Cool. All Rights Reserved
EIGRP - 複合メトリックの算出方法
