概要
全文検索エンジンとして有名なLucene/Solr。
この子を使って日本語文書のインデックスを作成したい場合、形態素解析かNgramを用いるのが一般的。
Ngramを選択した場合に良く利用されるのがCJKAnalyzer。日本語や英語なんかが混ざった文章を解析する時にはそこそこに便利。
ただ、その仕様や作成されるインデックスのサイズが必ずしも要件に合うとは限らない。これを自前で改変できるようになれば、用途に合った、よりコンパクトなインデックスが作成されるんじゃないだろうか。
そんなことを思ったので、気の向くままに「1文字をインデックスに入れない」とか「カタカナはBi-gramでなくまとめて登録する」とか「顔文字の検索を考慮する」などを試してみた。
Lucene/SolrのCJKAnalyzerをカスタマイズして遊んでみる
