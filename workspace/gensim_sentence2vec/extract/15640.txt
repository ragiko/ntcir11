Programming Field
DOS コマンド一覧
% (パーセント)
環境変数の値を使用するときに使います。
構文
%<value-name>%
%<number>
%~<operators><number>
<value-name>
現在の環境で定義されている環境変数の名前を指定します。
<number>
[バッチファイル] 0 から 9 の数字を指定します。この数字は、バッチファイルを実行した際に渡された引数(コマンドパラメータ)のインデックスを指します。
%~<operators><number>
[Windows NT 系] [拡張構文] [バッチファイル] 0から9の数字の前に「~」文字と適切な文字を指定することで引数の展開方法を変更します。詳しくは「解説」をご覧ください。
解説
環境変数は、現在のDOS環境(プロンプト含む)における一種の「設定」であり、プログラムによっては環境変数の値を読み込んで処理を行うものもあります。詳しくは「環境変数について」をご覧ください。
% で囲んだ文字列がコマンド及びバッチファイル内に存在すると、その文字列を環境変数の名前と見なし、その環境変数の値に置き換えます。もし環境変数が定義されていない場合は空の文字列になります。
なお、バッチファイル内で「%」文字を出力したい場合は「%%」と記述します。
(実行例)
echo 「%TEMP%」「%UNKNOWN_VARIABLE%」
「C:\TEMP」「」
また、バッチファイルの実行には、他のプログラムと同様に引数を指定することが出来るため、バッチファイル内でその引数を元に処理を変えたい場合は、「%1」「%2」... のように % を用いて値を読み出します。「%0」はバッチファイルを実行した際のパス名が入ります。
(実行例: バッチファイル test.bat)
@echo "%0", "%1", "%2", "%3"
C:\MyData> ..\test.bat Test "parameter"
"..\test.bat", "Test", ""parameter"", ""
※ % の後ろに指定できる数値は1桁までです。10個以上の引数を利用する場合はShiftコマンドを使用します。
なお、現在の環境で定義されている環境変数の一覧を表示したり、環境変数の値を追加・変更・削除するときは、いずれの場合もSetコマンドを使用します。
環境変数展開の拡張
[Windows NT系] [拡張構文] 拡張機能が有効になっている場合、環境変数を用いる場合に、以下の構文を使うことで環境変数の展開方法を変更することができます。
記法意味
「%」 - DOS コマンド一覧
