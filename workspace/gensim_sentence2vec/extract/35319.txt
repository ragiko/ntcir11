新たにADを構築するのですが、その際ちょっと上司ともめているので、
その件で質問させてください。
今回、WindowsServer2003を3台導入し全く新しいドメインを構築しようとしています。
この3台は同じ場所に設置します。(クライアントは20台くらいXPを新規に購入)
それぞれの役割を、
1、ドメインを管理するサーバー
2、DBサーバー(Oracleを予定)
3、ファイルサーバー
にしようと計画しています。
私は、2のDBサーバーと3のファイルサーバーもDCにして
1のドメインサーバーが故障したときの回避も可能と上司に話しているのですが、
上司の意見は、DCは1台が普通で後はメンバサーバにすべきと言っています。
(私は、メンバサーバは単純にドメインに参加しただけで、
クライアントと変わらないという認識ですが間違っていますか?)
その環境によりケースバイケースとは思うのですが、
3台もサーバーを導入するのに、DCは1台だけと言うのは、
私としては、ドメインサーバー障害時のための対策が全く
できないと思ってしまいます。
その辺りベテランのアドバイスを頂けないでしょうか?
こんばんわ.
引用:
みつおさんの書き込み (2006-12-13 22:11) より:
私は、2のDBサーバーと3のファイルサーバーもDCにして
1のドメインサーバーが故障したときの回避も可能と上司に話しているのですが、
上司の意見は、DCは1台が普通で後はメンバサーバにすべきと言っています。
なぜ「すべきか?」は説明があったのでしょうか?
その説明次第ではないかと.
わかっていいなくて「Domain controller は1台でよいはず」というなら
理屈を説明すればよいでしょう.
わかっていて「Domain controller は1台でよいはず」というなら,
冗長化する以上の価値を他に見いだしているのでは?
引用:
(私は、メンバサーバは単純にドメインに参加しただけで、
クライアントと変わらないという認識ですが間違っていますか?)
はい,その認識で正しいです.
引用:
その環境によりケースバイケースとは思うのですが、
3台もサーバーを導入するのに、DCは1台だけと言うのは、
私としては、ドメインサーバー障害時のための対策が全く
できないと思ってしまいます。
Domain controller の冗長化対策はなされていないと考えられます.
が,モノは考えようで,そのくらいの環境であれば
「Hot imaging で素早く restore できればよい」とも言えます.
であれば,敢えて複数台準備するまでもないかもしれません.
その上司さんが「負荷が心配」とか,そういった理由なら
それに応じた対策を施せばよいだけでしょうし,
「知らないだけ」なら理屈で説明してあげればよいだけでしょう.
以上,ご参考までに.
kaz様
ありがとうございます。
大変参考になりました。
Hotimagingについてはちょっと調べました。
・Acronis True Image 9.1 Server for Windows
・NetJapan Drive Backup 8.0
・NetJapan Symantec Backup Exec System Recovery 6.5
・NetJapan ShadowProtect 
などがあるみたいですね。いづれも10万円くらいの価格みたいなので、
今回は無理でもやってみようと思います。
その上司の「すべき」とうことについては、特に言ってなくて、
それが当たり前の構成だと思っているようでした。
もしかしたらメンバサーバがNTドメインで言うBDCだと思っているかもしれません。
私もその時は、冗長化などについて細かく話してはいませんので、
明日にでも、もう一度説明したいと思います。
「負荷」については、私もそんなに深くは考えていなかったのですが、
DC間の情報のやり取りは、「負荷」を考えなくてはならないほどの
レベルなのでしょうか?サーバーが複数拠点に分かれている場合は、
回線の品質により考慮しないといけないと思いますが、
同一LAN上に設置されている場合は、今まであまり考えていませんでした。
チャブーンです。
ちょっと切り分けた方がいいかもしれません。
1.ドメイン情報が壊れたら直すバックアップからの復旧
2.ドメイン認証を途切れさせないドメインコントローラを複数配置する
2 を満たすためには、ドメインコントローラを複数配置するしかありません。また、1 しか考慮していない場合 "最終バックアップ後" に変更した内容が存在した場合、これに手当てする方法がありません。ドメインコントローラが複数あれば、これにも手当てできますが、"オペミス" で情報を壊してしまった場合 (システムは正常にコレを受け入れます) のデータ復旧には 1 の方法しかないので、バックアップも同じように重要です。
だから、分けて考えた方がいいですよ。
で、本題ですが、ドメインコントローラを複数おくことは MS も推奨ですが、DB サーバやアプリケーションサーバといった "高負荷になる可能性が高いサーバ" はドメインコントローラにしないことが普通です。ドメイン認証やもともとの機能に影響が出る可能性があるからです。また、トラブルが発生したときに問題の切り分けや対応が、恐ろしく大変になるでしょう。
強いていうなら、今回のケースでは "ファイルサーバ" をドメインコントローラにする方法があるでしょうが、普通はもう 1 台サーバを追加して、それをドメインコントローラにすることになるでしょう。
上の要件をふまえて上司の方と話し合うか、よくわからないなら MS の有償サポートにでも、確認をとってみてはどうでしょうか。
http://www.microsoft.com/japan/microsoftservices/support/as.mspx
おはようございます.
障害対策という論点での切り分けはあまり重要とは思えません -> チャブーン様
※数から鑑みて.
Exchange などのように Active Directory が前提となっているものがあればともかく,
client への logon は cache profile が使われるでしょうから
とくに支障はないでしょう.
無論 local profile を無効にしていれば困りますが,この case では
その辺の事情は話を複雑にするだけで「上司さん」を説得しにくくなると思います.
※あくまでも個人的見解ですが.
引用:
みつおさんの書き込み (2006-12-14 01:16) より:
その上司の「すべき」とうことについては、特に言ってなくて、
それが当たり前の構成だと思っているようでした。
もしかしたらメンバサーバがNTドメインで言うBDCだと思っているかもしれません。
私もその時は、冗長化などについて細かく話してはいませんので、
明日にでも、もう一度説明したいと思います。
そうですね,その辺の事実認識が食い違えば
出てくる結論も違ってくるかもしれません.
引用:
「負荷」については、私もそんなに深くは考えていなかったのですが、
DC間の情報のやり取りは、「負荷」を考えなくてはならないほどの
レベルなのでしょうか?サーバーが複数拠点に分かれている場合は、
回線の品質により考慮しないといけないと思いますが、
同一LAN上に設置されている場合は、今まであまり考えていませんでした。
通信上の負荷はむしろあまり考慮する必要はないと思います.
ですが,チャブーン様も指摘されているとおり,
database server はあまりお奨めしません.
負荷の注目点は情報のやり取りだけではなく,認証処理などの多岐にわたります.
これはそもそも Active Directory が複数の技術の
集合体であることに由来するでしょう.
ですから,通信上の負荷だけではなく
処理能力の点での負荷を考慮した方が better ということです.
ということで file server へ Domain controller の機能を
追加することは容認できると考えます.
念のため追記しますが,Hot Imaging はあくまでも
「何かあったときにある時点まで復旧する」ための手段ですから,
チャブーン様の指摘にあるとおり「その機能を絶やさない」ための手段とは
置き換えができません.
よって規模が大きくなれば「Hot Imaging で凌ぐ」という一時の方便は通用しません.
つまりこの方法は「被害の範囲が狭い場合の誤魔化し」であることを
了解しておいてください.
以上,ご参考までに.
DCとメンバサーバについて − Windows Server Insider − @IT
