
*****************************************
歌声DB 創るぞ         (^^♪
音素ファイルの作り方     (^^♪
音素をファイルに切り出す   (^^♪
*****************************************
以下、私の途中経過です    (^^♪
参考例としてイロイロ試してみてください
音素の切り出し方が影響する問題
・ リズム音痴の問題
・ 明瞭度の問題
・ 短い音符の発声がダメ
消えてしまう (かすかな音しか出ない)
* 音素の終わりの切り方は特に問題ありません
波形をみて 10m sec 単位くらいでえいやっと切れば十分
このページでは 問題を起こす
「音素の始まりの切り方」
について記します
録音は行ったとして
「ボクロイド ・プラグインに自分の声を登録する」
のページには
「録音した音の前後についている余分な無音部分を削除します。」
とあっさり書いてあります。
ところがこれが大問題
音の 無/有 だけで音素ファイルを切り出したのでは困ったことに
「さ」の録音波形がこれ
"
>
全体で 「さ」 なんで、
部分を取り出したら発音は
仮名では表せない はずなんだが
書きようが無いので空耳でいく
・ [A] より前から再生すれば、当然 「さ」
・ [A]〜[C] の弱いミジャミヤした所だけ聴くと、「シュ」とか「シ」とかに聞こえる
ささやく時の音に近い
・ [A]〜[C] を切り捨て [C] から後ろを聴くと、 何と 「た」  に聴こえる!!
切り捨て加減で違うオトに聴こえるのは他にもたくさんある
・ [C]〜[D] のツクシの頭みたいなふくらみまで
切り捨てて [D] から聴くと、「あ」 に聴こえる (予想通り)
問題は、[A]〜[C] のミジャミジャした部分
なんと 0分 07秒 860 m sec から 0分 08秒 040 msec の
0.2秒もある!
160 BPM の8分音符の長さ = 187.5 m sec なので
短い音符は、(弱く) シューって言ってる間に終わっちゃって「さ」に聴こえない!!
音が本当に始まった所からファイル化すると、
早い歌や短い音符が歌えない
「ミクミクにしてあげる」がテンポ 160 BPM
160 Beats Per Minute  1分間に 4分音符が 160個
4分音符の長さ = 60 / 160 秒
= 375.0 m sec
8分音符の長さ = 187.5 m sec
16分音符の長さ =  93.8 m sec
「先行発声」というキーワードがあるが、
それをやるにしても 200m sec前出ししたら今度は前の音が無くなっちゃう
頭の子音の一部切り捨てが絶対必要!?
で、どこで切り捨てるか? いろいろやってみたら
切捨て加減が歌声DBの品質に重大な影響を持つ
事が判りました
これで
Rだけ / Lだけ / 両方いっしょ を聞き比べてみてください
「切り出し方による違いの例.mp3」
この
「切り出し方による違いの例.mp3」
は、同じXFファイルを元に音にしたものです
・ 右:制作途中のDB で歌ったwaveを貼り付け
・ 左:TappiRoyd.ver.0.58.01 で歌ったwaveを貼り付け
・ 中央:元XF ファイルをクリップして midiピアノで演奏
右は DB作りかけぇ〜〜! 「ピ」という音は、まだ切り出ししていない音素
波形を示します
「さ」「ざ」「だ」 などで子音の長さが異なる事が見て取れます
"
>
右は、DBを作り始めた初期の音素ファイル、
先頭から聞いた時と明瞭度があまり変わらない を子音を切る基準にして
一音ずつファイルに切り出してはチェックしていた
だから、子音の長さは長めでバラバラ
1m sec単位で決めてた、ゼロクロスも考慮してた
で、判ったこと  リズム音痴 がひどい
子音が長い音素は、リズムから遅れてます
リズム音痴対策を行いました
発音の明瞭度ですが、この時点では
あまりにクリアなんで驚いた!
合成音声だと言う事を割り引いての評価
私の声、元々明瞭度低い!
「合成音声」ってボーカロイド以外もいくつか聴いた事がありますが
共通の欠点は
子音が不明瞭  発音が不明瞭
だから、自作DBも 何言っているか判らない発音を予想していた
だから、vocaLOID じゃなくて tappiROYD
「L」 より 不明瞭な発音である 「R」 を自作DBの名前とした
手前味噌ながら、
「鏡音リン」が登場した頃の
「リン・レン」「メイコ」などの投稿作品と比べると
TappiRoyd の方が明瞭 (当方感性比)
と思ってた
「リズム音痴」対策案
A案) 録音やり直し、子音が短くなるような発声をする
B案) 「先行発声」手法を使う
C案) 子音の切り捨て方を調整する  短く切り詰める、長さは揃える
他にあったらおせえてぇ〜〜
A案) 再録音
実現すれば本質的な改善になる事が予想される
だが、、、、
・ 「子音が短くなるような発声」 て そもそもどうやるの?出来るの?
・ 短くする事が出来たとして、長さのバラツキは残る?
・ 録音って面倒!
再録音はいずれやりたいですが
もっとノウハウを溜めてから
B案) 先行発声
製品の某カロイドには
自動的に先行発声する機能が有るとのうわさ、、、
UTAU は、
リズム音痴の 「手動調教による補正」 を推奨、、、
・ プログラムが自動的に先行発声してくれると楽だと予想されます
副作用は何かあるんでしょうか
それでも
自動先行発声が出来るとしても、手動で調整して
リズムをズラす 補正量のデータをとる必要がある
最低1回は手動で調教する必要あり
・ リズム音痴補正をきっちり調教すれば (出来れば) そりゃ完璧
では、「ボクロイド・プラグイン」を使うときはどうやって調教する?
音楽研究所様が推奨の「カラオケ用 MIDIファイルを作る」方法・ツール類を見た所では、
先行発声の調整方法は見あたりませんでした
それもあって、私は
UTAU をぼかろエディタとして使う
事にしていた、UTAU エディタなら先行発声を調教できる
ただ、「出来る」といっても、10m sec の単位での補正を繰り返す事になる
100m sec リズムずれたら誰でも判る
こりゃ大変な手間だ!
C案) 子音の切り捨て方を調整
!そもそも「歌っただけでリズム音痴にならない」 そんな歌声DB なら問題解決だ!
トライしてみた
TappiRoyd.ver.0.58.01 で採用した方法を紹介
副作用がありまして、この方法だと
発音の明瞭後が落ちます
成果のホドは
「切り出し方による違いの例.mp3」
や、これで判断してください
リズム (音符の位置) は 五線譜に書く符割りの位置から動いていません
(調整するテクニック無い!)
エフェクトで声色は変わっています
音素の切り出しを行っている DAW の画面がこれ (一部分)
以下、私がやった手順を記します
1音素1クリップに荒く分割してから、
ア行,カ行,サ行,タ行,,,を縦に整列して
前後を微調整した
・ サ行は説明用に前を見せている、
青い線より前は音素ファイルからは捨てています
"
>
Tracktion (私が使ってるDAW ) には、waveファイルを作る時に
選んだクリップだけをファイルに書き出す
機能が有ります、これを使います
・ 1音素 1クリップに切り分ける
始まりとなる録音データ (録音クリップ) は、
たくさんの音素がつながってますが
まずこれを1音素1クリップに切り分けます
とりあえず無音の部分で大雑把に切る
取り直しが有る場合は、最良?の音を選びます
・ アイウエオ ⇔ カ行,サ行,タ行,,,で縦横に整列します
「あかさたな・・・」「いきしちに・・・」の順で録音したので
切るだけで子音の音は順に並んでるはずです
タイムラインを移動して、同じ子音の音が縦に並ぶよう整理します
・ クリップに名前を付けました
・ 音階 を D#2-063 とか A2-069 とか書く
・ 読み を _sa, とか _ta とかのローマ字で書く
としてますので、配置方法は図からわかりますね
このクリップがどんな音か?名前で判るようになりました
Tracktion は、クリップを waveファイルに書き出す時、
クリップ名がファイル名になるので、一回名前付けすれば
後は入力不要となってラク
* 私のDBは、音素ファイルのファイル名が
音楽研究所様の標準のファイル名とは異なっています
ファイル名については
こちら
・ 音素の終わりを先に切っておきます
クリップの終わりを調整します
音素の終わりは波形をみて、いい加減に荒く切ればおk!
分解能は 10m sec程度、拡大表示を見てやればよいので簡単
再生してみても、終わりのいい加減さは問題になりません
・ タイムライン上で 「母音の位置」 を揃える
ここは丁寧に!!
サ行の拡大がこの図、 [C] の黄線部分に注目!!
"
>
サ行の場合、[C] から聴くと「タ」行に聞こえるので、
[C] は母音の開始位置ではないですが
ではどこで子音が終わるのか?となると波形を見ても判らない!
ナ行は、子音/母音 の境が 波形を見るだけでも判り易い
プッと波形が広がる [C] の所を (母音に代わる) 基準位置とします
クリップを時間方向(= 水平方向)に移動して、
[C] の位置がタイムラインで同じ時刻になるように精確に揃えます
サ行は、[C] の波形の変化が明確ですが、
他の子音 (マ行とか) でははっきりしないものも有るので、
何度も聴いて基準位置を決めましょう
[C] を小節の線に合わせるのが、なにかと楽なようです
Tracktion の時間分解能は最良で 1m secですので、
拡大表示して隣り合う1m secの近い側に揃えました
・ [A] 〜 [C] の途中のどこかの [B]点を、音素の先頭とする
ここは納得いくまで繰り返す!!
[C] を基準に母音を揃えましたので、
後は、[B] ⇔ [C] を一定にして切り出せば
リズム音痴解消して出来上がり〜〜
・・・ だといいんですが、
[B]点 の選び方で発声の明瞭度が変わってくるので闇雲には切れない
「明瞭度が高い」で切った時の問題を解決するためだから
今度は「明瞭度は犠牲にする」でやってみます
[B] ⇔ [C] を短くしながら何度も聴いて、
ここなら我慢できると言う限界を探します
「全部同じ」もありですが、最初にやってみた ver.0.58.01 ではとりあえず、
カ・サ・タ・・・のそれぞれの行で
異なった長さになっています
1行揃えるので精一杯だったのでその状態でテスト
[B] ⇔ [C] には、上限を決めます、60m sec にしました
今の目的は、リズム音痴の解消です、
目的の音に聞こえない物も出てきますが、明瞭度は犠牲にします
以上で、音素が切り出されました
この方法は、明瞭度をちょっと犠牲にしてリズム音痴の解消を狙ったものです
それと、作業は早いです
「耳のあるロボットの唄」が成果です
明瞭度 / リズム音痴 とも、まあまあであると妥協しました
でも、明瞭度 / リズム音痴 とも、もっとよく出来ないものでしょうか?
明瞭度 / リズム音痴 を両立して向上する手法は残された研究課題です
では次は
音量の調整
です
ボクロイドで遊ぼう 歌声DB 創るぞ 音素ファイルの作り方
