  
　しかしながら、音楽には、クラシック、ポップ、ロックミュージック等のように様々なジャンルが存在しており、各ジャンルに応じてオーディオ信号（音源）における低域または高域のレベルが予め強調されているものが存在する。このように予め所定帯域のレベルが強調されたオーディオ信号に対してラウドネス補正を施すと、低域や高域などが必要以上に強調されてしまう場合が生じうる。
　低域や高域が必要以上に強調されたオーディオ信号を聴取者が聴取すると、聴感上音楽が聴きづらくなってしまう場合があり、また、スピーカーから歪音が発生して、音質が激しく劣化してしまうおそれがあるという問題があった。
　また、聴覚感度は加齢と共に変化し、特に高齢者では、高域のダイナミックレンジが狭くなってしまう傾向がある。このため、低域や高域のレベルが大きい場合には、音楽が耳障りに聞こえてしまう場合があり、一方でレベルが小さい場合には、音楽が聴き取り難くなってしまう場合があるという問題があった。
　本発明は上記問題に鑑みてなされたものであり、音源の特性に依存することなく、聴取者の感覚にあった音響処理をオーディオ信号に付加することができ、聴感上良好な音質でオーディオ信号の再生を行うことが可能な音響処理装置を提供することを課題とする。
　上記課題を解決するために、本発明に係る音響処理装置は、オーディオ信号の信号レベルに基づいて所定の聴覚特性に応じたゲイン補正量の算出を行うゲイン計算部と、前記オーディオ信号の周波数分析を行う周波数分析部と、前記周波数分析部により分析された前記オーディオ信号の周波数特性に基づいて、前記オーディオ信号に対するゲインオフセット量の算出を行うオフセットゲイン計算部と、前記ゲイン計算部により算出されたゲイン補正量と前記オフセットゲイン計算部により算出されたゲインオフセット量とに基づいて、前記オーディオ信号に付加する音響信号を生成する音響信号生成部と、該音響信号生成部により生成された音響信号を前記オーディオ信号に付加する音響付加部と備えることを特徴とする。
　本発明に係る音響処理装置によれば、オーディオ信号の周波数特性に基づいて算出されたゲインオフセット量と、聴覚特性に応じて算出されたゲイン補正量とに基づいて、オーディオ信号に音響処理を付加することができる。このため、オーディオ信号の周波数特性に応じた最適な音響処理を行うことができると共に、聴感上良好な音質となるようにオーディオ信号に対して音響処理を行うことが可能となる。
　また、上述した音響処理装置において、前記ゲイン計算部は、前記オーディオ信号を複数の帯域に分割して該当する帯域毎に前記ゲイン補正量を算出し、前記オフセットゲイン計算部は、前記ゲイン計算部において分割された前記帯域に対応する帯域毎に前記ゲインオフセット量を算出し、前記音響信号生成部は、前記ゲイン計算部により算出された帯域毎のゲイン補正量と前記オフセットゲイン計算部により算出された帯域毎のゲインオフセット量とに基づいて、前記オーディオ信号に付加する音響信号を前記帯域毎に生成し、前記音響付加部は、前記音響信号生成部により生成された帯域毎の音響信号を対応する帯域に応じて前記オーディオ信号に付加するものであってもよい。
　このように、帯域毎に算出されたゲイン補正量と、ゲイン補正量に対応する帯域毎に算出されたゲインオフセット量とに基づいてオーディオ信号に対する音響処理を帯域毎に行うことにより、特定の帯域の信号レベルが強調されている場合や低減されている場合であっても、該当する帯域毎に音響処理を施すことが可能となる。
　例えば、音源のジャンルに応じて、高音域や低音域が予め強調されている場合も存在する。このような場合において、高音域や低音域にさらにラウドネス補正を行ってしまうと、出力音が歪音となってしまったり、音質が劣化してしまったり、聴感上聴きにくい音になってしまう場合がある。このような場合においては、オーディオ信号の全域ではなく、該当する高音域や低音域の音量レベル等を低減させることによって全体的に音響特性を改善することが可能となる。
　また、上述した音響処理装置において、前記周波数分析部は、オーディオ信号の周波数領域における信号レベル変化に基づいて、前記分割された帯域毎の信号レベル状態を求め、前記オフセットゲイン計算部は、前記周波数分析部により求められた帯域毎の信号レベル状態に基づいて、前記帯域に対応する前記オーディオ信号のゲインオフセット量の算出を行うものであってもよい。
　このように、周波数分析部において帯域毎に求められた信号レベル状態に基づいてオフセットゲイン計算部が、帯域毎にゲインオフセット量を算出することにより、オーディオ信号の周波数特性に応じた音響処理をオーディオ信号に対して帯域毎に施すことが可能となる。
　例えば、周波数分析部が、低域における信号レベルを全周波数の信号レベルに対する相対的な信号レベル状態に基づいて判断することにより、全周波数の状態に比べて低域のみが極度に強調されている等の状況を判断することができる。このように周波数毎の信号レベル状態に応じてゲインオフセット量の算出を行うことによって、局所的な信号レベルの増大や低減を是正するような補正を行うことが可能となる。
　また、上記音響処理装置において、前記オフセットゲイン計算部は、所定帯域における前記オーディオ信号の信号レベルが全周波数に対して相対的に高い状態となっていると前記周波数分析部により求められた場合に、当該所定帯域における信号レベルを低減させることが可能なゲインオフセット量を算出するものであってもよい。
　このように、オフセットゲイン計算部がオーディオ信号の周波数特性に応じた音響処理を行う場合において、オフセットゲイン計算部が、全周波数に対して相対的に高い状態となっている帯域の信号レベルを低減させることが可能なゲインオフセット量を算出することによって、オーディオ信号において局所的に強調されている帯域の信号レベルを低減させることができ、結果としてオーディオ信号の全体的なバランスを最適にするような補正処理を行うことが可能となる。特に、音楽のジャンルなどに応じて、低域や高域が強調されたオーディオ信号が多く存在するため、このように低域や高域が必要以上に強調される場合には、その強調部分を低減させることにより、全体としてオーディオ信号の最適化を図ることが可能となる。
　一方で、上記音響処理装置において、前記オフセットゲイン計算部は、所定帯域における前記オーディオ信号の信号レベルが全周波数に対して相対的に低い状態となっていると前記周波数分析部により求められた場合に、当該所定帯域における信号レベルを増大させることが可能なゲインオフセット量を算出するものであってもよい。
　このように、オフセットゲイン計算部がオーディオ信号の周波数特性に応じた音響処理を行う場合において、オフセットゲイン計算部が、全周波数に対して相対的に低い状態となっている帯域の信号レベルを増大させることが可能なゲインオフセット量を算出することによって、オーディオ信号において局所的に低減されている帯域の信号レベルを増大させることが可能となる。このため、オーディオ信号の全体的なバランスを最適にするような補正処理を行うことが可能となる。
　また、上述した音響処理装置において、前記ゲイン計算部は、前記オーディオ信号の信号レベルが高い場合に、前記オーディオ信号における信号レベルを低減させることが可能な前記ゲイン補正量を算出し、前記オーディオ信号の信号レベルが低い場合に、前記オーディオ信号における信号レベルを増大させることが可能な前記ゲイン補正量を算出するものであってもよい。
　上述したようにゲイン計算部は、オーディオ信号の信号レベルに基づいて所定の聴覚特性に応じたゲイン補正量の算出を行うが、オーディオ信号の信号レベルが高い場合において、オーディオ信号の信号レベルを低減させるようにゲイン補正量の算出を行うことにより、聴感上聴きにくくなるほどオーディオ信号のゲインが強調される場合であっても、効果的にゲインの低減を行うことが可能となり、聴感上最適なレベルとなるように音響処理を施すことが可能となる。
　また、オーディオ信号の信号レベルが低い場合において、オーディオ信号の信号レベルを増大させるようにゲイン補正量の算出を行うことにより、聴感上聴き取ることが困難になるほどオーディオ信号のゲインが低減される場合であっても、効果的にゲインの増大を行うことが可能となり、聴感上最適なレベルとなるように音響処理を施すことが可能となる。
　さらに、上述した音響処理装置において、前記ゲイン計算部は、前記ゲイン補正量を算出するために用いられる複数の補正量算出フィルタを有し、当該複数の補正量算出フィルタのうち聴取者により選択された補正量算出フィルタに基づいて前記補正量の算出を行うものであってもよい。
　上述したようにゲイン計算部は、オーディオ信号の信号レベルに基づいて所定の聴覚特性に応じたゲイン補正量の算出を行うが、聴取者毎に聴覚上の好みはそれぞれ異なる場合がある。従って、補正量算出フィルタを複数設けて、聴取者の選択に応じて適用する補正量算出フィルタを決定することによって、聴取者毎に異なる嗜好に対応した音響処理をオーディオ信号に施すことが可能となる。
　さらに、上述した音響処理装置において、前記複数の補正量算出フィルタは、加齢に応じて低下する聴取者の聴覚能力を考慮して、聴取可能な信号レベルを段階的に変化させた複数の算出フィルタにより構成されるものであってもよい。
　このように、補正量算出フィルタを、加齢に応じて低下する聴取者の聴覚能力を考慮して、聴取可能な信号レベルを段階的に変化させた複数の算出フィルタにより構成させることにより、年齢毎に異なる聴覚能力に対応させて音響処理を行うことが可能となり、耳障りに聞こえるオーディオ信号や聴こえにくく感じるオーディオ信号を、聴取者にとって良好な音質となるように補正することが可能となる。
　本発明に係る音響処理装置によれば、オーディオ信号の周波数特性に基づいて算出されたゲインオフセット量と、聴覚特性に応じて算出されたゲイン補正量とに基づいて、オーディオ信号に音響処理を付加することができる。このため、オーディオ信号の周波数特性に応じた最適な音響処理を行うことができると共に、聴感上良好な音質となるようにオーディオ信号に対して音響処理を行うことが可能となる。
本実施の形態に係る音響処理装置の概略構成を示したブロック図である。 本実施の形態に係る周波数分析部の概略構成を示したブロック図である。 本実施の形態に係る周波数分析部においてＦＦＴ処理部による平均化処理およびデシベル化処理が行われた後の信号と、最大値ホールドされた信号と、最大値ホールドされた信号に基づいて求められた１次の回帰分析を示した図であって、（ａ）は、低域の信号レベルが小さい音源に関する状態を示した図であり、（ｂ）は、低域の信号レベルが大きい音源に関する状態を示した図である。 本実施の形態に係る周波数分析部においてＦＦＴ処理部による平均化処理およびデシベル化処理が行われた後の信号と、最大値ホールドされた信号と、最大値ホールドされた信号に基づいて求められた１次の回帰分析を示した図であって、（ａ）は、高域の信号レベルが小さい音源に関する状態を示した図であり、（ｂ）は、高域の信号レベルが大きい音源に関する状態を示した図である。 図３（ａ）（ｂ）および図４（ａ）（ｂ）の図から求められる、周波数の傾きと、最大低域レベル値と、切片の値と、差分量とを対比して示した表である。 本実施の形態に係るオフセットゲイン計算部の概略構成を示したブロック図である。 （ａ）は、本実施の形態に係るオフセットゲイン計算部の低域オフセットゲイン計算部において差分量に基づいて設定される低域のゲインオフセット量の関係を示した図であり、（ｂ）は、本実施の形態に係るオフセットゲイン計算部の高域オフセットゲイン計算部において周波数の傾きに基づいて設定される高域のゲインオフセット量の関係を示した図である。 本実施の形態に係るゲイン計算部の概略構成を示したブロック図である。 （ａ）は、本実施の形態に係るゲイン計算部の低域ルックアップテーブル部において制御信号（入力信号）に基づいて求められる低域の聴覚補正量の関係を示した図であり、（ｂ）は、本実施の形態に係るゲイン計算部の高域ルックアップテーブル部において制御信号（入力信号）に基づいて求められる高域の聴覚補正量の関係を示した図である。 本実施の形態に係るゲイン設定部の概略構成を示したブロック図である。 本実施の形態に係るラウドネスフィルタ部の概略構成を示したブロック図である。 本実施の形態に係るラウドネスフィルタ部の特性を、オフセットゲイン計算部において設定されるゲインオフセット量およびゲイン計算部において用いられるフィルタの種類に応じて示した図である。 本実施の形態に係るラウドネスフィルタ部の特性を、オフセットゲイン計算部において設定されるゲインオフセット量およびゲイン計算部において用いられるフィルタの種類に応じて示した図である。 
　以下、本発明に係る音響処理装置について、図面を用いて詳細に説明を行う。
　なお、本発明に係る音響処理装置の構成を採用するオーディオ装置は、家庭に設置されるオーディオ装置であっても、また、携帯用オーディオ機器であってもよいが、車載用のオーディオ装置に用いることが好適であるといえる。
　車室内は、車の駆動音や走行ノイズなどにより様々な騒音が発生する。このような環境において音楽の再生を行う車載用オーディオ装置では、騒音等により聴取される音楽が阻害されないように、低域や高域のレベルを強調するためのイコライザー機能等を備えるものが多く存在する。特に、車室が閉鎖された空間であることから、このようにオーディオ信号の低域や高域を強調することにより、音楽の臨場感を高めることが可能となる。
　しかしながら、オーディオ信号は、その音楽のジャンルなどに応じて予め低域や高域の強調が行われているものもあるため、予め低域や高域が強調されたオーディオ信号に対して、イコライザー機能等によりさらに低域や高域が強調されてしまう場合がある。本発明に係る音響処理装置を車載用オーディオ装置に用いる場合には、強調された低域や高域のゲインをさらに強調してしまうことを防止し、音源の特性に依存することなく、聴感上良好な音質でオーディオ信号の再生を行うことが可能となる。
　図１は、音響処理装置の概略構成を示したブロック図である。音響処理装置１には、図示を省略した音源よりオーディオ信号（音響信号）が入力される。そして、音響処理装置１の各機能部により所定の音響処理の行われたオーディオ信号は、図示を省略するスピーカー等の出力装置へと出力され、聴取者において聴取可能な状態となる。
　音響処理装置１は、図１に示すように、音量設定部２と、周波数分析部３と、遅延部４と、ゲイン計算部５と、オフセットゲイン計算部６と、ゲイン設定部（音響信号生成部）７と、ラウドネスフィルタ部（音響付加部）８とを有している。
　［音量設定部および遅延部］
　音量設定部２は、音源の信号レベルを設定・変更するための調節部としての役割を有しており、例えば、一般的なオーディオ機器における音量調節ボリュームに該当するものである。また、遅延部４は、ゲイン計算部５などにおける音響処理により生ずる遅延を補正するために設けられている。
　［周波数分析部］
　周波数分析部３は、後述するように、最大値ホールドされたオーディオ信号における回帰分析を行い、この回帰分析の結果から、オーディオ信号の周波数の傾きと、切片の値と、低域の信号レベルにおける最大値とを求める役割を有している。
　周波数分析部３は、図２に示すように、ＦＦＴ処理部１１と、帯域判定部１２と、回帰分析部１３とを有している。
　ＦＦＴ処理部１１は、音源より入力されたオーディオ信号を所定の間隔で高速フーリエ変換（ＦＦＴ演算）して周波数領域に変換する処理を行う。また、ＦＦＴ処理部１１では、周波数変換されたオーディオ信号の平均化処理およびデシベル化処理を行った後に、変換されたオーディオ信号における信号レベルの最大値を、ＦＦＴサンプル毎にホールド（最大値ホールド）する処理を行う。
　帯域判定部１２では、所定のスレッショルド（閾値）に基づいてオーディオ信号の帯域幅の判定を行う。例えば、スレッショルドを－８０ｄＢに設定することにより、一般的な聴取者において聴取可能となる帯域幅を処理対象とすることができる。
　回帰分析部１３では、ＦＦＴ処理部１１により最大値ホールドされたオーディオ信号（ＦＦＴ信号）に対して１次の回帰分析を行う。回帰分析部１３における回帰分析の範囲は、予め設定した周波数（例えば、５００Ｈｚ）を下限の周波数とし、この下限の周波数に対して帯域判定部１２で判定した帯域幅を上限の周波数とする。回帰分析部１３では、この周波数の範囲において、オーディオ信号の信号レベルとＦＦＴポイントとの対応関係を示す一次近似直線を、最大値ホールドされたオーディオ信号に基づいて算出する。
　そして、回帰分析部１３では、求められた一次近似直線に基づいて、最大値ホールドされたオーディオ信号における周波数（一次近似直線）の傾きと、切片（ＦＦＴポイントが０の場合における信号レベルの値）とを求める。さらに、回帰分析部１３は、上述した下限の周波数よりも低い周波数（下限の周波数に対応するＦＦＴポイントよりも低いＦＦＴポイント）であって、ＦＦＴ処理部１１により最大値ホールドされた信号のうち最大となる信号レベル（以下、最大低域レベル値という）を求める。
　図３（ａ）（ｂ）および図４（ａ）（ｂ）は、それぞれ、ＦＦＴ処理部１１において平均化処理およびデシベル化処理が行われた後の信号と、最大値ホールドされた信号と、最大値ホールドされた信号に基づいて求められた１次の回帰分析を示した図である。なお、図３（ａ）は、低域の信号レベルが小さい音源に関する状態を示した図であり、図３（ｂ）は、低域の信号レベルが大きい音源に関する状態を示した図であり、図４（ａ）は、高域の信号レベルが小さい音源に関する状態を示した図であり、図４（ｂ）は、高域の信号レベルが大きい音源に関する状態を示した図である。
　また、図３（ａ）（ｂ）および図４（ａ）（ｂ）において、ＦＦＴ処理部１１は、オーディオ信号のサンプリング速度として４８ｋＨｚ、ＦＦＴサンプル数（ＦＦＴ長）として２５６ポイント（サンプル）、平均化処理における平均化数として４フレーム（１フレームは、ＦＦＴ長の半分の１２８ポイント）、最大値ホールドでは最大で１６フレームを採用している。また、回帰分析の対象となる範囲の下限の周波数として５００Ｈｚ（ＦＦＴポイントで、３ポイントに該当）が予め設定されており、回帰分析部１３では、この周波数における最大値ホールドされた信号の最大値として、３サンプル（ＦＦＴポイントが０～３）の検出が行われている。
　図５に示すように、図３（ａ）に示した低域の信号レベルが小さい音源では、周波数の傾きとして－０．４１、最大低域レベル値として－１１、切片の値として－２２が求められる。また、図３（ｂ）に示した低域の信号レベルが大きい音源では、周波数の傾きとして－０．３１、最大低域レベル値として－１、切片の値として－３７が求められる。さらに、図４（ａ）に示した高域の信号レベルが小さい音源では、周波数の傾きとして－０．４１、最大低域レベル値として－１４、切片の値として－３０が求められる。また、図４（ｂ）に示した高域の信号レベルが大きい音源では、周波数の傾きとして－０．０９、最大低域レベル値として－１７、切片の値として－３１が求められる。
［オフセットゲイン計算部］
　オフセットゲイン計算部６は、オーディオ信号の低域における信号レベルおよび高域における信号レベルに応じて最適なゲインオフセット量を算出する役割を有している。
　オフセットゲイン計算部６は、図６に示すように、低域オフセットゲイン計算部２１と、高域オフセットゲイン計算部２２と、第１スムージングフィルタ部２３と、第２スムージングフィルタ部２４とを有している。
　低域オフセットゲイン計算部２１は、周波数分析部３において求められた最大低域レベル値と、切片の値とに基づいて、信号レベルの差分量を求める。図５に示す表には、図３（ａ）（ｂ）および図４（ａ）（ｂ）に示した音源において、各音源の最大低域レベル値から切片の値を減算した差分量が示されており、図３（ａ）の場合の差分量は１１、図３（ｂ）の場合の差分量は３６、図４（ａ）の場合の差分量は１６、図４（ｂ）の場合の差分量は１４となる。
　そして、低域オフセットゲイン計算部２１は、求められた差分量に基づいて、低域周波数におけるゲインオフセット量の設定を行う。
　図７（ａ）は、低域オフセットゲイン計算部２１において、差分量に基づいて設定される低域のゲインオフセット量の関係を示した図である。図７（ａ）に示すように、差分量の信号レベルが大きくなり、オーディオ信号の全周波数に対して低域の信号レベルが大きくなるに従って、設定される低域のゲインオフセット量は小さくなるように設定される。
　このように、音源における低域の信号レベルが予め大きい信号レベルとなっている場合において、積極的に低域のゲインオフセット量を小さくすることにより、後述するゲイン設定部７において加算処理がなされる低域の信号レベルを低くすることが可能となる。一方で、音源における低域の信号レベルが予め小さい信号レベルとなっている場合には、積極的に低域のゲインオフセット量を大きくすることにより、後述するゲイン設定部７において加算処理がなされる低域の信号レベルを高く調整することが可能となる。
　ただし、差分量が３０ｄＢ以上である場合には、低域のゲインオフセット量が－６ｄＢに設定され、差分が－１０ｄＢ以下である場合には、低域のゲインオフセット量が６ｄＢに設定される。これは、差分量の値に対応させて低域のゲインオフセット量をどこまでも増加または減少させた値を設定すると、かえって低域のオーディオ信号が強調あるいは低減され過ぎてしまい、好適な音響処理を行うことができなくなるためである。
　高域オフセットゲイン計算部２２は、周波数分析部３において求められた周波数の傾きに基づいて、高域におけるゲインオフセット量の設定を行う。
　図７（ｂ）は、高域オフセットゲイン計算部２２において、周波数の傾きと高域のゲインオフセット量との関係を示した図である。図７（ｂ）に示すように、周波数の傾きが小さく（傾斜が０以下）なってオーディオ信号の高音域の信号レベルが小さくなるに従って、設定される高域のゲインオフセット量は大きくなるように設定される。
　このように、音源における高域の信号レベルが予め小さい信号レベルとなっている場合において、積極的に高域のゲインオフセット量を大きくすることにより、後述するゲイン設定部７において加算処理がなされる高域の信号レベルを高く調整することが可能となる。一方で、音源における高域の信号レベルが予め大きい信号レベルとなっている場合には、積極的に高域のゲインオフセット量を小さくすることにより、後述するゲイン設定部７において加算処理がなされる高域の信号レベルを低く調整することが可能となる。
　ただし、傾きが０以上である場合には、高域のゲインオフセット量が－６ｄＢに設定され、傾きが－１以下である場合には、高域のゲインオフセット量が６ｄＢに設定される。これは、傾きに対応させて高域のゲインオフセット量をどこまでも増加または減少させた値に設定すると、かえって高域のオーディオ信号が強調あるいは低減され過ぎてしまい、好適な音響処理を行うことができなくなるためである。
　第１スムージングフィルタ部２３および第２スムージングフィルタ部２４は、オーディオ信号の周波数特性の変化に応じて変動する低域および高域のゲインオフセット量をなめらかにするためにフィルタリング処理を行う。
［ゲイン計算部］
　ゲイン計算部５は、聴取者の聴覚特性（聴取者の年齢や好みなど）に応じてオーディオ信号に対して聴覚補正を施す役割を有している。
　ゲイン計算部５は、図８に示すように、最大値検出およびホールド部３１と、低域アタックリリースフィルタ部３２と、高域アタックリリースフィルタ部３３と、低域ルックアップテーブル部３４と、高域ルックアップテーブル部３５とを有している。
　最大値検出およびホールド部３１は、音量設定部２より入力されたオーディオ信号の絶対値を算出する。この絶対値の算出により、正負に値が変化するオーディオ信号を正の値のみにすることが可能となる。そして、最大値検出およびホールド部３１は、算出された値の所定時間毎の最大値を検出し、検出された最大値を所定時間ホールドすることによって、制御信号として出力可能な状態にする。
　低域アタックリリースフィルタ部３２および高域アタックリリースフィルタ部３３は、最大値検出およびホールド部３１より制御信号を取得して、予め設定されたアタック時間とリリース時間とに応じた応答速度になるように、制御信号に対してフィルタリング処理を行って制御信号を平滑化する。
　低域ルックアップテーブル部３４は、低域アタックリリースフィルタ部３２により平滑化された制御信号（入力信号）に対するレベル変換を、低域フィルタ（補正量算出フィルタ）を用いて実行して、信号レベルに対する低域ゲインの補正量を低域の聴覚補正量として設定する。また、同様に、高域ルックアップテーブル部３５は、高域アタックリリースフィルタ部３３により平滑化された制御信号に対するレベル変換を、高域フィルタ（補正量算出フィルタ）を用いて実行して、信号レベルに対する高域ゲインの補正量を高域の聴覚補正量として設定する。ここで、低域ルックアップテーブル部３４において用いられる低域フィルタ、および、高域ルックアップテーブル部３５において用いられる高域フィルタは、聴覚特性に応じて複数用意され、聴取者の年齢や好みに応じて任意に選択することができるように設定されている。
　図９（ａ）は、低域ルックアップテーブル部３４における低域の聴覚補正量を示した図であり、聴取者の年齢に応じて変化する聴覚特性に対応させた３種類の低域フィルタ（年齢Ａ用フィルタ、年齢Ｂ用フィルタおよび年齢Ｃ用フィルタ）を用いて求められる補正量が示されている。
　図９（ａ）に示すように、低域ルックアップテーブル部３４における低域の聴覚補正量は、年齢Ａから年齢Ｃになるに従って、つまり年齢が増加するに従って、入力信号の信号レベルに対する低域の聴覚補正量が増大する構成となっている。このため年齢に応じて、低域のダイナミックレンジにおける圧縮率が大きくなる。一般的に、年齢が上がるに従って低い周波数を聴く能力が衰えるため、年齢に応じて低域の信号レベルの補正量を増大させて低域のダイナミックレンジの圧縮率を上げることによって、聴覚特性を向上させることが可能となる。
　なお、図９（ａ）において、年齢Ａの低域の聴覚補正量の上限を２０ｄＢ、年齢Ｂの低域の聴覚補正量の上限を２２ｄＢ、年齢Ｃの低域の聴覚補正量の上限を２４ｄＢに設定している。このように上限を設定することにより、信号レベルに応じて設定される低域の聴覚補正量がどこまでも増大してしまって、適切な低域の聴覚補正量を超えてしまうことを防止することが可能となる。
　また、図９（ｂ）は、高域ルックアップテーブル部３５における高域の聴覚補正量を示した図であり、図９（ａ）と同様に、３種類の高域フィルタ（年齢Ａ用フィルタ、年齢Ｂ用フィルタおよび年齢Ｃ用フィルタ）を用いて求められる補正量が示されている。
　図９（ｂ）に示すように、高域ルックアップテーブル部３５における高域の聴覚補正量は、年齢Ａから年齢Ｃになるに従って、つまり年齢が増加するに従って、入力信号の信号レベルに対する高域の聴覚補正量が増大する構成となっている。このため年齢に応じて、高域のダイナミックレンジにおける圧縮率が大きくなる。一般的に、年齢が上がるにしたがって高い周波数を聴く能力が衰えるため、年齢に応じて高域の信号レベルの補正量を増大させて高域のダイナミックレンジにおける圧縮率を上げることによって、聴覚特性を向上させることが可能となる。
　なお、図９（ｂ）においても、年齢Ａの高域の聴覚補正量の上限を１８ｄＢ、年齢Ｂの高域の聴覚補正量の上限を２２ｄＢ、年齢Ｃの高域の聴覚補正量の上限を２６ｄＢに設定している。このように上限を設定することにより、信号レベルに応じて設定される高域の聴覚補正量がどこまでも増大してしまい、適切な高域の聴覚補正量を超えてしまうことを防止することが可能となる。
［ゲイン設定部］
　ゲイン設定部７は、ゲイン計算部５において聴覚補正が行われた信号と、オフセットゲイン計算部６により低域および高域のオフセットゲイン処理が行われた信号とを加算（合成）する役割を有している。
　ゲイン設定部７は、図１０に示すように、第１加算部４１と、第２加算部４２と、低域レベル変換部４３と、高域レベル変換部４４とを有している。
　第１加算部４１は、ゲイン計算部５の低域ルックアップテーブル部３４により低域の聴覚補正量の設定が行われた第１低域ゲインと、オフセットゲイン計算部６の第１スムージングフィルタ部２３によってフィルタリング処理が行われた低域オフセットゲインとの加算処理を行う。この加算処理により、音源のオーディオ信号の周波数特性と聴覚特性とに基づいて設定される低域用の制御信号（音響信号）を生成することが可能となる。第１加算部４１において加算処理が行われた制御信号は、低域レベル変換部４３へ出力される。
　また、第２加算部４２は、ゲイン計算部５の高域ルックアップテーブル部３５により高域の聴覚補正量の設定が行われた第１高域ゲインと、オフセットゲイン計算部６の第２スムージングフィルタ部２４によってフィルタリング処理が行われた高域オフセットゲインとの加算処理を行う。この加算処理により、聴覚特性と音源のオーディオ信号の周波数特性とに基づいて設定される高域用の制御信号（音響信号）を生成することが可能となる。第２加算部４２において加算処理が行われた制御信号は、高域レベル変換部４４へ出力される。
　低域レベル変換部４３は、ラウドネスフィルタ部８の構成に応じて低域ゲインが所定のゲインになるように調整を行う役割を有しており、第１加算部４１より入力された制御信号をデシベルからリニアへと変換したり２分配した後に、第２低域ゲインとしてラウドネスフィルタ部８へ出力する。
また、同様に、高域レベル変換部４４は、ラウドネスフィルタ部８の構成に応じて高域ゲインが所定のゲインになるように調整を行う役割を有しており、第２加算部４２より入力された制御信号をデシベルからリニアへと変換したり２分配した後に、第２高域ゲインとしてラウドネスフィルタ部８へ出力する。
［ラウドネスフィルタ部］
　ラウドネスフィルタ部８は、音源のオーディオ信号の低域および高域に対して、オーディオ信号の周波数特性と聴取者の聴覚特性とに応じた補正を行う（音響効果を付加する）役割を有している。
　ラウドネスフィルタ部８は、図１１に示すように、カスケード接続された第１ラウドネスフィルタ部５１と第２ラウドネスフィルタ部６１とを備えており、それぞれのラウドネスフィルタ部５１、６１は、ＬＰＦ部５３、６３と、ＨＰＦ部５４、６４と、第１乗算部５５、６５と、第２乗算部５６、６６と、加算部５７、６７とを有している。
　遅延部４を介して第１ラウドネスフィルタ部５１に入力されたオーディオ信号は、ＬＰＦ部５３およびＨＰＦ部５４により帯域毎に分割される。ここで、ＬＰＦ部５３は、１次のＩＩＲ（Infinitempulseesponse）フィルタ型の低域通過フィルタであり、低域のオーディオ信号のみを第１乗算部５５に通過させる機能を有している。また、ＨＰＦ部５４は、１次のＩＩＲフィルタ型の高域通過フィルタであり、高域のオーディオ信号のみを第２乗算部５６に通過させる機能を有している。
　ＬＰＦ部５３により第１乗算部５５に案内されたオーディオ信号は、第１乗算部５５において、ゲイン設定部７より入力される第２低域ゲインと乗算処理されて、加算部５７へ出力される。この乗算処理により、音源より入力されるオーディオ信号の低域部分に対して、聴覚補正処理とオフセットゲイン処理とを施すことが可能となる。
　また、ＨＰＦ部５４により第２乗算部５６に案内されたオーディオ信号は、第２乗算部５６においてゲイン設定部７より入力される第２高域ゲインと乗算処理されて、加算部５７に出力される。この乗算処理においても、音源より入力されるオーディオ信号の高域部分に対して、聴覚補正処理とオフセットゲイン処理とを施すことが可能となる。
　加算部５７では、聴覚補正処理とオフセットゲイン処理とが施された低域および高域のオーディオ信号と、全域のオーディオ信号との加算処理が行われる。さらに、加算処理が行われたオーディオ信号に対して、第２ラウドネスフィルタ部６１のＬＰＦ部６３と、ＨＰＦ部６４と、第１乗算部６５と、第２乗算部６６と、加算部６７により同様の処理が施された後に、図示を省略するスピーカーなどの出力装置にオーディオ信号が出力される。
　このように、ラウドネスフィルタ部８がカスケード接続される第１ラウドネスフィルタ部５１と第２ラウドネスフィルタ部６１とにより構成され、第１ラウドネスフィルタ部５１において、オーディオ信号の周波数特性と聴取者の聴覚特性とに応じて低域及び高域が補正された信号に対して、さらに、第２ラウドネスフィルタ部６１において同様の補正処理が施されるので、出力部に出力されるオーディオ信号に対してより効果的に補正処理を施すことが可能となる。
　図１２（ａ）（ｂ）および図１３（ａ）（ｂ）は、ゲイン計算部５の聴覚補正処理において用いられるフィルタ種類（対象年齢）とオフセットゲイン計算部６において設定されるオフセットゲインの値とをそれぞれ異なる値で設定した場合におけるラウドネスフィルタ部８の特性を示している。なお、図１２（ａ）（ｂ）および図１３（ａ）（ｂ）に示す場合において、ラウドネスフィルタ部８におけるＬＰＦ部５３、６３のカットオフ周波数は８０Ｈｚ、ＨＰＦ部５４、６４のカットオフ周波数は１３ｋＨｚに設定されている。
　図１２（ａ）は、オフセットゲイン計算部６において設定される低域ゲインオフセット量および高域ゲインオフセット量が共に０ｄＢであって、さらに、ゲイン計算部５において低域フィルタおよび高域フィルタとして年齢Ａ用フィルタを用いて聴覚補正を行った場合におけるラウドネスフィルタ部８の特性を示している。一方、図１２（ｂ）は、オフセットゲイン計算部６において設定される低域ゲインオフセット量および高域ゲインオフセット量が共に０ｄＢであって、さらに、ゲイン計算部５において低域フィルタおよび高域フィルタとして年齢Ｃ用フィルタを用いて聴覚補正を行った場合におけるラウドネスフィルタ部８の特性を示している。
　図１２（ｂ）に示すラウドネスフィルタ部８の特性では、図１２（ａ）に示すラウドネスフィルタ部８の特性よりも、低域および高域のダイナミックレンジが圧縮されている。このため、オーディオ信号の入力信号レベルが高い場合、すなわち音量レベルが高い場合には、ラウドネスフィルタ部８が、図１２（ａ）に示すフィルタ特性を備える場合に比べて、図１２（ｂ）に示すフィルタ特性を備える場合の方が、低域及び高域の信号レベルが抑えられることになり、また音量レベルが低い場合には、低域及び高域の信号レベルが大きく増幅されることになる。
　このように、低域および高域の音量レベルが大きく強調または低減された音楽を、高域や低域における聴覚感度が衰えた聴取者が聴く場合であっても、本発明に係る音響処理装置１を用いて聴覚補正用のフィルタを適切に設定してオーディオ信号の再生処理を行うことにより、適切なレベルに音源の信号レベルを補正（音響処理）することができ、音楽が耳障りになって聞こえてしまうことなどを回避することが可能となる。
　また、図１３（ａ）は、オフセットゲイン計算部６において設定される低域ゲインオフセット量および高域ゲインオフセット量が共に－６ｄＢであって、さらに、ゲイン計算部５において低域フィルタおよび高域フィルタとして年齢Ａ用フィルタを用いて聴覚補正を行った場合におけるラウドネスフィルタ部８の特性を示している。一方、図１３（ｂ）は、オフセットゲイン計算部６において設定される低域ゲインオフセット量が－３ｄＢに設定され、高域ゲインオフセット量が６ｄＢに設定される場合であって、さらに、ゲイン計算部５において低域フィルタおよび高域フィルタとして年齢Ａ用フィルタを用いて聴覚補正を行った場合におけるラウドネスフィルタ部８の特性を示している。
　図１３（ａ）および図１３（ｂ）に示すように、聴覚補正が同じように（年齢Ａに基づいて）行われる場合では、ゲインオフセット量に応じてダイナミックに周波数特性が可変する。このゲインオフセット量は、上述したように、低域においては最大低域レベル値と切片の値との差分量、つまり低域における信号レベル状態に応じて適切に設定され、高域においては、周波数の傾きに基づいて適切に設定されるので、音源のジャンルやオーディオ信号における周波数特性によって予め低域や高域が強調または低減されている場合であっても、低域および高域を適切なレベルに補正することが可能となる。従って、必要以上に低域や高域が強調されてしまって、聴感上聴きづらくなったり、スピーカーから歪音が発生したりすることを抑制することが可能となる。
　以上、説明したように、本実施の形態に係る音響処理装置１では、オフセットゲイン計算部６において、オーディオ信号の低域の信号レベルが全周波数に対して相対的に大きくなる場合に低域のゲインオフセット量を小さくして低域の信号レベルの低減を実現し、低域の信号レベルが全周波数に対して相対的に小さい場合には低域のゲインオフセット量を大きくして低域の信号レベルの増大を図るため、音楽のジャンルや特性によりオーディオ信号の低域が予め強調されている場合や低減されている場合であっても、低域の信号レベルを最適に補正することが可能となる。
　また、本実施の形態に係る音響処理装置１では、オフセットゲイン計算部６において、オーディオ信号の高域の信号レベルが大きくなる場合に、高域のゲインオフセット量を小さくして高域の信号レベルの低減を実現し、高域の信号レベルが小さい場合には高域のゲインオフセット量を大きくして高域の信号レベルの増大を図るため、音楽のジャンルや特性によりオーディオ信号の高域が予め強調されている場合や低減されている場合であっても、高域の信号レベルを最適に補正することが可能となる。
　さらに、本実施の形態に係る音響処理装置１では、ゲイン計算部５において、聴取者の年齢や好みに応じて低域ルックアップテーブル部３４において用いられる低域フィルタや高域ルックアップテーブル部３５において用いられる高域フィルタを変更して、聴覚補正を行うことができる。このため、年齢に応じて低減する聴力を補うようにして、または聴取者の好みに応じて、低域および高域のダイナミックレンジの圧縮率を補正することが可能となる。
　したがって、本実施の形態に係る音響処理装置１では、上述したオフセットゲイン計算部６におけるオーディオ信号の周波数特性に基づく高域および低域の補正や、ゲイン計算部５における聴取者の聴覚特性に応じた高域および低域の補正により、オーディオ信号における低域および高域における信号レベルを最適に調整することができ、聴感上良好な音質となるようにしてオーディオ信号の再生を行うことが可能となる。
　以上、本発明に係る音響処理装置について、図面を用いて詳細に説明したが、本発明に係る音響処理装置は、上述した実施の形態に示した例に限定されるものではない。当業者であれば、請求の範囲に記載された範疇内において、各種の変更例または修正例に想到しうることは明らかであり、それらについても当然に本発明の技術的範囲に属するものと了解される。
　例えば、上述した実施の形態において、低域ルックアップテーブル部３４および高域ルックアップテーブル部３５に用いられる聴覚補正用のフィルタとして、異なる年齢に基づいて分類される複数のフィルタを採用したが、低域ルックアップテーブル部３４および高域ルックアップテーブル部３５において聴覚補正を行うフィルタは、必ずしも年齢を基準とするものには限定されず、聴取者の好みに応じて設定・変更するものであってもよい。
　また、上述した実施の形態において、ラウドネスフィルタ部８において２つのフィルタ部５１、６１がカスケード接続される場合を一例として示したが、ラウドネスフィルタ部は必ずしもこのように２つのフィルタ部がカスケード接続されるものには限定されず、１つだけのフィルタ部により構成されるものであっても、また３つ以上のフィルタ部が接続される構成であってもよい。
１音響処理装置
２音量設定部
３周波数分析部
４遅延部
５ゲイン計算部
６オフセットゲイン計算部
７ゲイン設定部（音響信号生成部）
８ラウドネスフィルタ部（音響付加部）
１１（周波数分析部における）ＦＦＴ処理部
１２（周波数分析部における）帯域判定部
１３（周波数分析部における）回帰分析部
２１（オフセットゲイン計算部における）低域オフセットゲイン計算部
２２（オフセットゲイン計算部における）高域オフセットゲイン計算部
２３（オフセットゲイン計算部における）第１スムージングフィルタ部
２４（オフセットゲイン計算部における）第２スムージングフィルタ部
３１（ゲイン計算部における）最大値検出およびホールド部
３２（ゲイン計算部における）低域アタックリリースフィルタ部
３３（ゲイン計算部における）高域アタックリリースフィルタ部
３４（ゲイン計算部における）低域ルックアップテーブル部
３５（ゲイン計算部における）高域ルックアップテーブル部
４１（ゲイン設定部における）第１加算部
４２（ゲイン設定部における）第２加算部
４３（ゲイン設定部における）低域レベル変換部
４４（ゲイン設定部における）高域レベル変換部
５１（ラウドネスフィルタ部における）第１ラウドネスフィルタ部
５３（第１ラウドネスフィルタ部における）ＬＰＦ部
５４（第１ラウドネスフィルタ部における）ＨＰＦ部
５５（第１ラウドネスフィルタ部における）第１乗算部
５６（第１ラウドネスフィルタ部における）第２乗算部
５７（第１ラウドネスフィルタ部における）加算部
６１（ラウドネスフィルタ部における）第２ラウドネスフィルタ部
６３（第２ラウドネスフィルタ部における）ＬＰＦ部
６４（第２ラウドネスフィルタ部における）ＨＰＦ部
６５（第２ラウドネスフィルタ部における）第１乗算部
６６（第２ラウドネスフィルタ部における）第２乗算部
６７（第２ラウドネスフィルタ部における）加算部
Patent WO2010005033A1 - 音響処理装置 - Google Patents
