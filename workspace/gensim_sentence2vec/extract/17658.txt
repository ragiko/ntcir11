 こうしたバージョン2.x世代のSDKの機能は、9月に開催されたゲーム開発者向けカンファレンスCEDECで公開されたが、この時に、PlayStation 4 SDKの他の興味深いライブラリ群についても説明された。特にSCEの特色が出ているのが、画像認識系のライブラリだ。
多彩な画像認識系のライブラリを提供
PS4はオプションで2眼のカメラ「PlayStation 4 Camera」が販売されている。SCEは、この2眼カメラに合わせた画像認識SDKを提供している。2眼カメラから被写体の位置の深度(Depth)情報を得る「libDepth」ライブラリや、画像認識系の「Vision Library」などだ。これらのライブラリによって、PS4ではカメラを使った多彩な認識処理が容易に利用できるようになる。
libDepthライブラリは、PS4のオプションの2眼カメラを使った位置情報生成ライブラリだ。2個のカメラで撮影した画像を使い、カメラ間の視差を使って物体までの距離を算出する。距離(=深度/Depth)データの生成は、ソフトウェア処理で行なう。「Xbox One」の「Kinect」のようなハードウェアで実装した深度検知機構とロジック回路は持っていないためだ。
通常、2眼カメラからのデータによる距離測定をCPUによるソフトウェアで行なうと遅延が大きくなりリアルタイム性が損なわれる。そこで、libDepthでは、距離計算を演算能力の高いGPUコアで行なわせることで、深度データを生成するまでの遅延を1.5msに程度に抑えている。60fpsの画面表示の場合、1フレーム当たりの時間は16.7msであるため、libDepthによる深度検知は1フレーム時間の約10分の1で実行できることになる。
セッションでは、カメラあたり640×400ドットの画像データ入力から、160×100ドットの深度データに出力するデモを行ない、1.5msまでに落とし込んでいることを示した。
PS4 APUによるソフトウェア処理の利点は、柔軟でスケーラブルであること。特殊な深度検知ハードウェアを使わないため、コスト的にも安く上がる。しかし、弱点もある。
PS4のlibDepthは、カメラからの画像から深度を計算するため、MicrosoftのKinectの深度測定と異なり、カメラ側の光源からの照射を行なわない。現在のKinectは、カメラ側から照射する赤外線の反射を深度の測定に使うため、測定する場所の照度に影響されない。それに対して、PS4のlibDepthの処理はカメラからの画像情報だけを使うため、暗所では深度測定の精度が落ちるという弱点がある。
初期のSDKでは、10lux程度の照明では、実用的な深度データを得られなかったという。10luxは非常に暗いが、欧米のリビングルームではこの程度の暗さでゲームプレイをする場合も多いため問題となる。しかし、現在のSDKでは、アルゴリズムが改善され充分な深度が計算できるようになっているという。
UIに使いやすいピークトラッカー
libDepthは、カメラベースのユーザーインターフェイス(UI)への応用ができる。1つは、手検出&追跡。ユーザーが突き出した手を、深度情報の「ピーク」をトラックすることで検知する。つまり、深度データで最も手前に来ている部分を検知・追跡する。この場合は、ピークだけを発見すればいいため、検知が非常に簡単という利点がある。
ピークトラッカは単純であるため、照度をぎりぎりまで落としても、検知が可能だ。CEDECで講演した豊禎治氏(株式会社ソニー・コンピュータエンタテインメント)は「ピークトラックだけなら、部屋の照明を全部消してTVからの照明だけでも検知できる。高いフレームレートで安定的にピークを取ることができるので、非常にスムーズなユーザーインターフェイスができるだろう」と説明した。手をポインタとして使ったジェスチャによるユーザーインターフェイスが容易に可能となる。
【後藤弘茂のWeekly海外ニュース】認識処理や物理演算などが揃うPlayStation 4のSDK  - PC Watch
