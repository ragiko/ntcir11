
JP1/Automatic Job Management System 3 導入ガイド
3.4.3 起動条件の有効範囲
起動条件の有効範囲とは,起動条件として定義したイベントの発生を条件成立と見なす範囲のことです。
起動条件の有効範囲の設定は,ジョブネットの実行登録方法ごとに異なります。
計画実行登録または確定実行登録の場合
ジョブネットのスケジュールルール定義で起動条件を使用するか,しないかを選択します。起動条件を使用する場合は,有効範囲を設定します。その内容は計画実行登録または確定実行登録したときに有効になります。
即時実行登録の場合
実行登録の際に起動条件を使用するか,しないかを選択します。起動条件を使用する場合は,有効範囲を設定します。
計画実行登録,確定実行登録,および即時実行登録については,「4. 業務の実行」を参照してください。
有効範囲の設定方法には,回数指定と時間指定(絶対時刻指定,相対時間指定)があります。回数指定と時間指定の両方を指定することもできます。
回数指定
起動条件が監視を開始してからの実行世代の実行回数を指定する方法です。
ジョブネットのスケジュール定義に設定された時刻から,実行世代が実行される回数がこの値に到達するまで起動条件の監視を続けます。
時間指定
絶対時刻指定
起動条件の監視終了時刻を絶対時刻で指定する方法です。
起動条件の監視を開始した時刻から,指定した絶対時刻に到達するまで起動条件の監視を続けます。
相対時間指定
起動条件の監視開始予定時間からの相対時間で指定する方法です。
起動条件の監視を開始した時刻から,指定した時間(単位:分)の間,起動条件の監視を続けます。
有効範囲を設定すると,その範囲外で起動条件に定義したイベントが発生しても条件成立と見なされないため,実行世代は実行されません。なお,計画実行登録または確定実行登録の場合は,監視が終了してもジョブネットのスケジュールルール定義に基づいてスケジュールされている次回実行予定に到達すると,有効範囲に設定した範囲で新たに起動条件の監視を行います。
有効範囲を絶対時刻で指定した場合
有効範囲を絶対時刻で指定した場合,起動条件の監視を開始した時刻から指定した絶対時刻までの間だけ事象を監視し,この範囲内に成立した事象の分だけ実行世代を実行します。
絶対時刻を指定した場合の例を,次の図に示します。
図3-45 有効範囲の設定例(絶対時刻指定)
有効範囲を絶対時刻と回数の両方で指定した場合
有効範囲として時間と回数の両方を設定した場合,時間と回数のどちらかが指定した値に到達した時点で事象の監視を終了します。
絶対時刻と回数の両方を指定した場合の例を,次の図に示します。
図3-46 有効範囲の設定例(回数指定と時間指定)
この場合,有効範囲で指定した監視終了時刻の12:00にはまだ到達していなくても,ジョブネットの実行回数がすでに指定した値である「2回」に到達しているため,以降のイベント発生を無効と見なします。
注意事項
上位のジョブグループに基準時刻が設定されている(基準時刻が00:00以外)場合は,時刻を指定するときに時刻の扱われ方に注意が必要です。
基準時刻を設定している場合に有効範囲を絶対時刻で指定したときの時刻の扱われ方を,次の図に示します。
図3-47 基準時刻を設定している場合に有効範囲を絶対時刻で指定したときの時刻の扱われ方
日付は基準時刻の考え方でカウントされますが,時刻については上図のような並びで扱われます。例えば,48時間制スケジュールの場合,8/2に実行するジョブネットの有効範囲を絶対時刻で26:00と指定すると,実際の日付(暦日による日付)で8/4の2:00がスケジュールされます。
こうした問題を避けるため,24:00以降のスケジュールを適用する場合には,基準時刻を設定しない運用(基準時刻が0:00)を推奨します。
起動条件付きジョブネットでは,監視世代および実行世代に対してスケジューリング方式の設定(スケジュールスキップ,多重スケジュール)は有効になりません。そのため,ジョブネットのスケジュールで処理サイクルを指定する場合は,スケジューリング方式ではなく監視世代の多重起動について検討する必要があります。監視世代の多重起動についての詳細は,「3.4.5 監視世代の多重起動」を参照してください。
処理サイクルを設定した起動条件付きジョブネットを実行登録すると,ジョブネットの周期的な実行予定がスケジュールされます。しかし,起動条件の有効範囲が回数・時間ともに無制限で,かつ監視世代に多重実行を設定している場合,「監視中」状態の監視世代と「起動条件待ち」状態の実行世代が複数生成されます。この場合,起動条件が1回成立すると,複数の実行世代が同時に実行されます。
補足事項
有効範囲を絶対時刻で指定する場合は,ジョブネットの実行開始時刻よりもあとの時間になるように設定してください。ジョブネットの実行開始時刻よりも前の時間を指定すると,ジョブネットの実行開始と同時に監視世代が「監視打ち切り終了」状態になります。
[目次][前へ][次へ]
[他社商品名称に関する表示]
Copyright (C) 2009, 2012, Hitachi, Ltd.Copyright (C) 2009, 2012, Hitachi Solutions, Ltd.
起動条件の有効範囲
