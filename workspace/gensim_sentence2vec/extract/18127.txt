
個々の Apache モジュールをロードするための DSO サポートは
mod_so.c というモジュールの機能に基づいています。
このモジュール は Apache のコアに静的に組み込まれている必要があります。
それは core.c 以外では DSO にできない唯一の
モジュールです。事実上、他のすべての Apache のモジュールは、
インストールの文書で説明されているように、
configure の
--enable-module=shared オプションでそれぞれを
DSO ビルドにすることにより、DSO モジュールにすることができます。
mod_foo.so のような DSO にモジュールがコンパイルされれば、
httpd.conf ファイル中で mod_so の
LoadModule
ディレクティブを使うことでサーバの起動や再起動時にこのモジュールを
ロードするようにできます。
Apache モジュール用の (特にサードパーティモジュールの) DSO ファイルの
作成を簡単にするために、apxs
(APache eXtenSion) という新しいサポートプログラムがあります。
Apache のソースツリーの外で DSO モジュールをビルドするために
使うことができます。発想は単純です: Apache のインストール時の
configure、make install のときに Apache の
C ヘッダをインストールし、DSO ビルド用のプラットフォーム依存の
コンパイラとリンカのフラグを apxs プログラムに追加します。
これにより、ユーザが Apache の配布ソースツリーなしで、さらに
DSO サポートのためのプラットフォーム依存のコンパイラやリンカの
フラグをいじることなく Apache のモジュールのソースをコンパイル
できるようになります。
動的共有オブジェクト (DSO) サポート - Apache HTTP サーバ バージョン 2.2
