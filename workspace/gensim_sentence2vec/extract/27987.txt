上水道において管の工事を行なう場合など、閉めなければいけない弁(仕切弁)と、それを閉めた事で影響の出る家屋(メーター)を特定する必要があります。
PC-MAPPINGでは次の2段階の手順で、ベクターのネットワーク構造による断水シミュレーションを行います。
1. アーク上で断水(閉鎖)個所を指定
指定到達ノードの値により、閉じなければならないノード(仕切弁)が選択状態になります。
2. アーク上で水源側を指定
水源側を確定する事でアークネットワーク解析が行われ、1.での処理により影響のあるアークと端点ノード(メーター)が選択状態になります。
※ネットワーク到達解析(断水シミュレーション)機能では、対象となる建物ポリゴンの認識は行なえません。
転記の一方法として「選択状態の転記」があります。詳細は、「 補足」を参照して下さい。
操作方法(1)
以下のようなプロジェクトで、[ツール]-[ネットワーク解析]-[ネットワーク到達解析(断水シミュレーション)]を選択します。
[ネットワーク解析(断水シミュレーション)]ダイアログボックスが表示され、かつカーソルが十字カーソルに変わります。
ダイアログに仕切弁の値(ここでは「3」)を入力し、アーク上で断水(閉鎖)個所を指定します(このダイアログボックスは、コマンド実行中はモードレス状態[常に表示されている]になっています)。
2.の処理によって閉めなければいけないノード(仕切弁)と経路アークが強調表示されます。
[属性]-[属性ウィンドウ表示]-[ノード属性ウィンドウ]を表示し、[表示]-[選択されたレコードのみ表示]を選択すると、現在ベクターウィンドウで強調表示されているノード(仕切弁)の内部属性が参照できます。
続けて、水源側のアークを指定します。
ノード(仕切弁)を閉じる事によって影響の出るアークと端点ノード(メーター)が強調表示されます。
操作方法(2)
※従来は、水源側(上流側)アークの指定は一箇所のみでしたが、機能改善により複数の水源側(上流側)アークが指定できるようになりました。
ネットワーク解析(断水シミュレーション)を実行し、断水箇所を指定すると、閉めなければいけないノード(仕切弁)が選択されます。
ステータスバーには以下のメッセージが表示されます。
----------------------
ネットワーク解析(断水シミュレーション)
左(水源側アーク、複数ある場合最後のアーク、を指定して解析)
中(複数の水源側アークの指定)
----------------------
水源側が一箇所の場合
マウスの左ボタンで水源側アークを指定すると、影響の出るアークと端点ノードが選択状態となります。
水源側が複数箇所の場合
マウスの中ボタンで水源側アークを指定(複数可)し、最後の水源側アークを左ボタンで指定します。
補足(建物ポリゴンへの転記)
ベクターのネットワーク構造を利用して、端点ノード(メーター)までを選択する事ができました。
この例のプロジェクトでは別レイヤーに建物ポリゴンがあり、現在管路のレイヤーで選択されたメーターを利用している家屋を特定する事ができます。
その際には、(選択されたノードが形状的に建物ポリゴンに包含されていなければならないという制約がありますが)「選択状態の転記(レイヤ間)」の機能を使用します。
[ネットワーク到達解析(断水シミュレーション)]を実行し、端点ノード(メーター)が選択されています。
[選択]-[選択状態の転記(レイヤー間)]を選択すると、[選択状態転記(レイヤー間)]ダイアログボックスが表示されますので、設定を行います。
現在、「上水管」レイヤーのノードが選択されており、その選択状態を「建物」レイヤーのポリゴンに転記するとします。
転記の処理として、「選択されたノードを形状的に包含するポリゴン」へと転記したいので、「ノードから包含ポリゴン」を選択し、<OK>ボタンを押します。
「建物」レイヤーのポリゴンに、選択状態が転記されているのが確認できます(背景レイヤーのポリゴンが強調色で表示されない場合は、[環境-1]のシステムパレットの「背景ポリゴン強調塗りつぶし」がピンク色になっているか確認して下さい)。
「建物」レイヤーを前景とし、[属性]-[データベースリンク]-[選択データのリンク先検索]を行うと、(データベースリンクがあれば)データベース側で選択されたポリゴンに該当するレコードが水色強調表示されます。
MAPCOM WORLD [PC-MAPPING Ver.7 ヒント集]
