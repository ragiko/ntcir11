
【考え中(2回目)】HTML5を使ってみる + 配管にケーブルが入るか考える
ケーブルを模したを、配管を模したの中にマウスでドラッグするだけのものです。
HTML5だと絵も簡単に描けるというので、何かに利用できないかと考えた。
本を読んだりしましたが、HTML5について紹介してくださるWebページには大変助けられました。
基本的に、「canvas を追加してそこに図を描く」+「その図を自由にドラッグする」という内容です。
特にドラッグの方法についてはさんざん考えた。
場所を固定して、要素に追加するようなドラッグならHTML5だけでできるようだ。
結局、自由なドラッグは jquery を使うのがいちばん早かった。
draggable の一行で済んでしまうようなので。
でも jquery を参照するので、オフラインだと使えない。
しかもスマートフォンのタッチしてドラッグでも使えないようだ。
(プラグイン「jQuery UI Touch Punch」とかを使うと、iPhone や Android でもドラッグができた)
使い方:
使う配管を選んで、『配管を描く』ボタンをクリックする。
すると、下にあるセクションペーパーのようなエリアに配管の(赤丸)が描かれる。
は、配管やケーブルの径を px に置き換え、それを10倍した値を基に円を書いている。
(9.4mmなら、94px。小数点以下があると図が描けないので)。
セクションペーパーは、1目盛りが10pxで1mmとしています。
もし、ケーブルや配管の径と、セクションペーパーの目盛りが近似でなければ、たぶんスクリプトが間違っている。
使うケーブルを選んで、『ケーブルを描く』ボタンをクリックする。
下のセクションペーパーエリアにケーブルの(緑色)が描かれます。
ケーブルは8本まで選んで描ける。
緑色のケーブルを配管のの中にマウスでドラッグして置いてみる。
複数本あるときは、重ならずに置けるか試してみる。
重なったり、配管からはみ出したり、本数が多かったりしても警告が出るわけではないです。
『断面積総合計』をクリックすると、ケーブルの総断面積が表示される。
『配管占有率』をクリックすると、配管内をケーブルの断面積が占める割合をパーセントで表示。
ケーブルや配管を描くと、途中で種類などを変更できないので、ページの更新や、『すべての値を消去してやり直し』する。
補正係数を考慮すると、ケーブルは配置できても、断面積は補正係数倍されるので、配管占有率が大きくなる。
どのブラウザでも動くかどうかは分かりません。
補記
配管サイズ:
近似内径
mm
内断面積
mm2
ケーブル1:
仕上外径
mm
補正係数
断面積
mm2
ケーブル2:
仕上外径
mm
補正係数
断面積
mm2
ケーブル3:
仕上外径
mm
補正係数
断面積
mm2
ケーブル4:
仕上外径
mm
補正係数
断面積
mm2
ケーブル5:
仕上外径
mm
補正係数
断面積
mm2
ケーブル6:
仕上外径
mm
補正係数
断面積
mm2
ケーブル7:
仕上外径
mm
補正係数
断面積
mm2
ケーブル8:
仕上外径
mm
補正係数
断面積
mm2
mm2
%(断面積総合計/配管内断面積)
【考え中(2回目)】HTML5を使ってみる+配管
