
この節では画面にHTMLを表示することを勉強しましょう。
まずは、RubyでCGIを組むときにおまじないです。
-- プログラム 始まり --
#!/usr/local/bin/ruby
print "Content-type: text/html\n\n"
-- プログラム 終わり --
この2行はプログラムの始めの部分に必ず付ける必要があります。なお、1.2.でrubyのインストール場所を聞きましたが1行目はその場所を示しています。一般的にはこの場所にインストールされるのですが、他の場所にインストールしてある場合もありますのでその場合は1行目を変更して下さい。(例えばLinuxでrpmを使ってインストールすると/usr/bin/rubyにインストールされます。)
このプログラムは実際に動作するものではないので、実行はさせないで下さい。
次にprint文を学びましょう。
-- プログラム 始まり -- test211.cgi
#!/usr/local/bin/ruby
print "Content-type: text/html\n\n"
print "<html><body>Hello World</body></html>"
-- プログラム 終わり --
サーバー上にこのファイルをアップしてパーミッションを775に変更して、ブラウザでWeb上での表示を見てみましょう。
いかがでしょうか?「hello World」と表示されていたら、成功です。もし、表示されていなかった場合はいくつかの原因が考えられます。
1.サーバーにアップする際にASCIIモードでアップしなかった。ASCIIモードでない場合、改行コードがUNIX用のLFにならないことがあります。これはNextFTPの場合はオプションの転送モードでテキストを選んでおいてください。(FTPクライアントによって設定方法が違うと思われるので、お使いのFTPクライアントのヘルプを見て下さい。)
2.実行属性が775になっていない。これはNextFTPの場合はサーバー上でファイルを右クリックして属性の変更を選びます。ここで属性を775に変更して出来あがりです。
3.#!〜の行が1行目に来ていない。不必要な場所に改行がある。これは改行を取り除けばうまく行きます。
4.実はこのディレクトリでCGIが使えるように設定されていない。これの場合は管理者に聞き、設定を直すしか無いでしょう。1章を再度読み直して下さい。
上記の部分を直してもうまくいかない場合はせばたいていはうまくいくと思います。
今回始めて使った命令など 
print文 
#!
RubyCGI.org RubyでCGIを作ろう 2章1節
