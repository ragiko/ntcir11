
ホーム >
基礎知識 >
インターネットの仕組み >
IPアドレスとは(1) ～ クラスとドメイン ～
インターネットは、TCP/IPプロトコルで通信されているというのは、TCP/IPとは で解説しましたが、 OSI参照モデルでは、TCPが第4層、IPが第3層に位置します。
特にIPは、「Internet Protocol(インターネット プロトコル)」の文字どおり、インターネットにおけるパケット通信の基礎となるプロトコルで、TCPがそれを補完しています。
IPは先述のとおり、パケットの通信経路の選定、ルーティングを行うプロトコルです。したがって、インターネットはIPによって接続されたネットワークであると解説しました。
さて、プロトコルとは でも触れましたが、ネットワークで通信するためには、機器同士が互いを認識していなければなりません。認識するということは、何がしかの識別番号が存在するわけです。
すなわち、IPネットワーク(インターネット)においても、
接続するコンピュータや通信機器の全てに、固有の識別番号を割り当てなければならない
ということになります。個別ということは当然、重複した数字を使用することはできません。
したがって、インターネットに接続された世界中の無数のコンピュータやルータなどの機器には、それぞれ重複しない個別の番号が振られています。自動車のナンバープレートと同じです。
このIPネットワーク上の識別番号のことを、
IPアドレス(アイピー アドレス)
と言います。 IPアドレスは、世界で唯一のユニークな番号であり、インターネットにおけるコンピュータや通信機器の住所になります。
URI で解説したURIもインターネット上の住所だと解説しましたが、URIは「表記方法」であり、詳しくは後述しますが、このIPアドレスを表記し直したものがURI(URIの責任者部までのパス部以外の部分)になります。
では、具体的にどのように表記されるのかと言うと、IPアドレスは「32桁」の2進数で表されます。つまり、32桁の「0」と「1」のビット列で重複しないアドレスを作成するわけです。
すなわち、2の32乗を単純計算して、約43億通りのアドレスを作成することができます。43億通りで世界中の機器に固有の番号を割り当てることができるのかについては次項で解説しますが、実はIPアドレスの枯渇が大きな問題となっています。
とは言うものの、コンピュータにとっては2進数が何桁であろうと処理することは簡単かもしれませんが、人間が32桁もの2進数を解釈するのはかなり困難です。例えば、32桁の2進数は下記のようになります。
11011011000010011110011000001011
これでは、とても人間では扱いきれせん。そこで、IPアドレスの表記は、
32桁を8桁ずつ4ブロックに区切り、さらに2進数から10進数に変換して表記
しています。例えば、「210.9.230.13」といった具合です。10進数で表現すれば人間にもかなり理解しやすくなります。
このように、32桁を8桁に区分けするということは、1バイト(8ビット)の文字が使用できます。つまり、2の8乗で、256文字が使用できます。したがって、IPアドレスは「0」から「255」までの10進数で表現するということになります。(進数の変換については、2進数と10進数と16進数 を参照してください)
さて、ここからがミソなのですが、IPアドレスは世界で固有のユニークな番号ですが、何の規則性もなく割り当てられているわけではありません。
MACアドレスも左半分がメーカー番号、右半分が識別番号という規則性があります。(詳しくは、プロトコルとは を参照してください)
IPアドレスの場合は、「ネットワークアドレス部」と「ホストアドレス部」から構成されています。つまり、8ビットの4ブロックを、ネットワークアドレス部とホストアドレス部に区切って意味を持たせているということです。(各ブロックを「オクテット」と言います)
ネットワークアドレス部でネットワークの種類を、ホストアドレス部でそのネットワークに接続されたコンピュータの識別番号を表します。(IPネットワークではコンピュータを「ホスト」と言います)
つまり、あるネットワークの複数のコンピュータにIPアドレスを割り当てる場合、ネットワークアドレス部の番号は同じで、ホストアドレス部にそれぞれ固有の異なる番号を割り当てることになります。
こうすることによって、ネットワークアドレス部でそのネットワークの属性を表しつつ、IPアドレス自体は固有の番号を作成することが可能になるわけです。
ただし、ネットワークの大きさ(接続台数)はそれぞれ異なります。そのため、ネットワークアドレス部とホストアドレス部の区切り方は一律ではなく、4つのオクテットのうちどこで区切るかは、割り当てるネットワークの大きさによって変わります。
この大きさの違いによる種類分けを「クラス方式」と言い、
クラスA、クラスB、クラスCの3つのクラスに分類
されます。(さらに細かい分類もありますが本項では割愛します)
クラスAは、1つ目と2つ目のオクテットの間で区切ります。上図では、「219」と「9」の間になります。同様にクラスBは、2つ目と3つ目のオクテットの間、「9」と「230」の間で区切り、クラスCは、3つ目と4つ目のオクテットの間、「230」と「13」の間で区切ります。
このように3つのクラスに分けることで、例えば「あなたのネットワークは、クラスAでネットワークアドレス部は10番を使用してください」といった効率的なアドレス提供が可能になります。
IPアドレスを管理している国際機関「NIC:Network Information Center」(日本では「JPNIC」)によって、ネットワークの規模に応じたクラスのIPアドレスが、国、組織、プロバイダ等に割り当てられているのですが、管理しやすいように体系化されているわけです。
接続台数が多いネットワーク(クラスAなど)では、ネットワークアドレス部を少なくしてホストアドレス部を長くすることで、より多くのホストを接続することができます。
逆に、接続台数が少ないネットワーク(クラスCなど)では、ネットワークアドレス部を長くして無駄なアドレスがあまり出ないようにすることができます。
つまり、電話番号の「市外局番」と同じで、IPアドレスを体系的に無駄なく利用することができるということです。(都心部では市外局番が短く田舎では長い)
では、各クラスについて詳しく解説して行きます。
クラスAは、第1オクテットと第2オクテットの間で区切ります。
クラスAは、最上位のビットが「0」に決められています。そのため最上位の「0」が固定となり、第1オクテットは実質7ビットとなります。(最上位に「1」が入るとクラスAでアドレスを全て使い切ってしまいます)
したがって、2の7乗で「128通り」(0～127まで)がネットワークアドレス部となり、残り3オクテット「256通り」(0～255まで)×3がホストアドレス部となります。
具体的には、「0.0.0.0.0」～「127.255.255.255」までをクラスAで使用することができます。ホストには3オクテット使えるので、2の24乗で「16,777,216」台まで同一ネットワークにホストを接続することができる計算になります。
ただし、ホストアドレス部が全て「0」および「1」は特殊なアドレスのため使用できませんので、マイナス2の「16,777,214」が実質数になります。
これが128クラスなので、約21億通りのアドレスを表現することができます。(全アドレスの約半分になる巨大なクラスです)
次に、クラスBは、第2オクテットと第3オクテットの間で区切ります。
クラスBは、最上位の2ビットが「1」「0」に決められています。そのため最上位から「10」が固定となり、第1オクテットは実質6ビットとなります。
したがって、2の6乗で「64通り」(0～63まで)×「256通り」がネットワークアドレス部となり、残り2オクテット「256通り」×2がホストアドレス部となります。
具体的には、第1オクテットは「127」までクラスAで使用しますので、次の「128」を含めて「64」個分の「191」までを使用することができます。「128.0.0.0」～「191.255.255.255」までをクラスBで表現することができます。
ホストには2オクテット使えるので、2の16乗で「65,536」台まで同一ネットワークにホストを接続することができる計算になります。ただし、ホストアドレス部が全て「0」および「1」は特殊なアドレスのため使用できませんので、マイナス2の「66,534」が実質数になります。
これが「64×256」の「16,065」クラスなので、約10億通りのアドレスを表現することができます。(全アドレスの4分の1に当たります)
最後に、クラスCは、第3オクテットと第4オクテットの間で区切ります。
クラスCは、最上位の3ビットが「1」「1」「0」に決められています。そのため最上位から「110」が固定となり、第1オクテットは実質5ビットとなります。
したがって、2の5乗で「32通り」(0～31まで)×「256通り」×「256通り」がネットワークアドレス部となり、残り1オクテット「256通り」がホストアドレス部となります。
具体的には、第1オクテットは「191」までクラスBで使用しますので、次の「192」を含めて「32」個分の「223」までを使用することができます。「192.0.0.0」～「223.255.255.255」までをクラスCで表現することができます。(「224」以降は、クラスDおよびクラスEとして特殊なアドレスに予約されていますので、本項では割愛します)
ホストには1オクテット使えるので、2の8乗で「256」台まで同一ネットワークにホストを接続することができる計算になります。ただし、ホストアドレス部が全て「0」および「1」は特殊なアドレスのため使用しませんので、マイナス2の「254」が実質数になります。
これが「32×256×256」の「2,097,152」クラスなので、約5億通りのアドレスを表現することができます。(全アドレスの8分の1に当たります)
このように、クラスが決定されると、IPアドレスはネットワーク部とホストアドレス部が決定します。しかし、実際にはクラスAやクラスBのように、同じネットワークに1,600万台、もしくは65,000台ものホストを接続するなどということはまずあり得ません。
仮に、「1000万台」のネットワークを構築する場合、クラスは「A」となりますが、残りの「600万」のアドレスはどうなるのでしょうか?
クラス方式では、ネットワークアドレス部が同じ番号であれば、同一ネットワークになってしまうため、ホストアドレス部の番号の余りを他のネットワークで利用することはできません。要するに「無駄」となるわけです。
例えば、阪神社にはクラスCの「200.200.200.1～200.200.200.150」までを、巨人社には続きの「200.200.200.151～200.200.200.255」までを割り当ててしまうと、阪神社と巨人社は同一ネットワークに属することになり、非常に問題があります。
また、それぞれのクラスで接続可能なホスト数に差がありすぎます。普通の会社や学校等で構成するネットワークでは、ほどんどがクラスCの254台で足りてしまいます。
そもそも254台でも多い場合がほどんどで、数台のホストしか接続しないネットワークでも、最低でもクラスCの254台分のIPアドレスをもらわなければなりませんので、かなりの無駄が生じるわけです。その結果、クラスAのアドレスは大量に余り、クラスCのアドレスが不足してきました。(クラス方式は見通しが甘かったということです)
そこで、この3つのクラスのネットワークを「分割」して、配下に「サブネットワーク」を作る方法が考えだされました。その方法が、
サブネットマスク
という識別子を用いる方法です。サブネットマスクは、IPアドレスを単純にクラスで分割するのではなく、より細かく区切ることができるようにするための識別子で、何ビットのホストアドレス部でも作れるという優れものです。
サブネットマスクは、「ネットマスク」の文字通り、ネットワークアドレス部をマスク化するという意味で、ネットワークアドレス部にあたるビットに「1」を立ててマスク化し、ホストアドレス部には「0」を立てます。
つまり、「1」のビットが立っている部分とそうでない部分とで、ネットワークアドレス部とホストアドレス部を区切るわけです。具体的に、クラス分類をサブネットマスクで表記すると、
IPアドレスとは?｜クラス・ドメイン・DNSとは?
