
4行目に、KeepAlive=true で、理論上は、通信チャンネルが持続して、
2回目以降のリクエストも同じ接続になりますが、
ならないです。あくまで「できたら閉じずに接続使いまわしてねー」程度の申告をサーバーにしているだけです。使い回すかどうかはサーバー次第です。
(例えばブラウザでページ内のたくさんの画像リクエストをしたとして、二つ目、三つ目は大体一つ目とは違うコネクションでやってると思います。)
そして申告はリクエスト単位に(Connection: HTTPヘッダで)行います。
ですので新たにリクエストを作成して送信すればOKです。
なお、相手がHTTP/1.1対応なら自動的にtrueになります。
なお、サンプルではKeepAliveしない方法を二種類提示してますね、
keepaliveをFalseにすればたぶん
Connecion: Closeヘッダがつくと思いますので、
Connection = "Close"と同じ結果になるはず。
> 4行目に、KeepAlive=true で、理論上は、通信チャンネルが持続して、
2回目以降のリクエストも同じ接続になりますが、
ならないです。あくまで「できたら閉じずに接続使いまわしてねー」程度の申告をサーバーにしているだけです。使い回すかどうかはサーバー次第です。
(例えばブラウザでページ内のたくさんの画像リクエストをしたとして、二つ目、三つ目は大体一つ目とは違うコネクションでやってると思います。)
そして申告はリクエスト単位に(Connection: HTTPヘッダで)行います。
ですので新たにリクエストを作成して送信すればOKです。
なお、相手がHTTP/1.1対応なら自動的にtrueになります。
なお、サンプルではKeepAliveしない方法を二種類提示してますね、
keepaliveをFalseにすればたぶん
`Connecion: Close`ヘッダがつくと思いますので、
Connection = "Close"と同じ結果になるはず。
回答の編集履歴 - QA@IT
