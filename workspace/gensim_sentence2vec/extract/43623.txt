構文解析のおおまかな順序  &dagger;
環境変数の展開、引数の展開、if/for/( ) 等の構造を持った文の構文解析、およびリダイレクトの判断等が同順序
for 制御変数の展開
環境変数遅延展開の展開
コマンド名、リダイレクトファイル名の確定とリダイレクト・パイプのオープン
(コマンドの探索と実行)
ただし、パイプ構文の場合は、for 制御変数の展開や、環境変数遅延展開の後でも
& && | || < > >> 等の文の構文解析、% による環境変数展開が再度行われるようである。
全般/構文解析 - CMD.EXE TIPs
