 ロジック/デジタル系回路における抵抗やコンデンサには、それぞれの値に対して高い精度が要求されることはあまりないと言える。それに対し、リニア/アナログ回路においては、その基本特性や値の精度が直接、回路の性能に影響するものが多く存在するため、慎重に検証する必要がある。
増幅回路では抵抗誤差はゲイン誤差に
最も簡単な例として、オペアンプを用いた反転増幅回路(100倍増幅)における抵抗の誤差と回路のゲイン誤差との関係について説明する。図1に示したのは、単純な反転増幅回路である。この回路のゲインGは、R1の入力抵抗、R2の帰還抵抗の値を用いて、以下の式で求められる。
G=−(R2/R1)=−(100k/1k)=−100
より正確に言えば、オペアンプ自身のゲインが有限であることも影響するのだが、ここではオペアンプは理想的なものだとして、外付け部品である抵抗の誤差のみに着目して誤差を検証してみる。仮に、R1、R2ともに、値に±1%の誤差があるとすると、+方向の最大ゲイン誤差G+は以下のようになる。
G+=(101k/990)=102.02
すなわち、誤差分ε+は+2.02%である。
これをデシベル(dB)換算で書くと、以下のようになる。
G+(dB)=20log(101k/990)=40.17〔dB〕
つまり、誤差分ε+(dB)は+0.17dBである。
同様に、−方向の最大ゲイン誤差G−は以下のように記述できる。
G−=(99k/1.01k)=98.02 
すなわち、誤差分ε−は−1.98%である。
デシベル換算では、以下のようになる。
G−(dB)=20log(99k/1.01k)=39.83〔dB〕
誤差分ε−(dB)は−0.17dBである。
このように、抵抗値の±1%の誤差は、回路のゲインに対して約0.2dBの誤差を与える。ゲイン100に対する102.02と98.02という値と、%単位での誤差、dB単位での誤差という表記の違いによって、誤差の大きさに対して異なる印象が感じられるが、実体としては同一である(アプリケーションに応じて、誤差の表記法としてどれが適しているのかという判断も併せて必要となる)。
アナログ回路において、抵抗の精度(誤差)は、その回路の精度に直接影響することになる。抵抗については、E96系列に代表されるように、1%精度の製品が用意されていることも、このような理由から来ている。
容量値の誤差は周波数特性の誤差に
図2に示したのは、一般的なバタワース型2次LPF(低域通過フィルタ)回路である。この回路において、抵抗とコンデンサの値は、回路のゲイン、カットオフ周波数fc、Qを決定する要素となる。ここで、コンデンサの容量値のみに着目すると、その誤差は、フィルタとしての基本性能である周波数特性/カットオフ周波数にいちばん多くの影響を及ぼす。この回路おけるカットオフ周波数fcは、次式で求められる。
fc=1/2πR1√C1C2
ここで、R1=1kΩ、C1=4700pF、C2=2200pFとすると、カットオフ周波数fcは以下のようになる。
fc=1/2π×1kΩ×√4700pF×2200pF=49.495kHz
抵抗の誤差と同様に、コンデンサC1、C2それぞれについて最大1%の誤差を持つとすると、C1、C2ともに+1%の容量誤差がある場合、カットオフ周波数は以下のようになる(計算式は省略)。
カットオフ周波数fc+:49.004kHz
誤差Δ:−491Hz
誤差率:+0.99%
また、C1、C2ともに−1%の誤差がある場合には、以下のようになる。
カットオフ周波数fc−:49.995kHz
誤差Δ:+500Hz
誤差率:1.01%
これらの結果は、誤差要因にはC1とC2の2つが存在し、それぞれが最大1%の誤差を有していても、カットオフ周波数fcの誤差は単純な足し算による2%ではなく、約1%になるということを意味している。増幅回路における抵抗の誤差とゲインの誤差との関係に比べて、コンデンサの誤差がフィルタ回路の周波数特性に与える影響は約1/2である。過去からのこうした検証の積み重ねにより、抵抗とコンデンサの製品ラインアップにおいて、使用する標準数列が異なるという結果となっていると言える。
なお、ここでは、フィルタ回路においてコンデンサの誤差が回路に影響を及ぼす例を示したが、このように、回路の特性を決める用途以外では、容量値として高い精度は求めないことが一般的だ。例えば、電源デカップリングの用途や、ACカップリングなどの用途などでは、容量値について高い精度は要求しないということである。
インダクタンスの誤差の「影響」は小さい?
高周波回路では、コイル/トランスのインダクタンス値、コイルの巻き線比などは、回路の特性に直接影響を及ぼす重要な要素である。また、同調(共振)回路では、コンデンサCとコイルLの積であるLCの値そのものが回路の特性となる。それに対し、低周波回路や一般的なアナログ/デジタル回路におけるコイルは、フィルタの用途に用いられることがほとんどである。すなわち、コイルは、回路の機能/特性に直接的に影響するものではなく、回路の動作の安定化、あるいはEMI(Electro Magnetic Interference)対策など、付随的な意味での利用が主であると言える。
図3に、D級アンプにおける出力LCフィルタ回路の例を示す。このフィルタの役割は、D級アンプのスイッチングノイズを除去することである。D級アンプの方式によっては、ノイズシェーピングによる帯域外周波数成分の除去の役割を果たす場合もある。特定の周波数をピンポイントで除去することを目的としているわけではないため、カットオフ周波数の精度に対する要求は比較的緩いケースがほとんどだ。このLCフィルタのカットオフ周波数fcは、以下の式で求めることができる。
fc=1/2π√(L1+L2)(C1+C2)
コンデンサの場合と同様に、カットオフ周波数fcに対するインダクタンスの誤差の影響は、［インダクタンスの誤差］≒［カットオフ周波数の誤差］と扱ってかまわない。
図3のアプリケーションにおいて、フィルタは、可聴帯域を大きく上回る数百kHz〜1MHz帯という範囲の周波数信号を除去することを目的とする。そのため、カットオフ周波数fcに対する許容誤差のレベルも大きく、少なくとも1%オーダーの誤差が回路に与える影響はほとんどない。
コイルについては、アプリケーションの性質に依存して、ほかの要素が重要になることが多い。例えば、残留抵抗分、許容電力、磁気コアの有無、磁気タイプといった要素である。
E系列値と設計値
設計の過程で計算によって求めた回路定数が、抵抗、コンデンサ、コイルの各値とも、E系列の標準数列で入手できる値と一致しない場合がある。例えば、フィルタ回路のカットオフ周波数fcの計算結果として、コンデンサの値CRが2320pFといった値になった場合について考える。この値はE系列の標準数列には存在しないので、標準数列のうち最も近い値のものを選択することになる。先述したように、抵抗の場合、E96系列が高精度品として一般的に製造/販売されているが、コンデンサで一般的に製造/販売されているのはE24系列までである。E24系列(表1を参照)から選択すると、C1=2200pFかC2=2400pFのいずれかということになる。
計算値CRからの誤差は、C1、C2のそれぞれで以下のようになる。
C1−CR=2200pF−2320pF=−120pF(−5.2%)
C2−CR=2400pF−2320pF=70pF(+3.0%)
誤差の少ないほうを単純に選択すると2400pFということになるが、この時点で設計値に対して+3%の誤差があり、さらにこれに実際の製品での誤差±5%が加わるので、総合的な誤差εは、以下のようになる。
ε=3%±5%=+8%〜−2%
すなわち、10%の誤差幅を持つということである。この誤差を許容できるか否かは、アプリケーションによって異なる。仮に、より高い精度が要求される場合には、部品数が増えてしまうが、複数のコンデンサを並列接続することで解決する方法もある。この例の場合、2200pFのコンデンサと120pFのコンデンサを並列に接続すれば、2320pFという計算値と同じ容量値を実現することができる。
逆に、入手可能なE系列のコンデンサの値を基準にして回路定数を計算するという手法もある。というよりも、この手法のほうがより一般的かもしれない。いずれにせよ、どのような手法を用いることになるかは、設計を行う企業/部門単位、あるいは個人の考え方によって異なる。設計シミュレーションソフトの普及により、計算そのものは簡便になったが、最終的な部品選定までの過程では、精度(誤差)についての検証は重要な作業になる。
今回のまとめとして、以下の2つを回路設計におけるキーポイントとして挙げておく。
抵抗、コンデンサ、コイルの精度(誤差)と回路の精度(誤差)との関係を検証すること
実際に使用する部品を選択する際には、E系列で対応可能な最適な値と精度(誤差)との関係を検証する
これらは、抵抗、コンデンサ、コイルに共通する事柄だが、実際のアプリケーションにおいて製品の選択に必要となる要素(特性、定格など)はそれぞれに異なる。これらについては、次回以降、事例を示しながらより詳細に解説する。
抵抗/コンデンサ/コイルの基本を学ぶ(1):部品の誤差は何に効くのか? - EDN Japan
