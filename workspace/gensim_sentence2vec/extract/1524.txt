技術ディビジョン・プロフェッショナルコンサルタント 宮木 邦宏
今回から複数回に分けて、B- Spline曲線について解説します。 B-Spline曲線は、これまで説明したFerguson/Coons、Bezierのふたつの曲線よりも、表現力豊かな曲線理論です。現在最もよく使われているNURBSの基礎理論でもあります。 現在のB-splineの基礎理論は、米国・シラソース大学のK.Vesprille氏の博士論文(1975 年)によるものとされています。その後、1978年にCarl de Boor(カール・ド・ブール)氏が安定的な計算法を発表し、これがCADにおけるB-Spline理論の採用を加速しました。 B-splineの"B"は "Basis"(基底)の略です。英語版WikiPediaにも紹介されていますが、Isaac Jacob Schoenberg(アイザック・ヤコブ・シェーンバーグ)氏が1940年代後半の論文に略称として用いたのが最初で、彼が命名者と言って良いでしょ う。    B-Splineの概要 B-Spline曲線は、複数の制御点と、ノットと呼ばれるパラメータ区間の境界の値によって定義される、多項式曲線です。平たく言うと、Bezier曲 線の集合体として表現される曲線で、複数のセグメントから成ります。このため、Bezier曲線と同様の特性を持っていますが、セグメント表現になること で、Bezier曲線にはなかった「局所制御性」という特徴が加わっています。 B-Spline曲線では影響を与える制御点は、セグメントを生成するのに用いられた点だけに限定されます。 従ってBezier曲線よりもより局所的な操作を行なうことができるわけです。 B-Splineの次数とは、セグメントであるBezier曲線の次数を指します。与える制御点は、与えた次数+1以上であれば何個でも良く、内部的には与えた次数のBezier曲線セグメントが複数本定義されます。 そのほかの特性は以下の通りです。  セグメント接続性セグメント接続点において、隣接セグメントどうしの接線ベクトル、曲率ベクトルがともに一致します。 理論上、制御点は無限B-Spline曲線はBezier曲線セグメントの集合体であり、理論上制御点数に制限はありません。 凸閉包性Bezier曲線と同じく、B-Spline曲線も制御点の境界多角形内に含まれます。 この性質を利用して、干渉計算を高速に行うことができます。 アフィン不変性アフィン変換(曲線の移動/回転/拡大・縮小)を行った場合でも、その形状の同一性・相似性が保たれます。 B-Spline曲線の素の姿 次に基本的なB-Spline曲線の形状を見てみましょう。 下図は3次のB-Spline曲線です。 緑色のP0からP3が制御点になります。青の曲線が、得られたB-Spline曲線です。 すぐに気がつかれたと思いますが、これまで紹介したふたつの曲線と異なり、B-Spline曲線は与えられたどの制御点も通過していません。CADで作成 したB-Spline曲線は通常始点、終点が必ず制御点上を通るよう表現されるため、この形状を奇異に感じるかも知れませんが、本来的にはこれが素の姿の B-Spline曲線です。    Bezier曲線では3次なら制御点は4つでしたので、上記の曲線は基本的にBezier曲線です。 下の例では上図に1点増やし、5点を指示しています。5点からなるBezier曲線は4次となりますが、B-Spline曲線は3次のまま、複数のセグメントから表現されることになります。    P0からP4までの5つの制御点から [P0,P1,P2,P3] [P1,P2,P3,P4] という、連続する4つの制御点2組から、2本のセグメントが生成されます。 赤色で示した点がセグメントのつなぎ目になります。 B-Splineの表現アルゴリズム ではB-Spline曲線の表現アルゴリズムを見てみましょう。    上図の青で示したB-Spline曲線は2本のBezier曲線のセグメントでできていますが、q4-q5間のセグメントの作り方について説明します。 q0はP0-P1間を2:1に内分した点です。同様に制御多角形を結んだ直線を、1:2、2:1に内分した点を順次作成していきます。この結果、上図のようにq1、q2、q3が求まります。 次にq0-q1を結び、その中点q4を求めます。同様にq2-q3を結び、その中点q5を求めます。これら2点がセグメントの端点です。 以上の処理で求めた点からできた多角形[q4-q1-q2-q5]を使ってBezier曲線を作ると、q4-q5間のセグメントになります。  注意して見ていただきたいのは、q5の取り方です。q2,q5,q3が一直線上にあり、q5は線分q2-q3の 中点です。前回の講座で、「Bezier曲線の連続性は、各セグメントの接合点に隣接する制御点を直線上に配置し、制御点間の距離を等しくすることで確保 できる」ことを説明しました。B-Spline曲線では、まさにこの条件を満たすように制御が行われています。この結果セグメント間のG1/G2連続が保 たれます。  次回はB-Spline曲線の数学的表現について解説します。  (第8回おわり)
3次元図形処理技術解説 第8回 B-Spline曲線(1) - 製造業コンサルティング 株式会社O2[オーツー]
