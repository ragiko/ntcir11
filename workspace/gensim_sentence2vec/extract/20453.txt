 
航空宇宙システムや自動車、医療機器などがシステムとして高い信頼性を要求されることは一般的に知られている。これらのシステムに使われる半導体チップの製造には最先端のプロセス技術ではなく、どちらかというと熟成したプロセス技術を使うことが多い。熟成したプロセス技術で製造した半導体チップは信頼性のデータが充実しており、一定水準の信頼性を保証しやすい。また熟成したプロセスは設計マージンを取りやすいので、信頼性を高めやすい。
ところが、最先端のプロセス技術による最高性能の半導体チップを使いつつ、非常に高い信頼性を要求するシステムがある。それが「高性能コンピューティング(HPC:High Performance Computing)」の分野だ。
高性能コンピューティング(HPC)の分野では、ソフトエラー対策がきわめて重要であり、避けて通れない課題になっている。8月27日〜28日に福岡県福岡市で開催された「第2回ソフトエラー(などのLSIにおける放射線効果)に関する勉強会」では、「TOP500」で知られる世界トップクラスのスーパーコンピュータにとってソフトエラーが重大な脅威であることが、富士通と富士通セミコンダクターの共同研究チームから改めて示された。
ソフトエラーとは一過性のエラー(故障または不良)で、電源を再投入したり、リセットをかけたり、演算結果を取り消して再実行したりすると、たいていは正常に動作する。ソフトエラーが厄介なのは、ハードウェアもソフトウェアも正常であることだ。ハードウェアの故障であれば、ボードを交換すればよい。ソフトウェアのバグであれば、修正すればよい。ところがソフトエラーはこれらすべてが正常な状態で、なおかつシステムが稼働している途中で発生する。HPCのように24時間365日の稼働を前提とするシステムでは、ソフトエラーは重大な脅威なのである。
TFLOPSとPFLOPSの大きな差異
富士通は日本が誇るスーパーコンピュータ「京(けい)」を例に、ソフトエラーの脅威を具体的に明らかにした。「京」の論理演算性能は11.28PFLOPS(ペタフロップス)、LINPACK性能は10.51PFLOPSに達する。2011年6月と11月の「TOP500」で「京」は世界1位に輝いた。2012年6月に公表された最新のTOP500でも世界2位の性能を維持している。
「京」を初めとする最新世代のスーパーコンピュータは、10PF〜20PFの性能を目標とする。ここで最大の脅威となるのが、ソフトエラーだ。参考のために示されたのが、少し前の世代のテラフロップス・スーパーコンピュータにおける不良率のデータである。例えば「Cray XT3/XT4」は、1TFLOPS(テラフロップス)当たりで1日に0.1回〜1回のエラーが発生する。この不良率で演算性能を10PFLOPSに拡張すると、1日になんと1,000回〜1万回ものエラーが発生することになるのだ。平均不良間隔(MTBF:Mean Time Between Failure)に換算するとわずか9秒〜1分30秒という驚くべき短さである。
これが何を意味するかというと、単純にテラフロップス級の高性能コンピュータを拡張したのでは、ペタフロップス級の高性能コンピュータはまともに稼働すらできない、ということだ。稼働し始めてもすぐにエラーを発生する、とんでもない代物になってしまう。
10PFLOPSの実現に必要な信頼性とは
以上のことから、実用的な10PFLOPSコンピュータの実現には、半導体チップの段階で非常に低い不良率が求められる。それでは、どの程度の不良率を達成すべきなのか。スーパーコンピュータ「京」の場合、筐体1個が102個の計算ノードを収容しており、864個の筐体がある。計算ノード数の合計は88,128ノードになる。おおよそ9万ノードと考えよう。LINPACKベンチマークの実行時間は29.5時間だったので、余裕を見て計算時間を33.3時間と仮定する。
約9万ノードの計算ノードが33.3時間稼働して、10PFLOPSの性能を発揮し、なおかつ90%の成功率で計算を完了させる。このためには、1計算ノード当たりの不良率を36FIT(Failure In Time)以下に抑えなければならない。
ここでFIT(フィット)とは、10の9乗時間(10億時間)当たりの不良発生率を示す単位である。1年間は8,760時間なので1万時間と粗く見積もると、10億時間とは10万年に相当する。10万年で36回の不良発生が許されるとすると、粗く平均して約3,000年に1回の不良発生となる。気が遠くなるような長さである。言い換えると、スーパーコンピュータ「京」は物凄く高い信頼性を実現しているということになる。
ちなみに2012年6月のTOP500で上位3システムのLINPACK性能はトップ「Sequoia(セコイア)」が16.32PFLOPS、2位「京」が10.51PFLOPS、3位「Mira(ミラ)」が8.15PFLOPSである。半導体チップのCPUコア数でみると、順に157万2,864コア、70万5,024コア、78万6,432コアとなっている。
【PC Watch】 第2回ソフトエラー勉強会レポート 高性能コンピューティング最大の脅威となる「ソフトエラー」
