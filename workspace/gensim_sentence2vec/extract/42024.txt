
次へ: Koshix
上へ: 画像合成プログラムの詳細
戻る: 画像合成プログラムの詳細
目次 
Hanaoka
最も基本的な、太陽全面像におけるポイントソースのクリーンを行って像を
作る。また、17/34GHzの両方に対応している。フレアのデータ解析において最
初に全体像を把握するのに適している。一方、広がったソースには対応してい
ない。
現在のバージョン   ver. 6.2
対応している計算機   PC-Linux, NEC/SX、NEC/EWS、Sun/Sparc
対応しているデータ   
17GHz/34GHz、定常/イベントモード、全面像/部分像
ピクセルサイズ   
4.9 arcsec/pixel (17GHz)、 2.45 arcsec/pixel (34GHz)
視野   
17GHzは512 pixel(全面像)以下 、34GHzは1024 pixel(全面像)以下
使用法
(1)  unix% hanaoka17  input  
(2)  unix% norh_synth -p hanaoka17 input  
(3)  IDL> norh_synth,time,prog='hanaoka',freq=17 
(4)  unix% hanaoka34  input  
(5)  unix% norh_synth -p hanaoka34 input  
(6)  IDL> norh_synth,time,prog='hanaoka',freq=34 
入力ファイルinputの具体例
行番号は便宜上つけたもの。また(*)印をつけたものは通常変更しなくてよい。
見本が${NORH}/soft/synthesis/hanaoka以下に置いてある。
17GHz
1:
.                 
; 出力ディレクトリ
2:
ss17980419        
; 生データファイル
3:
sz00980419001     
; SZファイル
4:
512               
; 出力画像視野サイズ
5:
1,0,0             
; 出力画像中心の太陽中心からのずれ
6:
1                 
; 開始フレーム番号
7:
3600              
; 終了フレーム番号
8:
600               
; フレーム間隔
9:
1                 
; *キャリブレーション積分フレーム数
10:
1                 
; *画像合成積分フレーム数
11:
-0.5,-0.5         
; *CLEAN終了判定値その1(R+L),(R-L)
12:
0.01              
; *CLEAN終了判定値その2
34GHz
1:
.                 
; 出力ディレクトリ
2:
ss34980419        
; 生データファイル
3:
sz00980419001     
; SZファイル
4:
1024              
; 出力画像視野サイズ
5:
1,0,0             
; 出力画像中心の太陽中心からのずれ
6:
1                 
; 開始フレーム番号
7:
3600              
; 終了フレーム番号
8:
600               
; フレーム間隔
9:
1                 
; *キャリブレーション積分フレーム数
10:
1                 
; *画像合成積分フレーム数
11:
-1                
; *CLEAN終了判定値その1
12:
0.01              
; *CLEAN終了判定値その2
入力ファイルinputの詳しい内容
(1行め)出力ディレクトリ
(2行め)生データファイル 
定常モードデータの場合、生データのファイル名はssFFYYMMDD###
(FFは周波数で17か34、###は001から048の番号)
のようになっているが、ファイル番号の3桁の整数部分より前、すなわち
ssFFYYMMDDを書く。イベントモードデータの場合はファイル名を書く。
(3行め)SZファイル
生データに対応する日付のSZファイル名
(4行め)出力画像の視野ピクセル数
ここで指定したピクセル数を一辺とする正方形画像が出力される。
17GHzの場合、もともと512x512画素なので、512とすると全画面、
それ以下であれば部分像が切り出される。34GHzの場合は1024x1024が全面像。
ピクセルサイズは17GHz(34GHz)画像は4.9(2.45)秒角。
(5行め)出力画像中心の太陽中心からのずれ
最終的に太陽面中心をずらした画像を作りたい場合
に値を入れる。単位は1のときarcsec、2のときピクセルである。ずらさない場
合は1,0,0と入れるが、この場合太陽面中心と画像中心とが一致する
([1,1]-[512,512]の画像の場合、256番目と257番目のピクセルの境界)。
(6行め)像合成を行う最初のフレーム番号
0を指定すると不等間隔のフレーム指定になる。
(7行め)像合成を行う最後のフレーム番号
不等間隔のフレーム指定のときは像合成を行うフレームの数を入れる。
(8行め)フレーム間隔
不等間隔のフレーム指定の時は像合成するフレー
ムを並べて入力する。複数行にわたってもよい。
(9行め)アンテナ位相利得計算の積分フレーム数
(10行め)画像合成を行うときの積分するフレーム数
(11行め)CLEANの終了判定値(の下限)
ダーティマップ上の最大値がこの値にな
るまでCLEANが行われる。単位は輝度温度(静穏太陽面が1万度)。
なお、次項の判定値の方が大きいときはそちらが採
用される。正の数値の場合そのままの値が採用され、負の数値を与えると、そ
の絶対値をディスクの明るさにかけた値が判定値となる。
17GHzでは、R+LとR-Lとにそれぞれ指定するが、通常-0.5つまりディ
スクの明るさの半分までCLEANをするのが適当である。34GHzでは、
R+Lのみで、通常-1つまりディスクの明るさまでCLEANするのが適当。
(12行め)CLEANの終了判定値を計算するファクター
このファクターはダーティマップ上の最大
値に対してどこまでCLEANするかを指定する。明るいソースが無いような場合
はCLEAN判定値が小さくなってしまうが、前項の判定値の方が大きい場合はそ
ちらが採用される。通常0.01にしておくとサイドローブをCLEANすることはな
いが、ややS/Nの悪い画像ではもう少し大きい方が安全である。
次へ: Koshix
上へ: 画像合成プログラムの詳細
戻る: 画像合成プログラムの詳細
目次 
service@solar.nro.nao.ac.jp
Hanaoka
