  
　しかしながら、放送番組の映像とネットワーク経由で受信した字幕とを同期して出力するために、ＰＴＳを利用する特許文献１の技術を適用すると、受信装置の処理負担が大きくなる。
　それは、字幕ストリームを配信するサーバが、映像ストリームの放送時刻に合わせて字幕ストリームを送出したとしても、デジタル放送の伝送遅延時間とネットワークの伝送遅延時間とが等しくないため、受信装置は、早く到着した一方のストリームをバッファに格納しておき、対応するＰＴＳを有する他方のストリームが到着するのを待って、同期処理を行う必要があるためである。
　そこで、本発明は、上記の問題点に鑑みなされたものであって、受信装置にとって負担の少ない処理により、デジタル放送の映像と、当該映像とは別途取得した字幕とを同期して出力することができる受信装置、放送通信連携システムおよび放送通信連携方法を提供することを目的とする。
　上記の目的を達成するために、本発明の一態様である受信装置は、時間軸に沿って出力される複数の画像から成る映像ストリームと、放送字幕と、前記放送字幕を対応する画像に同期して出力するためのタイミング情報とを含む放送コンテンツを受信する放送受信手段と、前記放送字幕を構成する各文字列を他の表記方法の文字列に置き換えた代替字幕を前記放送コンテンツより先行して取得する代替字幕取得手段と、取得した前記代替字幕を保持する代替字幕保持手段と、放送字幕に対して指定されているタイミングで、代替字幕を出力する代替字幕同期手段とを備えることを特徴とする。
　上記の構成によると、放送字幕のタイミング情報を利用して代替字幕を出力するので、受信装置にとって負担の少ない処理により、映像ストリームに含まれる各画像と代替字幕に含まれる各文字列とを同期して出力することができる。
実施形態１に係る放送通信連携システム１の構成図 放送字幕のデータ構造（データグループ構造）を示す図 字幕管理データのデータ構造を示す図 字幕文データのデータ構造を示す図 データユニットのデータ構造を示す図 データユニットパラメータについて説明するための図 放送字幕の一つの具体例を説明するための図 字幕サーバ３０が管理する字幕データベースの一例を示す図 デジタルテレビ１０の機能ブロック図 代替字幕保持部に格納される代替字幕データの一例を示す図 受信装置１１のハードウェア構成図 受信装置１１による代替字幕同期処理の動作を示すフローチャート 受信装置１１によるタイミング制御処理の動作を示すフローチャート 受信装置１１による画面生成処理の動作を示すフローチャート 実施形態１の効果について説明するための図 実施形態２に係る放送通信連携システム２の構成図 デジタルテレビ１００の機能ブロック図 連携画面について説明するための図 受信装置１１００による代替字幕同期処理の動作を示すフローチャート 受信装置１１００によるタイミング制御処理の動作を示すフローチャート 受信装置１１００による画面生成処理の動作を示すフローチャート 通信コンテンツであるＨＴＭＬファイルの記述例を示す図 字幕データベースの変形例を示す図 字幕データベースの変形例を示す図 
　＜１．概要＞
　本発明の一態様である受信装置は、デジタル放送では放送されていない言語の字幕を、例えばネットワーク経由でサーバから取得し、デジタル放送の映像と同期して出力するというものである。
　日本の現行のデジタル放送では、聴覚障害者向けの日本語の字幕が放送局から送信されている。以下、放送局から送信されている字幕を「放送字幕」と記載する。この放送字幕には、対応する映像と同期して表示するためのタイミング情報が付加されている。
　ここで、ネットワーク経由でサーバから取得した他の言語の字幕（以下、「代替字幕」と記載する）は、放送字幕を他の言語に翻訳したものであるから、代替字幕を表示すべきタイミングは、対応する放送字幕を表示すべきタイミングと同じである。発明者は、このことに着目し、放送字幕に付加されているタイミング情報を利用して、代替字幕の表示タイミングを決定し、代替字幕と映像とを同期して出力する代替字幕同期処理を行う受信装置を発明した。
　以下、具体的な実施形態について、図面を参照しながら説明する。
　＜２．実施形態１＞
　ここでは、本発明に係る放送通信連携システムの一態様である放送通信連携システム１について説明する。
　＜２－１．放送通信連携システム１の構成＞
　図１は、放送通信連携システム１の構成を示す図である。同図に示すように、放送通信連携システム１は、デジタルテレビ１０、放送装置２０、および、字幕サーバ３０から構成される。
　放送装置２０は、放送局が保有する装置であって、複数の番組やデータ放送が多重化されたＭＰＥＧ－２トランスポートストリームを送信する。各番組（放送コンテンツ）は、映像、音声、放送字幕を含む。ここで、「放送字幕」とは、具体的に、一つの番組の開始から終了まで、映像と関連する字幕文を映像に重ねて表示するサービスにおける字幕文の集合をいう。各字幕文は、文字列であり、各文字列は、１以上の文字から構成される。また、各文字列には、当該文字列と後述する代替文字列とを対応付けるための識別子である同期識別子が付与されている。
　字幕サーバ３０は、サービス提供業者が保有する装置である。サービス提供業者は、予め、番組の放送予定時刻になる前に、放送局から番組メタデータの提供を受ける。なお、サービス提供業者は、番組の進行に応じて随時、放送局から番組メタデータの提供を受ける構成でもよい。番組メタデータとは、番組に関する各種の情報である。本実施形態では、サービス提供業者は、番組メタデータとして、少なくとも、放送字幕を構成する各文字列と、各文字列に付与されている同期識別子との提供を受ける。そして、サービス提供業者は、放送字幕を構成する各文字列を、他の言語に翻訳した文字列である代替文字列の集合である代替字幕を作成する。本実施形態では、サービス提供業者は、複数の言語についての代替字幕を作成することとする。
　字幕サーバ３０は、作成された複数の代替字幕を、後述する字幕データベースを用いて管理する。字幕サーバ３０は、番組の放送が開始された後、デジタルテレビ１０から番組および言語を指定した代替字幕要求を受信すると、要求された番組および要求された言語の代替字幕をデジタルテレビ１０へ送信する。
　デジタルテレビ１０は、ユーザの宅内に設置されており、放送局の放送装置２０から送信されたＭＰＥＧ－２トランスポートストリームを受信する。また、デジタルテレビ１０は、インターネット等のネットワークを介して字幕サーバ３０と接続可能であり、字幕サーバ３０から代替字幕を受信する。そして、デジタルテレビ１０は、放送装置２０から受信した映像および音声と、字幕サーバ３０から受信した代替字幕とを同期して出力する。
　＜２－２．データ＞
　ここでは、放送通信連携システム１で扱うデータについて説明する。
　（放送字幕のデータ構造）
　先ず、図２～図７を用いて、放送字幕のデータ構造について説明する。
　本実施形態では、ＡＲＩＢのＳＴＤ－Ｂ２４で規定されている符号化方式を一部拡張することにより、デジタルテレビ１０における映像と代替字幕との同期を可能としている。
　放送字幕は、図２に示すようなデータグループ構成により、データグループ化され、独立ＰＥＳ（Ｐａｃｋｅｔｉｚｅｄ　Ｅｌｅｍｅｎｔａｒｙ　Ｓｔｒｅａｍ）に収容されて伝送される。データグループ１２０の各フィールドの意味、ビット数、取り得る値は、ＡＲＩＢのＳＴＤ－Ｂ２４で規定されているとおりである。ｄａｔａ＿ｇｒｏｕｐ＿ｄａｔａ＿ｂｙｔｅのフィールドには、伝送するデータグループデータが格納される。データグループデータは、具体的に、図３に示す字幕管理データ１３０、若しくは、図４に示す字幕文データ１４０である。
　図３は、字幕管理データ１３０のデータ構造を示している。字幕管理データ１３０は、放送字幕の言語識別や送出モードなどを示す字幕管理データヘッドと、データユニット群とから構成される。各フィールドの意味、ビット数、取り得る値は、ＡＲＩＢのＳＴＤ－Ｂ２４で規定されているとおりである。
　例えば、ＴＭＤ（１３１）のフィールドは、時刻表示モードを示す。ＩＳＯ＿６３９＿ｌａｎｇｕａｇｅ＿ｃｏｄｅ（１３２）のフィールドには、放送字幕の言語を識別する言語コードが格納される。ｄａｔａ＿ｕｎｉｔ（）（１３３）のフィールドには、設定データなど、同一のＥＳで送出される放送字幕の全体で利用可能なデータのデータユニットが配置される。
　図４は、字幕文データ１４０のデータ構造を示している。字幕文データ１４０は、放送字幕の本体部分である。字幕文データ１４０は、放送字幕を映像および音声と同期して表示するための時刻情報と、１以上のデータユニット群とから構成される。各フィールドの意味、ビット数、取り得る値は、ＡＲＩＢのＳＴＤ－Ｂ２４で規定されているとおりである。例えば、ＴＭＤ（１４１）のフィールドは、字幕管理データ１３０と同様に、時刻表示モードを示す。ＳＴＭ（１４２）のフィールドは、後続の字幕文の表示開始時刻を示す。ｄａｔａ＿ｕｎｉｔ（）（１４３）のフィールドには、字幕文を構成するデータユニットが配置される。
　図５は、字幕管理データ１３０および字幕文データ１４０で使用されるデータユニット１５０のデータ構造を示している。ｄａｔａ＿ｕｎｉｔ＿ｐａｒａｍｅｔｅｒ（１５１）のフィールドには、データユニットの種類を識別する値が格納される。ｄａｔａ＿ｕｎｉｔ＿ｄａｔａ＿ｂｙｔｅ（１５２）のフィールドには、伝送するデータユニットデータが格納される。その他のフィールドの意味、ビット数、取り得る値は、ＡＲＩＢのＳＴＤ－Ｂ２４で規定されているとおりである。
　図６の表１６０は、データユニットの種類、ｄａｔａ＿ｕｎｉｔ＿ｐａｒａｍｅｔｅｒの値および機能を表している。
　データユニット欄に記載の「本文」、「ジオメトリック」などは、データユニットの名称を示している。データユニットパラメータ欄に記載の、「０ｘ２０」、「０ｘ２８」などは、ｄａｔａ＿ｕｎｉｔ＿ｐａｒａｍｅｔｅｒ（１５１）のフィールドに実際に格納される値を示している。例えば、図５のデータユニット１５０のｄａｔａ＿ｕｎｉｔ＿ｐａｒａｍｅｔｅｒ（１５１）のフィールドに「０ｘ２０」が格納された場合、ｄａｔａ＿ｕｎｉｔ＿ｄａｔａ＿ｂｙｔｅ（１５２）には、字幕文を構成する文字データが格納される。
　ここで、図６の表１６０において、「本文」、「ジオメトリック」、「付加音」、「１バイトＤＲＣＳ」、「２バイトＤＲＣＳ」、「カラーマップ」、「ビットマップ」のデータユニットは、ＡＲＩＢのＳＴＤ－Ｂ２４で既に規定されている。
　本実施形態では、ＡＲＩＢ規格を拡張し、データユニット名が「放送通信同期識別」であり、データユニットパラメータの値が「０ｘ５０」であるデータユニットを新たに定義している。放送通信同期識別のデータユニットは、放送コンテンツである映像と、通信コンテンツである代替字幕とを同期するためのデータを送出するデータユニットである。図５のデータユニット１５０のｄａｔａ＿ｕｎｉｔ＿ｐａｒａｍｅｔｅｒ（１５１）のフィールドに「０ｘ５０」が格納された場合、ｄａｔａ＿ｕｎｉｔ＿ｄａｔａ＿ｂｙｔｅには、映像と代替字幕とを同期するための情報として、放送字幕の字幕文（文字列）を識別するための同期識別子が格納される。
　図７は、放送字幕を送出するデータグループの一例を示す図である。同図に示すように、データグループ１７０のｄａｔａ＿ｇｒｏｕｐ＿ｄａｔａ＿ｂｙｔｅには、字幕文データ１７１が格納されている。そして、字幕文データ１７１には、二つのデータユニットが格納されている。
　ループ一つ目のデータユニット１７２のｄａｔａ＿ｕｎｉｔ＿ｐａｒａｍｅｔｅｒ（１７４）のフィールドには「０ｘ２０」が格納されていることから、データユニット１７２は、本文のデータユニットである。データユニット１７２のｄａｔａ＿ｕｎｉｔ＿ｄａｔａ＿ｂｙｔｅ（１７５）のフィールドには、放送字幕の字幕文が格納されている。具体的には、「こんにちは」というテキストを表示するための８単位符号が格納されている。ここで、８単位符号には、テキストの符号と表示制御のための制御符号とが含まれる。
　ループ二つ目のデータユニット１７３のｄａｔａ＿ｕｎｉｔ＿ｐａｒａｍｅｔｅｒ（１７６）のフィールドには「０ｘ５０」が格納されていることから、データユニット１７３は、放送通信同期識別のデータユニットである。データユニット１７３のｄａｔａ＿ｕｎｉｔ＿ｄａｔａ＿ｂｙｔｅ（１７７）のフィールドには、「こんにちは」という字幕文と、「こんにちは」を他の言語に翻訳した代替文字列とを対応付けるための情報である同期識別子が格納されている。具体的には、「０ｘＡＡＡＡＢＢＢＢ０００００００１」という符号が格納されている。
　ここで、本実施形態では、一例として、「０ｘＡＡＡＡＢＢＢＢ０００００００１」の前半部分（上位８桁）「ＡＡＡＡＢＢＢＢ」は、番組を一意に識別する情報であり、後半部分（下位８桁）「０００００００１」は、当該番組内において、字幕文「こんにちは」を一意に識別する情報であるとする。
　このように、放送装置２０から送出される放送字幕は、本文のデータユニットが格納されている字幕文データに、新たに定義した放送通信同期識別のデータユニットを合わせて格納する構成を有する。字幕文データまたは字幕管理データに、放送通信同期識別のデータユニットが含まれている番組を、本実施形態では「放送通信連携番組」と呼ぶ。
　（ＰＭＴ、ＥＩＴの拡張）
　本実施形態では、一例として、番組識別情報（ＰＳＩ／ＳＩ）のＰＭＴ（Ｐｒｏｇｒａｍ　Ｍａｐ　Ｔａｂｌｅ）やＥＩＴ（Ｅｖｅｎｔ　Ｉｎｆｏｒｍａｔｉｏｎ　Ｔａｂｌｅ）を拡張することにより、番組が放送通信連携番組であることを示すフラグや、番組を識別するための番組識別情報、放送字幕の言語を識別するための言語コードなどを格納して送出する。
　（字幕データベース）
　図８は、字幕サーバ３０が管理している字幕データベース３１の図である。字幕サーバ３０は、複数の言語の代替字幕を、図８に示す字幕データベース３１を用いて管理する。
　図８に示すように、字幕データベース３１には、放送字幕を構成する各字幕文（文字列）を英語、スペイン語、アラビア語およびヒンディー語のそれぞれの言語に翻訳した代替文字列が、同期識別子と対応付けられて格納されている。また、字幕データベース３１は、各言語を識別するための情報を含む。ここでは一例として、ＩＳＯ６３９－２に規定されるアルファベット３文字コードを用いる。アルファベット３文字コードでは、英語は「ｅｎｇ」、スペイン語は「ｓｐａ」、アラビア語は「ａｒａ」、ヒンディー語は「ｈｉｎ」で表される。
　字幕サーバ３０は、番組の放送が開始された後、デジタルテレビ１０から番組および言語を識別する情報を含む代替字幕要求を受信すると、要求された番組の要求された言語の代替字幕を、同期識別子とセットで字幕データベース３１から抽出する。そして、字幕サーバ３０は、抽出した同期識別子と代替字幕とのセットから成る代替字幕データを、デジタルテレビ１０へ送信する。
　上述したように、本実施形態では、同期識別子の上位８桁は、番組を一意に識別する情報である。そのため、字幕サーバ３０は、デジタルテレビ１０から番組および言語を識別する情報を貰えば、字幕データベース３１から要求された代替字幕を抽出することができる。
　例えば、字幕サーバ３０は、番組を識別する情報として「ＡＡＡＡＢＢＢＢ」を受信し、言語を識別する情報として「ｈｉｎ」を受信した場合、字幕サーバ３０は、図１０に示す代替字幕データ３１０を、デジタルテレビ１０へ送信する。
　＜２－３．デジタルテレビ１０の構成＞
　（機能構成）
　図９は、デジタルテレビ１０の機能的な構成を示すブロック図である。同図に示すように、デジタルテレビ１０は、受信装置１１と、映像を出力するディスプレイ１２と、音声を出力するスピーカ１３とから構成される。
　受信装置１１は、放送受信部１０１、デマルチプレクサ１０２、オーディオデコーダ１０３、ビデオデコーダ１０４、音声出力部１０５、映像出力部１０６、選択言語記憶部１０７、字幕制御部１０８、放送通信連携制御部１０９、代替字幕取得部１１０、代替字幕保持部１１１、タイミング制御部１１２、放送字幕画面生成部１１３、放送字幕出力部１１４、代替字幕画面生成部１１５、代替字幕出力部１１６、および、合成部１１７から構成される。
　放送受信部１０１は、放送局の放送装置２０から送信されたトランスポートストリームを受信する。放送受信部１０１は、受信したトランスポートストリームを、デマルチプレクサ１０２へ渡す。
　デマルチプレクサ１０２は、複数の番組が多重化されているトランスポートストリームから、ユーザが選択した番組のパケットやデータカルーセルのみを取得する。ユーザは、図示していないリモコン等の入力デバイスを操作することにより、視聴する番組を選択することができる。
　デマルチプレクサ１０２は、音声パケットをオーディーデコーダ１０３に渡し、映像パケットをビデオデコーダ１０４に渡す。また、デマルチプレクサ１０２は、ＥＩＴパケットと字幕パケットとを字幕管理部１０８に渡し、データカルーセルを図示していないデータ放送デコーダに渡す。
　オーディオデコーダ１０３は、音声パケットを取得してデコードする。デコードされた音声信号は、音声出力部１０５へ入力される。
　ビデオデコーダ１０４は、映像パケットを取得してデコードする。デコードされた映像信号は、映像出力部１０６へ入力される。
　音声出力部１０５は、音声信号を取得する。音声出力部１０５は、ディスプレイ１２へ出力される表示画面に同期して、取得した音声信号を、スピーカ１３へ出力する。
　映像出力部１０６は、映像信号を取得し、取得した映像信号を動画プレーンに展開する。映像出力部１０６は、生成した動画プレーンを合成部１１７へ出力する。
　選択言語記憶部１０７は、選択言語を示す言語コードを記憶している。選択言語とは、デジタル放送の映像と共に表示すべき字幕の言語である。一例として、ユーザは、ディスプレイ１２に字幕言語設定画面が表示されている状態で、リモコン等の入力デバイスを操作することにより、所望の選択言語を設定することが可能である。
　字幕管理部１０８は、デマルチプレクサ１０２から、ＥＩＴパケットと字幕パケットとを受け取る。字幕管理部１０８は、ＥＩＴデコーダを含む。ＥＩＴデコーダは、ＥＩＴパケットをデコードし、番組識別情報および言語コードを抽出する。字幕管理部１０８は、番組識別情報および言語コードを、放送通信連携制御部１０９へ渡す。
　また、字幕管理部１０８は、字幕デコーダを含む。字幕デコーダは、字幕パケットをデコードして、字幕管理データまたは字幕文データを生成する。以下では、字幕管理データおよび字幕文データを総称して「字幕データ」と記載する。字幕管理部１０８は、放送通信連携制御部１０９から受け取る指示に応じて、字幕データの出力先を、タイミング制御部１１２および放送字幕画面生成部１１３の何れかに切り替える。
　放送通信連携制御部１０９は、字幕管理部１０８から受け取る言語コードと、選択言語記憶部１０７に記憶されている言語コードとを比較して、選択言語の字幕が放送されているか否か判断する。
　選択言語の字幕が放送されている場合、放送通信連携制御部１０９は、字幕データの出力先を放送字幕画面生成部１１３とするように、字幕管理部１０８へ指示する。
　選択言語の字幕が放送されていない場合、放送通信連携制御部１０９は、代替字幕取得部１１０へ、選択言語の代替字幕の取得を指示する。このとき、放送通信連携制御部１０９は、代替字幕取得部１１０へ、番組識別情報と選択言語の言語コードとを渡す。さらに、放送通信連携制御部１０９は、字幕データの出力先をタイミング制御部１１２とするように、字幕管理部１０８へ指示する。
　代替字幕取得部１１０は、放送通信連携制御部１０９から指示を受けると、ネットワークを介して、字幕サーバ３０へ、番組識別情報と選択言語の言語コードとを含む代替字幕要求を送信する。選択言語の代替字幕が字幕サーバ３０に存在する場合、代替字幕取得部１１０は、代替字幕を同期識別子と対応付けた代替字幕データを受信する。ここで、代替字幕取得部１１０と字幕サーバ３０とは、ＨＴＴＰやＷｅｂＳｏｃｋｅｔ等の既存のプロトコルを用いて代替字幕データを送受信する。また、本実施形態の代替字幕取得部１１０は、一例として、一番組分の代替字幕データを一括で受信するのではなく、番組の進行に応じて、順次、代替文字列と同期識別子とのセットを受信する構成を有する。代替字幕取得部１１０は、受信した代替文字列と同期識別子とのセットを、順次、代替字幕保持部１１１へ格納する。
　代替字幕保持部１１１は、代替字幕取得部１１０が字幕サーバ３０から受信した代替字幕データを一時的に保持するメモリである。
　図１０は、代替字幕保持部１１１に保持されている代替字幕データの一例を示す。
　代替字幕データ３１は、視聴中の番組の番組識別情報が「ＡＡＡＡＢＢＢＢ」であり、ユーザが設定した選択言語が「ヒンディー語」である場合に、代替字幕取得部１１０により、字幕サーバ３０から取得された代替字幕データである。
　代替字幕データ３１は、複数の同期識別子と各同期識別子に対応付けられた複数のヒンディー語の字幕文（代替文字列）とから構成される。例えば、同期識別子「ＡＡＡＡＢＢＢＢ０００００００１」に対応付けられている代替文字列３１１は、同一の同期識別子「ＡＡＡＡＢＢＢＢ０００００００１」を有する放送字幕の字幕文（文字列）である「こんにちは」をヒンディー語に翻訳した文字列である。
　同様に、同期識別子「ＡＡＡＡＢＢＢＢ０００００００２」に対応付けられている代替文字列３１２は、同一の同期識別子「ＡＡＡＡＢＢＢＢ０００００００２」を有する放送字幕の字幕文（文字列）をヒンディー語に翻訳した文字列である。
　また、同期識別子「ＡＡＡＡＢＢＢＢ０００００００３」に対応付けられている代替文字列３１３は、同一の同期識別子「ＡＡＡＡＢＢＢＢ０００００００３」を有する放送字幕の字幕文（文字列）をヒンディー語に翻訳した文字列である。
　図１０に記載されている代替文字列３１１、３１２、３１３、・・・のそれぞれが、一つの表示画面に表示される字幕の単位である。図１０の例では、代替文字列として、ディスプレイ１２に表示されるヒンディー語字幕のイメージが記載されているが、実際に代替字幕保持部１１１に保持されているのは、これらのイメージを表示するための文字コードである。なお、受信装置１１がヒンディー語の字幕を表示するためのビットマップを保持しているのであれば、文字コードの代わりに、ビットマップの格納先を保持していてもよい。
　タイミング制御部１１２は、字幕管理部１０８から字幕データを受け取る。字幕データは、上述したように、放送字幕の表示タイミングを決定するための情報を含む。タイミング制御部１１２は、放送字幕の表示タイミングになると、字幕データに含まれる同期識別子を代替字幕画面生成部１１５に渡し、代替字幕画面の生成を指示する。
　放送字幕画面生成部１１３は、字幕管理部１０８から、字幕データを受け取る。放送字幕画面生成部１１３は、放送字幕の表示タイミングになると、字幕データの本文のデータユニットに含まれる文字列に基づき、字幕プレーンを生成する。ここで、字幕データには、放送字幕の文字列を字幕プレーンに展開するときの表示位置（座標情報）、文字サイズ、文字フォント、縦書きまたは横書き、字間幅、行間幅などを指定する情報が含まれる。そこで、放送字幕画面生成部１１３は、これらの情報にしたがい、放送字幕の文字列を字幕プレーンに展開する。放送字幕画面生成部１１３は、生成した字幕プレーンを、放送字幕出力部１１４へ渡す。
　放送字幕出力部１１４は、放送字幕画面生成部１１３から字幕プレーンを受け取り、受け取った字幕プレーンを、合成部１１７へ出力する。
　代替字幕画面生成部１１５は、タイミング制御部１１２から代替字幕画面の生成を指示されると、タイミング制御部１１２から受け取った同期識別子に対応する代替文字列を、代替字幕保持部１１１から読み出す。そして、読み出した代替文字列に基づき、字幕プレーンを生成する。代替字幕画面生成部１１５は、生成した字幕プレーンを、代替字幕出力部１１６へ渡す。
　上述したように、字幕データには、放送字幕の文字列の表示位置、文字サイズ、文字フォントなどを指定する情報が含まれる。これらの情報のうち、表示位置、文字サイズ、行間幅など、言語が異なっていても利用可能な情報がある。そこで、代替字幕画面生成部１１５は、放送字幕に対して指定されている表示位置、文字サイズ、行間幅を利用して、代替文字列を字幕プレーンに展開してもよい。また、代替字幕画面生成部１１５は、文字フォント、縦書きまたは横書き、字間幅などについては、予め受信装置１１に記憶されている既定の情報を利用してもよい。
　代替字幕出力部１１６は、代替字幕画面生成部１１５から字幕プレーンを受け取り、受け取った字幕プレーンを、合成部１１７へ出力する。
　合成部１１７、動画プレーンと字幕プレーンとを合成して、表示画面を生成する。合成部１１７は、生成した表示画面を、ディスプレイ１２に出力する。すなわち、合成部１１７が放送字幕出力部１１４から字幕プレーンを受け取った場合には、放送字幕がディスプレイ１２に表示され、合成部１１７が代替字幕出力部１１６から字幕プレーンを受け取った場合には、代替字幕がディスプレイ１２に表示される。本実施形態では、放送字幕および代替字幕の両方が同時にディスプレイ１２に表示されることはない。
　（ハードウェア構成）
　図１１は、受信装置１１のハードウェア構成の一例を示す図である。
　受信装置１１は、図１１に示すように、ＲＯＭ（Ｆｌａｓｈ）２０１、ＲＡＭ２０２、ＣＰＵ２０３、ネットワークＩ／Ｆ２０４、モデム２０５、ＩＣＣａｒｄ２０６、チューナ２０７、８ＰＳＫ復調器２０８、ＴＳデコーダ２０９、ＭＰＥＧ－ＡＶデコーダ２１０、ＲＡＭ２１１、ＯＳＤ２１２、およびＰＣＭデコーダ２１３から構成される。これらのハードウェアが、コンピュータプログラムと連携して、受信装置１１は各種の機能を実現する。
　＜２－４．受信装置１１の動作＞
　ここでは、図１２～図１４のフローチャートを用いて、受信装置１１による代替字幕同期処理の動作について説明する。
　（代替字幕同期処理）
　代替字幕同期処理の動作が開始されるまで、字幕管理部１０８による字幕データの出力先は、放送字幕画面生成部１１３に設定されている。
　図１２～図１４の代替字幕同期処理の動作は、放送通信連携番組の視聴が開始されることにより開始する。放送通信連携制御部１０９は、視聴が開始された番組のＰＭＴやＥＩＴを解析して、当該番組が放送通信連携番組であるか否か判断することができる。
　放送通信連携制御部１０９は、字幕管理部１０８から受け取った放送字幕の言語を示す言語コードを取得する（ステップＳ１０１）。放送字幕の言語コードがＥＩＴに格納されている場合、字幕管理部１０８は、ＥＩＴから言語コードを取得してもよい。また、図３に示したように、字幕管理データ１３０には言語コードが含まれている。そこで、字幕管理部１０８は、字幕管理データ１３０から言語コードを取得してもよい。放送通信連携制御部１０９は、放送字幕の言語コードと、選択言語記憶部１０７に記憶されている言語コードとを比較し、選択言語の字幕が放送されているか否か判断する。
　選択言語の字幕が放送されていれば（ステップＳ１０２でＹＥＳ）、代替字幕同期処理の動作は終了する。
　選択言語の字幕が放送されていなければ（ステップＳ１０２でＮＯ）、放送通信連携制御部１０９は、番組識別情報と選択言語の言語コードとを代替字幕取得部１１０へ渡し、代替字幕の取得を指示する。
　代替字幕取得部１１０は、番組識別情報と言語コードとを字幕サーバ３０へ送信し、視聴している番組についての替字幕を保持していない場合には、字幕サーバ３０から代替字幕取得部１１０へ、代替字幕の送信不可が通知される構成でもよい。
　字幕サーバ３０が選択言語の代替字幕を保持している場合（ステップＳ１０４でＹＥＳ）、代替字幕取得部１１０は、代替文字列および同期識別子のセットである代替字幕データの取得を開始する（ステップＳ１０５）。
　代替字幕取得部１１０は、放送通信連携番組の視聴中、１個から複数個の単位で、代替文字列および同期識別子のセットの受信を繰り返す。ここで、代替字幕取得部１１０は、遅くとも、同一の同期識別子を有する放送字幕の文字列を受信する時刻よりも前に、各代替文字列を字幕サーバ３０から受信し、保持しておく必要がある。
　続いて、放送通信連携制御部１０９は、字幕管理部１０８に対して、放送字幕表示ＯＦＦを指示する（ステップＳ１０６）。字幕管理部１０８は、放送字幕表示ＯＦＦを指示されると、字幕管理部１０８は、字幕データの出力先を、放送字幕画面生成部１１３から、タイミング制御部１１２へ切り替える（ステップＳ１０７）。
　続いて、タイミング制御部１１２は、タイミング制御処理を行い（ステップＳ１０８）、代替字幕画面生成部１１５および代替字幕画面出力部１１６は、画面生成処理を行う（ステップＳ１０９）。ステップＳ１０８およびステップＳ１０９の詳細は後述する。
　番組の視聴が終了していない場合（ステップＳ１１０でＮＯ）、ステップＳ１０８およびステップＳ１０９の処理を繰り返す。
　番組の視聴が終了した場合（ステップＳ１１０でＹＥＳ）、放送通信連携制御部１０９は、字幕管理部１０８に対し、放送字幕表示ＯＮを指示する（ステップＳ１１１）。字幕管理部１０８は、放送字幕表示ＯＮを指示されると、字幕データの出力先を、タイミング制御部１１２から、放送字幕画面生成部１１３へ切り替える（ステップＳ１１２）。ここで、「番組の視聴の終了」とは、ユーザがチャンネルを変更した場合や、時間が経過し放送通信連携番組が終了した場合などである。
　次に、放送通信連携制御部１０９は、代替字幕取得部１１０に対し、代替字幕の取得の停止を指示する。そして、代替字幕取得部１１０は、字幕サーバ３０から代替字幕を取得する処理を終了する（ステップＳ１１３）。
　（タイミング制御処理）
　図１３は、タイミング制御部１１２によるタイミング制御処理の動作を示すフローチャートである。この動作は、図１２のステップＳ１０８の詳細である。
　タイミング制御部１１２は、字幕管理部１０８から字幕データを取得したか否か判定する。字幕データを取得した場合（ステップＳ２０１でＹＥＳ）、ステップＳ２０２に進む。字幕データを取得していない場合（ステップＳ２０１でＮＯ）、タイミング制御部１１２は、字幕管理部１０８から字幕データを取得したか否かの監視を継続する。
　字幕データを取得すると、タイミング制御部１１２は、ｄａｔａ＿ｕｎｉｔ＿ｐａｒａｍｅｔｅｒの値が０ｘ５０であるデータユニットの、ｄａｔａ＿ｕｎｉｔ＿ｄａｔａ＿ｂｙｔｅのフィールドを読み、同期識別子を抽出する（ステップＳ２０２）。
　その後、タイミング制御部１１２は、放送字幕の表示タイミングまで待機する。タイミング制御部１１２は、放送字幕の表示タイミングになると、代替字幕画面生成部１１３へ、引数として、ステップＳ２０２で抽出した同期識別子を渡す（ステップＳ２０３）。
　ここで、放送字幕の表示タイミングとは、字幕文データ（図４および図７参照）のＴＭＤの値やＳＴＭの値、字幕管理データ（図３参照）のＴＭＤの値やＯＭＤの値、ＰＴＳ（Ｐｒｅｓｅｎｔａｔｉｏｎ　Ｔｉｍｅ　Ｓｔａｍｐ）などによって決定される。
　なお、タイミング制御部１１２は、放送字幕の表示タイミングに完全に一致するタイミングで、代替字幕画面生成部１１３へ同期識別子を渡すことは必須ではない。例えば、代替字幕画面生成部１１３による字幕プレーンの生成処理に時間を要する場合、タイミング制御部１１２は、放送字幕の表示タイミングより前に、代替字幕画面生成部１１３へ同期識別子を渡してもよい。
　（画面生成処理）
　図１４は、代替字幕画面生成部１１５および代替字幕画面出力部１１６による画面生成処理の動作を示すフローチャートである。この動作は、図１２のステップＳ１０９の詳細である。この処理は、代替字幕画面生成部１１５がタイミング制御部１１２から同期識別子を受け取ると開始される。
　代替字幕画面生成部１１５は、タイミング制御部１１２から引数として渡された同期識別子と同一の同期識別子と対応付けられている代替文字列を、代替字幕保持部１１１から読み出す（ステップＳ３０１）。代替字幕画面生成部１１５は、読み出した代替文字列に基づき、字幕プレーンを生成する（ステップＳ３０２）。代替字幕画面生成部１１５は、生成した字幕プレーンを、代替字幕出力部１１６へ渡す。
　代替字幕出力部１１６は、字幕プレーンを合成部１１７へ出力する（ステップＳ３０３）。
　図１２～図１４に示した動作順序は一つの具体例である。各ステップの順序を適宜入れ替えてもよい。
　＜２－５．効果＞
　ここでは、図１５に示す具体例を用いて、本実施形態の効果について説明する。
　図１５（ａ）は、動画プレーンと放送字幕の字幕プレーンとから生成された表示画面がディスプレイ１２に表示されている状態を示している。表示画面には、家および人物を含む映像４０１と日本語の文字列４０２とが含まれる。
　上述したように、放送字幕である日本語の文字列４０２には、映像４０１と同期して出力するために、表示タイミングが指定されている。そこで、本実施形態の受信装置１１は、放送字幕に替えて、代替字幕（例えば、ヒンディー語）を表示する場合には、日本語の文字列４０２に対して指定されている表示タイミングで、対応するヒンディー語の代替文字列を出力する。これにより、図１５（ｂ）に示すように、映像４０１と同期して、ヒンディー語の代替文字列４０３をディスプレイ１２に表示することができる。
　このように、放送装置２０から放送されていない言語の字幕であっても、受信装置１１は、ネットワークを介して字幕サーバ３０から取得した代替字幕を、放送の映像と同期して出力することができる。
　＜３．実施形態２＞
　続いて、本発明に係る放送通信連携システムの別の態様である放送通信連携システム２について説明する。
　＜３－１．放送通信連携システム２の構成＞
　図１６は、放送通信連携システム２の構成を示す図である。同図に示すように、放送通信連携システム２は、デジタルテレビ１００、実施形態１と同様の放送装置２０、および、コンテンツ配信サーバ３００から構成される。
　コンテンツ配信サーバ３００は、サービス提供業者が保有する装置であって、各種のサービスを実現するためのアプリケーションや、アプリケーションが利用するデータなどの通信コンテンツを配信する機能を有する。ここで、アプリケーションには、放送コンテンツと無関係に動作する非連携アプリケーションと、対応する放送コンテンツの視聴中のみ実行され、放送コンテンツと連携して動作する連携アプリケーションとがある。本実施形態においてコンテンツ配信サーバ３００が配信するアプリケーションは、ユーザが所望する言語の代替字幕を表示するための連携アプリケーションである。
　デジタルテレビ１００は、放送装置２０から放送コンテンツを受信する。また、デジタルテレビ１００は、コンテンツ配信サーバ３００から、字幕表示用のアプリケーションをダウンロードする。デジタルテレビ１００は、ダウンロードした当該アプリケーションを実行することにより、コンテンツ配信サーバ３００から代替字幕を取得し、取得した代替字幕を、放送コンテンツである映像および音声と同期して出力する。
　＜３－２．デジタルテレビ１００の構成＞
　図１７は、デジタルテレビ１００の機能的な構成を示すブロック図である。同図に示すように、デジタルテレビ１００は、受信装置１１００と、ディスプレイ１２と、スピーカ１３とから構成される。
　受信装置１１００は、放送受信部１０１、デマルチプレクサ１０２、オーディオデコーダ１０３、ビデオデコーダ１０４、音声出力部１０５、映像出力部１０６、字幕制御部１０８、タイミング制御部１１２、放送字幕画面生成部１１３、放送字幕出力部１１４、合成部１１７、通信コンテンツ保持部１２００、連携画面生成部１３００、アプリケーション実行部１４００、通信コンテンツ画面生成部１５００、および、通信コンテンツ画面出力部１６００から構成される。
　放送受信部１０１、デマルチプレクサ１０２、オーディオデコーダ１０３、ビデオデコーダ１０４、音声出力部１０５、映像出力部１０６、字幕制御部１０８、タイミング制御部１１２、放送字幕画面生成部１１３、および、放送字幕出力部１１４については、既に説明したとおりである。また、受信装置１１００が受信する字幕データのデータ構造も、既に説明したとおりである。
　通信コンテンツ保持部１２００は、本発明に係るアプリケーション保持手段および代替字幕保持手段に対応する。通信コンテンツ保持部１２００は、受信装置１１００がコンテンツ配信サーバ３００から受信した通信コンテンツを保持する。通信コンテンツは、具体的には、ユーザが所望する言語の代替字幕を提供するためのアプリケーションおよび当該アプリケーションの起動により取得される代替字幕である。
　連携画面出力部１３００は、放送コンテンツから生成された表示画面と、通信コンテンツから生成された通信コンテンツ画面とを含む連携画面を生成し、ディスプレイ１２に出力する。
　図１８は、連携画面出力部１３００により生成される連携画面の具体例を示す図である。図１８（ａ）に示す連携画面は、表示画面５０１と通信コンテンツ画面５０２ａとを含む。
　表示画面５０１は、実施形態１で説明した表示画面（図１５参照）と同様に、映像４０１と放送字幕の文字列４０２とを含む。表示画面５０１は、一例として、ディスプレイ１２の右上の方形領域に表示される。
　通信コンテンツ画面５０２ａは、後述するアプリケーション実行部１４００がアプリケーションを実行することにより生成され、「この番組は放送通信連携番組です　ご希望の字幕言語を選択してください」というメッセージ４０４と、選択言語の設定を受け付けるためのオブジェクトである英語ボタン４０５ａ、スペイン語ボタン４０５ｂ、アラビア語ボタン４０５ｃおよびヒンディー語ボタン４０５ｄとを含む。通信コンテンツ画面５０２ａは、一例として、ディスプレイ１２のＬ字型の表示領域に表示される。
　アプリケーション実行部１４００は、図１７に示すように、言語選択受付部１００１、代替字幕取得部１００２および画面生成指示部１００３を含む。これらの機能部は、通信コンテンツ保持部１２００に保持されているアプリケーションが実行されることにより、以下の機能を実現する。
　言語選択受付部１００１は、ユーザによる選択言語の設定を受け付け、受け付けた選択言語の言語コードを、代替字幕取得部１００２へ渡す。
　例えば、ディスプレイ１２に図１８（ａ）の連携画面が表示されている状態において、ユーザがリモコンなどの入力デバイスを用いてヒンディー語ボタン４０５ｄを選択すると、言語選択受付部１００１は、ヒンディー語を識別する言語コード「ｈｉｎ」を、代替字幕取得部１０２へ渡す。
　代替字幕取得部１００２は、字幕管理部１０８から視聴中の番組の番組識別情報を取得し、言語選択受付部１００１から言語コードを受け取る。代替字幕取得部１００２は、これら番組識別情報および言語コードをコンテンツ配信サーバ３００へ送信し、コンテンツ配信サーバ３００から、代替字幕を取得する。代替字幕取得部１００２は、取得した代替字幕を、通信コンテンツ保持部１２００に格納する。また、代替字幕の取得を開始するとき、代替字幕取得部１００２は、放送字幕表示ＯＦＦを、字幕管理部１０８に指示する。
　画面生成指示部１００３は、代替字幕の表示タイミングを示すイベントを監視し、イベントが発生すると、通信コンテンツ保持部１２００から代替文字列を読み出す。画面生成指示部１００３は、読み出した代替文字列を、通信コンテンツ画面生成部１５００へ渡し、代替文字列を含む通信コンテンツ画面の生成を指示する。
　通信コンテンツ画面生成部１５００は、アプリケーション実行部１４００からの指示を受け、通信コンテンツ画面を生成する。通信コンテンツ画面生成部１５００は、生成した通信コンテンツ画面を、通信コンテンツ画面出力部１６００へ渡す。
　通信コンテンツ画面出力部１６００は、通信コンテンツ画面を、連携画面出力部１３００へ出力する。
　例えば、図１８（ａ）の通信コンテンツ画面５０２ａにおいて、ヒンディー語ボタン４０５ｄが選択された場合、通信コンテンツ画面生成部１５００は、画面生成指示部１００３からヒンディー語の代替文字列を受け取る。そして、通信コンテンツ画面生成部１５００は、図１８（ｂ）に示すように、ヒンディー語の代替文字列４０３を含む通信コンテンツ画面５０２ｂを生成する。
　なお、受信装置１１００は、実施形態１の受信装置１１と同様に、ＲＯＭ（Ｆｌａｓｈ）、ＲＡＭ、ＣＰＵ、ネットワークＩ／Ｆ、モデム、ＩＣＣａｒｄ、チューナ、８ＰＳＫ復調器、ＴＳデコーダ、ＭＰＥＧ－ＡＶデコーダ、ＯＳＤおよびＰＣＭデコーダなどのハードウェアを含む。これらのハードウェアが、コンピュータプログラムと連携して、受信装置１１００は各種の機能を実現する。
　＜３－３．受信装置１１００の動作＞
　続いて、図１９～図２１のフローチャートを用いて、受信装置１１００による代替字幕同期処理の動作について説明する。
　ここでは、一例として、放送通信連携番組には字幕表示用のアプリケーションの取得先を示すＵＲＬが記載されており、放送通信連携番組の視聴が開始されると、受信装置１１００は、当該ＵＲＬにアクセスし、コンテンツ配信サーバ３００から字幕表示用のアプリケーションをダウンロードする。ダウンロードされたアプリケーションは、通信コンテンツ保持部１２００に格納される。
　図１９～図２１の動作は、字幕表示用のアプリケーションが起動されたことにより開始する。
　（代替字幕同期処理）
　代替字幕同期処理の動作が開始されるまで、字幕管理部１０８による字幕データの出力先は、放送字幕画面生成部１１３に設定されている。
　アプリケーション実行部１４００の画面生成指示部１００３は、イベント発生の監視を開始する（ステップＳ４０１）。ステップＳ４０１における「イベント」とは、タイミング制御部１１２から画面生成指示部１００３のコールバック関数へ、同期識別子を渡すことを意味する。
　字幕表示用のアプリケーションが起動されると、アプリケーション実行部１４００の言語選択受付部１００１は、画面生成指示部１００３を介して、言語選択オブジェクトを含む通信コンテンツ画面の作図を、通信コンテンツ画面生成部１５００へ指示する。
　通信コンテンツ画面生成部１５００は、例えば、図１８（ａ）に示したように、言語選択オブジェクト（英語ボタン４０５ａ、スペイン語ボタン４０５ｂ、アラビア語ボタン４０５ｃおよびヒンディー語ボタン４０５ｄ）を含む通信コンテンツ画面５０２ａを生成する。その後、通信コンテンツ画面５０２ａを含む連携画面がディスプレイ１２に表示される（ステップＳ４０２）。
　言語選択受付部１００１は、選択言語の設定を受け付けたか否か判断し、受け付けない場合（ステップＳ４０３でＮＯ）、画面更新を行わず、言語選択オブジェクトの表示を継続する。選択言語の設定を受け付けた場合（ステップＳ４０３でＹＥＳ）、言語選択受付部１００１は、番組識別情報と選択言語の言語コードとを代替字幕取得部１００２へ渡し、代替字幕の取得を指示する。
　ここで、実施形態２では、放送字幕として放送されていない言語の言語選択オブジェクトが表示されることを前提としている。そのため、実施形態２では、選択言語の設定を受け付けた後、当該選択言語の字幕が放送装置２０から放送されているか否かを確認する処理を行っていない。仮に、放送字幕として放送されている言語の言語選択オブジェクトが表示される場合、ステップＳ４０３でＹＥＳとなった後、選択言語の字幕が放送されているか否かを確認する処理を行ってもよい。
　言語選択受付部１００１から代替字幕の取得を指示されると、代替字幕取得部１００２は、代替字幕の取得を開始し（ステップＳ４０４）、その後、字幕管理部１０８へ、放送字幕表示ＯＦＦを指示する（ステップＳ４０５）。字幕管理部１０８は、放送字幕表示ＯＦＦを指示されると、字幕データの出力先を、放送字幕画面生成部１１３から、タイミング制御部１１２へ切り替える。また、代替字幕取得部１００２は、コンテンツ配信サーバ３００から取得した代替字幕を、通信コンテンツ保持部１２００へ格納する。
　ここで、実施形態２では、コンテンツ配信サーバ３００が保持している代替字幕の言語の言語選択オブジェクトが表示されることを前提としている。そのため、実施形態２では、選択言語の代替字幕を保持しているか否か、コンテンツ配信サーバ３００に問い合わせる処理を行っていない。
　タイミング制御部１１２は、タイミング制御処理を行う（ステップＳ４０６）。
　イベントが発生しなければ（ステップＳ４０７でＮＯ）、ステップＳ４１２に進む。
　イベントが発生し（ステップＳ４０７でＹＥＳ）、コールバック関数に同期識別子が通知されると（ステップＳ４０８）、画面生成指示部１００３は、選択言語の言語コードとステップＳ４０８で取得した同期識別子とを引数として、通信コンテンツ保持部１２００から代替文字列を抽出する（ステップＳ４０９）。画面生成指示部１００３は、通信コンテンツ画面生成部１５００へ、代替字幕を含む通信コンテンツ画面の生成を指示し、ステップＳ４０９で抽出した代替文字列を通信コンテンツ画面生成部１５００へ渡す（ステップＳ４１０）。
　通信コンテンツ画面生成部１５００は、通信コンテンツ画面を生成する（ステップＳ４１１）。その後、通信コンテンツ画面が更新されて、代替文字列がディスプレイ１２に表示される。
　番組の視聴が終了していない場合（ステップＳ４１２でＮＯ）、ステップＳ４０６に戻り処理を継続する。
　番組の視聴が終了した場合（ステップＳ４１２でＹＥＳ）、アプリケーション実行部１４００の代替字幕取得部１００２は、字幕管理部１０８に対し、放送字幕表示ＯＮを指示する（ステップＳ４１３）。ここで、「番組の視聴の終了」とは、ユーザがチャンネルを変更した場合や、時間が経過し放送通信連携番組が終了した場合、ユーザが字幕表示用のアプリケーションの表示を終了した場合などである。
　字幕管理部１０８は、放送字幕表示ＯＮを指示されると、字幕データの出力先を、タイミング制御部１１２から、放送字幕画面生成部１１３へ切り替える。そして、代替字幕取得部１００３は、コンテンツ配信サーバ３００から代替字幕を取得する処理を終了する（ステップＳ４１４）。
　図１９に示した動作順序は一つの具体例である。各ステップの順序を適宜入れ替えてもよい。
　（タイミング制御処理）
　図２０は、タイミング制御部１１２によるタイミング制御処理の動作を示すフローチャートである。この動作は、図１９のステップＳ４０６の詳細である。
　タイミング制御部１１２は、字幕管理部１０８から字幕データを取得したか否か判定する。字幕データを取得した場合（ステップＳ５０１でＹＥＳ）、ステップＳ５０２に進む。字幕データを取得していない場合（ステップＳ５０１でＮＯ）、タイミング制御部１１２は、字幕管理部１０８から字幕データを取得したか否かの監視を継続する。
　字幕データを取得すると、タイミング制御部１１２は、ｄａｔａ＿ｕｎｉｔ＿ｐａｒａｍｅｔｅｒの値が０ｘ５０であるデータユニットの、ｄａｔａ＿ｕｎｉｔ＿ｄａｔａ＿ｂｙｔｅのフィールドを読み、同期識別子を抽出する（ステップＳ５０２）。
　その後、タイミング制御部１１２は、放送字幕の表示タイミングまで待機する。タイミング制御部１１２は、放送字幕の表示タイミングになると、アプリケーション実行部１４００の画面生成指示部１００３のコールバック関数へ、引数として、ステップＳ５０２で抽出した同期識別子を渡す（ステップＳ５０３）。
　なお、タイミング制御部１１２は、放送字幕の表示タイミングに完全に一致するタイミングで、画面生成指示部１００３へ同期識別子を渡すことは必須ではない。例えば、画面生成指示部１００３および通信コンテンツ画面生成部１５００による字幕プレーンの生成処理に時間を要する場合、タイミング制御部１１２は、放送字幕の表示タイミングより前に、画面生成指示部１００３へ同期識別子を渡してもよい。
　（通信コンテンツ画面生成処理）
　図２１は、通信コンテンツ画面生成部１５００および通信コンテンツ画面出力部１６００による通信コンテンツ画面生成処理の動作を示すフローチャートである。この動作は、図１９のステップＳ４１１の詳細である。この処理は、通信コンテンツ画面生成部１５００がアプリケーション実行部１４００の画面生成指示部１００３から通信コンテンツ画面の生成を指示されることにより開始する。
　通信コンテンツ画面生成部１５００は、画面生成指示部１００３から代替文字列を取得する（ステップＳ６０１）。通信コンテンツ画面生成部１５００は、取得した代替文字列を既定の表示位置に規定のサイズで記述した通信コンテンツ画面を生成する（ステップＳ６０２）。通信コンテンツ画面生成部１５００は、一例として図１８（ｂ）に示すように、代替文字列４０３をＬ字型の表示領域内の右下の位置（表示画面４０１の下側）に記述してもよい。通信コンテンツ画面生成部１５００は、生成した通信コンテンツ画面を、通信コンテンツ画面出力部１６００へ渡す。
　通信コンテンツ画面出力部１６００は、通信コンテンツ画面を、連携画面出力部１３００へ出力する（ステップＳ６０３）。
　図１９～図２１に記載されたステップのうち、ステップＳ４０６およびステップＳ４１１以外の各ステップの処理は、字幕表示用のアプリケーションをアプリケーション実行部１４００が実行することにより実現される。アプリケーション実行部１４００とその他の機能部との間のデータの受け渡しは、ハンドラやコールバック関数などを予め定義しておき、受信装置１１００のＡＰＩを利用して行う。
　また、上述した代替字幕同期処理は、例えば、図２２に示すＨＴＭＬファイル１７００によって実現することができる。このように、実施形態２では、受信装置１１００を動作させるためのスクリプトを通信コンテンツであるＨＴＭＬファイル１７００に記載しておくことにより、代替字幕同期処理を実現している。
　＜３－４．効果＞
　以上説明したように、実施形態２では、放送番組と連携する字幕表示用のアプリケーションにより代替字幕同期処理を実現する。
　例えば、図１８（ａ）に示す通信コンテンツ画面５０２ａがディスプレイ１２に表示されている状態から、ユーザがヒンディー語ボタン４０６ｄを選択すると、図１８（ｂ）に示す通信コンテンツ画面５０２ｂに遷移する。
　通信コンテンツ画面５０２ｂには、放送コンテンツである映像４０１に対するヒンディー語の代替文字列４０３が表示される。代替文字列４０３は、実施形態１で説明したように、映像４０１に対応した放送字幕である日本語の文字列４０２をヒンディー語に翻訳したものである。
　このように、受信装置１１００は、ネットワークを介してコンテンツ配信サーバ３００から取得した字幕表示用のアプリケーションを実行することにより、放送装置２０から放送されていない言語の字幕を取得して、放送の映像と同期して出力することができる。
　＜４．その他の変形例＞
　以上、本発明の一態様である受信装置、放送通信連携システムおよび放送通信連携方法の実施形態を説明した。例示した、受信装置、放送通信連携システムおよび放送通信連携処理を以下のように変形することも可能であり、本発明に係る受信装置、放送通信連携システムおよび放送通信連携方法が、上記の実施形態に限られないことは勿論である。
　（１）上記の実施形態１では、代替字幕を表示する際に、放送字幕に対して指定されている表示位置および文字サイズを利用して、代替文字列を字幕プレーンに展開する構成を有していた。しかし、この構成には限定されない。例えば、字幕サーバ３０が代替字幕全体または代替文字列ごとに表示位置（座標情報）、文字サイズ、表示時間、表示効果指示情報などの字幕表示のための制御情報を保持しており、受信装置１１は、代替字幕と共に字幕サーバ３０からこれらの制御情報を取得してもよい。そして、受信装置１１は、これらの制御情報にしたがい、代替文字列の表示を行ってもよい。
　（２）上記の実施形態２では、通信コンテンツ画面生成部１５００は、代替文字列を含む通信コンテンツ画面を生成する際に、既定の表示位置に規定のサイズで代替文字列を記述する構成を有していた。しかし、この構成に限定されない。通信混画面生成部１５００は、実施形態１の代替字幕画面生成部１１５と同様に、放送字幕に対して指定されている字幕表示の制御情報を利用して、通信コンテンツ画面を生成してもよい。
　（３）上記の実施形態１の代替字幕画面生成部１１５および実施形態２の通信コンテンツ画面生成部１５００は、字幕データの本文のデータユニット（０ｘ２０）に含まれる８単位符号を解析し、８単位符号に含まれる制御符号から、座標情報、文字サイズ、文字フォント、表示時間情報、表示効果指示情報などを取得し、これらの情報を利用して代替文字列を表示する構成でもよい。また、本文のデータユニットに限らず、ジオメトリックのデータユニット（０ｘ２８）やビットマップのデータユニット（０ｘ３５）など他のデータユニットを解析して、これらの情報を取得してもよい。
　例えば、８単位符号の制御符号である「ＳＤＦ」は画面表示サイズを表し、「ＳＤＰ」は表示領域の初期座標点を表す。そこで、これらの制御符号を代替文字列の表示位置として利用してもよい。
　また、８単位符号の制御符号である「ＳＷＦ」は書式選択を表す。そこで、この制御符号を代替文字列の書式として利用してもよい。また、８単位符号の制御符号である「ＣＳ」は画面消去を表す。そこで、この制御符号を含む放送字幕を取得した場合には、表示中の代替文字列を消去してもよい。また、８単位符号の制御符号である「ＳＣＲ」はスクロールを表す。そこで、この制御符号を含む放送字幕を取得した場合には、代替文字列をスクロール表示してもよい。
　（４）上記の実施形態１では、具体例として、字幕文データに本文のデータユニットと放送通信同期識別のデータユニットとを格納したデータ構造について説明した（図７）。しかし、実施形態１および２において、本文のデータユニットが字幕管理データに格納される場合には、放送通信同期識別のデータユニットも、字幕管理データに格納して送出することとする。
　（５）上記の実施形態１および２では、放送通信同期識別という新たなデータユニットを定義することにより同期識別子を送出する構成を有するが、この構成には限定されない。例えば、定義はされているが未使用であるフィールドに同期識別子を格納して送出してもよいし、ｒｅｓｅｒｖｅ領域に同期識別子を格納して送出してもよい。すなわち、受信装置が上述した代替字幕同期処理を行うために、同期識別子と対応する放送字幕の文字列とが紐付されていれば、既存のフィールドを利用して同期識別子を送出してもよい。
　（６）また、上記の実施形態１および２において、８単位符号の制御符号を拡張することにより、本文のデータユニット内に同期識別子を記述して送出する構成でもよい。例えば、8単位符号の制御符号として「ＣＣＳ」および「ＣＣＥ」という制御符号を新たに定義し、本文のデータユニットの8単位符号の先頭に「ＣＣＳ」が存在する場合には、「ＣＣＳ」の直後から「ＣＣＥ」の直前までのテキストを同期識別子とし、それ以降の部分を字幕データの本文として扱うこととしてもよい。
　（７）上記の実施形態１および２では、本文のデータユニットと放送通信同期識別のデータユニットとをセットで送出する構成を有するが、この構成には限定されない。放送通信同期識別のデータユニットは、本文以外の他のデータユニットとセットで送出してもよい。また、放送通信同期識別のデータユニットを単独で送出してもよい。ただし、これらの場合であっても、受信装置が上述した代替字幕同期処理を行うために、同期識別子と対応する放送字幕の文字列とが紐付されていることが必要である。
　（８）上記の実施形態１および２において、受信装置が代替字幕をサーバから取得するタイミングは、上記の実施形態で例示したタイミングに限定されない。例えば、ＥＰＧなどの番組スケジュール情報に、各番組の番組識別情報と放送字幕の言語コードとが含まれている場合、受信装置は、選択言語が放送されていない番組については、当該番組を受信する前に、予めサーバから選択言語の代替字幕を取得する構成でもよい。このとき、代替字幕を保持する記憶領域の容量に応じて、一日分の番組の代替字幕を取得する構成でもよいし、数時間分の番組の代替字幕を取得する構成でもよい。また、視聴予約や録画予約がされている番組のみ、代替字幕を取得する構成でもよい。なお、番組の放送が終了すれば、記憶領域に保持されている不要な代替字幕は消去することが望ましい。
　（９）上記の実施形態１および２では、受信装置は、番組の進行に応じて順次、１個若しくは複数個の単位で、サーバから同期識別子と代替文字列とのセットを受信する構成を有していた。これにより、番組の進行に応じて表示すべき代替字幕が変化する場合であっても、柔軟に対応することができる。しかし、この構成は必須ではない。受信装置は、番組の視聴が開始されると、サーバから一番組分の代替字幕データを一括で受信してもよい。
　（１０）上記の実施形態１では、受信装置は、遅くとも、同一の同期識別子を有する放送字幕の文字列を受信する時刻よりも前に、代替文字列をサーバから受信しておく必要があると説明した。ここで仮に、表示すべき代替文字列の取得が遅れ、映像と同期して代替文字列を表示することが出来なかった場合、受信装置は、所定時間を超えて代替文字列の受信が遅れた場合には、代替字幕同期処理を中止してもよい。また、次に表示すべき代替文字列が受信されていない場合には、前の代替文字列の表示終了時刻が過ぎても、一定時間表示を継続してもよい。
　（１１）上記の実施形態１および２では、受信装置は、ネットワークを介して接続されたサーバから代替字幕を取得する構成を有していた。しかし、代替字幕の取得先は、ネットワーク上のサーバに限定されない。例えば、受信装置は、図８に示した字幕データベースが記録されているＤＶＤやＢＤなどの可搬型の記録媒体を装着し、当該記録媒体から選択言語の代替字幕を読み出す構成でもよい。また、受信装置は、放送局から放送により送出された代替字幕を受信する構成でもよい。この場合、代替字幕は、放送コンテンツの放送時間より前に、夜間などの本放送がされていない時間帯に送信されることが望ましい。
　（１２）上記の実施形態１および２では、受信装置は、代替字幕を表示する場合に、放送字幕の表示をＯＦＦにする構成を有していた。しかし、実施形態２においてはこの構成は必須ではない。図１８に示したように、実施形態２の場合、放送字幕が表示される領域と代替字幕が表示される領域とが異なる。そのため、放送字幕の表示をＯＦＦにしなくても、放送字幕と代替字幕とが重なり合うことがない。したがって、受信装置は、代替字幕を表示する場合であっても、放送字幕の表示をＯＦＦにする処理を行わない構成でもよい。そうすると、ディスプレイには、放送字幕と代替字幕とが同時に表示される。また、放送字幕の表示をＯＦＦにするかしないか、ユーザに選択させ、選択結果に応じて、放送字幕の表示をＯＦＦにしたり、ＯＮにしたりする構成でもよい。
　（１３）上記の実施形態１および２では、放送字幕が日本語である場合に、日本語の字幕文を、英語、スペイン語、アラビア語、ヒンディー語などの他の言語に翻訳した字幕文を、代替字幕の具体例として用いて説明した。しかし、本発明に係る代替字幕はこれに限定されない。例えば、以下のようなものも、代替字幕に含まれる。
　例えば、放送字幕が日本語である場合に、放送字幕の画質と比較して、より画質の良い日本語の字幕を代替字幕としてもよい。上記の実施形態１および２では、選択言語の字幕が放送されている場合には、受信装置は代替字幕を取得しない構成であった。しかし、選択言語が日本語であり、且つ、放送字幕が日本語である場合であっても、受信装置は、サーバから画質の良い日本語の代替字幕を取得して、代替字幕同期処理を行う構成でもよい。この場合、受信装置は、画質の良い代替字幕を取得する前に、ユーザに問い合わせを行い、ユーザが画質の良い代替字幕を要望する場合のみ、サーバから代替字幕を取得する構成でもよい。
　また、放送字幕が日本語の既定のスタイル（書式）およびフォント（書体）で記載されている場合において、放送字幕のスタイルを、太字、斜体、白抜き文字、影付き文字、立体文字などの異なるスタイルで記載したものを代替字幕としてもよい。
　また、図２３に示すように、放送字幕のフォントを、異なるフォントで記載したものを代替字幕としてもよい。図２３は、サーバが管理しているデータベースの一例を示す図である。字幕データベース３２は、同期識別子と対応付けて、放送字幕の文字列のフォントを、ゴシック体（１）、ゴシック体（２）、行書体、明朝体など、異なる複数のフォントに置換した代替文字列を、同期識別子と対応付けて管理している。
　受信装置は、ユーザから希望するフォントの選択を受け付け、希望するフォントの放送字幕が放送されていない場合には、ユーザが希望するフォントの代替字幕をサーバから取得する構成でもよい。このとき、受信装置は、選択字幕を識別する言語コードの代わりに、フォントを識別する番号などをサーバに送信してもよい。
　また、言語、スタイル、フォントなどを組み合わせたものを代替字幕として扱ってもよい。例えば、「英語」、「英語、小文字」、「英語、大文字、立体文字」、「日本語、行書体、太字」、「日本語、振り仮名付き」、「スペイン語、斜体」、「アラビア語、文字サイズ大」、「ヒンディー語、文字サイズ小、太字」などのそれぞれを一つの代替字幕として扱い、上述した代替字幕同期処理を行う構成でもよい。
　即ち、本発明に係る代替字幕は、放送字幕の文字列を異なる表記方法により記載した文字列であって、その文字列が表す内容の同義性がある程度担保されていれば、如何なる表記方法を用いてもよい。
　（１４）上記の実施形態１および２では、放送字幕の文字列と代替字幕の文字列とを対応付けるために同期識別子を用いる構成であった。しかし、同期識別子を用いずに、放送字幕の文字列自体を、対応する代替字幕の文字列と対応付けるための識別子として用いてもよい。
　この場合、放送装置は、放送通信同期識別のデータユニットを送出する必要はない。また、サーバは、図２４に示すような字幕データベース３３を管理する。字幕データベース３３は、放送字幕の文字列と、当該文字列を複数の他の言語に翻訳した複数の代替文字列とを対応付けて管理している。
　また、受信装置の代替字幕取得部は、サーバから放送字幕の文字列と選択言語の代替文字列とをセットで取得し、代替字幕保持部（実施形態２では通信コンテンツ保持部）に格納する。タイミング制御部１１２は、放送字幕の本文のデータユニットから字幕文（文字列）を抽出し、抽出した字幕文に対応付けられている代替文字列を、代替字幕保持部から読み出す構成となる。
　なお、この変形例は、一つの番組内に同一の字幕文が２回以上登場することが無いという前提が必要である。あるいは、代替字幕保持部の記憶容量が限られている場合に、代替字幕保持部が一つの番組全体の代替字幕を保持するのではなく、番組の一部の代替字幕を保持する構成である場合には、少なくとも、代替字幕保持部に保持されている代替字幕の中に同一の字幕文が２つ以上含まれていないことが必要である。
　（１５）なお、上記の実施形態１および２では、マルチプレクサ１０２が字幕管理部１０８へＥＩＴパケットを渡し、字幕管理部１０８がＥＩＴパケットのデコード、および、番組識別情報と言語コードとの抽出を行う構成を有していた。しかし、この構成は必須ではない。
　既存の受信装置の構成に対する変更を抑制しつつ、本発明の一態様を実現するために、例えば、上記の実施形態１および２における受信装置は、図示していない番組表表示部を備えていてもよい。番組表表示部は、電子番組ガイド（ＥＰＧ）を表示するために、ＥＩＴパケットを取得して、各チャンネルについて、どの時間にどの番組が放送されるかを示す情報を保持している。また、受信装置は、現在の時刻情報を保持している。そして、字幕管理部１０８は、現在の時刻情報に対応する番組識別情報を、番組表表示部から取得する構成でもよい。
　また、字幕管理部１０８は、ＥＩＴパケットから言語コードを抽出するのではなく、字幕データから言語コードを抽出する構成でもよい。
　（１６）上記の実施形態２において、字幕表示用アプリケーションで表示される情報は字幕のみに限定されない。図１８（ｂ）に示したように、番組の進行に応じた番組関連情報を字幕と共に表示してもよい。また、ユーザの嗜好に合わせた情報を字幕と共に表示したり、地域の情報やニュースなどを字幕と共に表示してもよい。
　（１７）上記の実施形態および上記の変形例を適宜組み合わせてもよい。
　＜５．補足＞
　以下、さらに、本発明の一態様としての受信装置、放送通信連携システムおよび放送通信連携方法の構成およびその変形例と効果について説明する。
　（ａ）受信装置であって、時間軸に沿って出力される複数の画像から成る映像ストリームと、放送字幕と、前記放送字幕を対応する画像に同期して出力するためのタイミング情報とを含む放送コンテンツを受信する放送受信手段と、前記放送字幕を構成する各文字列を他の表記方法の文字列に置き換えた代替字幕を前記放送コンテンツより先行して取得する代替字幕取得手段と、取得した前記代替字幕を保持する代替字幕保持手段と、放送字幕に対して指定されているタイミングで、代替字幕を出力する代替字幕同期手段とを備えることを特徴とする。
　ここで、前記代替字幕同期手段は、上記の実施形態１におけるタイミング制御部１１２、代替字幕画面生成部１１５および代替字幕出力部１１６に対応する。また、上記の実施形態２におけるタイミング制御部１１２、連携画面出力部１３００、通信コンテンツ画面生成部１５００および通信コンテンツ画面出力部１６００に対応する。
　この構成によると、放送字幕のタイミング情報を利用して代替字幕を出力するので、受信装置にとって負担の少ない処理により、映像ストリームに含まれる各画像と代替字幕に含まれる各文字列とを同期して出力することができる。
　なお、上記の実施形態１および２に記載したように、「代替字幕を前記放送コンテンツより先行して取得する」とは、同一の同期識別子を有する放送字幕の文字列を受信する時刻よりも前に、対応する代替字幕も文字列を取得することを意味する。一つの番組で使用するすべての代替字幕を放送よりも前に取得しておくことは必須ではない。
　（ｂ）前記放送字幕を構成する各文字列には、それぞれ異なる識別子が対応付けられており、前記代替字幕を構成する各文字列には、元の文字列と同一の識別子が対応付けられており、前記代替字幕同期手段は、各文字列に対して指定されているタイミングで、同一の識別子を有する代替字幕の文字列を出力する構成としてもよい。
　この構成によると、受信装置は、放送字幕の文字列に対応する代替字幕の文字列を容易に識別可能であり、出力すべき代替字幕の文字列を前記代替字幕保持手段から取得しやすい。そのため、字幕プレーンの作画や表示画面の出力の遅延を抑制することができる。
　（ｃ）前記受信装置は、さらに、選択可能な複数の表記方法から、代替字幕として表示する一つの表記方法を選択する選択手段を備え、前記代替字幕取得手段は、前記選択手段により選択された前記表記方法の代替字幕を取得し、取得した前記代替字幕を前記代替字幕保持手段に格納する構成としてもよい。
　この構成によると、個々の視聴者ごとに適した代替字幕を出力することができる。
　（ｄ）前記受信装置は、複数の代替字幕を保持している外部のサーバ装置とネットワークを介して接続可能であり、前記代替字幕取得手段は、ネットワークを介して前記サーバ装置から前記代替字幕を受信する構成としてもよい。
　上述したように、放送で送出することができるデータ量には制限があるため、個々の視聴者にとって最適な字幕を放送のみで提供することは難しい。そこで、前記受信装置は、ネットワーク接続機能を有し、ネットワーク上のサーバから代替字幕を取得する構成を有する。
　この構成によると、放送で送出することができるデータ量にかかわらず、視聴者が必要としている表記方法の字幕を受信し、映像と同期して出力することができる。
　なお、ネットワーク上のサーバには、個々の視聴者のニーズに応えることができるように、様々な表記方法の代替字幕を保持しておくことが望ましい。それにより、個々の視聴者ごとに最適な代替字幕を提供することができる。
　（ｅ）前記放送字幕は、ＡＲＩＢ規格に準拠したデータ構造を有し、前記放送受信手段は、放送字幕を構成する文字列を送出するためのデータユニットと、前記文字列に対応する識別子を送出するためのデータユニットとを含む字幕データを受信し、前記代替字幕同期手段は、前記字幕データに含まれる前記識別子に対応する代替字幕の文字列を前記代替字幕保持手段から読み出し、前記字幕データに含まれる前記文字列に対し指定されているタイミングで、前記代替字幕の文字列を出力する構成としてもよい。
　この構成によると、識別子を送出するためのデータユニットを新たに定義することにより、現行のＡＲＩＢで規定されているデータ構造を保持したまま、受信装置に識別子を通知することが可能となる。
　（ｆ）前記受信装置は、さらに、ネットワークを介して接続されたサーバ装置から取得された、前記映像ストリームに関連し、当該受信装置上で動作するアプリケーションを保持しているアプリケーション保持手段を備え、前記代替字幕同期手段は、前記アプリケーションからの指示を受けて通信コンテンツ画面を生成する通信コンテンツ画面生成手段と、前記映像ストリームと前記通信コンテンツ画面とを組み合わせた連携画面を出力する連携画面出力手段とを含み、前記代替字幕同期手段は、放送字幕の各文字列に対して指定されているタイミングを前記アプリケーションに通知し、前記アプリケーションは、前記代替字幕同期手段からタイミングが通知される都度、各文字列に対応する代替字幕の文字列を含む通信コンテンツ画面の生成を、前記通信コンテンツ画面生成手段へ指示する構成としてもよい。
　ここで、前記アプリケーション保持手段は、上記の実施形態２の通信コンテンツ保持部に相当する。
　放送番組に連携して各種のサービスを提供するためのアプリケーションをネットワーク経由で配信する放送通信連携システムが検討されている。上記の受信装置は、このような放送通信連携システムに適した構成を有しており、サーバからダウンロードしたアプリケーションを実行することにより、映像ストリームに含まれる各画像と代替字幕に含まれる各文字列とを同期して出力することができる。
　（ｇ）前記放送字幕を構成する各文字列には、それぞれ異なる識別子が対応付けられており、前記代替字幕を構成する各文字列には、元の文字列と同一の識別子が対応付けられており、前記アプリケーションは、前記代替字幕同期手段からタイミングが通知される都度、各文字列と同一の識別子を有する代替字幕の文字列を、前記代替字幕保持手段から抽出し、抽出した前記代替字幕の文字列を、前記通信コンテンツ画面生成手段へ渡す構成としてもよい。
　この構成によると、受信装置は、放送字幕の文字列に対応する代替字幕の文字列を容易に識別可能であり、出力すべき代替字幕の文字列を前記代替字幕保持手段から取得しやすい。そのため、通信コンテンツ画面の作画や連携画面の出力の遅延を抑制することができる。
　（ｈ）前記通信コンテンツ画面生成手段は、選択可能な複数の表記方法から一つの表記方法を選択するための選択用オブジェクトを含む通信コンテンツ画面を生成し、前記連携画面出力手段は、前記選択用オブジェクトを含む前記通信コンテンツ画面を出力し、前記アプリケーションは、代替字幕として表示する一つの表記方法の選択を受け付けると、選択された前記表記方法の代替字幕を取得し、取得した前記代替字幕を前記代替字幕保持手段に格納する構成としてもよい。
　この構成によると、個々の視聴者ごとに適した代替字幕を出力することができる。
　（ｉ）代替字幕の文字列は、対応する放送字幕の文字列を他の言語に翻訳したものである。
　この構成によると、放送されていない言語の字幕を映像と同期して出力することができる。
　なお、上述したように、放送で送出できるデータ量には制限があるので、あらゆる言語の字幕を放送することは不可能である。そこで、前記代替字幕取得手段が視聴者の希望する言語の代替字幕を取得すれば、視聴者ごとに適した言語の字幕を表示すことができる。
　（ｊ）代替字幕の文字列は、対応する放送字幕の文字列を他の表示形態に置換したものである。
　ここで、表示形態とは、具体的に、文字のスタイルやフォントなどである。この構成によると、視聴者の趣向に応じて、放送字幕の表示形態とは異なる表示形態の字幕を、映像と同期して出力することができる。
　（ｋ）放送コンテンツを放送する放送装置と、通信コンテンツを配信するサーバ装置と、前記放送コンテンツと前記通信コンテンツとを連携して表示する受信装置とから構成される放送通信連携システムであって、前記放送装置は、時間軸に沿って出力される複数の画像から成る映像ストリームと、放送字幕と、前記放送字幕を対応する画像に同期して出力するためのタイミング情報とを含む放送コンテンツを放送し、前記サーバ装置は、通信コンテンツとして、前記放送字幕を構成する各文字列を他の表記方法の文字列に置き換えた代替字幕を配信し、前記受信装置は、前記放送コンテンツを受信する放送受信手段と、前記代替字幕を、前記放送コンテンツより先行して受信する代替字幕取得手段と、取得した前記代替字幕を保持する代替字幕保持手段と、放送字幕に対して指定されているタイミングで、代替字幕を出力する代替字幕同期手段とを備えることを特徴とする。
　この構成によると、放送字幕のタイミング情報を利用して代替字幕を出力するので、受信装置にとって負担の少ない処理により、映像ストリームに含まれる各画像と代替字幕に含まれる各文字列とを同期して出力することができる。
　この構成によると、受信装置は、放送されていない表記方法の字幕をサーバ装置から受信し、映像と同期して出力することができる。
　（ｌ）放送コンテンツと通信コンテンツとを連携して表示する受信装置で用いられる放送通信連携方法であって、時間軸に沿って出力される複数の画像から成る映像ストリームと、放送字幕と、前記放送字幕を対応する画像に同期して出力するためのタイミング情報とを含む放送コンテンツを受信する放送受信ステップと、前記放送字幕を構成する各文字列を他の表記方法の文字列に置き換えた代替字幕を前記放送コンテンツより先行して取得する代替字幕取得ステップと、取得した前記代替字幕を、前記受信装置の記憶領域に記録する記録ステップと、放送字幕に対して指定されているタイミングで、代替字幕を出力する代替字幕同期ステップとを含むことを特徴とする。
　この方法によると、受信装置は、放送されていない表記方法の字幕を取得し、映像と同期して出力することができる。
　本発明は、デジタル放送と連携して動作するアプリケーションにより様々なサービスを提供する産業や、デジタル放送とアプリケーションとを受信して様々なサービスを享受する受信装置を製造および販売する産業において、デジタル放送と通信コンテンツとを同期して表示するための技術として利用することができる。
　１、２　　　　　放送通信連携システム
　１０、１００　　デジタルテレビ
　１１、１１００　受信装置
　１２　　　　　　ディスプレイ
　１３　　　　　　スピーカ
　２０　　　　　　放送装置
　３０　　　　　　字幕サーバ
　３００　　　　　コンテンツ配信サーバ
　１０１　　　　　放送受信部
　１０２　　　　　デマルチプレクサ
　１０３　　　　　オーディオデコーダ
　１０４　　　　　ビデオデコーダ
　１０５　　　　　音声出力部
　１０６　　　　　映像出力部
　１０７　　　　　選択言語記憶部
　１０８　　　　　字幕管理部
　１０９　　　　　放送通信連携制御部
　１１０　　　　　代替字幕取得部
　１１１　　　　　代替字幕保持部
　１１２　　　　　タイミング制御部
　１１３　　　　　放送字幕画面生成部
　１１４　　　　　放送字幕出力部
　１１５　　　　　代替字幕画面生成部
　１１６　　　　　代替字幕出力部
　１１７　　　　　合成部
　１２００　　　　通信コンテンツ保持部
　１３００　　　　連携画面出力部
　１４００　　　　アプリケーション実行部
　１５００　　　　通信コンテンツ画面生成部
　１６００　　　　通信コンテンツ画面出力部
　１００１　　　　選択言語受付部
　１００２　　　　代替字幕取得部
　１００３　　　　画面生成指示部
Patent WO2013136715A1 - 受信装置、放送通信連携システムおよび放送通信連携方法 - Google Patents
