ヤマハスイッチは、MACアドレスの移動を監視する方法とスイッチ制御パケットを監視する方法の2種類の方法でネットワークのループを検出します。
MACアドレスの移動とは、同一のMACアドレスが異なるポートにおいて学習されることです。スイッチは、1秒あたりのMACアドレス移動回数を監視しています。移動回数がloopdetect-countで指定した閾値を超えている状態が、loopdetect-timeで設定した時間継続した場合にループが発生したと判断します。
スイッチ制御パケットを監視する方法では、スイッチ自身が送信した制御パケットを受信した回数を監視しています。自身が送信した制御パケットを受信した回数がloopdetect-countで指定した閾値を越えている状態が、loopdetect-timeで設定した時間継続した場合にループが発生したと判断します。
どちらの方法で検出した場合でも、ループが発生したポートではLEDが橙色で点灯します。
ループ検出機能を使用するポートでは、loopdetect-port-useをonに設定します。
ループ発生後の動作はloopdetect-linkdownで設定します。loopdetect-linkdownがlinkdownまたはlinkdown-recoveryの場合、ループが発生しているポートのうち番号の大きいものから順に、ループが停止するまでリンクダウンしていきます。ループ発生時にもルーターと通信できるようにしておくため、アップリンクポートはポート1を使用することが推奨されます。
なお、ループの発生によってリンクダウンしたポートのLEDは橙色で点滅します。
36.3.8 ループ検出
