モデルを設定固定小数点ツールを使用してシミュレーションの最小値と最大値のみに基づいてモデルのデータ型推奨を生成するには、まず Simulink® でモデルを設定しなければなりません。エラーの発生に備えて、またテストと検証用のベースラインとしてモデルをバックアップします。Simulink でモデルを開きます。Simulink メニューから [シミュレーション] 、 [モード] 、 [ノーマル] を選択し、モデルが [ノーマル] モードで実行されるようにします。固定小数点ツールでは [ノーマル] モードのみがサポートされています。設計の最小範囲と最大範囲情報を使用する場合は、この情報をブロックに追加します。通常 "出力の最小値" および "出力の最大値" という名前のパラメーターを使用してモデル オブジェクトの設計範囲を指定します。これらの値を指定できるブロックのリストは、「信号範囲の指定が可能なブロック」を参照してください。モデルのブロックおよび信号の固定小数点データ型を指定します。[データ型アシスタント] をもつブロックの場合、[最高精度のスケーリングを計算] ボタンを使用して最高精度のスケーリングを自動計算します。詳細は、「データ型アシスタントを使用した固定小数点データ型の指定」を参照してください。固定小数点アドバイザーを使用して、同等の固定小数点表現に変換するモデルの準備をします。詳細は、「固定小数点の変換の準備」を参照してください。[固定小数点ツールによる変更に対して出力データ型の設定をロックする] パラメーターをオンにすると、自動データ型指定されないように一部のブロックをロックできます。[固定小数点ツールによる変更に対して出力データ型の設定をロックする] パラメーターを選択すると、ツールはそのオブジェクトのデータ型を推奨しません。Simulink の [シミュレーション] メニューで [ブロック線図の更新] を選択して、モデル内のすべてのブロックに対しパラメーター範囲のチェックを実行します。"ブロック線図の更新" に失敗した場合、失敗に関する情報を使用してモデルの不具合を修正します。不具合の修正が終わったら、ブロック線図の更新を再度テストします。不具合を修正できない場合は、バックアップ モデルを復元します。モデルが変更された場合、エラーの発生に備えて、またテストと検証用のベースラインとしてモデルを再度バックアップします。ショートカットを作成して、固定小数点計測機能とデータ型オーバーライドの初期設定を取得します。詳細は、「ショートカット エディターを使用したモデル設定の取得」を参照してください。
固定小数点の変換のためのモデルの準備まず、固定小数点アドバイザーを使用して、固定小数点に変換するモデルを準備します。この準備は 1 回のみ行います。固定小数点アドバイザーは、固定小数点ツールを使用した固定小数点への自動変換の準備として、モデルとブロックのコンフィギュレーション設定に関するアドバイスを提供します。固定小数点アドバイザーで以下の手順を実行します。固定小数点のガイドラインに照らしたモデルのチェック。サポートされないブロックの特定。出力データ型継承のブロックからの削除。固定小数点アドバイザーはまた、モデル レベルの診断設定や継承ルールの削除など、モデルに関する推奨も行い、固定小数点ツールによるオートスケーリング用にモデルを構成します。したがって、固定小数点データ型しか使用しないモデルに対しても固定小数点アドバイザーを実行すると効果的です。固定小数点アドバイザーを開く方法Simulink の [解析] メニューから [固定小数点ツール] を選択します。固定小数点ツールの [モデルの階層構造] ペインで、推奨の対象となるシステムまたはサブシステムを選択します。[選択したシステムに対応する固定小数点の準備] ペインで [固定小数点アドバイザー] をクリックします。固定小数点アドバイザーを使用して、変換するモデルの準備をします。詳細は、「固定小数点の変換の準備」を参照してください。
浮動小数点ベンチマークの収集まず、倍精度数を使用して固定小数点データ型をグローバルにオーバーライドするモデルを実行して、量子化の影響を回避します。このアクションにより、理想出力を表す浮動小数点ベンチマークが提示されます。Simulink ソフトウェアは、信号ログの結果を MATLAB® ワークスペースに作成します。固定小数点ツールには、最小値と最大値など、実行中に発生するシミュレーション結果が表示されます。Simulink の [解析] メニューから [固定小数点ツール] を選択します。対象のシステムまたはサブシステムの信号ログを有効にします。固定小数点ツールを使用すると、複数の信号の信号ログを同時に有効にすることができます。詳細は、「fxptdlg」リファレンスの「信号ログ オプション」を参照してください。信号ログを有効にするには固定小数点ツールの [モデルの階層構造] ペインで、システムまたはサブシステムを選択します。選択されたシステムを右クリックしてコンテキスト メニューを開きます。[信号ログを有効にする] オプションを使用し、必要に応じて信号ログを有効にします。固定小数点ツールの [コンテンツ] ペインには、信号ログを有効にできる項目の隣にアンテナ アイコン 
が表示されます。
固定小数点ツールの [モデルの階層構造] ペインで、推奨の対象となるシステムまたはサブシステムを選択します。[設定のショートカット] ペインで [モデル全体の double のオーバーライドおよび完全な計測] ボタンをクリックし、次のように設定します。[データ型オーバーライド] を [double] に[データ型オーバーライドを次に適用] を [すべての数値型] に設定します。[固定小数点の計測モード] を [最小値、最大値およびオーバー フロー] に設定します。実行名 ([データ計測] ペインの [実行の結果を保存] ファイル) を [DoubleOverride] に設定します。固定小数点ツールでは、固定小数点データ型を double データ型によってグローバルにオーバーライドし、量子化の影響を回避します。シミュレーション中に、[DoubleOverride] の実行で、現在のシステムまたはサブシステム内のすべてのブロックで発生した最小値、最大値、オーバーフローのデータを記録します。
シミュレーション データを使用した自動データ型指定 - MATLAB & Simulink - MathWorks 日本
