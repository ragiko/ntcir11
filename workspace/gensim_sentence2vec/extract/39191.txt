ページは,XDBが管理する領域の最小単位です。ページには次に示す三つの種類があります。
(a) データページ
表データを格納するページです。
(b) インデクスページ
インデクスのキー値を格納するページです。インデクスページは上位ページ,下位ページ,行IDリストページに分類されます。
XDBのインデクスはB-tree構造になっています。B-tree構造中の最上位のインデクスページをルートページ,中間のインデクスページを中間ページ,最下位のインデクスページをリーフページといいます。上位ページとはルートページと中間ページのことで,下位ページとはリーフページのことです。
ルートページと中間ページには下段のページの情報が格納されています。また,リーフページには各インデクスのキー値とそのキー値に対応する行の格納位置が格納されています。
行IDリストページは,リーフページ中の特定のキー値が256以上重複した場合,そのキー値専用のページとして作成されます。用途はリーフページと同様で,キー値に対応する表中の行の格納位置を管理します。
(c) ディレクトリページ
DBエリアに関する管理情報を格納するページです。
参考
ページが確保されるタイミング
表用DBエリアのページは,表に行が挿入されたときに確保されます。表の定義時(CREATE TABLE文の実行時)には確保されません。行の追加が繰り返されて,確保済みページが満杯になった場合に,新規ページが確保されます。
インデクス用DBエリアのページは,インデクスの定義時(CREATE INDEX文の実行時)に,ルートページとリーフページが一つずつ確保されます。そのあとは,インデクスページスプリットが発生するたびに新規ページが確保されます。
インデクスページスプリットについては,「3.3.3(1)ページ内の未使用領域とは」を参照してください。
ページが解放されるタイミング
表用DBエリアの場合,確保されたページは次に示すタイミングで解放され,未使用ページとなります。
セグメントが解放された場合
セグメント内の全ページが解放されます。
行の削除によってページ内の全データが削除された場合
そのページが解放されます。
なお,インデクス用DBエリアのページは,XDBの稼働中に解放されることはありません。
DBエリアの物理構造
