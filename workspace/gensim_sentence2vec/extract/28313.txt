
初級者・中級者向けのユニットテストのサンプルは、
どんな言語を対象としたものであっても、
テストしやすいようなロジックに対してシンプルなテストをしているものばかりです。
データベースを扱う一般的なアプリケーションを考えると、これはまったく現実離れしています。
たとえば Wordpress や TYPO3、あるいは Symfony で Doctrine や Propel などを使い始めるとすぐに、
PHPUnit でのテストがやりづらいことを実感するはずです。
データベースとこれらのライブラリが密結合になっているからです。
きっと日々の業務やプロジェクトでも身に覚えがあることでしょう。
自分の持つ PHPUnit に関する知識を駆使して作業を進めようとしたのに、
こんな問題のせいで行き詰ってしまうことが。
テストしたいメソッドがかなり大きめの JOIN 操作を実行し、
データを使って重要な結果を算出している。
ひとつのビジネスロジックの中で SELECT、INSERT、UPDATE そして DELETE
を組み合わせて実行している。
ふたつ以上の (おそらくもっと多い) テーブルから初期データを準備しないと
そのメソッドのテストができない。
PHPUnit マニュアル – 第8章 データベースのテスト
