
"リアルタイム時代"が求めるデータ連携の最適解 第3回 速さ、柔軟性、高信頼性——Oracle GoldenGateの価値を支える3つの技術的特色
By 編集部02 on 4 25, 2011
「さまざまなシステム/データベースに格納された鮮度の高い情報をリアルタイムに連携させ、ビジネス上の意思決定を迅速に行いたい」――今日の企業が抱えるこうしたニーズに応えるべく日本オラクルが提供を開始したのが、データ連携/統合プラットフォーム「Oracle GoldenGate」だ。今回は、このGoldenGateに備わるアーキテクチャ/技術面の特徴を、プロダクト・エンジニアの後藤陽介氏に聞いた(編集部)。
速さ、柔軟性、高信頼性の3つを兼ね備えたGoldenGateの強み Oracle GoldenGateは2009年7月に買収によってオラクル製品となったが、GoldenGate買収以前から、後藤氏は「Oracle Data Guard」というデータ保護/リカバリ・ソリューションを担当している。当時、同製品はGoldenGateの競合製品の1つであり、当時から、後藤氏はGoldenGateの優れた点を評価し、その動向を逐一追っていたという。そしてオラクルがGoldenGateを買収すると、すぐに希望して同製品の担当エンジニアとなった。 そんな後藤氏は、GoldenGateの技術的な特徴として、「速さ」、「柔軟性」、「高信頼性」の3つを挙げる。氏によれば、この3つを兼ね備えているのはGoldenGateだけだという。以下に、この3つの特徴を少し詳しく見てみよう。(1)速さ GoldenGateは、データベース・トランザクションで生成されるログに基づいてレプリケーションを行う。データベースではなく、ログから変更内容を読み取ってレプリケーション先に転送するため、データベースに負荷をかけることなく、しかも高速なデータ同期を実現する。実際、ある顧客のシステム・アップグレード案件では、GoldenGateを使うことにより、データの移行/照合作業をわずか9分程度で済ませられたという。この案件のデータ・サイズは約500GB。「普通、このくらいのデータ規模だと、データ移行作業には数時間かかるが、GoldenGateでは初期移行を事前に行い、後は移行日まで自動的にデータ同期を行うことができる。このデータ同期が高速であるため、移行完了までの作業時間を極小化できる」(後藤氏)という。(2)柔軟性 GoldenGateは非常に高い柔軟性を備える。Oracle Databaseのバージョンが違う、DBMS製品が違う、OSが違う、文字コードが違うといった環境間でもデータ同期を行うことが可能だ。また、同期形態についても、片方向と双方向のどちらでも選択できる。こうした柔軟性の高さから、GoldenGateはデータの統合と分散(1つのデータベースのデータを複数のデータベースに分散して保持させる)のいずれの目的でも使うことが可能となっている。(3)高信頼性 データの同期/連携を担う製品として高い信頼性を有することも重要なポイントだ。GoldenGateでは、たとえ運用中に処理の中断が生じても、再開時には正確に処理を継続することができる。どのような状況においても、データを正確に同期するための仕組みが備わっているのである。柔軟性と信頼性を実現するTrailファイル 以上の3つの特性をすべて兼ね備えている点が、GoldenGateの優位性だ。速さ、柔軟性、高信頼性のうち、どれか1つだけを比較すればGoldenGateに比肩する製品もあるが、3つの特徴をいずれも高いレベルで実現しているのはGoldenGateのみとなる。後藤氏によれば、これを可能にしているのはGoldenGate独自のアーキテクチャだ。 「例えば、速さだけを比べれば、原理上はData Guardのほうが高速」(後藤氏)だという。Data Guardでは、データベースのログをそのままレプリケーション先に転送する方式をとっている。一方、GoldenGateでは、「Trailファイル」という独自形式の中間ファイルを生成する工程が入る。この工程がない分、Data Guardのほうが速いのだ。 しかし、実はこのTrailファイルの存在こそが、GoldenGateの柔軟性の高さの秘密である。GoldenGateでは、いったん中間形式のTrailファイルにデータを書き出し、そこから連携先に合わせた形式でデータを転送することにより、さまざまなデータベース/OSに対応することを可能にしている。それに対して、Data Guardではレプリケーション元のOracle Databaseに依存したデータをそのままレプリケーション先に送るため、連携対象が限られるのだ。
GoldenGateでは、Trailファイルという中間ファイルを介して、柔軟なデータ連携を実現する。 また、GoldenGateではレプリケーション処理の履歴を「チェックポイント」として逐次記録している。この記録に基づき、どこまで処理が完了したかの履歴を細かく管理できるようになっている。もし、処理の途中で障害や中断が発生しても、履歴を基にして安全に再開できるというわけだ。これは、GoldenGateの高信頼性を実現する重要な機構の1つである。11gではパフォーマンスが向上し、ダイレクト・ロードに対応 このほかに後藤氏は、GoldenGateの魅力として「利便性」と「将来性」を挙げる。 「GoldenGateには、レプリケーション作業の効率を高めてくれるさまざまなコマンドが用意されている。また、買収後の改良により、他のオラクル製品との親和性が徐々に高まってきた。今後は、オラクル/他社製品間の連携まで担う重要なプラットフォームとして発展していくだろう」(後藤氏) 2011年1月にリリースされた最新版Oracle GoldenGate 11gの特色にも触れておこう。GoldenGate 11gでは、障害時のリカバリ時間短縮といった機能向上が図られている。さらに、「データ・ローディングを高速化するための仕組みであるダイレクト・ロードのトランザクションに対応し、Oracle Databaseユーザーにとってはさらに利便性が高まった」(後藤氏)。 また、サポートするプラットフォームが拡張され、インメモリ・データベース「Oracle TimesTen」との接続が可能になった。GoldenGateによってTimesTenにデータを集約し、高速なアクセスを実現するといった使用方法が可能になるのだ。
"リアルタイム時代"が求めるデータ連携の最適解 第3回 速さ、柔軟性、高信頼性——Oracle GoldenGateの価値を支える3つの技術的特色 (オラクルデータベースインサイダー)
