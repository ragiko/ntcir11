Twitter検索や特定ユーザーのTLをRSSで配信するフィードジェネレーター
前回のGoogle検索フィードに引き続き、同じような趣旨で今回はTwitterのタイムラインをRSSで出力するジェネレーターをYahoo! Pipesで作ってみました。
使い方により指定キーワードのTwitter検索をフィード化、あるいは特定アカウントのタイムラインをフィード化することができます。
最終更新日:2014/11/23
TWS-Feed 2.2:Twitterタイムラインの汎用フィード
使用方法
検索フィードとして利用する場合は【Keyword】にキーワードを指定して[Run Pipe]をクリック、結果が表示されたら「Get as RSS」をクリックするとRSSが出力されるので、そのURLを適宜RSSリーダーに登録して下さい。
検索には下記のオプション設定によって異なる結果やフィルタリングが反映されます。
一方、特定アカウントのフィードが希望の場合には【Target User】に「@kconf」という風にTwitter名を指定すればそのアカウントだけのツイートを得ることができます。
「@user1 @user2 @user3」という具合に半角スペース区切りで複数指定することも可能で、指定されたアカウントのすべてが新しい順に一つのタイムラインとしてまとめて出力させることができます。
これらアカウント指定した場合でも【Keyword】でのキーワード指定も有効で、同様に下記【Contents Type】や【Engagement】を使ったフィルタリングの併用も可能です。
設定項目
【Target User】
無指定 - すべてのツイートを対象
@{username} - 指定した{username}のツイートを対象(半角スペース区切りで複数指定可)
【Keyword】
検索キーワードを指定(【Target User】の指定がある場合は無指定でも可)
【Timeline Sort】
new - 常に最新ツイートを対象
top - 最近の注目度の高いツイートを対象(フィードアイテムは時間順にソートされます)
【Language】
検索対象言語(例:ja=日本語、en=英語、無指定=すべての言語)(【Target User】の指定がある場合は無視される)
【Contents Type】
1 - すべてのツイート
2 - 画像のリンクが含まれるツイート
3 - 動画のリンクが含まれるツイート
4 - ニュース系のリンクが含まれるツイート
【Engagement】
r:{number} - {number}以上のリツイート数を有すツイート
f:{number} - {number}以上のお気に入り数を有すツイート
m:{number} - {number}以上の返信数を有すツイート
(半角スペース及び半角パイプ区切りで併記可)
特徴と注意点
フィードアイテムの出力数は最大20件まで。
フィード名は「TWS-Feed 2.1」として出力されるので、必要に応じてRSSリーダー側でリネームして下さい。
各フィードアイテムのタイトルにはツイートのテキストを入れていますが、URLやその他リンク化されている文字列は取り除かれます
各フィードアイテムの概要には各タイムラインのHTMLソースをそのまま入れています。(不要な要素は極力取り外しています)
ツイート内に含まれる一部の画像リンク(pic.twitter.com, Instagram.com)に関しては各アイテム概要に挿入されるのでRSSリーダー側で画像を表示することが可能です。
【Contents Type】の指定により同じツイートでも画像が表示できる場合とできない場合があります。また、RSSリーダー側の問題で表示されないケースもあります。
ツイート内に含まれるYouTubeとVimeoの動画リンクに関しては埋め込みタグに置換えてアイテム概要に挿入しているのでRSSリーダーでそのまま視聴可能です。
(Yahoo! Pipeでは<iframe>と<object>が出力できず代替手段として<embed>に動画のURLを入れて出力していますが、一部のRSSリーダーではこれに対応してなく概要に含まれる埋め込み動画が表示できるかどうかはRSSリーダー側に依存します)
【Language】を無指定で「Baseball」というキーワード検索した場合には必然的に英語圏のツイートが並ぶ結果となりますが、【Language】を「ja」と指定することで日本語ツイート内の「Baseball」にフォーカスする働きがあります。求める検索結果に応じて適切な指定をして下さい。
【Engagement】は指定数以上のリツイート/お気に入り/返信の量でフィルタリングするオプションですが、一度に複数設定することが可能です。例えば「r:20 f:10 m:5」と半角スペース区切りで併記すると「20以上のリツイート、且つ10以上のお気に入り、且つ5以上の返信」すべてを満たすツイートが対象になり、「r:20|f:10|m:5」などと半角パイプで区切ると「20以上のリツイート、もしくは10以上のお気に入り、もしくは5以上の返信」どれかに該当するツイートが対象が対象となります。(検索エンジンのトラブルにより過剰な数を指定するとエラーになる場合や、指定数を下回るツイートが検索される場合もあります)
このYahoo! Pipeは共用使用される関係上、利用率(トラフィック量)によっては希に障害が発生することも考えられます。また、何らかの利用により当方で予告無しに変更/削除する場合もありますので、そのようなことが煩わしい方はクローン(コピー)をとってご自身でご自由に運用されることをおすすめします。
使用例とヒント
一般のTwitter検索のページで検索するのと同じ動作なため、Twitterが用意している検索オプションを活用しフレキシブルなフィードが作れます。
その他、『IFTTT』を使ってフィードの更新をトリガーに何らかのアクションを実行させたりという活用の仕方もできると思います。
また、出力したフィードをそのまま利用するのではなくFeedBurnerを中継させるとトラフィックや更新間隔の最適化やフィードタイトルの変更など、いろいろな面でメリットがあるのでおすすめです。
さらに、パイプ内部を弄ればもっといろいろなことができるのでYahoo! Pipeユーザーはクローンを作って好きなようにカスタマイズしてください。
製作にあたって
さて、このようなパイプを作るきっかけになったのも、TwitterのAPIの仕様変更によってRSSが廃止されたばかりかすべてのAPIにOAuthによる認証が必須になったことが挙げられます。
少し前までは検索や特定ユーザーのパブリックなタイムラインは何の手順も踏まずURLを投げるだけで普通に取得できていましたが、今ではこれらですら七面倒くさい認証のプロセスが必須というわけです。
そもそもこのようなパブリックな情報の請求のために、認証のための個人情報を送信しなければいけないのは、むしろセキュリティ的に考えて理不尽な気もします。
そこで、昔のような気軽に使える汎用フィードというスタンスで作ってみた次第ですが、何分HTMLから直接パースするという泥臭いやり方なためページのレイアウトが変更されると機能しないという点はどうにもなりませんが、反面、APIを使用していないため余計なプロセスを考えずシンプルな造りですむのが特徴です。
更新履歴
2014/11/23
ソース取得による不具合の修正
2014/08/10
TWS-Feed 2.1 リリース
複数アカウント指定
リツイート/お気に入り/返信・フィルター
2014/06/09
TWS-Feed 2 リリース
TWU-Feed:「TWS-Feed 2」に統合されたため廃止
2014/01/31
TWS-Feed:検索オプションにフィルターを追加
TWS-Feed:検索ページ変更に伴い細部修正
Twitter検索や特定ユーザーのTLをRSSで配信するフィードジェネレーター - K'conf
