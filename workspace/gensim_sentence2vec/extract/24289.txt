
4.アクティブネットワークの応用技術
以下の節では、アクティブネットワークの応用技術として提案されているいくつかの事例を取り上げ、上記の制約条件をどのように満足するかという視点で各事例について考察する。
4.1 信頼性マルチキャストへの適用
インターネット上で1対多もしくは多対多通信、すなわちマルチキャスト通信を行う場合には、IPマルチキャストが用いられる［2］。IPマルチキャストは、UDPをベースとしており、パケットロスに対する対応など信頼性に対する補償は全く行われない。株式情報やニュースの配信サービスをマルチキャストで実現しようとする場合には、パケットロスなどで失われた情報を補償することが必要である。このような信頼性を重視するマルチキャスト通信として、信頼性マルチキャスト通信の重要性が認識されつつある［12］［13］。
信頼性マルチキャスト通信においては、再送制御が重要な技術課題である。パケットが正常に受信された時にACK信号を返送する方式を用いた場合には、マルチキャストされた情報を受け取ったすべての受信局からのACKが送信局に集中する、いわゆるACK implosionが発生するため、送信局において再送制御に要するオーバーヘッドが大きくなるという問題がある［14］。これに対して、パケットが誤って受信された時にNAK信号を返送する方式を用いることである程度のオーバーヘッドの解消は可能である［14］が、NAKが送信局に集中する可能性があるため、本質的な解決策とはなっていない。また、再送制御を局所的に行うLocal Recoveryという方法も考案されている［15］が、ネットワーク帯域などの資
源の無駄な使用を完全に排除できるわけではない［16］。
これらの方法は、エンドユーザ側に位置するホストが発生するNAKや再送パケットを低減するための方策を講じるという点で、End-to-Endアプローチとなっている。これに対して、ネットワーク内のルータが積極的に再送制御に関与する方法がいくつか提案されている。例えば、文献［17］では、下流の受信局から送られてくるNAKのうち最初のNAKだけを送信局へと送出し、それ以外の冗長なNAKは廃棄するという処理をルータに実行させている(図2(a))。これにより、送信局に到達するNAKは各パケットにつき最大一つとなり、送信局での再送制御に要するオーバーヘッドを大幅に低減するとともに、冗長NAKによるネットワーク帯域の浪費も防げる。さらに、文献［18］では再送パケットをネットワーク内のルータでキャッシュしておき、それ以降に到着したNAKに対してルータが再送を行うことを提案している(図2(b))。
これらの手法を、3節における制約条件の観点から考察してみる。マルチキャスト通信は、一般に多数の受信局が存在し、送信局は不特定であるものの、あるパケットについては送信局は唯一である。送信局から送出されたパケットは、ルータを分岐点として送信局から多数の受信局へと分岐していくツリー状の経路上を伝送される。ネットワーク内には、多数の分岐点が存在し、ここでNAKを集約することで、送信局にNAKが集中することを回避している。このことは、分岐点において冗長NAKを削除することで、再送制御をネットワーク内に分散させていることに他ならない。NAK集約は、ネットワーク内でのみ可能な処理であり、条件①を満足している。また、マルチキャスト経路上に位置するルータに再送パケットをキャッシュするということは、再送制御に要する遅延を低減するという観点、および送信局の再送制御オーバーヘッドを低減するという観点から非常に有効な方法であり、条件①を十分満足している。
次に、条件②の軽負荷性については、到着するNAKの最初のものを送出し、それ以降を廃棄するという簡単な処理を行うという意味で、軽負荷性もある程度は考慮されている。また、キャッシュについては最初に伝送するパケットをキャッシュするという考え方もあるが、あえて再送パケットのみのキャッシュに留めていることは、条件②の軽負荷性を考慮してのことである。
条件③の部分動作性については、方式提案を行った論文［17］および［18］では詳しく論じられていなかったので、筆者等は文献［19］、［20］で述べたように、この点に着目した評価を行った。それによると、約15%のルータにアクティブネットワーク機能が導入された段階で、End-to-Endアプローチによる再送制御プロトコルによって得られる性能より優れた性能が得られることが示されている(図3, 図4)。図4においては、アクティブルータの配置に着目して性能改善効果を評価しており、MAN,WANいずれにおいても10〜20%のアクティブルータの導入により遅延時間が短縮されることがわかり、アクティブネットワーク技術導入戦略が明らかとなっている。すなわち、割合としてはMANおよびWANルー
タのいずれに配置しても同様の効果が得られるものの、通常WANはトラヒック集約効果が大きくルータの数も少ないことから、台数効果としてはWANに配置する方が有効であることが分かる。これらより、信頼性マルチキャストへの適用は条件③も満足していることが分かる。
4.2 QoS制御への応用
画像情報の符号化技術として、品質に及ぼす影響の大きい部分から小さい部分を複数のレベルに分割コーディングして、それぞれのレベルに異なる優先権を付与して送出し、輻輳が発生した場合には画像品質に影響の少ない低レベル部分だけを廃棄させる方法が提案されている。これをマルチキャスト通信に応用し、輻輳が発生したルータにおいて低レベル画像情報から廃棄する方法が、［21］［22］［23］などで扱われている。文献［7］では、ストリームコードを用いたアクティブネットワークにおいてこのような階層化コーディングを用いた画像情報をマルチキャストする場合の実験結果が提示されている。
マルチキャスト通信におけるQoS制御にアクティブネットワーク技術を適用した場合、輻輳状況はネットワーク内でのみ観測可能であるという点で必然性を具備しており、アクティブネットワーク技術によってユーザが画像のコーディングレベルを設定できるためネットワークが提供する優先権制御とは独立に画像コーディングレベルを設定できる点で有効性も満足している。つまり、制約条件①は満足されている。
文献［7］ではプログラムソースも提示されており、アクティブルータに実行させるべき処理が非常に簡易な形で記述できる点で、制約条件②の軽負荷性も満足していることがわかる。
部分動作性という点では、例えば一部のルータがアクティブルータでなく画像情報のコーディングと無関係にパケットが廃棄された場合、階層コーディングがうまく動作しない。ただし、輻輳の発生したルータがアクティブルータでさえあれば、それ以外のルータがアクティブルータでなくても、画像コーディングを考慮した廃棄が可能であり有効に動作する。このような点での部分動作性は満足しているが、輻輳が発生しやすいポイントにアクティブルータを配置するなどの対応をとればより有効に動作させることが可能である。
4.3 TCPトラヒック制御への応用
アクティブネットワーク技術を、TCPにおける輻輳制御に応用した方式が、［24］において提案されている。本方式においては、ルータにおいて輻輳すなわちパケットロスを検知した場合に、それ以降の該当セッションへのパケット送出過程を、そのルータが送信ノードである場合のものに置き換える。また、ルータはこの動作による状態変化を、送信局へとフィードバック情報を用いて通知する。この通知が送信局へ到達するまでに、送信局から送出されたパケットについては、ルータが送出すべきでないと判断した場合、すなわち自身が決定したパケット送出過程を満足しないパケットについては廃棄する。このような動作により、状況によっては15%程度のスループット改善がみられることを示している。また最悪でも、通常のTCPと同様のスループットが得られることが示されている。
トラヒック制御への応用という観点からは、無線リンクへの応用例もある。エンドユーザのアクセス網に無線リンクを含む場合には、スロースタートアルゴリズムが頻繁に起動されるため、TCPの性能が大幅に劣化することが知られている。これを解決する方法として、無線リンクと有線部分との接続点にあたるルータでTCPコネクションを分割するという方法が提案されている［25］。著者らはアクティブネットワーク技術の応用には言及していないが、アクティブネットワーク技術で対応できる方法である。
これらの方法について、まず制約条件①の観点から考察してみる。前者の方法では、パケットロス自体はネットワーク内部のルータしか知り得ない情報ではない。受信局から送られるACKにより、送信局はパケットロスを検知しうる。ただし、ネットワーク内部のルータが、輻輳を検知して即座に対応することにより、輻輳に対する即応性が大幅に改善できる。この点から、前者の方法は条件①を満足している。また、後者においては、無線リンクと有線網との接続点でTCPを分割することにより、無線リンクの低品質性を有線網から隠蔽するという点で有線網部分の性能改善に有効であり、条件①を満足している。
前者の方法では、ルータを通る各セッションごとに状態を記録すること、パケットロスを検知した際に送信局と同様のウィンドウ変化によるパケット送出過程を作り出すこと、ならびにその状態変化を送信局へ通知すること、の大きく分けて3つの動作がルータに要求される。この方法においては、パケットロスを検出した後に送信局から到着したパケットを一旦ルータにおいて蓄積し、ルータの送出過程にあわせて送出するという考え方も適用可能であることが文献［24］に記されている。ただし、この方法を用いた場合にはルータに相当の処理負担を強いることとなり、現状では単にルータの送出過程に違反するパケットを廃棄するにとどめている。これは、②の条件を指向した考え方である。また、後者の方法では、一旦TCPコネクションをアクティブルータで分断するため、ルータが送信局および受信局の動作を模倣する必要がある。本方式については、軽負荷性を満足するという方向での改善の余地がある。
前者の方法では、アクティブルータがない状況では単に従来のTCP輻輳制御がエンドノードにおいて動作するため、部分動作性は保証される。後者についても、アクティブルータは無線および有線の接続点以外には不要であることから、部分動作性は保証される。輻輳状況の検知および輻輳に対する即応性という点から、アクティブネットワーク技術のトラヒック制御への適用の可能性は大きいと思われる。こういった意味において、制約条件①はどのような方法でも満足できるものの、いたずらに制御を複雑化し軽負荷性を軽視した場合には、他のアプリケーションに与える影響が大きくなる。こういった状況に陥らないために、ネットワーク内に処理させるべき内容とエンドノードで対応すべき内容とを見極めることが重要である。
4.4 キャッシュへの応用
クライアントとサーバとの経路上に存在するアクティブルータ上に設定したキャッシュにWeb情報を保存し、他のクライアントからのアクセスに対してこのキャッシュから応答するという方式が、［26］［27］で提案されている。
通常は、あらかじめ設定したエンドノード部分にしかキャッシュできないのに対し、アクティブネットワーク技術を適用した場合にはクライアントとサーバの経路上にキャッシュ機能を設定でき、より少ない遅延でコンテンツを取得することが可能となる。すなわちネットワーク内においてキャッシュすることの有効性をうまく利用しており、条件①は満足している。
また、ルータにおいて該当する情報だけをキャッシュに保存するという点で、簡単な処理で実現できるため、軽負荷性も満足している。さらに、一部のルータだけがアクティブルータであったとしても、アクティブルータだけでキャッシュ機能をサポートすれば、エンドユーザから見た遅延性能は悪くても従来通りであり、途中でキャッシュにヒットすれば性能が向上されるという点で、部分動作性も満足している。
キャッシュ機能をアクティブルータに配置する応用例は、アクティブネットワーク技術の有効な方法であるが、現状ではヒット率が低くキャッシュをおくことによる性能改善がそれほど大きくない。このような状況では、あえてルータに処理をさせる必要性が認められない。この要因として、キャッシュのReplacementなどキャッシュの性能を大きく左右する因子について、従来方式ではエンド部でのキャッシュ制御方式を踏襲しており、ネットワーク内にキャッシュした場合に適応していないことが挙げられる。また、ネットワーク内のキャッシュの配置問題、すなわちキャッシュ機能をサポートするアクティブルータをどこに配置するかという点についてもさらに検討が加えられるべきである。これらの技術的課題を克服するために、ネットワークキャッシュのヒット率を向上させるためのReplacement Policyなど、解決すべき課題が多く残されている。
4.5 サーバ負荷分散への応用
アクティブネットワーク技術をサーバ負荷分散に応用し、ルータに最適サーバ選択処理を行わせる方式として、Active Anycastが文献［28］［29］において提案されている。本方式では、クライアントは単にサーバ群を指すAnycastアドレスを指定するだけでよい。一般のAnycastにおいては、対応するサーバ群の中から最近隣サーバがルータにおいて選択され、該当パケットは最近隣サーバへの出方路へと送出される［30］。これに対して、Active Anycastにおいては、ルータが把握しているサーバの負荷情報をもとに最適サーバが選択される。すなわち、図5において、Anycastアドレスを受信したアクティブルータでは、Server2が軽負荷で動作していることを知っており、プロセス4でServer2へのアドレスに変換している。
サーバの負荷情報を各エンドユーザが独自に把握しようとすると、全エンドユーザが複数のサーバに対して負荷情報を獲得する必要があるため、大量の負荷情報がネットワーク内を流れることとなる。これに対して、Active Anycastではネットワーク内のルータが負荷情報を獲得するので、ネットワークを流れる負荷情報は全体として少なくて済む。こういった意味において、ネットワーク内でサーバ選択処理を行うことによる効果は大きく、制約条件①をActive Anycastは満足している。
ルータは、クライアントからの接続要求パケットのAnycastアドレスを最適サーバアドレスへと変換するという処理と、負荷情報獲得処理の2つの処理を行う。Anycastアドレスを最適サーバアドレスへ変換するという処理は、獲得した負荷情報に基いた最適サーバの決定さえ行えば、一般にルータが行っている経路選択と基本的に同様の処理であり、処理に要する負荷は非常に小さい。負荷情報の獲得は、サーバから送られてくる情報を蓄積するだけでよいので、これも負荷としては小さい。すなわち、Active Anycastは制約条件②を満足している。
Active Anycastにおいて、クライアントからの接続要求がアクティブネットワーク機能を導入していないルータに到着した場合には、通常のAnycastにおける処理が施され最近隣サーバへと送出される。最近隣サーバへの経路上に一つでもアクティブネットワーク技術対応ルータがあれば、それが最適サーバへと接続要求パケットの宛先アドレスを変更してくれる。すなわち、一部のルータがアクティブルータであるという状況で十分に動作する。文献［28］においては、全ルータのうちのアクティブルータの割合を変化させた状況での性能評価を行っている(図6)。それによると、全体の20%のルータがアクティブネットワーク機能を実装した段階で、サーバ負荷分散が有効に図られることが示されている。また、WANにおいて接続要求パケットが集約されるために、MANなどに配置するよりもWANルータにアクティブルータを配置する方が有効であることが示されている(図6)。このように、一部のルータがアクティブルータである状況で有効に動作することから、Active Anycastは③の部分動作性も満足している。
アクティブネットワーク技術とその応用:池田 博昌・山本 幹
