主に自分向けのまとめという意味合いが強いんですが(笑)、僕が実際に2013年6月現在webデータ分析&データサイエンスの実務でツール・ライブラリ・パッケージを利用しているものに限って、統計学・機械学習系の分析手法を10個挙げて紹介してみようと思います。
回帰分析
独立性の検定
主成分分析・因子分析
クラスタリング
決定木 / 回帰木
サポートベクターマシン(SVM)
ロジスティック回帰
ランダムフォレスト
アソシエーション分析(バスケット分析)
計量時系列分析
基本的にはどれも僕が戦略マーケティング部門で実務として行っているアドホック分析向けの手法で、
僕自身が知っていても実務ではほとんど使っていないもの
レコメンドなどバックエンドシステム向けの手法
機械学習の諸手法のバックエンドシステム向けの実装方法
Deep learningとか巷では有名でも個人的にはまだ実務で使ったことのないもの
ベイジアンなどそもそも僕が不得手なもの
などは外してあります。悪しからずご了承を。なお、僕の仕事内容が変わる度に今後このシリーズはアップデートされていく・・・予定です、たぶん(笑)。
ちなみに、今回も統計学的・機械学習的な厳密性はある程度度外視して、ものすごく大ざっぱな説明に留めるつもりです。細かいポイントはまた改めて、ということで。そして、どれもR / SPSSなら大体使えるものばかりです。初めてRを使うという人は、以前の記事(素性ベクトル＋分類ラベルのテーブルを持ってくる&rArr;Rを使ってお手軽に機械学習で分類してみる)などを参考に、実行環境を準備した上でトライしてみて下さい。
(※基本的に「どんな手法を使っているか」「どういうツール・ライブラリ・パッケージを利用すればその手法が使えるか」にのみフォーカスした記事なので、厳密性にかかわる部分は全て度外視しています。悪しからず)
回帰分析(特に線形重回帰分析)
猛烈に大ざっぱに書くと、
売上高 = a * ヘビーユーザーDAU + b * ライトユーザーDAU + c * 呼び戻しユーザーDAU
のように仮に数値モデルを立てて、実データから逆算してそれぞれの係数a, b, cを推定することでモデルの全体像を求める手法のことです。主にDAUとか売上高とか「何かと何かを足し合わせたりかけ合わせることで得られるであろう数値」のモデル化に向いています。
Rではこんな感じで実践できます。サンプルデータとしてはairqualityを使ってます。ちなみにプロットするとこんな感じのデータで*1、黒いプロットで表されるオゾン濃度を説明するモデルを探す感じです。
> data(airquality) # データ読み込み
> airq<-airquality[,1:4] # 月・日付のデータを外す
> airq.lm<-lm(Ozone~.,airq) # Ozone = a * Solar.R + b * Wind + c * Temp + dのモデルを推定する
> summary(airq.lm) # 結果を表示する
Call:
lm(formula = Ozone ~ ., data = airq)
Residuals:
Min      1Q  Median      3Q     Max 
-40.485 -14.219  -3.551  10.097  95.619 
Coefficients:
Estimate Std. Error t value Pr(>|t|)    
(Intercept) -64.34208   23.05472  -2.791  0.00623 ** 
Solar.R       0.05982    0.02319   2.580  0.01124 *  
Wind         -3.33359    0.65441  -5.094 1.52e-06 ***
Temp          1.65209    0.25353   6.516 2.42e-09 ***
---
Signif. codes:  0 *** 0.001 ** 0.01 * 0.05 . 0.1   1 
Residual standard error: 21.18 on 107 degrees of freedom
(42 observations deleted due to missingness)
Multiple R-squared: 0.6059,	Adjusted R-squared: 0.5948 
F-statistic: 54.83 on 3 and 107 DF,  p-value: < 2.2e-16 
> airq.lm<-lm(Ozone~. - 1,airq) # 切片dを除外する
> summary(airq.lm)
Call:
lm(formula = Ozone ~ . - 1, data = airq)
Residuals:
Min      1Q  Median      3Q     Max 
-40.675 -15.446  -5.526  13.479  88.822 
Coefficients:
Estimate Std. Error t value Pr(>|t|)    
Solar.R  0.06306    0.02387   2.641  0.00948 ** 
Wind    -4.59884    0.48653  -9.452 8.21e-16 ***
Temp     0.98525    0.08739  11.275  < 2e-16 ***
---
Signif. codes:  0 *** 0.001 ** 0.01 * 0.05 . 0.1   1 
Residual standard error: 21.84 on 108 degrees of freedom
(42 observations deleted due to missingness)
Multiple R-squared: 0.8383,	Adjusted R-squared: 0.8338 
F-statistic: 186.7 on 3 and 108 DF,  p-value: < 2.2e-16 
オゾン濃度には気温がプラスの影響を、風速がマイナスの影響を与えていることが分かりますね。ちなみに交互作用とかモデル選択の問題*2とか細かい点は、ややこしくなるのでここでは割愛。また今回はやりませんでしたが、predict()関数でモデルに基づいた予測を行うこともできます。
なお、Rを使う人はこの回帰分析のところで出てくる
y ~ x1 + x2 + x3 + ... # 回帰モデル
y ~ . # 回帰モデル(全部入り)
のようなformula記法に慣れておくと良いと思います。回帰モデル及びformula記法はその他の重要な線形検定モデル(例えば分散分析など)でも使うことになるので、覚えておいて損はないです。
独立性の検定(カイ二乗検定・フィッシャーの正確確率検定)
何か施策を打った際のKPIに対する効果検証を行う際には必須です。特にA/Bテストで改善施策がコンバージョンUU数を増やしたかどうか調べたい!という時には、CVRだけ見ていても往々にして分母が違っていてそのままでは比較できないケースが多いので、この方法論を知っていることは重要です。
(以前のブログ記事も参照のこと:「カイゼンしたらコンバージョン率が○○%&rarr;△△%にup!」は分母を無視したら成り立たないかもしれない)
Rではchisq.test()関数やfisher.test()関数で実践できます。サンプルとして、昔からよく知られている「予防注射の効果の有無」のデータを用意してみました。
病気にかからない
かかった
注射した
Webデータ分析&データサイエンスで役立つ統計学・機械学習系の分析手法10選 - 銀座で働くData Scientistのブログ
