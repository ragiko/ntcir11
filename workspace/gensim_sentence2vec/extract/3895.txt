はじめに
あらゆるA/Dコンバータ(ADC)はある程度の入力換算ノイズを持っており、ノイズフリーのADCの入力にノイズ源が直列に接続されているようにモデル化することができます。入力換算ノイズを量子化ノイズと混同しないことが必要です。量子化ノイズとは、ADCが時間と共に変化している信号を処理している時のみに発生するノイズです。ほとんどの場合、入力ノイズは少なければ少ないほど良いのですが、入力ノイズがあるおかげで分解能が高くなることもあります。今は納得できないかもしれませんが、以下をお読みいただければ、どのようなノイズが良いノイズになることがあるのかが理解できます。
入力換算ノイズ(コード遷移ノイズ)
実際のADCは、多くの点で理想のADCから外れています。入力換算ノイズも理想的なADCにはないものでしょう。入力換算ノイズがADCの伝達関数全体に及ぼす影響を図1に示します。アナログ入力電圧が増大するとき、理想的なADC(図1a)は遷移領域に来るまで一定の出力コードを維持します。遷移領域に達すると、そこで直ちに次の値にジャンプし、次の遷移領域に来るまでその状態のままになります。理論上完全なADCにはコード遷移ノイズがまったく存在せず、遷移領域幅はゼロになります。実際のADCの場合は、ある程度のコード遷移ノイズがあるため、何らかの遷移領域幅が存在することになります。図1bは、コード遷移ノイズの幅が約1LSB(最下位ビット)ピークtoピークの場合を示しています。
図1. コード遷移ノイズ(入力換算ノイズ)とADC伝達関数への影響
あらゆるADC回路は、抵抗ノイズと「kT/C」ノイズのために内部的にある程度のrmsノイズを生じます。DC入力信号にも見られるこのノイズはコード遷移ノイズであり、現在では一般に「入力換算ノイズ」と呼ばれています。入力換算ノイズは、ADCへの入力を一定のDC値に保ちながら、いくつかの出力サンプルのヒストグラムを調べることでその特性を明らかにできます。一般に、最高速または最高分解能で動作させたADCの出力は、DC入力の公称値を中心としたコード分布になります(図2参照)。
入力換算ノイズの量を測定するには、ADCの入力を接地するか、十分にデカップリングした電圧源に接続したうえで大量の出力サンプルを収集し、そのヒストグラムを作成します(入力が公称0Vの場合は、「グラウンド入力ヒストグラム」といいます)。ノイズがほぼガウス分布であることから、ヒストグラムの標準偏差σを計算できますが、これが実効入力rmsノイズになります。ヒストグラムのデータからσの値を計算する方法については、「参考文献」の6を参照してください。一般に、このrmsノイズはLSB rmsで表しますが、これはADCのフルスケール入力レンジを基準にしたrms電圧に対応するものです。アナログ入力レンジをデジタル数値のカウントで表す場合は、σなどの入力値もLSB数のカウントとして表すことができます。
図2. わずかなDNLがあるADCにおけるグラウンド入力ヒストグラムに対する入力換算ノイズの影響
ADC固有の微分非直線性(DNL)のために理想のガウス分布からの逸脱(たとえば、図2でもある程度のDNLが確認できます)が生じますが、少なくともおおよそはガウス分布になります。DNLが著しい場合は、複数の異なるDC入力電圧についてσの値を計算し、その結果を平均します。コード分布が著しく、ガウス分布から逸脱していて、たとえば大きな「山」と「谷」がはっきり見られる場合などは、ADCの設計が悪いか、あるいは、むしろPCボードのレイアウトの不良、グラウンディングの問題、または電源の不適切なデカップリングなどがあると考えられます(図3参照)。また、ADCの入力電圧範囲にわたり、DC入力がスイープされるときに分布の幅が急激に変化するのも、問題があることを示しています。
図3. ADCの設計が悪い場合および/またはレイアウト、グラウンディング、
またはデカップリングが不適切な場合の接地された入力のヒストグラム
ノイズフリー(フリッカーフリー)のコード分解能
ADCのノイズフリー・コード分解能とは、これ以上各コードを明確に分解することが不可能な分解能のビット数のことです。この限界は、あらゆるADCに伴う実効入力ノイズ(すなわち入力換算ノイズ)によるもので、前述のように、通常はLSB rms単位によるrms量として表します。係数6.6を掛けることによって、rmsノイズをLSBピークtoピーク単位のピークtoピーク・ノイズ(コードを識別する際の事実上の不確実性)という実用的な数値に換算できます。
図4.シグマ・デルタADC「AD7730」のノイズフリー・コード分解能
NビットADCの全レンジ(すなわちスパン)は2NLSBになるため、ノイズフリー・カウントの合計は次式の値になります。	
Analog Devices : Analog Dialogue : ADC Noise
