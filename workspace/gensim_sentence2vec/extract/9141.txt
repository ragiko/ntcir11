SQL*Loaderの機能
SQL*Loaderを使用して、外部ファイルのデータをOracle Databaseの表にロードします。強力なデータ解析エンジンによって、あらゆるデータ形式のデータ・ファイルに対応できます。SQL*Loaderを使用して、次のことが可能です。
データ・ファイルがデータベースと異なるシステム上にある場合のネットワークを介したデータのロード。(「ネットワークを介したデータのロード」を参照)
同一のロード・セッションでの複数のデータ・ファイルからのデータのロード。
同一のロード・セッションでの複数の表へのデータのロード。
データのキャラクタ・セットの指定。
ロード・データの選択(レコード値に基づいたロード)。
ロード前の、SQL関数を使用したデータ処理。
指定した列に対する、一意の順序キーの生成。
オペレーティング・システムのファイル・システムを使用したデータ・ファイルへのアクセス。
ディスク、テープまたはNamed Pipeからのデータのロード。
高度なエラー・レポートの生成による、トラブルシューティングの支援。
複合オブジェクト・リレーショナル・データの任意のロード。
セカンダリ・データ・ファイルを使用した、LOBおよびコレクションのロード。
従来型パス・ロードまたはダイレクト・パス・ロードの使用。従来型パス・ロードでは高い柔軟性を、ダイレクト・パス・ロードでは優れたロード・パフォーマンスを提供します。「第12章」を参照してください。
一般的なSQL*Loaderセッションでは、SQL*Loaderの動作を制御する制御ファイルと1つ以上のデータ・ファイルが入力用に使用されます。SQL*Loaderの出力先は、データがロードされるOracle Database、ログ・ファイル、不良ファイルで、廃棄ファイルに出力される場合もあります。図7-1に、SQL*Loaderセッションの流れの例を示します。
SQL*Loaderのパラメータ
SQL*Loaderは、sqlldrコマンドを指定すると起動します。また、オプションで、セッション特性を確立するパラメータを指定した場合も起動します。
常に、値がほとんど変わらない同じパラメータを使用する場合は、コマンドラインではなく、次の方法でパラメータを指定すると効率的です。
パラメータは、パラメータ・ファイルとしてグループ化できます。その後、PARFILEパラメータを使用して、そのパラメータ・ファイルの名前をコマンドラインで指定できます。
一部のパラメータは、OPTIONS句を使用して、SQL*Loaderの制御ファイル内に指定することもできます。
コマンドラインで指定したパラメータは、パラメータ・ファイルまたはOPTIONS句で指定したパラメータ値を上書きします。
SQL*Loader制御ファイル
制御ファイルは、SQL*Loaderが解釈できる言語で記述されたテキスト・ファイルです。制御ファイルは、データの場所、データの分析と解釈方法、データの挿入先などをSQL*Loaderに通知します。
制御ファイルには、大きく分けて3つのセクションがあります。
第1セクションには、セッション全体の情報が記述されます。たとえば、次のような情報です。
バインドサイズ、行、スキップ・レコードなどのようなグローバル・オプション
入力データの配置先を指定するINFILE句
ロードされるデータ
第2セクションは、1つ以上のINTO TABLEブロックで構成されています。それぞれのブロックには、表名、その表の列などの、データがロードされる表についての情報が含まれています。
第3セクションはオプションで、このセクションがある場合は、入力データが記述されます。
制御ファイルの構文には、次の注意事項があります。
構文は、自由形式で記述できます(文は複数行になってもかまいません)。
大文字と小文字は、一重引用符または二重引用符で囲まれた文字列の場合のみ区別され、それ以外では区別されません。
先頭にハイフンを2つ(--)続けて入力することによって、コメントを挿入できます。ハイフンから行の終わりまでがコメントになります。オプションである第3セクションでは、二重ハイフンがコメントとしてではなくデータとして解釈されるため、このセクションでのコメントはサポートされません。
CONSTANTおよびZONEキーワードは、SQL*Loaderでは特別な意味があり、予約されています。競合を回避するために、表または列の名前にCONSTANTまたはZONEという語を使用しないことをお薦めします。
SQL*Loaderの概念
