ビジネス上重要なサービスを提供するシステムは,規模の大小に関わらず障害による停止を最小限にする必要がある。可用性を高める確実な方法は,システムをクラスター化することだ。サーバーが停止してもサービスを継続できるこの仕組みさえあれば,万一の事態でも安心できる。HP StorageWorks MSAファミリのニューモデル「MSA2300」は,クラスター環境に最適な共有ストレージとして簡単で使いやすくリーズナブルを徹底的に追求した製品だ。その理由をレポートしよう。
MSAの呼称で親しまれているベストセラーのストレージ「HP StorageWorks Modular Smart Array(MSA)ファミリ」にニューモデルが加わった。簡単で使いやすくリーズナブルを追求した「HP StorageWorks MSA2300」である。日本HPでストレージ製品のマーケティングを担当する深澤氏は,その特長を次のように紹介する。
「まず,共有ストレージに求められる要件を徹底的に洗い出しました。そして,導入から運用フェーズまで,管理者の負荷を軽減する工夫を随所に凝らしています。簡単で使いやすいがMSA2300の最初のキーワードです。目新しさにはこだわらず,ストレージ運用の現場で本当に役立つ機能を厳選しました。もうひとつのキーワードはリーズナブル。ベストセラー製品ならではの思い切った価格設定により,FC-SAN/iSCSI-SANやクラスター環境をローコストで実現できます」
サーバーとの接続はFC/iSCSI/SASの3方式から,搭載するハードディスクドライブは2.5インチと3.5インチから目的に合わせて選べる。新しく開発された日本語版の統合管理ツールは,プロビジョニングから稼働監視,設定変更まで様々な場面にこれ一本で対応できるという。深澤氏は,「MSA2300は共有ストレージとして非常に広範な要求に応えるポテンシャルを備えている」としながらも,「クラスター環境の共有ストレージとして特にメリットが大きい」と語る。
ビジネス上重要なサービスを提供するシステムでは,可用性を高めるためにHA(High Availability)クラスターを採用する場合がある。最もシンプルなHAクラスターでは,本番系と待機系2台のサーバーが1台のストレージに接続される。本番系のサーバーに障害が発生した際に,待機系が処理を引き継ぐ仕組みだ。
「1台のサーバーが停止してもサービスを継続できるクラスター環境なら,万一の事態でも安心です。MSA2300は,Microsoft Windows ServerからLinux,HP-UX,VMwareなど幅広いOSとそれぞれに対応する主要クラスターソフトウェアをサポートしていますので,ほとんどのシステムに適用いただけます」(深澤氏)
クラスター環境に最適な理由を,日本HPの瀧澤氏は次のように説明する。
「高可用性システムのデータ管理を担うストレージ製品として,ハードウェアの信頼性には特に配慮された設計となっています。本体背面に内蔵するコントローラーをはじめ,電源やファンなどの主要コンポーネントを冗長化しました。高信頼なSASディスクドライブを搭載可能で,ハードディスクドライブに二重障害が発生しても復旧が可能なRAID 6もサポートしています」
災害に伴う停電など,万一の事態に対しても手が打たれている。
「MSA2300は1GBのキャッシュメモリを搭載しており,電力の供給が止まったとしてもキャッシュ内のデータは保持されます。一般のストレージ製品では,キャッシュデータを保持するためにバッテリーを使いますが,MSA2300は独自のテクノロジーにより,時間無制限にデータを保持できます」(深澤氏)
バッテリーは劣化するということを忘れてはならない。いざというとき確実にキャッシュデータを保全できれば,復旧までの時間も短縮できるのだ。
SANスイッチを使わないクラスター環境 高可用性システムがここまで手軽に
クラスターシステムにおけるサーバーとストレージ間の接続には,いくつかの方法がある。よく知られているのは,4Gbpsの高速通信が可能で信頼性の高いファイバチャネル(FC)を使う方法だ。
「ストレージネットワークの知識のないサーバー管理者がFC-SANを構築・運用するのはややハードルが高いかもしれません。ただし,3台以上のサーバーノード構成されるような大規模なクラスターシステムでさえなければ,必ずしもFCを前提にする必要はないのです」(深澤氏)
FCを使わないクラスター構成とは,どのようなものか。
「2台のサーバーをアクティブ−スタンバイで運用する典型的なHAクラスターであれば,FCと遜色ない3Gbpsの高速通信が可能なSAS接続がお使いいただけます。サーバー側のアレイコントローラーとストレージのSASポートをSASケーブルでダイレクトに接続する最もシンプルな構成です。高価なFCホストバスアダプターやFCスイッチが不要なので,コスト面でも大きなメリットがあります」(深澤氏)
たとえばSAS接続モデルの「MSA2312sa」は,単体で最大12基の3.5インチSASディスクドライブ(5.4TB)を内蔵可能で,増設用エンクロージャを使えば最大27TBまで拡張できる。1システムのストレージとして十分な容量を確保できるうえ,クラスを超えた拡張性も備えている。
「MSA2312saはコントローラーあたり4つのSASポートを標準で装備していますので,サーバー−ストレージ間のパスも二重化が可能です。FCのスキルを持つ専任の管理者を設置できない中小規模のシステムなどでメリットが大きい選択となるはずです」(深澤氏)
プリインストールされた,簡単で使いやすい統合管理ツール
MSA2300の簡単で使いやすいを支える重要な役割を果たしているのが,新たに開発されたWEBベースの統合管理ツール「HP Storage Management Utility(SMU)」だ。深澤氏は次のように紹介する。
「導入時の初期設定から,稼働監視や容量変更,バックアップを含む運用まで,HP SMUはこれ一本でストレージ管理プロセスのすべてに対応できます。MSA2300にプリインストールされており,起動後にWEBブラウザからIPアドレスを入力するだけで即座にお使いいただけます」
ストレージ管理においては,複数のツールを使い分けなければならないケースが多い。しかも,それぞれの管理ツールにライセンスコストが発生することもあるので注意が必要だ。
「HP SMUのライセンスは無償,専用の管理サーバーを立てる必要もありません。直感的な操作が可能な洗練されたGUIを,日本語環境でお使いいただけます。MSA2300のフロント/リアパネルのイメージを表示する管理画面では,どのスロットに何のディスクが装着されているか,どのディスクでRAIDが構成されているか,どのディスクに障害が起こったかなどが一目瞭然。管理効率を向上させるだけでなく,的確な状況把握によって判断ミスも防ぎます。つまり,人的工数など目に見えないコストまで抑えることができるのです。」(深澤氏)
HP SMU の管理情報は,HP ProLiantサーバーの管理に広く使われている「HP Systems Insight Manager(SIM)」へSNMPトラップとして上げることができるので,サーバーとストレージの統合的な稼働監視が可能だ。
「プロビジョニングもウィザードによるガイダンスに従って,仮想ディスクの作成からボリュームの切り出し,サーバーへのマッピングまでをスムーズに行えます。ヘルプ機能も充実していますので,戸惑うことなく作業を進めていただけるでしょう」(深澤氏)
MSA2300では,最大255のスナップショットを取得することができる。ボリュームコピー機能と組み合わせることで,日常のバックアップ作業を効率的に行える。
「HP SMUからスナップショットのライセンス取得手続きを行えば,その画面からスナップショットを取得することも,トラブルからの復旧に際して他のサーバーにマウントすることもできます。HP SMUは,まさにシングルコンソールによるストレージの統合管理が可能なのです」(深澤氏)
クラスター環境の構築が、ここまで手軽に。 エントリークラスを超えた共有ストレージ,登場。
