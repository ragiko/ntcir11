 パソコンを起動すると、DHCPによりIPアドレス、サブネットマスク、デフォルトゲートウェイ、優先DNSサーバー、代替DNSサーバーが自動的に割り振られます。
図の場合、デフォルトゲートウェイと優先DNSサーバーはルーターAに設定されます。
InternetExplorerやFireFox等のブラウザを起動しURLでwww.aa.bbと入力すると、優先DNSサーバーと通信しなければいけないのですが、まずはサブネット範囲の確認です。
例えばパソコンのIPアドレスが192.168.1.10でサブネットマスクが255.255.255.0の場合、サブネットは192.168.1.0になります。優先DNSサーバーのIPアドレスが192.168.1.1であった場合、同一サブネットにあるため直接通信出来ると判断します。
この場合、パソコンでは優先DNSサーバーのIPアドレスのMacアドレスを知るためにarp解決を行います。
ネットワーク入門サイト - 全体の通信の流れ
