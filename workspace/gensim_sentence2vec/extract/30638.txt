株式会社富士通研究所(注1)は、数千台規模のPCクラスタ型スパコンシステム(注2)のネットワークを構成するスイッチの台数を、ネットワーク性能を維持したまま約4割削減する技術を開発しました。
従来、PCクラスタ・スパコンでは一般的にFat Tree型ネットワーク構造(注3)が採用され、例えば6,000台規模のサーバに対し、約800台、冗長化など要求されるネットワーク性能によっては2,000台を超えるスイッチが必要でした。ネットワークはスパコンシステムに対して最大約2割の消費電力を占めるため、少ないスイッチ数で高い通信性能が得られる新しいネットワーク技術が期待されています。
今回、PCクラスタに対して、新たな多層のフルメッシュ型ネットワーク構造を適用し、データの衝突が起こらないように転送順序を制御する通信アルゴリズムを組み合わせた技術を開発しました。これにより、スパコンのアプリケーション実行時に性能のボトルネックとなりうる全サーバ間通信でも、従来と同程度の性能を維持したまま必要なスイッチ台数を約4割削減することが可能で、省エネと高性能を両立するスパコンシステムの提供が可能になります。
本技術の詳細は、7月28日(月曜日)から新潟市で開催される「SWoPP 2014(Summer United Workshops on Parallel, Distributed and Cooperative Processing 2014)」にて発表します。
開発の背景
これまでクラスタ型スパコンは、携帯電話、自動車、航空機の設計といったものづくりや科学技術計算で広く活用されてきましたが、近年では創薬や医療、地震や気象現象の解析といった用途にも応用が広がっており、より高性能なスパコンが必要とされています。
スパコンの高性能化を実現するため、多数のCPUコアを内包するメニーコアプロセッサやGPGPU(注4)に代表されるアクセラレーターといった高い処理性能を持つ演算装置をサーバに搭載し、さらに多数のサーバをネットワークで接続する構成が用いられています。
課題
スパコンが持つ高い演算性能を幅広いアプリケーションで利用するためには、サーバ間を接続するネットワーク性能を高める必要があります。Fat Tree型ネットワーク構造(図1)では、接続するサーバの規模に応じて階層を決め、ツリー状にスイッチを接続するTree型ネットワーク構造の経路を冗長化することで高いネットワーク性能を実現できますが、例えば、6000台規模のサーバを接続するためには36ポートのスイッチが約800台必要です。
Fat Tree構造は経路が冗長化されているため、PCクラスタ上の解析処理で用いられる高速フーリエ変換などの実行時に発生する全サーバ間通信で高いネットワーク性能を発揮します。
一方、サーバあたりの演算性能はプロセッサのコア数の増加やGPGPUのようなアクセラレーターの利用により劇的に向上しています。演算性能に対応してバランスよくネットワーク性能を向上させるためには、多数のスイッチを利用することが必要になり、部材、電力、設置面積のコストが増加してしまうという課題がありました。
開発した技術
今回、PCクラスタに新たなネットワーク接続形態を適用し、最適なデータ交換手順の考案により、少ないスイッチ数で多くのサーバ収容を可能にする技術を開発しました。これにより同程度のノード数を接続するFat Tree型ネットワーク構造と比較して、必要となるスイッチ数を約4割削減しつつ、全サーバ間通信という最も負荷の高い通信パターンにおいて従来と同程度の性能を実現しています。
開発した技術の特長は以下のとおりです。
多層のフルメッシュ型ネットワーク構造(図2、図3)
すべてのスイッチ同士が直接接続するフルメッシュ構造の各辺に間接接続用のスイッチを配置し、複数のフルメッシュ構造を接続した構成を新たに開発しました。3段構成のFat Tree型ネットワーク構造(図1)と比較して必要なスイッチ数を1段分削減できるため、スイッチポートの利用効率が高く、必要なスイッチそのものを削減することが可能です。
経路競合を回避するデータ交換手順
全サーバ間通信では、すべてのサーバがほかのすべてのサーバに対してデータを転送しますが、スイッチ数を削減するとサーバ間の経路が少なくなるため衝突が発生しやすくなります。サーバ間のデータ転送処理において、多層のフルメッシュ型ネットワーク構造を活かして、各スイッチの頂点(AからF)に接続されるサーバが別々の頂点に向かうようにスケジューリングし、さらに異なる層の間(a1からd3)も含めて経路内での衝突を回避することにより、全サーバ間通信でFat Tree型ネットワーク構造と同等の性能を実現しました。
効果
今回開発した技術を用いることで、創薬や医療、地震や気象解析などに用いる大規模なPCクラスタ型スパコンの性能を維持したまま、設備コストや電力コストを低減することができ、省エネと高性能を両立するスパコンの提供が可能になります。
今後
富士通研究所では、本技術の2015年度中の実用化を目指します。また、スイッチ台数を増加させることなく、さらに大規模な計算機システムに適用可能な構成も継続して検討していきます。
商標について
記載されている製品名などの固有名詞は、各社の商標または登録商標です。
クラスタ型スパコンのネットワークスイッチを4割削減する技術を開発 : 富士通
