NIC切替方式におけるHUB監視機能の伝送路異常検出シーケンスについて説明します。
以下に、監視先が1つの場合と、監視先が2つでHUB-HUB間監視を使用する場合についてそれぞれ説明します。
監視先が1つの場合:
異常検出時間 = 監視間隔(秒)×(監視回数 − 1)+ pingのタイムアウト時間(*1)
*1: 監視間隔が1秒の場合は1秒となり、それ以外の場合は2秒となります。
デフォルトの設定値では以下のようになります。
5秒 × (5回 − 1) + 2秒 = 22秒
監視先が2つの場合:
異常検出時間 = 監視間隔(秒)×(監視回数 − 1)+ pingのタイムアウト時間(*2)× 2回
*2: 監視間隔が2秒の場合は1秒となり、それ以外の場合は2秒となります。
デフォルトの設定値では以下のようになります。
5秒 × (5回 − 1) + 2秒 × 2回 = 24秒
[図3.5 伝送路異常検出シーケンス(監視先が1つの場合)]
[図3.6 伝送路異常検出シーケンス(監視先が2つの場合)]
リンク監視機能を有効にしている場合、プライマリの監視先(監視先1)に対するpingが失敗した直後にリンク状態のチェックを行います。また、リンクダウンを検出した場合、伝送路異常と判断します。運用NICのリンクダウンを伴う異常検出時間は以下の通りです。
監視先が1つの場合:
異常検出時間 = pingのタイムアウト時間(*3)
*3: 監視間隔が1秒の場合は1秒となり、それ以外の場合は2秒となります。
デフォルトの設定値では以下のようになります。
2秒 = 2秒
監視先が2つの場合:
異常検出時間 = pingのタイムアウト時間(*4)× 2回
*4: 監視間隔が2秒の場合は1秒となり、それ以外の場合は2秒となります。
デフォルトの設定値では以下のようになります。
2秒 × 2回 = 4秒
[図3.7 リンクダウンを伴う伝送路異常検出シーケンス(監視先が1つの場合)]
[図3.8 リンクダウンを伴う伝送路異常検出シーケンス(監視先が2つの場合)]
ping監視は監視間隔(秒)で定期的に実行されるため、監視先が故障してから次のpingが実行されるまで、最大で監視間隔(秒)必要です。このため、リンクダウンを伴う伝送路異常検出の場合、syslog等にNICのリンクダウンを知らせるメッセージ(NIC Link is Down等)が出力されてからGLSが伝送路異常を検出するまで、最大7秒(2秒+最大5秒(デフォルトの監視間隔))程度の時間を必要とします。
目次
索引
All Rights Reserved, Copyright (C) 富士通株式会社 2007
3.6.6.3 NIC切替方式の伝送路異常検出時間
