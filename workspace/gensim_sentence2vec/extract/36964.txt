
アクセント記号の付いたアルファベットも使われているなど、英語とは結構違ってます。 まず j, k, w, x, y の登場回数が極端に少ないのが目につきます。実はイタリア語ではこれらの5文字は外来語にしか使いません。お手本データが英語からの翻訳なため、これでもイタリア語にしては多いくらい。 次に英語と比べて少ないのは h です。イタリア語では h は発音しない文字で、英語で have に相当する動詞と、あとは ch と gh という形でしか使われません。 逆にイタリア語のほうがよく使う文字は z, q, v というあたりでしょうか。z は特に差が大きいですが、これはどちらかというと英語が z をあまり使わない言語で、イタリア語の方が普通な感じだったりします。 英語で一番使われている文字は e で、次は t でした。一方イタリア語の一番は同じく e なのですが、その後 a, i, o と母音が続きます。イタリア語の単語は原則として母音で終わるので、母音の使用割合が自然と多くなります。
この文字分布表2つだけでも、こんな調子でみなさんご飯何杯でもおかわりできるでしょうが、それではいつまでたっても話が本題に入らないので、泣く泣く言語判定に戻りましょう。
言語判定とは、文章の言語を推定するものでした。 ここで「文章が英語で書かれている確率」と「イタリア語で書かれている確率」を求めて、その大きい方を答えるというアプローチを考えます。
実はこの時、上で掲げた文字分布表が使えます。 まず表にある各文字の割合を、「それぞれの言語でその文字が使われる確率」とみなします。確率は同時に起こることを掛け算しますから、言語を推定したい文章で実際に使われている文字の確率を全部掛け算すると、「英語でその文章が書かれた確率」と「イタリア語で書かれた確率」が求まります。 ここで確率のベイズの公式というものを使うと、この掛け算した確率の大きいほうが文章の書かれた言語である確率も大きい、ということが示せます(本当はちょっとした前提条件が必要ですが、そこは目をつむります)。 言語が3つ以上になっても同じく、掛け算した確率が一番大きい言語が答えになります。
ちょっとややこしかったですか? まとめると「割合を掛け算して、一番大きいのが答え!」ということ。 本当にそんな簡単なことで言語判定ができるのか、実際にやってみましょう。
“thank you” の確率を今説明した方法で計算します。確率の記法にならって、求める確率を p(文章|言語) で表します。 英語版の文字数の合計は 132738、t の登場回数は 10687 回、だからその確率は 10687/132738、同様に h の確率は 7374/132738、……という調子で求めたものを全部掛け算すると、確率 p(thank you|英語) が求まります。
同様にイタリア語(伊語)についても求めましょう。
比べると英語の確率のほうが大きいので、答えはめでたく英語ということになりました。正解ですね! イタリア語の文章でも試しましょう。イタリア語の「こんにちは」は “buon giorno” です。確率を計算すると、
こちらもちゃんとイタリア語と判定できました。イタリア語での確率が高い “o” が 3つも出てきているところが効いてますね。
大体7割から8割くらいはこれでうまくいきます。が、やっぱりうまくいかない例はどうしても出てきてしまいます。 “good morning” の確率も同様に求めてみると、
あらら、イタリア語の確率のほうが大きくなってしまいましたが、もちろん正解は英語です。 “buon giorno” と同じく “o” が3つ使われているので、どうしてもイタリア語の確率が高くなってしまうんでしょう。 困りましたね。どうしましょうか。
そもそも人間はどうして “good morning” が英語だとわかるのでしょう。 もちろん知ってる単語だからってのもあるでしょうが、仮に知らない単語でも「英語っぽい」「イタリア語っぽい」を見分けられる特徴はあります。 例えば、イタリア語の単語は母音で終わります(一部例外あり)。だから d や g で終わる単語はイタリア語っぽくありません。 またイタリア語はたしかに母音をよく使うのですが、”oo” のように同じ母音文字が2つ続く綴りは滅多にありません。
そこで、お手本データの中で「”o” の次に使われている文字」の分布をとってみましょう。 まずは英語から。
文字
回数
割合
言語判定の仕組み | Cybozu Inside Out | サイボウズエンジニアのブログ
