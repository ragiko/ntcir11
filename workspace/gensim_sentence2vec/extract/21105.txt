
21 オリジナルのエクスポート
この章では、オリジナルのエクスポート・ユーティリティ(exp)を使用して、Oracle Databaseのデータをオペレーティング・システム・ファイルにバイナリ形式で書き込む方法を説明します。このファイルはデータベースの外部に格納されるため、オリジナルのインポート・ユーティリティを使用して、別のOracle Databaseに読み込むことができます。
注意:
オリジナルのエクスポートは、Oracle Database 11gからは原則としてサポートされなくなりました。Oracle Database 11gで唯一サポートされているオリジナルのエクスポートの使用法は、XMLTypeデータのOracle Database 10gリリース2(10.2)以前への下位移行です。したがって、オリジナルのエクスポートおよびインポートが必要な次の場合を除いて、データ・ポンプ・エクスポートおよびインポート・ユーティリティを使用することをお薦めします。
オリジナルのエクスポート・ユーティリティ(exp)を使用して作成されたファイルをインポートする必要がある。
オリジナルのインポート・ユーティリティ(imp)を使用してインポートされるファイルをエクスポートする必要がある。このような例として考えられるのは、Oracle Database 10gからデータをエクスポートし、それより前のデータベース・リリースにインポートする場合です。
エクスポート・ユーティリティとは
エクスポート・ユーティリティでは、異なるハードウェアおよびソフトウェア構成を持つプラットフォームに存在している場合でもOracle Database間で簡単にデータ・オブジェクトを転送できます。
Oracle Databaseに対してエクスポート・ユーティリティを実行すると、オブジェクト(表など)が抽出された後で、存在しているその関連のオブジェクト(索引、コメント、権限など)が抽出されます。
エクスポート・ファイルは、通常はディスクまたはテープに格納されるOracleバイナリ形式のダンプ・ファイルです。ダンプ・ファイルは、FTPを使用して転送するか、物理的に(テープの場合)異なる場所に転送できます。その後は、ファイルにインポート・ユーティリティを使用して、ネットワークで接続されていないシステム上のデータベース間でデータを転送できます。このファイルは、通常のバックアップ手順を行った上で、バックアップとして使用することもできます。
エクスポート・ダンプ・ファイルは、Oracleのインポート・ユーティリティのみで読み取ることができます。ダンプ・ファイルの作成に使用したエクスポート・ユーティリティより前のバージョンのインポート・ユーティリティは使用できません。
実際にインポートを実行せずに、エクスポート・ファイルの内容を表示することもできます。これを行うには、Import SHOWパラメータを使用します。詳細は、「SHOW」を参照してください。ASCII固定形式またはデリミタ付きファイルからデータをロードするには、SQL*Loaderユーティリティを使用します。
エクスポート・ユーティリティを使用する前に
エクスポート・ユーティリティを使用する前に、次のことを行う必要があります(詳細は以降の項を参照してください)。
データベースを手動で作成した場合は、catexp.sqlまたはcatalog.sqlスクリプトが実行されたことの確認。Database Configuration Assistant(DBCA)を使用してデータベースを作成した場合は、これらのスクリプトを実行する必要はありません。
エクスポート・ファイルを書き込むための十分なディスクまたはテープ記憶域が存在することの確認
必要なアクセス権限を所有していることの確認
catexp.sqlまたはcatalog.sqlの実行
エクスポート・ユーティリティを使用するには、データベースを作成するかまたは新しいリリースに移行した後で、スクリプトcatexp.sqlまたは(catexp.sqlを実行する)catalog.sqlを実行する必要があります。
データベースに対して、catexp.sqlまたはcatalog.sqlを実行するのは1回のみです。スクリプトを実行すると、次の処理が行われ、データベースはエクスポートおよびインポート操作に備えて調整されます。
データ・ディクショナリへの必要なエクスポート・ビューおよびインポート・ビューの作成
EXP_FULL_DATABASEロールおよびIMP_FULL_DATABASEロールの作成
EXP_FULL_DATABASEおよびIMP_FULL_DATABASEロールへのすべての必要な権限の割当て
DBAロールへのEXP_FULL_DATABASEおよびIMP_FULL_DATABASEの割当て
インストールされているcatexp.sqlのバージョンの記録
EXP_FULL_DATABASEロールおよびIMP_FULL_DATABASEロールは強力です。これらのロールをユーザーに付与する際は、十分に注意する必要があります。
エクスポート操作に必要な十分なディスク領域の確保
エクスポートを実行する前に、エクスポート・ファイルを書き込むための十分なディスクまたはテープのストレージが存在することを確認してください。十分な領域がないと、エクスポート・ユーティリティは書込み失敗エラーが発生して終了します。
表のサイズから、必要な最大領域を見積もることもできます。表のサイズは、Oracleデータ・ディクショナリのUSER_SEGMENTSビューで確認できます。次の問合せでは、すべての表のディスク使用率が表示されます。
SELECT SUM(BYTES) FROM USER_SEGMENTS WHERE SEGMENT_TYPE='TABLE';
問合せの結果には、LOB(ラージ・オブジェクト)またはVARRAY列あるいはパーティション表に格納されているデータ用のディスク領域は含まれません。
オリジナルのエクスポート
