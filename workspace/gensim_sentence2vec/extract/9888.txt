XFSは、巨大ストレージでの利用を視野に入れた64bitファイルシステムである。膨大な領域を効率的に利用するため、XFSにはさまざまな仕組みが組み込まれている。(編集局)
XFSの歴史
XFSはSilicon Graphics(以下SGI:編注)が開発したジャーナリングファイルシステムである。XFSの開発が開始された当時、SGIはすでにEFS(Extent File System)というファイルシステムを持っていた。SGIがXFSで目指したものは、次世代の拡張性を考慮した64bitファイルシステムを新規開発することだった。
XFSは、1994年後半にリリースされたIRIX 5.3(IRIX 5.3 with XFS)に初めて搭載された。1996年にIRIX 6.2がリリースされると、全SGIシステムに標準でインストールされるようになった。1999年前半にはLinuxへ移植され、GPL(GNU General Public License)の下でオープンソースとして公開された。
最初のLinux用XFSであるXFS 1.0 for Linuxは、カーネル2.4.2用のパッチとして提供された。その後、新しいカーネルが出るたびに対応パッチがリリースされ、2.4.21以降は標準カーネルにマージされることになった。以降のバージョンは、パッチを当てなくてもカーネルをコンパイルするときのオプション設定で利用可能となる(設定については後述)。
XFS for Linuxの最新のパッケージやパッチは、http://oss.sgi.com/projects/xfs/download.htmlで入手できる。
XFSの特徴
XFS開発の背景には、今後Tbytesオーダーのディスクが主流となったときに、32bitファイルシステムでは限界があるという認識がある。32bitファイルシステムでは40億個のブロックしか作れないため、ブロックサイズを8kbytesとすると32Tbytesまでしか扱えない。
開発チームは当初からこの問題を考慮し、64bitファイルシステムやアロケーショングループという手法を採用することで巨大なファイルシステムを扱うことを可能にした。また、サイズの大きなファイルは書き込み/読み込み領域を確保したり、ディスク上の空き領域を検索するのに時間がかかるといった問題がある。XFSでは、遅延アロケーションやB+-Treeによってこれに対処している。
64bitファイルシステム
64bitファイルシステムであるXFSは、理論上最大900万Tbytesのファイル、最大1800Tbytesのパーティションをハンドリングできる。Linuxで広く使われているext2が最大で2Gbytesのファイルまでしか扱えない点を補っている。
アロケーショングループ
巨大なファイルシステムを効率よく処理するために、XFSはブロックデバイスを「アロケーショングループ」(注)と呼ぶ領域に分割する。アロケーショングループは、iノードと空き領域をグループ化して管理する。FFS(FastFile System)のシリンダグループに似ているが、アロケーショングループはスケーラビリティと並列入出力の効率に重点を置いている。
Linuxファイルシステム技術解説(7):64bitファイルシステム XFSの実装 (1/3) - @IT
