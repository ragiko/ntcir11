SVGドキュメントの書き方
本連載では、Webブラウザ上で利用できるグラフィック技術を分かりやすく紹介しています。第2回となる今回のテーマはSVGです。
ご存じの方も多いと思いますが、SVGはXMLをベースにしたベクトルグラフィックスの記述言語です。PNGのような画像フォーマットの1つでもありますが、実際にはXMLを記述したテキストファイルであり、HTMLと同様にJavaScript(DOM API)による制御も行えます。HTMLがタグによって文書の構造を記述するのと同様に、SVGはタグで図形を記述します。
XMLでベクトルグラフィックスを記述するSVG
実はSVGの規格自体はかなり以前から存在したのですが、長らくInternet Explorer(以降IE)からのサポートが得られず、利用が広がりませんでした。しかし、そのIEも最新のIE9でSVGに正式対応し、利用環境が整いつつあります。拡大してもジャギーが出ないSVGのベクトルグラフィックスは、さまざまな解像度への対応が望まれるモバイル機器向けのサイトや、最近はやりのレスポンシブデザインにうってつけです。今後はHTML、CSSに並ぶ重要なWeb技術として普及していくことでしょう。
今回は基礎編ということで、SVGの基本的な描画機能を中心に解説します。そして、より高度な座標変換やフィルター機能、CSS/JavaScript周りの機能などは、次回に解説する予定です。
SVGドキュメントの構造
まず最初に、SVGの基本的な構造を理解しておきましょう。以下に非常にシンプルなSVGの例を示します。見ての通りXMLであり、テキストエディタで入力できます。.svgの拡張子で保存し(文字コードはUTF-8にしてください)、Webブラウザにドラッグ&ドロップすれば、画像が表示されます。
<svg xmlns="http://www.w3.org/2000/svg"
xmlns:xlink="http://www.w3.org/1999/xlink">
<circle cx="100" cy="100" r="100" fill="red" />
<rect x="130" y="130" width="300" height="200" fill="blue" />
</svg>
実際の画像を表示する
このように、svgタグをルート要素として、適切な名前空間を指定すれば、SVG画像として扱われます。XMLに慣れていないと謎の記述に思えるかもしれませんが、svgタグとその名前空間はほぼ定型句なので、このまま覚えてしまえばよいでしょう。
表示される図形は、svgタグの子(孫)要素として記述します。上の例ではcircleタグとrectタグを使って円と四角形を描画しています。
もちろん図形を描画するタグはcircle、rect以外にも多数用意されており、それらについては次ページ以降で詳しく取り上げていきます。ここではもう少し周辺の話を続けます。
HTMLでの表示方法
作成したSVG画像は単独で表示することもできますが、多くの場合はHTMLページの一部として表示したいところでしょう。SVGをHTML内で表示するには、3つの方法があります。
objectタグを用いる
imgタグやCSSを用いる
(X)HTMLに直接埋め込む
それぞれに別の利点と制約があるので、個別に見ていきます。まずは基本となる、objectタグを用いる方法です。HTML内のSVG画像を表示したい箇所にobjectタグを挿入し、type属性に「image/svg+xml」を、data属性に表示するSVGファイルのURLを指定します。この方法は最も互換性が高く、SVGをサポートしたほぼすべてのWebブラウザで動作します。JavaScriptによるSVGドキュメントへのアクセスも可能です。特に理由がなければ、外部SVGファイルの表示にはこの方法を使用するのが無難です。
なお、記事中では各機能のサポートブラウザについて言及していませんが、多くのWebブラウザでは紹介している機能の一部が利用できません。どのブラウザでどの機能が利用できるかは、各自でサンプルを実行して調べてみてください。もっとも、Webブラウザは日進月歩で進化しているので、ほとんどの機能が近いうちにサポートされることでしょう。
Webグラフィックをハックする(2):10分でわかるSVG 基礎編 (1/5) - @IT
