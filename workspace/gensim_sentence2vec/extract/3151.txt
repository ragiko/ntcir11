対象OS:Windows XP/Windows Vista/Windows 7/Windows 8/Windows 8.1/Windows Server 2003/Windows Server 2008/Windows Server 2008 R2/Windows Server 2012/Windows Server 2012 R2
解説
IPアドレスとサブネットマスク、デフォルトゲートウェイ
Windowsシステムに装着したネットワークインターフェースに対してTCP/IPの設定を行う場合、IPアドレスやサブネットマスクなどの他に、「デフォルト ゲートウェイ」情報も設定する必要がある。デフォルトゲートウェイとは、ネットワークパケットのデフォルトの宛先として指定するルーター(のIPアドレス)のことだ。スタンドアロンのLAN環境でない限り、必ず指定する必要があるだろう。
TCP/IPのプロパティこれはWindows 8.1の［ネットワーク接続］で、ネットワークインターフェースカードのTCP/IPv4のプロパティを表示させたところ。TCP/IPの設定では、IPアドレスやサブネットマスク情報に加えて、通常はデフォルトゲートウェイ情報もセットする必要がある。  (1)このインターフェースに割り当てるIPアドレスを指定する。  (2)サブネットマスクとIPアドレスを組み合わせることにより、ネットワークアドレスが計算される。  (3)IPパケットの宛先が不明な場合には(宛先がローカルのネットワーク上にない場合は)、このデフォルトゲートウェイで指定されたゲートウェイ(=IPルーター)にパケットが送信される。  (4)これをクリックすると［TCP/IP 詳細設定］画面が開く。そこでは、1つのインターフェイスに対して、二つ目以降の「デフォルトゲートウェイ」を設定することが可能だ。
TCP/IPでは、「IPアドレス」(と「サブネットマスク」情報)に基づいてIPパケットの送信先を決定している。もしパケットの送信先がLAN上のホストならば、IPパケットは直接その宛先へと送信される。
しかしネットワークアドレスが異なる場合は(この画面例で言えば10.20.0.0〜10.20.255.255以外への送信)、デフォルトゲートウェイとなっているルーターへパケットを送信するだけで送信操作は完了となる。その後はルーターが実際の宛先のホストまでパケットを届けることになる(同一ネットワークであるかどうかはネットワークアドレス部が同じかどうかで判断する。ネットワークアドレスについては「基礎から学ぶWindowsネットワーク—1.IPアドレスとは」などを参照)。TCP/IPネットワークでは、このようにしてIPパケットをルーター間で順次転送することにより、1つの巨大なネットワークを構築している。
2つ以上のネットワークへ同時に接続する
さて、それではシステムにネットワークインターフェースカードが2つ以上装着されているとどうなるのだろうか?
ネットワークの環境によっては、2つ以上のネットワークへ同時に接続しなければならないことがある。例えば社内用のネットワークシステムとインターネットへのアクセス用のネットワークがセキュリティやネットワーク管理の都合などで分かれている場合や、複数の拠点へのVPN回線などを構築している場合は、管理などの目的でそれらのネットワークへ同時に接続したい場合もあるだろう。
このような場合は、1台のマシンに複数のネットワークインターフェースカードを装着して、複数のネットワークへ同時に接続することになる。
Tech TIPS:Windows OSのデフォルトゲートウェイは1つのみ有効 - @IT
