キーワード: スイッチングスピード, 切替スピード, 切替速度, スイッチング速度, 周波数, 計算, インダクタ, インダクタ選択, バッテリチャージャic, バッテリチャージャ, NiMHチャージコントローラ, NiMH充電コントローラ, スマートチャージャ, NiMH, 充電器, チャージャ, バッテリ, パック, ds2715, ics, 回路, 低コスト
関連製品
要約:バッテリ充電器のDS2715のスイッチング速度は充電モード、インダクタの選択、およびバッテリ電圧で変化します。ノイズ感度、ピークトゥピーク充電電流、およびインダクタの選択の制約を考えるためにさまざまな条件での速度を知りたい場合があります。このアプリケーションノートはさまざまな部品の値、バッテリパラメータ、および充電モードでの回路のスイッチング速度を推定するための使いやすいスプレッドシートを提供します。
はじめに
バッテリ充電器のDS2715をスイッチモードで設計する場合、遷移することが予想される回路の周波数範囲を簡単に決定することは有用です。スイッチング周波数を知って制御することは、インダクタの選択を最適化し、トランジスタ選択の指針となり、さらにPCBレイアウトの検討事項を決定するのに役立ちます。DS2715を用いたNiMH充電のさまざまな段階で、電流源の要求およびバッテリセル電圧の変化によって、広い範囲で動作周波数を変化させます。このアプリケーションノートはDS2715のスイッチモード回路の解析、およびさまざまな動作ポイントでのスイッチング周波数を推定するための使いやすいスプレッドシートを示します。
回路の概要
図1はバッテリの降圧型スイッチング充電器および負荷の電流検出抵抗の等価回路を示します。DS2715はRSENSEの両端間の電圧をプリセット値に調整することで動作します。このようにすると、検出抵抗およびこのプリセットしたリファレンス電圧がICHARGEの値を制御します。NiMHバッテリの場合、4段階による充電が望ましいと言えます。その内の3つ(予備充電、急速充電、およびトップオフ)は検出抵抗の両端間の電圧によって調整されます。4段階目のメインテナンスでは制限されない経路を通して少量の連続電流でセルの自己放電を補います。予備充電とトップオフ状態は急速充電の間の制限された平均電流の25%で動作します。DS2715ではこれはICHARGEを減らすためにVSENSE用の内部リファレンス電圧を調整して行われます。
バッテリスタックの状態に応じてさまざまな充電状態になります。バッテリの電圧が1.0Vを下回っているときは予備充電モードが使用されて、深く放電したバッテリを緩やかに充電します。急速充電モードはバッテリ電圧が1.0Vを超えて、1.65Vを上回らない場合にのみ使用されますが、他の急速充電条件が成立する場合は終了することも可能です。急速充電モードの後は既定の期間、トップオフモードになります。RPARASITICはオプションのパラメータであり、バッテリ、ヒューズ、または他の理想的でない特性の接続による結果として引き起こる可能性がある重要な寄生電圧降下を表現するためにリファレンス回路に追加されました。
図1. DS2715のスイッチングリファレンス回路
検出抵抗の電圧を調整する制御回路はヒステリシスを備えたコンパレータとリファレンス電圧で構成され、オープンドレインの出力端子を駆動します。予備充電とトップオフモードのヒステリシスは急速充電の場合の値のおよそ25%です。それはこれらのモードではより小さいリファレンス電圧が使用されるからです。スイッチング速度はICHARGEが1つのピークから他のピークになり、再び元に戻るのに必要な時間量によって決定されます。それにはフィードバック回路およびQSWとDCATCHをオフおよびオンにするプロセスでの遅延が含まれています。これらの遅延によってICHARGEがコンパレータのスレッショルドの1つまたは両方をオーバーシュートして通常よりも大きいピークトゥピークの変動を作り出します。図2は理想的なスイッチング制御波形を示し、図3はQSWに余分のターンオフ遅延があった場合の波形を示します。
図2. 理想的な充電電流制御波形。(スケールは示されていません。)
図3. QSWのターンオフ時間が遅い場合の充電電流制御波形。(スケールは示されていません。)
計算方法
ICHARGEの変化速度は理想的なインダクタLの電圧と電流の関係によって支配されます。
V = L &times; di/dtおよびdt = L &times; di/V
したがって、QSWのオンとオフ状態の時間量は各状態でのLの両端間の電圧、およびICHARGEのピークからピークへの変化で変わります。ICHARGEのピークトゥピーク値は充電モードのヒステリシス値およびコンパレータレベルのオーバーシュートを起こすなんらかの制御回路遅延によって設定されます。検出コンパレータの急速充電リファレンス電圧(VFC)およびヒステリシス電圧(VHYS_FC)の定義はDS2715のデータシートを参照してください。
スイッチング速度の近似を簡単にするためには、各QSWの状態に対してインダクタの両端間の電圧が一定のままであると仮定します。また、ピークトゥピークのVSENSEの中点である[VFC + (0.5 × VHYS_FC)]が各状態のインダクタ電圧の計算に対して妥当な定常状態の条件を提供するとします。これらの単純化を行って、QSW_ONとQSW_OFFの状態に対して図1のリファレンス回路のループ周りの電圧降下は計算することができて、所定のバッテリ電圧に対するインダクタ電圧を次のように求めることができます。
VL(QSW_ON) = VIN - VDIODE - VQSW - VPAR - VBATT - VSENSE(式1)
VL(QSW_OFF) = VPAR + VBATT + VSENSE + VDCATCH(式2)
急速充電モードではバッテリ電圧は1.0V～1.65Vの範囲で変化するため、幾つかの動作ポイントでインダクタ電圧およびその場合のスイッチング速度を計算することは有用です。3つの異なったバッテリ電圧に対して、また充電およびトップオフモードでの1つのバッテリスタック電圧でのこのアプリケーションノートで述べた計算を実行するスプレッドシートをダウンロードして使用することができます。
各状態でのインダクタ電圧と各動作ポイントが計算されれば、制御回路のすべての遅延もQSWのオンおよびオフ時間に組み込まれます。近似として、これは最初にQSWのターンオンおよびターンオフによるICHARGEの余分な変化を最初に計算して行われ、それは次の式によります。
di(on delay) = dt × V(on)/L、ここでdt = tPDLY + tSW_OFF(式3)
di(off delay) = dt × V(off)/L、ここでdt = tPDLY + tSW_ON(式4)
この電流の余分な変化は制御信号またはトランジスタのスイッチング遅延によって、ICHARGEがコンパレータのスレッショルドをオーバーシュートしたと考えることができます。ここで、さらに単純化のために、各状態でインダクタ電圧が一定に留まると仮定しました。遅延に起因する余分のdiがヒステリシスに起因する理論的な電流変化に追加されて、次の式が得られます。
di(Qsw_ON) = VHYS_FC/RSENSE + di(on delay)(式5)
di(Qsw_OFF) = VHYS_FC/RSENSE + di(off delay)(式6)
この調整されたICHARGEの変化分は先に計算したインダクタ電圧と共に、理想的なインダクタの式に代入されてQSWのオンおよびオフの全体時間を決定します。通常、バイポーラ回路がスイッチング遅延に充分に貢献する傾向にあるためこのように余分なレベルの遅延の考察を必要としますが、MOSFET回路に対しても遅延をモデル化することができます。
このアプリケーションノートで述べた式はDS2715のスイッチモードの充電回路のスイッチング速度を容易に評価するためにスプレッドシートに組み込まれています。スプレッドシートには使用者が入力しなければならない、または使用者によってオプションで変更可能な各パラメータが説明されています(図4)。
図の拡大(PDF、132kB)
図4. スイッチング速度の計算用スプレッドシート
最初のパラメータセットはリファレンス回路図の部品特性に関するものです。2番目のセクションは計算で使用するバッテリスタックのさまざまな動作点を含んでいます。3番目のセクションは電流検出コンパレータの内部設定ポイントを説明しています。このセクションのデフォルト値はDS2715のデータシートから検証されるはずの値です。最後に、パラメータの最後のセクションはDS2715に固有の遅延および正確な推定のために考慮しなければならないスイッチング回路に起因する何らかの余分な遅延のために必要です。
計算結果
添付されているスプレッドシートの最初のタブにアプリケーション回路のパラメータを入力すると、スイッチングの計算結果は2番目のタブで見ることができます(図5)。このタブは各モードおよびバッテリの動作条件、および最終的なスイッチング速度の結果で使用される部分計算のある部分が示されています。これらの中には、各状態に対するインダクタ電圧、遅延によるICHARGEの変化、およびオンとオフ状態の個別時間が含まれています。
図の拡大(PDF、123kB)
図5. スイッチング速度の結果のタブ
結論
多くの有用な情報がリファレンス回路に関係するスイッチング速度の推定から得られます。スイッチモード充電器のDS2715のスイッチング速度に影響する主な要素はインダクタの値、ICHARGE、バッテリスタック電圧を上回るVINのヘッドルーム、および場合によってはQSWの遅いスイッチングによる遅延であることが分かります。ここで、示された解析はこれらの回路のスイッチング速度を推定し、必要に応じてこの速度を最適に調整する方法の理解を可能とするために使用することができます。
NiMHバッテリ充電器のDS2715のスイッチング速度の推定  - アプリケーションノート - Maxim
