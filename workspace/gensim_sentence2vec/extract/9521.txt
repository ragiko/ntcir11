
この資料では、仮想アプライアンスのバックアップ/レプリケーションのパフォーマンスが低下する状況に対処する方法について説明します。
この資料は、以下の製品に該当します。
Acronis vmProtect
事例
vSphere ライセンスの制限により、vSphere ホットアド機能がないために NBD(ネットワーク)モードを使用してバックアップ/レプリケーションが実行されます。「Acronis vmProtect 7: Supported Environments」をご参照ください。しかし、ネットワークインターフェイスの使用可能な帯域幅を考慮しても、バックアップ/レプリケーションの速度が予想以上に遅くなります(たとえば、20～30 MB/秒が妥当なときに 5 MB/秒になります)。
原因
この現象が発生する原因として、最も可能性が高い要因は、Acronis vmProtect 仮想アプライアンスが、デフォルトで「フレキシブル」タイプのネットワークカードを使用しているために、パフォーマンスが低下していることです。
解決法
解決法として、仮想アプライアンスの設定でネットワークカードのタイプを「フレキシブル」から「VMXNET 3」に変更します。
仮想アプライアンスをオフにし、仮想ハードウェアをアップグレードします。
仮想アプライアンスの設定で、[オプション] タブに移動し、オペレーティングシステムを [その他の 2.6.x Linux(32 ビット)]に変更し、[OK] をクリックして変更を適用します。
(!) 変更を適用しないと、以降の手順を実行できなくなるので変更を適用することが重要です。
[ハードウェア] タブでネットワークカードを削除し、「VMXNET 3」タイプの新しいネットワークアダプタを追加します。
変更を適用し、仮想アプライアンスをオンにします。ネットワーク設定はそのまま変更されずに新しく追加したネットワークカードに適用されます(つまりネットワーク設定は失われません)。
詳細情報
上記の解決法に加えて、仮想アプライアンスの代わりに Acronis vmProtect Windows エージェントを使用するという回避策があります。この場合、ネイティブな Windows OS ネットワークドライバが使用されるのでネットワークのパフォーマンスの問題は発生しません。
Acronis vmProtect の将来のバージョンでは、仮想アプライアンス仮想ハードウェアのバージョンが 7 に上がり(ESX(i) 4.0 以上でサポートされます)、ネットワークアダプタのタイプはデフォルトで「VMXNET 3」になるので、この問題は発生しなくなります。
Acronis vmProtect: 仮想アプライアンスベースのインストール環境でバックアップ/レプリケーションの速度が低下します | Knowledge Base
