Traffic Serverには、ネットワーク イベントについて自動的に通知できるようにするために設定できる、いくつかのコンポーネントがあります。
しきい値を設定する際に考慮しなければならない要素がいくつかあります。まず、メディア タイプ、メディアの通信速度および統計値に基づいて、さまざまなしきい値を設定できます。たとえば、ある値をthreshold.utilization.10に代入すると、10Mビット リンクの利用率しきい値が設定されます。ネットワークの各部分に、その部分が環境設定ファイルのどこに定義されているかに基づいて、それぞれ異なるしきい値を適用できます。
Traffic Serverは、モニタしている各インターフェースの統計値を毎分計算し、さらに、各インターフェースに定義されているしきい値を適用します。 1つのしきい値はしきい値の値と持続時間とにより定義されます。たとえば、60%/4は、60%という値が4分間測定されるというしきい値の定義です。
図1は、しきい値の値および持続時間を用いてイベントを生成し各インターフェースのステータスを判定する方法を示しています。Interface Statisticsチャートは、インターフェース統計値の1分ごとの変化を示しています。水平の線は、設定されているしきい値の値を示しています。次に、Threshold Crossingsチャートはしきい値の値を超えたインターバルを示しています。最後に、Status Chartは、インターフェース統計値がしきい値の値を超え始めるとすぐに、ステータスをmarginal(限界)として表示します。しきい値の値を超えているインターバルが4個連続すると(つまり、しきい値を超えたまま4分経過すると)、ステータスはcritical(クリティカル)に変わり、イベントが生成されます。最後に、しきい値の値を下回る値が4インターバル続くと、ステータスがgood(良好)に戻ります。
一般には、QoSに影響するような深刻なトラフィックの問題だけがイベント生成につながるように、しきい値を設定します。Criticalイベントは、問題について起訴できる通知をネットワーク オペレータに提供する目的で生成されます。しきい値を設定するときには、ネットワークのサービス レベルに顕著な影響を与えるトラフィック レベルを識別するように努めてください。サービスが行き届かない状態が続くことが許されない時間をしきい値の時間として設定してください。目標とするのは、すぐに注目しなければならないような深刻な問題を示唆する重大なイベントがほとんど生成されないという状況です。
仮に60%/4というしきい値の代わりに60%/9を使用していたとすると、しきい値を超えた連続するインターバルは8個だけだったので、イベントは全く生成されません。全部で11インターバルの期間中、10インターバルでしきい値を超えていれば、重大な問題と見なすことができます。多くの場合、輻輳は激しい混雑状態と短い平静状態とが何度か交互に繰り返される形で発生します。そのため、急に発生したたった1回の混雑状態に基づいてイベントを生成するのでは偽のイベントが生成されてしまいますが、だからといってイベント持続時間を長く設定すると重大な問題が無視されることになってしまいます。このような状況に対応するために、Traffic Serverにはしきい値の表現方法がもう1つ用意されています。しきい値を60%/10/15のように設定すると、15インターバルからなる期間内の任意の10インターバルで利用率が60%を超えた場合にはイベントが生成されるようになります。
しきい値はネットワーク トラフィックについての統計値情報を生成するためのレポーティング ツールとして設けられているわけではありません。Traffic Serverには、深刻な輻輳問題が発生しないうちに繁忙なリンクを見極めるレポートを生成するためのメカニズムもあります(輻輳レポートおよびSLAレポートを参照してください)。
インターフェースのステータス情報は、Traffic Serverウェブ ページの左にあるメニューからMonitor > Trafficを選択することにより表示されます。イベント ログは、Monitor > Eventsを選択することにより表示されます。
環境設定ファイル内でeventパラメータを用いることにより、イベントについてその他のアクションを定義することができます。イベントは、syslogに宛てて、EメールとしてあるいはSNMPトラップとして送信することができます(INMON-TRAP-MIBを参照してください)。Traffic Serverはイベントを生成する際、そのイベントの根本的原因までドリルダウンするために使用できるURLを各イベントとともに含めます。
InMon Support: チュートリアル: しきい値、イベントおよびアラームの設定
