テスト容易化設計ガイドライン Design For Testability (DFT) Guidelines
Download printable version
はじめに
以下 DFTガイドラインは、XJTAG を用いて基板のテスト容易性を向上させるための提案です。これらガイドラインは、ルールと言ったわけでは有りません。得られる効果は、他の要素(機能性、デバイスのコスト、基板面積など)と合わせて考慮させるべきでしょう。
この資料の内容を理解する為には、IEEE standard 1149.1-1990、1993、1994 に対する多少の理解・
知識が必要です。この資料を通して、1149.1 は、 IEEE 1149.1 (JTAG) Boundary Scan standard のこ
とを意味しています。
1149.1 準拠のデバイスを指定し、採用する
XJTAG を用いて準拠していないデバイスのテストもできますが、可能な限りは1149.1 準拠のデバイ
スを選択することで、より高いテストのカバレッジを得ることができます。基板上に1149.1 準拠のデ
バイスが多ければ多いほど、より多くのノードが全面的に実行され、テストされるようになります。
1149.1 準拠のデバイス用 BSDL ファイルを確認する
1149.1 準拠には、BSDL ファイル(Boundary Scan Description Language)が必要です。これには、準拠
しているデバイスごとのインターフェイスが記述されています。このファイルが入手可能であること
(通常は、デバイスメーカのWeb サイトから入手可能)、そしてこのファイルが検証済みであること
を確認しましょう。(XJTAG 開発システムには、BSDL のシンタックス・チェック機能といった、欠
かすことのできない機能が搭載されています)
1149.1 チェインが正しく設計され、配線されていることを確認
基盤の設計に、必要となる1149.1 TAP 信号が含まれていること、正しく配線されていること、を確認
しましょう。望ましくは、TAP 信号は他のアクティブな信号から離すこと、GND や電源信号から切り
離すこと。そうすることで、TAP 信号上のショートが容易に検出できるようになります。適切なTAP
コネクタを用意して、必要となる信号線にアクセスできるようにすること。そして重要なのは、シス
テムのディフォルトのパワーアップ・モードで、1149.1 準拠デバイスのチェインに電源を供給し、準
拠したモードに入るようにすることです。
TAP 信号間のスキューを低く抑える
正しい動作を実現させるには、TAP 信号間のスキューが、低く抑えられていることが重要です。とり
わけ、TCK とTMS 間。それゆえ、配線長、バッファの遅延は、可能な限り同じに保ちましょう。
全TAP 信号に正しい終端を
ボードに入力されるTCK は、68R のシリーズ抵抗と100pF のキャパシターを、グランドに対してシ
リーズに用いて、終端される必要があります。TDI,TMS は、電源ラインに対して10K の抵抗でプルア
ップします。TDO には、電源ラインに対して10K の抵抗でプルして、22R のシリーズ抵抗をチェイン
の最終デバイスの近くに配置します。またフローティング(入力が不安定になること)を防ぐ為に、
nTRST ラインにプルダウンレジスタを追加されることをお勧めします。(この値は次の要素に注意し
て選択。ドライバーの強さ。および、nTRST に対する1149.1 準拠デバイスから提供されるプルアッ
プの強さ)
TAP 信号に対するバッファ
可能ならば、初段のTAP 信号へのバッファは、ノイズの削減、インピーダンスのミスマッチの回避、
さらにファン・アウトの向上が見込まれます。TCK, TDI, TMS, nTRST に対しては、ボードの入口、
TDO に対しては出口に。信号を完全にするために、4～6 ごとの 1149.1 準拠デバイスの後ろの信号を
バッファすることは賢明ですが、信号間のスキューを低く抑えることも忘れないようにしましょう。
1149.1 準拠したデバイスのスペア・ピンを使用する
1149.1 準拠デバイスに スペアのI/O ピンがあるならば、アクセスすることが困難な回路上のノードを
モニタするために用いましょう(これが、基板の通常動作に影響を与えないことを前提に) モニタ
するべきノードを注意深く選択することで、テストのカバレッジは飛躍的に向上させることができる
でしょう。
1149.1 準拠デバイスのI/O ピンを使いこなす
1149.1 準拠のデバイスが、準拠していないデバイスの入力をドライブしているなら、準拠したデバイ
ス上のI/O ピンを用いることができるかもしれません。信号を読み返すことで、L あるいはH のスタ
ックのテストが出力ノードで実現できるようになります。
1149.1 準拠デバイスがオプションで搭載されない場合のバイパス
1149.1 に準拠したデバイスの搭載が、オプションの選択に依存する場合、そのデバイスが搭載されな
い場合に、TAP データ・チェインが途切れることのないように(下図の様に)しましょう。
ASIC を設計、あるいは採用する場合に1149.1 を忘れずに
ASIC などのカスタム設計のシリコンを採用する場合には、1149.1 に準拠させることを考えるべきでしょう。
ボードの動作に影響を与えるような制御信号にアクセスできること
ボードやデバイスの動作に重要な影響を与える制御信号がある場合(reset, power enables, watchdogs,
and shutdown signals)、これらが1149.1 に準拠するデバイスで制御できるようにしましょう。もし、
1149.1 に準拠したデバイスが、それに準拠しないモードを持っている場合(FPGA に対するプログラ
ムピンなど)、1149.1 のモード、あるいは全チェインに影響が出ることを想定しておくべきでしょう。
プログラマブルなデバイスに 1149.1 からアクセスできること
EEPROM/flash/FPGA/CPLD などのシステム内でプログラミングができるデバイスを用いる場合、そ
してこれらが1149.1 のプログラミングインターフェイスを持たないならば、これらデバイスの全ての
必要な信号線を、1149.1 に準拠するデバイスでアクセスできるようにしましょう。望ましくは、全て
の必要なノードを、一つの1149.1 に準拠するデバイスからアクセスできること。そうすることで、
XJTAG 開発システムは、自動的に全ての他のデバイスを1149.1 チェイン内にCLAMP モードとして設
定し、パフォーマンスを向上させることができます。
テスト容易化設計ガイドライン - DFT(Design For Testability)
