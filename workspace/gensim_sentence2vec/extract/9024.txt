
JP1/Integrated Management - Manager 導入・設計ガイド
11.1.3 JP1イベントのフィルタリング設定の検討
システム監視で適切なJP1イベントをJP1/IMで管理するよう,JP1イベントのフィルタリング設定について検討してください。
JP1/IMマネージャーでの,JP1イベントの流れは,統合管理DBを使用しない場合と使用する場合で異なります。統合管理DBを使用しない場合と使用する場合のフィルターの影響に着目して図で示すと,次のようになります。
図11-1 フィルターの影響(統合監視DBを使用しない場合)
図11-2 フィルターの影響(統合監視DBを使用する場合)
イベント基盤サービス,相関イベント発行サービスおよびインシデント登録サービスは,イベント取得フィルターの条件でJP1イベントをフィルタリングします。統合監視DBを使用する場合,フィルタリングされたJP1イベントを統合監視DBに登録します。フィルタリングされたJP1イベントは,ユーザーフィルターを通って,JP1/IM - View上に表示されます。
JP1イベントの発生から順に,各フィルターについて説明します。
<この項の構成>
(1) イベント取得フィルター
(2) ユーザーフィルター
(3) 重要イベントフィルター
(4) 表示フィルター
(5) フィルターの条件定義
(1) イベント取得フィルター
イベント取得フィルターには,JP1/IM - ManagerがJP1/Base(イベントサービス)からJP1イベントを取得する条件を設定します。
デフォルトでは,重大度が設定されたJP1イベントをすべて取得します。
統合監視DBを使用する場合,重大度変更機能を設定して重大度を変更しても,元の重大度でJP1イベントを取得します。
次に,イベント取得フィルターの設定のカスタマイズとイベント取得フィルターの複数設定について説明します。
(a) イベント取得フィルターの設定のカスタマイズを検討する
次のような場合には,イベント取得フィルターの設定をカスタマイズしてください。
［イベントコンソール］画面の［イベント監視］ページに「通知(Notice)」や「情報(Information)」のJP1イベントを表示しない
マネージャーで,通知や情報のJP1イベントが大量に発生する場合は,イベント取得フィルターで,取得するJP1イベントの重大度を「警告(Warning)」以上などに設定します。例えば,JP1/IM - Managerと同じホストでJP1/AJS - Managerが動作し,ジョブ実行のイベントが大量に発生する場合などがあります。なお,重大度を設定するときは,［イベント取得条件設定］画面でその重大度を設定した条件群を別々に作成してください。
JP1/SESイベントをJP1/IMで監視する
JP1/SESイベントは重大度が設定されていないため,デフォルト設定ではそのイベントをJP1/IMは取得しません。JP1/SESイベントをJP1/IMで管理したい場合は,イベント取得フィルターで,JP1/SESを取得するよう設定します。なお,JP1/SESを取得する設定をするときは,［イベント取得条件設定］画面で［JP1/SESイベント］を選択した条件群を別々に作成してください。
(b) イベント取得フィルターの複数設定を検討する
営業時間用と夜間用など,時間帯によって取得したいJP1イベントの条件を切り替えたい場合は,イベント取得フィルターを複数設定することを検討してください。
(c) メンテナンス用の共通除外条件を検討する
JP1/IMおよびJP1/Baseのメンテナンス計画に基づいて,メンテナンス作業の実施時だけ特定のホストが発行するJP1イベントを監視対象外とするために,イベント取得フィルターにメンテナンス用の共通除外条件を定義するかどうかを検討してください。
メンテナンス対象ホストのJP1イベントを取得しないよう共通除外条件を定義しておき,メンテナンス時だけ共通除外条件を有効にすることで,通常運用時のフィルター条件を変更することなく,メンテナンス対象ホストからのJP1イベントを監視対象外にできます。
なお,イベント取得フィルターの共通除外条件を利用したメンテナンスの詳細については,「12.10 JP1/IMが監視するシステム全体のメンテナンスの検討」を参照してください。
(d) 注意事項
旧バージョンでイベント取得フィルター(互換用)を使用していた場合,フィルターの位置・動作が異なります。また,イベント取得フィルター(互換用)を使用している場合に統合監視DBを使用しても,イベント取得フィルター(互換用)でフィルタリングします。詳細については,次を参照してください。
参照先:「12.2.3(2) バージョン7のJP1/IM - Central Consoleからのバージョンアップについて」
イベント取得フィルターは,相関イベント発行サービスにも適用されます。相関イベント発行サービスはデフォルトで起動しない設定となっていますが,起動するとイベント基盤サービスに適用されているフィルター内容が,そのまま相関イベント発行サービスにも適用されます。
イベント取得フィルターは,JP1/IM - Incident Master連携機能のインシデント登録サービスにも適用されます。インシデント登録サービスは,デフォルトで起動しない設定となっていますが,起動するとイベント基盤サービスに適用されているフィルター内容が,そのままインシデント登録サービスにも適用されます。
インシデント登録サービスの機能概要については「8.2 JP1/IM - Incident Masterとの連携」を,機能詳細についてはマニュアル「JP1/Integrated Management - Incident Master」を参照してください。
(2) ユーザーフィルター
ユーザーフィルターは,JP1/IMの管理者が,JP1ユーザーに対して監視できるJP1イベントを制限する場合に使用します。ユーザーフィルターの設定はJP1ユーザー単位にでき,設定の変更には管理者権限(JP1_Console_Admin)が必要です。
デフォルトでは制限がなく,どのJP1ユーザーもすべてのJP1イベントを監視できます。
次のような場合には,設定をカスタマイズしてください。
JP1ユーザーが監視できる範囲を制限する
機密上重要なJP1イベントを特定のJP1ユーザーに見えないようにするには,ユーザーフィルターに監視できるイベントを設定します。
特定の範囲を監視する
特定のJP1イベントだけを監視したり,大規模なシステムを分担して監視するなどの場合に,ユーザーフィルターを使って監視する範囲を設定することができます。
(3) 重要イベントフィルター
重要イベントフィルターは,システム監視で重要なJP1イベントを指定するために使用します。このフィルターで定義したJP1イベントは,重要イベントと見なされ,［イベントコンソール］画面の［重要イベント］ページに表示されます。また,この画面では,重要イベントの対処状況を管理できます。
デフォルトの設定では,重大度が「緊急(Emergency)」「警戒(Alert)」「致命的(Critical)」または「エラー(Error)」のJP1イベントが,重要イベントとして定義されています。
次のような場合には,設定をカスタマイズしてください。
重要イベントから特定のイベントを除く
重要イベントに相当する重大度が設定されているJP1イベントだが,システム運用上は重要イベントとして扱う必要がないJP1イベントがある場合は,重要イベントフィルターで,イベントIDの値と「と一致しない」を指定します。
(4) 表示フィルター
表示フィルターは,［イベントコンソール］画面の［イベント監視］ページに表示されるJP1イベントを,表示する条件を指定して絞り込むために使用します。
デフォルトでは,表示条件は設定されていません。
このフィルターは,通常,ユーザーが監視中に,一時的に特定のJP1イベントだけを表示したい場合などに使用します。
(5) フィルターの条件定義
フィルター条件として条件群を複数定義する場合には,運用に入る前に条件群同士で相反する条件を定義していないか,確認してください。
例
次のような二つの条件群を通過条件に定義したと仮定します。
条件群A:「重大度が警告以上のJP1イベントを通過させる」と条件指定
条件群B:「HOSTA以外のホストからくるJP1イベントを通過させる」と条件指定
仮にHOSTAから重大度が警告以上のJP1イベントがくると,条件群Aの条件に一致するため,条件群Bで定義された条件にかかわらず,ユーザーの望まないJP1イベントがフィルターを通過してしまいます。
条件群同士の関係は,OR条件であることを十分に考慮に入れて,条件定義をしてください。なお,上記例の場合,条件群Bを「HOSTAからくるJP1イベント」を除外するよう除外条件群に定義しておくと,通過条件に定義した条件群Aよりも優先されるため,HOSTAから重大度が警告以上のJP1イベントが来てもフィルターを通過しません。
フィルターの設定について
イベント取得フィルター
［イベント取得条件設定］画面で設定する
参照先:マニュアル「JP1/Integrated Management - Manager 画面リファレンス」の「2.12 ［イベント取得条件設定］画面」
［イベント取得条件設定］画面(互換用)で設定する
参照先:マニュアル「JP1/Integrated Management - Manager 画面リファレンス」の「2.13 ［イベント取得条件設定］画面(互換用)」
［イベント取得条件一覧］画面で追加,設定する
参照先:マニュアル「JP1/Integrated Management - Manager 画面リファレンス」の「2.14 ［イベント取得条件一覧］画面」
jcochafmodeコマンドを使ってフィルター位置を変更する
参照先:マニュアル「JP1/Integrated Management - Manager コマンド・定義ファイルリファレンス」の「jcochafmode」(1. コマンド)
jcochfilterコマンドを使ってイベント取得フィルターを切り替える
参照先:マニュアル「JP1/Integrated Management - Manager コマンド・定義ファイルリファレンス」の「jcochfilter」(1. コマンド)
ユーザーフィルター
［ユーザーフィルター設定］画面で追加,設定する
参照先:マニュアル「JP1/Integrated Management - Manager 画面リファレンス」の「2.23 ［ユーザーフィルター設定］画面」
重要イベントフィルター
［重要イベント定義］画面で設定する
参照先:マニュアル「JP1/Integrated Management - Manager 画面リファレンス」の「2.10 ［重要イベント定義］画面」
表示フィルター
［表示フィルター設定］画面で設定する
参照先:マニュアル「JP1/Integrated Management - Manager 画面リファレンス」の「2.21 ［表示フィルター設定］画面」
［表示フィルター一覧］画面で追加,設定する
参照先:マニュアル「JP1/Integrated Management - Manager 画面リファレンス」の「2.22 ［表示フィルター一覧］画面」
[目次][前へ][次へ]
[他社商品名称に関する表示]
All Rights Reserved. Copyright (C) 2009, 2011, Hitachi, Ltd.
JP1イベントのフィルタリング設定の検討
