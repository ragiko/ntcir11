
この附属書は, SGMLのWorld Wide Web(WWW), イントラネット及びエクストラネットへの多様な適応によって明らかになった欠陥を修正する。
この附属書は, 誤りを修正し, 既存の適合文書を不適合にしない明確な解法が存在するあいまいさを解決し, その他のあいまいさについては別の解法の選択を与える。
この附属書の応用可能性は, World Wide Webへの応用がきっかけとなったが, SGMLのあらゆる用途に拡張できる。
この附属書は, HyTime第2版[JIS X 4155:2000(ISO/IEC 10744:1997)]のSGML拡張機能とDSSSL[JIS X 4153:1998(ISO/IEC 10179:1996)]との中で定義されているグローブ及び特性集合を参照する。
K.1 適合性
この附属書に適合するかどうかは個別の文書ごとに決定され, K.3.2で示すとおり, SGML宣言中で表示される。適合SGMLシステムとなるためには, 必ずしもこの附属書をサポートする必要はない。
この附属書は, 置換, 新しい構文生成規則及びテキストの集合として構成され, この規格の本体を変更するものとして記述されている。影響を受ける節の番号は必ずしも引用されない。
しかし, それらの変更は, この附属書に適合する場合にだけ適用できる。
この附属書をサポートするSGML構文解析系は, この附属書への適合を主張しない適合SGML文書を構文解析できなければならない。それらの文書の構文解析は, この附属書をサポートしないSGML構文解析系を用いた場合と同一のグローブを生成しなければならない。しかし, それらの文書に関するエラー報告は, 規格をこの附属書によって変更した結果に従って行う。変更前の規格に関するエラーを報告する必要はない。
K.2 定義
K.2.1 文書型宣言に関係する定義
K.2.1.1 DTD宣言(DTD declarations)
文書型宣言部分集合の中に現れるマーク付け宣言。
K.2.1.2 外部部分集合(external subset)
文書型宣言部分集合のうち, 外部宣言実体中に存在する部分。
K.2.1.3 内部部分集合(internal subset)
文書型宣言部分集合のうち, 文書型宣言のdsoとdscとの間に現れる部分。
dso及びdscが省略された場合, 内部部分集合は,存在しないのではなく,空となる。
K.2.1.4 外部部分集合実体(external subset entity)
文書型宣言の外部識別子パラメタによって宣言され, 内部部分集合の末尾で(暗黙的に)参照される実体。
K.2.2 文書インスタンスに関係する定義
K.2.2.1 完全宣言済み文書インスタンス(fully-declared document instance)
文書インスタンスであって, それに関連付けられた文書型宣言が, この規格の本体によってインスタンスに必要とされるすべてのDTD特性を表現するのに十分なマーク付け宣言を含み, それらの特性を修正するDTDデータ実体を含まないもの。
この文書型宣言自体は, K.4.9に示す暗黙の宣言であってもよい。
SGML宣言がIMPLYDEF ATTLIST NO及びELEMENT NO ENTITY NO NOTATION NOを指定している場合, 文書インスタンスは完全宣言済みである必要がある。システムは, SGML宣言が要求しない場合でも, 処理を起動する際のパラメタなどによって, インスタンスが完全宣言済みであるかどうかの妥当性検証を要求する手段を提供することが望ましい。
完全宣言済みでない文書インスタンスは, 完全タグ付き文書インスタンス又は充足タグ付き文書インスタンスのどちらかでなければならない。
K.2.2.2 完全タグ付き文書インスタンス(fully-tagged document instance)
すべての要素に対して終了タグ及び共通識別子付き開始タグが存在し, 開始タグ中のすべての属性指定に属性名が存在する文書インスタンス。
SGML宣言が, DATATAG NO, RANK NO, OMITTAG NO, SHORTTAG STARTTAG EMPTY NO及びSHORTTAG ATTRIB OMITNAME NOを指定している場合, 文書インスタンスは完全タグ付きでなければならない。SGML宣言が要求しない場合でも, システムは, 処理を起動する際のパラメタなどによって, インスタンスが完全タグ付きであるかどうかの妥当性検証を要求する手段を提供することが望ましい。
K.2.2.3 型妥当文書インスタンス(type-valid document instance)
この規格の本体が要求するとおりであって,関連付けられた文書型宣言中で表現されたDTD特性に適合する文書インスタンス。DTD特性の表現は,マーク付け宣言, DTDデータ実体, 又はその両方による。
K.2.2.4 充足タグ付き文書インスタンス(amply-tagged document instance)
文書型宣言へのアクセスを必要としない範囲内でマーク付け最小化を用いている文書インスタンス。
SGML TC2 Annex K
