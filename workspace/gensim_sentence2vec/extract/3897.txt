内容は僕のような統計とか久しく使ってないような人間でもとてもわかりやすく、とても興味を持った。
erockrに協調フィルタリングを!
そして勉強も兼ねてerockrに「このアイドルを見た人はこの人も見ています」というレコメンデーションを実装してみることにした。
それで実はここ一週間ほど、以下のようなログを取ってデータを集めた。
uid(擬似ユーザID((IPアドレスとUserAgentのハッシュの一部)))
keyword(検索キーワード=アイドルの名前)
これが大体25万行ほど集まった。
erockrの場合、ユーザが見るアイテム(=アイドル)の数はとても多い(データセットが「疎」)ので、アイテムベースのレコメンデーションにする。
レコメンデーションの流れ
大体以下のような流れでレコメンドする。
アイテム間の類似度を計算。類似度の評価方法はいくつかあり、ユークリッド距離、ピアソン相関係数、Jaccard係数、Tanimoto係数などがある。
類似度で重み付けしてアイテムの推薦順番を決める。
今日は類似度の計算を行ってみることにした。
いろいろな方法があるが、erockrの場合、ログはユーザがアイテムを見たというデータしかないので、
ページを見たら1
ページを見てなかったら0
ということになるので、ユークリッド距離、ピアソン相関係数よりも、Jaccard係数、Tanimoto係数などが向いている*2。			ここではTanimoto係数を用いる*3。
ここでMySQL上のログのテーブルから、計算に必要な表をつくる。
もとの表
uidkeyword
tanimoto係数によるerockrの検索キーワード間の類似度の計算 - konisimple log
