
タイミングストラクチャの構成ダイアログボックスを使用して、タイミングストラクチャの期限、タイムアウト、セカンダリタイミングソースなどの、上級設定を構成することができます。タイミングループを構成、タイミングシーケンスを構成、フレーム付きタイミングループを構成ダイアログボックスを表示するには、入力ノードをダブルクリックするか、入力ノードを右クリックしてショートカットメニューから入力ノードを構成を選択します。期限を設定する
期限は、フレームの開始に対して、実行を完了するサブダイアグラムまたはフレームの実行の特定時間を割り当てます。期限は、サブダイアグラムの実行に対して時間制限リファレンスを設定します。フレームが期限より前に完了しない場合、次のフレームの左データノードは遅れて終了?出力にTRUEを返して、実行を継続します。フレームのタイミングソースとして同じ単位で期限値を指定します。
以下の例では、タイミングシーケンスストラクチャの最初のフレームの期限が50に構成されています。期限は、フレームが1kHzクロックの50ティック、または50ミリ秒の前に実行を完了することを指定しています。ただし、フレーム内に60ミリ秒の待機で呼び出すVIがあるため、フレーム内のコードは完了するのに60ミリ秒かかります。2番目のフレームの遅れて終了?出力は、フレームの実行が指定された期限内に終了しなかったため、TRUEを返します。
タイムアウトを設定する
タイムアウトは、フレームが実行を待機することができる最大時間(ミリ秒)を指定します。タイムアウト値は、反復の開始または前のフレームの終了に相対しています。サブダイアグラムの実行が指定したタイムアウト値よりも前に開始しない場合、タイミングループはそのフレームの左データノードの起動理由出力にタイムアウトを返します。
タイミングストラクチャの制御、タイムアウトの指定には、デジタルエッジカウンタやタスクソースからの信号など、いくつかの種類のNI-DAQmxタイミングソースを使用できます。以下の例では、タイミングシーケンスストラクチャの2番目のフレームは、「DAQmxタイミングソースを作成」VIが外部デバイスからパルスを受け取ったときに実行されます。外部デバイスは、パルスを適切な条件下で50 msごとに送信しますが、パルスタイミングは変化する可能性があります。2番目フレームのタイムアウト値が60ミリ秒であることは、最初のフレームが完了した後に60ミリ秒だけ開始を待機することを意味します。2番目のフレームが60ミリ秒の前に開始しない場合、ストラクチャは残りの反復をタイミングを無視して実行し続け、2番目のフレームは左データノードの起動理由にタイムアウトを返します。
タイムアウトがタイミングストラクチャ内で発生すると、ストラクチャは残りの反復をタイミングを無視して実行します。タイミングストラクチャは、残りのフレームの起動理由出力にタイムアウトを返します。残りのフレームによって提供されたタイミング情報は、タイムアウトが発生したフレームのタイミング情報と等しくなります。タイミングループが他の反復を完了する必要がある場合は、ループはタイムアウトが発生したフレームで停止し、元のタイムアウトイベントを待機します。
タイミングストラクチャの最初のフレームのデフォルトのタイムアウト値は-1で、サブダイアグラムまたはフレームの開始を無限に待機することを示しています。他のフレームのデフォルトのタイムアウト値は0で、前のフレームのタイムアウト値から変更がないことを示します。オフセットを設定する
オフセットは、タイミングストラクチャの開始、ストラクチャが最初のサブダイアグラムまたはフレームの実行開始を待機する時間の長さに相対する時間の長さです。オフセットは、ストラクチャのタイミングソースの絶対時間単位で定義されます。
また、オフセットを使用して両方のストラクチャに同じタイミングソースを設定し、異なるタイミングストラクチャの位相を調整できます。以下のブロックダイアグラムのタイミングループは、タイミングソースのトリガ後に500ミリ秒待機してから反復を実行するよう、同じ1kHzのタイミングソースを使用し、オフセット(t0)値は500にしてあります。
タイミングストラクチャの設定を構成する (Real-Time、Windows) - LabVIEW 2014ヘルプ - National Instruments
