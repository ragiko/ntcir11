監視手法の違いによる、APMツールの4タイプ
前回「【導入効果】仮想化・クラウド時代のシステム障害対策『アプリケーションパフォーマンス管理製品』」では、APM(Application Performance Management)ツールの導入効果を紹介した。ただ、APMツールは監視手法の違いによって4つのタイプに分けられる。
今回は監視手法の違いとそれぞれのメリット、デメリットを紹介する。以下ではそれぞれを個別に見ていこう。
仮想ユーザー方式
パケットキャプチャー方式
クライアントインストール方式
JavaScript付加方式
1.仮想ユーザー方式
エンドユーザーの視点でレスポンスを計測するAPMツールの中でも最も一般的な手法。 社内、支社などのクライアントPCに設置した計測用エージェントが、エンドユーザーのふりをして監視対象サイトにアクセスし、ITシステムのレスポンスを計測する。どのページにアクセスするかをあらかじめ定義しておく。例えば「トップページからログインし、検索実行後にログアウトする」といった具合だ。計測は10分に1回、1時間に1回など、定期的に行う。他の3つの手法が、実ユーザーが送受信するパケットを分析するのに対し、唯一、APMツール自らパケットを送信して計測する。
メリット
APMツールが自らパケットを送信してレスポンスタイムを計測するため、実ユーザーがアクセスしていない時間帯でも障害を検知できる
同じ場所から、一定の間隔で、同じ処理を実行するため、サービスレベル管理の基準値となるデータを取得できる
対象システムに手を加えることも、ユーザーの協力も不要。4つの方式の中で導入が最も容易
デメリット 
APMツールが自らパケットを送信してレスポンスタイムを計測するため、システムを使う実ユーザーの実感までは把握できない
あらかじめ定義したWebページ以外で問題があっても検知できない
主要製品(編集部調べ)
HP Business Process Monitor
CA Application Performance Management Cloud Monitor
Keynote Web Performance Monitoring
Compuware Gomez SaaS
2.パケットキャプチャー方式
パケットキャプチャー方式は、対象システムにおけるスイッチなどのネットワーク機器にパケット収集用装置を接続。そこを流れる全てのパケットを分析し、レスポンスタイムを計測する方式。特にここ数年で使われるようになった。
メリット
実ユーザーが使っている端末が発するパケットをキャプチャーするため、エンドユーザーが本当に体感しているレスポンスタイムを計測できる
全エンドユーザー、全Webページのパケットをキャプチャーするため、パフォーマンス悪化や障害が「どれほどのエンドユーザーに、どれほどの影響を与えているか」を正確に把握できる
ネットワーク機器からパケットを収集するだけで計測できるので、Webサーバやエンドユーザーのクライアント端末に新たな設定やエージェントを追加する必要がなく、比較的容易に監視できる
デメリット
ネットワーク機器からパケットを収集するため、ネットワーク機器が自社の管理下にない場合、この方式は選択できない。例えば「対象システムがクラウド上にある」「自社が利用しているデータセンターだが、ネットワーク機器は他社と共有している」といった場合
データセンター内のみでデータを収集するため、CDN(Contents Delivery Network)、広告、ストリーミングなど、データセンターの外から提供されているコンテンツのレスポンスは計測できない
エンドユーザーがアクセスしていないページや時間帯は何も計測できない
主要製品(編集部調べ)
CA Customer Experience Manager
HP Real User Monitor
Oracle Real User Experience Insight
Compuware dynaTrace Enterprise
3.クライアントインストール方式
【技術解説】アプリケーションパフォーマンスを測る4つの手法 − TechTargetジャパン システム運用管理
