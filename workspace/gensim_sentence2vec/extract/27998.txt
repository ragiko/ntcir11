【課題】溶接線倣いに使用されるゲイン及び補正量のパラメータの信頼性を高くして自動的に最適化できるロボット用アークセンサの倣いパラメータの設定方法、及びロボット用アークセンサの倣いパラメータの設定装置を提供する。【解決手段】ロボット制御装置20は教示線K上に沿って溶接トーチ11をウィービングしながら移動させる際、教示線Kの区間毎のシフト量に応じて溶接トーチ11をシフトさせて移動させる。アークセンサ50はウィービング周期毎に正振幅領域と負振幅領域でサンプリングした溶接電流をそれぞれ平均化し、平均化した値と基準値との差分値を算出する。アークセンサ50は、区間毎の差分値の平均差分値を算出し、該平均差分値に基づき回帰直線及び該回帰直線と平均差分値との相関係数を求め、回帰直線に関係するラメータを相関係数に基づいて評価して、該パラメータを倣いパラメータとして設定する。
【発明の詳細な説明】【技術分野】【0001】  本発明は、ロボット用アークセンサの倣いパラメータの設定方法、及びロボット用アークセンサの倣いパラメータの設定装置に関するものである。【背景技術】【0002】  従来から、ウィービングによるアーク溶接線倣いでは、溶接トーチをオシレートさせ、アーク長及びワイヤ突き出し長の変化によって発生する電気的な変化を検出するアークセンサが設けられている。このアークセンサにより、ウィービング左領域(正振幅)の電流とウィービング右領域(負振幅)の電流を分け、フィルタ処理、平均化処理ないし積分化処理などの何らかの演算処理を施した後、その差分値を計算し、電流差分値からずれ補正量への補正係数(以下、ゲインという)や、オフセット補正量(mm)(以下、オフセットという)を加味することにより、ウィービング中心位置の軌道に対する補正量(以下、単に補正量という)を求めるようにしている。【0003】  アークセンサは、上記のように求めた補正量をロボット制御装置にフィードバックする。ロボット制御装置は、前記補正量に基づいて直ちにウィービング中心位置の軌道に反映させて、前記溶接トーチを動作させる。この一連のフィードバックループにより、ロボットのTCP(前記溶接トーチ)を開先中心に倣わせることが可能となる。なお、このような補正方法は特許文献1等により提案されている。【0004】  なお、特許文献2は、アークセンサのゲイン及びオフセットの決定方法、及び倣い可否判定について提案されている。又、特許文献3は、アークセンサのゲインの決定方法が提案されている。【特許文献1】特開平2−295675号公報【特許文献2】特開平9−70663号公報、段落0019、0020【特許文献3】特開昭61−74778号公報【発明の開示】【発明が解決しようとする課題】【0005】  しかし、アークセンサにより補正量を求める際、前記ゲインが適切でない場合、前記補正量が実際のワークに対してずらすべき補正量と整合しないことになる。例えば、ゲインが大きすぎると、蛇行や脱線が発生し、ゲインが小さすぎると、実際の溶接線に追従できなくなる、といった結果になる。又、溶接トーチの狙い姿勢が大地に対して鉛直でない姿勢の場合、溶接プールが重力方向に引っ張られることにより、下板に寄り気味の倣いとなる場合がある。この現象を回避するためには、適切なオフセットを補正量に加算する必要がある。【0006】  これらのパラメータは、手動で決定することも可能ではあるが、使用者にアーク溶接及びアークセンサ双方の知識が必要であり、多くの試行錯誤が必要となる場合もある。  なお、特許文献2では、パラメータの同定時の教示位置以外について、どのように求めるかの具体的な方法及び手段について開示されていない。特許文献3では、開先中心から指定シフト量を用いてシフトしたときの電流変化と前記シフト量の関係を、シフト量なし及び最大シフト量時の電流のみを用いて単純比例でゲインを求めている。しかし、電流の変化が頻繁にある場合は、ゲインの確からしさが失われる問題がある。【0007】  本発明の目的は、溶接線倣いに使用されるゲイン及び補正量のパラメータの信頼性を高くして自動的に最適化できるロボット用アークセンサの倣いパラメータの設定方法、及びロボット用アークセンサの倣いパラメータの設定装置を提供することにある。【課題を解決するための手段】【0008】  上記問題点を解決するために、請求項1に記載の発明は、シフト量が異なる複数の区間で区切られた教示線上に沿って溶接トーチを溶接させながら移動させる際、前記区間毎に定められているシフト量に応じて前記溶接トーチをシフトさせて移動させる移動工程と、前記区間毎に移動中の溶接トーチに供給されてサンプリングされた電気量を、該サンプリングする周期(以下、サンプリング周期という)よりも長い所定周期毎に平均化する平均化工程と、該平均化した値と基準値との差分値を算出する差分値算出工程と、前記区間毎の前記差分値の平均差分値を算出する平均差分値算出工程と、前記区間毎の前記差分値の平均差分値に基づいて回帰直線及び該回帰直線と前記平均差分値との相関係数を求める回帰直線及び相関係数取得工程と、前記回帰直線の傾き、及び切片に関係する倣いに関するパラメータを前記相関係数に基づいて評価して、該パラメータを倣いパラメータとして設定する評価工程を含むことを特徴とするロボット用アークセンサの倣いパラメータの設定方法を要旨とするものである。【0009】  なお、本明細書で、シフト量が異なるとは、シフト量がある場合及びシフト量がない場合も含む趣旨である。  請求項2の発明は、請求項1において、前記移動工程では前記溶接トーチにウィービングさせ、前記シフト量が異なる複数の区間は、前記教示線を中心にして前記溶接トーチの進行方向において左右にシフトするシフト量が異なる複数の区間(以下、第1区間群という)を含み、前記平均化工程では、前記溶接トーチに供給される溶接電流を前記電気量として前記サンプリング周期で、ウィービング正振幅領域と負振幅領域でそれぞれサンプリングして、前記ウィービング周期を前記所定周期として該所定周期毎に、前記ウィービング正振幅領域と負振幅領域でサンプリングした溶接電流をそれぞれ平均化し、前記差分値算出工程では、前記ウィービング正振幅領域と負振幅領域でサンプリングした溶接電流をそれぞれ平均化した値の一方を前記基準値として、他方との差分値を算出することを特徴とする。【0010】  請求項3の発明は、請求項1において、前記シフト量が異なる複数の区間は、前記教示線を中心にして前記溶接トーチの進行方向において前記教示線と左右にシフトする方向とは直交する方向にシフトするシフト量が異なる複数の区間(以下、第2区間群という)を含み、前記平均化工程では、前記溶接トーチに供給される溶接電流を前記電気量として前記サンプリング周期でサンプリングして、前記所定周期毎に、サンプリングした溶接電流を平均化し、前記差分値算出工程では、前記平均化した値と、基準値としての目標電流値との差分値を算出することを特徴とする。【0011】  請求項4の発明は、請求項1において、前記シフト量が異なる複数の区間は、前記教示線を中心にして前記溶接トーチの進行方向及び前記教示線の左右方向とは直交する方向にシフトするシフト量が異なる複数の区間(以下、第3区間群という)を含み、前記平均化工程では、前記溶接トーチに印加される電圧を前記電気量として前記サンプリング周期でサンプリングして、前記所定周期毎に、サンプリングした電圧を平均化し、前記差分値算出工程では、前記平均化した値と、基準値としての目標電圧値との差分値を算出することを特徴とする。【0012】  請求項5の発明は、シフト量が異なる複数の区間で区切られた教示線上に沿って溶接トーチを溶接させながら移動させる際、前記区間毎に定められているシフト量に応じて前記溶接トーチをシフトさせて移動させる移動手段と、前記区間毎に移動中の溶接トーチに供給されてサンプリングされた電気量を、該サンプリングする周期(以下、サンプリング周期という)よりも長い所定周期毎に平均化する平均化手段と、該平均化した値と基準値との差分値を算出する差分値算出手段と、前記区間毎の前記差分値の平均差分値を算出する平均差分値算出手段と、前記区間毎の前記差分値の平均差分値に基づいて回帰直線及び該回帰直線と前記平均差分値との相関係数を求める回帰直線及び相関係数取得手段と、前記回帰直線の傾き、及び切片に関係する倣いに関するパラメータを前記相関係数に基づいて評価して、該パラメータを倣いパラメータとして設定する評価手段を含むことを特徴とするロボット用アークセンサの倣いパラメータの設定装置を要旨とするものである。【0013】  請求項6の発明は、請求項5において、前記シフト量が異なる複数の区間は、前記教示線を中心にして前記溶接トーチの進行方向において左右にシフトするシフト量が異なる複数の区間(以下、第1区間群という)を含み、前記移動手段は前記溶接トーチをウィービングさせながら、前記第1区間群を移動させ、前記平均化手段は、前記溶接トーチに供給される溶接電流を前記電気量として前記サンプリング周期で、ウィービング正振幅領域と負振幅領域でそれぞれサンプリングして、前記ウィービング周期を前記所定周期として該所定周期毎に、前記ウィービング正振幅領域と負振幅領域でサンプリングした溶接電流をそれぞれ平均化し、前記差分値算出手段は、前記ウィービング正振幅領域と負振幅領域でサンプリングした溶接電流をそれぞれ平均化した値の一方を前記基準値として、他方との差分値を算出することを特徴とする。【0014】  請求項7の発明は、請求項5において、前記シフト量が異なる複数の区間は、前記教示線を中心にして前記溶接トーチの進行方向において前記教示線と左右にシフトする方向とは直交する方向にシフトするシフト量が異なる複数の区間(以下、第2区間群という)を含み、前記移動手段は、前記第2区間群を移動させ、前記平均化手段は、前記溶接トーチに供給される溶接電流を前記電気量として前記サンプリング周期でサンプリングして、前記所定周期毎に、サンプリングした溶接電流を平均化し、前記差分値算出手段は、前記平均化した値と、基準値としての目標電流値との差分値を算出することを特徴とする。【0015】  請求項8の発明は、請求項5において、前記シフト量が異なる複数の区間は、前記教示線を中心にして前記溶接トーチの進行方向及び前記教示線の左右方向とは直交する方向にシフトするシフト量が異なる複数の区間(以下、第3区間群という)を含み、前記平均化手段は、前記溶接トーチに印加される電圧を前記電気量として前記サンプリング周期でサンプリングして、前記所定周期毎に、サンプリングした電圧を平均化し、前記差分値算出手段では、前記平均化した値と、基準値としての目標電圧値との差分値を算出することを特徴とする。【発明の効果】【0016】  請求項1の発明によれば、回帰直線の傾き、及び切片に関係する倣いに関するパラメータ、具体的には、溶接線倣いに使用されるゲイン及び補正量のパラメータの信頼性を高くして自動的に最適化できるロボット用アークセンサの倣いパラメータの設定方法を提供できる。【0017】  請求項2の発明によれば、ウィービングを行う倣い溶接の際、教示線に対して溶接トーチが左右方向にウィービングする場合、教示線に対して溶接トーチの左右方向において、溶接線倣いに使用されるゲイン及び補正量のパラメータの信頼性を高くして自動的に最適化できるロボット用アークセンサの倣いパラメータの設定方法を提供できる。【0018】  請求項3の発明によれば、ウィービングを行う倣い溶接の際、教示線に対して溶接トーチの上下方向において、溶接線倣いに使用されるゲイン及び補正量のパラメータの信頼性を高くして自動的に最適化できるロボット用アークセンサの倣いパラメータの設定方法を提供できる。【0019】  請求項4の発明によれば、TIG溶接の倣い溶接の際、教示線に対して溶接トーチの上下方向において、溶接線倣いに使用されるゲイン及び補正量のパラメータの信頼性を高くして自動的に最適化できるロボット用アークセンサの倣いパラメータの設定方法を提供できる。【0020】  請求項5の発明によれば、回帰直線の傾き、及び切片に関係する倣いに関するパラメータ、具体的には、溶接線倣いに使用される補正量及びゲインのパラメータを、信頼性を高くして自動的に最適化できるロボット用アークセンサの倣いパラメータの設定装置を提供できる。【0021】  請求項6の発明によれば、ウィービングを行う倣い溶接の際、教示線に対して溶接トーチが左右方向にウィービングする場合、教示線に対して溶接トーチの左右方向において、溶接線倣いに使用されるゲイン及び補正量のパラメータの信頼性を高くして自動的に最適化できるロボット用アークセンサの倣いパラメータの設定装置を提供できる。【0022】  請求項7の発明によれば、ウィービングを行う倣い溶接の際、教示線に対して溶接トーチの上下方向において、溶接線倣いに使用されるゲイン及び補正量のパラメータの信頼性を高くして自動的に最適化できるロボット用アークセンサの倣いパラメータの設定装置を提供できる。【0023】  請求項8の発明によれば、TIG溶接の倣い溶接の際、教示線に対して溶接トーチの上下方向において、溶接線倣いに使用されるゲイン及び補正量のパラメータの信頼性を高くして自動的に最適化できるロボット用アークセンサの倣いパラメータの設定装置を提供できる。【発明を実施するための最良の形態】【0024】  以下、本発明のロボット用アークセンサの倣いパラメータの設定方法、及びロボット用アークセンサの倣いパラメータの設定装置を、下記のアーク溶接ロボットシステムにおいて、具体化した一実施形態を図1〜7を参照して説明する。【0025】  図1には、アーク溶接ロボットシステムの概要が示されている。アーク溶接ロボットシステムは溶接トーチ11を備えた関節が6軸の溶接ロボットマニピュレータ(以下、単にマニピュレータという)10、マニピュレータ10を制御するロボット制御装置20、溶接トーチ11に電力を供給する溶接電源30、溶接電流(アーク電流)に基づいて溶接の狙い位置のずれ量を検出するアークセンサ50等を備えている。【0026】  溶接電源30は、マニピュレータ10の先端に取付された溶接トーチ11に対してトーチ側溶接パワーケーブルL1を介して溶接電流(アーク電流)を供給する。又、ワークWは、ワーク側溶接パワーケーブルL2及び溶接電源30を介して電気的に接地されている。【0027】  溶接電源30は溶接機通信ケーブルL3を介してロボット制御装置20に接続され、ロボット制御装置20と溶接電流・電圧指令等の制御情報の交信が可能である。又、ロボット制御装置20は、アークセンサ50とセンサ通信ケーブルL4を介して接続され、アークセンサ50が算出した溶接の狙い位置のずれ量、後述するパラメータをアークセンサ50から受信可能である。又、ロボット制御装置20は、通信ケーブルL5を介して、マニピュレータ10と各種の制御情報の交信が可能である。【0028】  図2に示すようにアークセンサ50は、中央処理装置(CPU52)、後述する演算プログラムを格納するROM54、RAMからなる主記憶回路56、フラッシュメモリ等からなる補助記憶回路60、トーチ側溶接パワーケーブルL1に取付された電流検出手段としての電流検出器58等を備えている。【0029】  電流検出器58は、ホール素子等からなり、その検出信号(すなわち、アーク電流)はアンプ49にて増幅されるとともにA/Dコンバータ48にてデジタル信号に変換されてCPU52に入力される。CPU52は、アーク電流およびロボット制御装置20からの制御情報(例えば、ウィービング周期、振幅情報、センシング開始命令)に基づいて溶接の狙い位置のずれ量を算出し、センサ通信ケーブルL4を介してロボット制御装置20に通知する。又、補助記憶回路60は、例えば、電流検出器58から入力された各種信号や、ロボット制御装置20から通知された制御情報を一時格納する。【0030】  ロボット制御装置20は、図示はしないが、CPUからなるシステムコントロール部、マニピュレータ10を制御するモーション制御部、溶接制御部、ロボットの作業プログラムを格納する記憶部、前記溶接電源30と通信するための溶接電源インターフェイス等を備えている。溶接条件(すなわち、溶接電流(溶接電流、溶接電圧)、ウィービングの振幅、教示線等の教示データは、ティーチペンダント40を介して入力され、該入力された教示データは前記記憶部に格納される。【0031】  ロボット制御装置20には、ティーチペンダント40により溶接開始点等の教示位置や、溶接開始指令(溶接電流設定値、シールドガス放流、トーチスイッチON等の処理シーケンス、等)からなるプログラムが登録されているものとする。又、これらの教示されたプログラムは教示データとしてロボット制御装置20内のCPUがROM(ともに図示しない)に格納されているアルゴリズムに従ってRAM(図示しない)へ格納され、この既ティーチングされた教示データであるプログラムにより、システムが自動運転される。【0032】  (実施形態の作用)  さて、上記のように構成された、アーク溶接ロボットシステムの作用を説明する。  まず、以下の説明は、データ取得のために行う試行溶接である。この場合、溶接される実際のワークと同じ材質、及び板厚を有した直線ワークを用意し、該直線ワークの開先中心をロボットの溶接トーチ11(TCP)が狙うように直線状の教示線Kが、予め、ティーチペンダント40により、教示されるとともに、後述の区間K2〜K5,K7〜K10において、溶接トーチ11が左右又は上下にシフトするシフト量が設定されているものとする。なお、左右方向とは進行方向に向かって、トーチに対して垂直な方向を指す。また、上下方向とはトーチに対して平行な方向で、トーチに向かう方向を上方向、離れる方向を下方向とする。【0033】  具体的には、本実施形態では、図4に示すように、教示線Kは、シフトせず、かつデータ(溶接電流)が取得されない区間K0とデータが取得されるK1〜K10の複数の区間からなる。【0034】  区間K1は、溶接トーチ11のシフトが行われない、シフト無し区間である。続く、区間K2は、溶接トーチ11が進行方向に向かって、右に教示線Kから(1/2)h(なお、h(mm)は0以外の適宜の値でよい)分だけシフトする区間である。続く、区間K3は、溶接トーチ11が進行方向に向かって、教示線Kから右にh分だけシフトする区間である。区間K4は、溶接トーチ11が進行方向に向かって、教示線Kから左に(1/2)h分だけシフトする区間である。区間K5は、溶接トーチ11が進行方向に向かって、教示線Kから左にh分だけシフトする区間である。【0035】  前記区間K1〜K5は、第1区間群に相当し、左右のシフト量が異なる。そして、区間K2〜K5は左右シフト区間となる。  続く、区間K6は、溶接トーチ11のシフトが行われない、シフト無し区間である。続く区間K7は、溶接トーチ11が進行方向に向かって、上に教示線Kから(1/2)v(なお、v(mm)は0以外の適宜の値でよい)分だけシフトする区間である。続く、区間K8は、溶接トーチ11が進行方向に向かって、教示線Kから上にv分だけシフトする区間である。区間K9は、溶接トーチ11が進行方向に向かって、教示線Kから下に(1/2)v分だけシフトする区間である。区間K10は、溶接トーチ11が進行方向に向かって、教示線Kから下にv分だけシフトする区間である。【0036】  前記区間K6〜K10は、溶接トーチ11の進行方向において教示線Kと左右にシフトする方向とは直交する方向にシフトするシフト量が異なる複数の区間である第2区間群に相当する。そして、区間K7〜K10は上下シフト区間となる。【0037】  図3は、アーク溶接ロボットシステムにおいて、データ取得モードに設定されてデータ取得モードが開始されたときのCPU52が行う演算プログラムである。この演算プログラムの処理は、ロボット制御装置20から、データ取得モードの開始命令が出されると開始される。【0038】  データ取得モードが開始されると、ロボット制御装置20は、開始の地点から設定されたウィービング周期で溶接トーチ11を進行方向に向かって左右にウィービングさせ、開先を溶接しながら教示データに基づいて前記教示線Kの区間K0に沿って移動させる。そして、溶接トーチ11が、区間K1に移動すると、アークセンサ50のCPU52は、電流検出器58による電気量としての溶接電流のサンプリングを開始する。このとき、CPU52は、ウィービング周期よりも短いサンプリング周期で、溶接電流のサンプリングを行う(S10)。ウィービング周期は、例えば、100msecオーダであり、それに対して、ウィービング正振幅領域及びウィービング負振幅領域における各溶接電流が複数個以上サンプリングできるようにウィービング周期よりも短い周期である。なお、以下では、説明の便宜上、ウィービング正振幅領域をウィービング左領域、ウィービング負振幅領域をウィービング右領域ということがある。【0039】  溶接トーチ11はウィービングが行われているが、サンプリング周期はウィービング周期よりも短いため、サンプリングされた溶接電流(値)は、ウィービング正振幅領域に位置するものと、ウィービング負振幅領域に位置するものが取得される。【0040】  そして、図4に示す区間K2から区間K5の間は、溶接トーチ11はウィービングしながら、各区間K2〜K5に設定されたシフト量で教示線Kから右又は左にシフトする。又、区間K6ではシフト無し区間となるため、溶接トーチ11は教示線K上を移動し、次の区間K7からK10の間は、溶接トーチ11は、各区間K7〜K10に設定されたシフト量で教示線Kから上又は下にシフトして教示線Kに沿って移動する。ここで、S10は移動工程に相当し、ロボット制御装置20は移動手段に相当する。【0041】  なお、一般に、溶接時においては、検出した溶接電流と目標設定値に基づいて、溶接トーチ11をシフトするが、本発明では、このような溶接電流と目標設定値に基づくシフトは行っておらず、予め設定された前記シフト量に基づいて行われている。すなわち、アークセンサ50のCPU52は、図4に示す動作軌道を溶接トーチ11が描くように、各区間K2〜K5、K7〜K10では、ロボット制御装置20に一定周期毎に前記各区間で設定されているシフト量を通知し続ける。又、溶接電流のサンプリング時には、そのサンプリング時と同期して予め設定されているウィービングの振幅をロボット制御装置20から受信する。これらサンプリングした溶接電流、及び振幅は、補助記憶回路60等の記憶手段に格納される。【0042】  教示線Kの全区間において溶接トーチ11の移動が終了すると、ロボット制御装置20からデータ取得モードの終了命令が発信され(S20)、CPU52はこれを受信すると、S30に移行する。【0043】  S30では、CPU52は、1ウィービング周期毎にウィービング正振幅領域とウィービング負振幅領域の各電流平均を算出するとともに、各領域の電流平均を算出した後、両者の差分値を算出する。本実施形態では、ウィービング周期を本発明の所定周期として該所定周期毎に、前記ウィービング正振幅領域と負振幅領域でサンプリングした溶接電流をそれぞれ平均化している。【0044】  ここで、S30は平均化工程に相当し、この処理を行うCPU52は、平均化手段に相当する。又、S30は、ウィービング正振幅領域とウィービング負振幅領域でサンプリングした溶接電流をそれぞれ平均化した値の一方を基準値として、他方との差分値を算出するようにしており、溶接トーチ11が左右方向にシフトした場合における、差分値算出工程に相当する。又、CPU52は差分値算出手段に相当する。【0045】  次のS40では、CPU52は、S30において算出した1ウィービング毎の差分値に基づき、区間K1〜K5毎に前記差分値の平均値を算出する。  ここで、S40は、溶接トーチ11が左右方向にシフトした場合における、区間毎の前記差分値の平均差分値を算出する平均差分値算出工程に相当し、CPU52は、平均差分値算出手段に相当する。【0046】  次のS50では、CPU52は、S40で区間K1〜K5毎に算出された差分値の平均値に基づいて、回帰直線(すなわち、近似直線)を算出する。【0047】【数1】  上記式(1)では、yは溶接トーチ11が左右方向にシフトした場合の電流差(差分値)であり、xはシフト量である。ahは、溶接トーチ11が左右方向にシフトした場合の傾きであり、感度(すなわち、物理量変換値)である。又、bhは溶接トーチ11が左右方向にシフトした場合の内部オフセット量である。前記式(1)からなる回帰直線は、シフト量と平均差分値の分布を回帰分析することにより求めることができる。【0048】  図5は、シフト量(mm)と電流差(A)との関係を示し、横軸はシフト量、縦軸は電流差を示す。同図において、説明の便宜上、シフト量は、hを1(mm)としたものであり、シフト量−1、−0.5、0、0.5、1のそれぞれにおいて、平均差分値が図5に示すように得られたものを折れ線で示したものである。この折れ線に近似する回帰直線を前述のようにして求めると、同図に示す直線となる。【0049】  このように回帰直線が得られると、左右に溶接トーチ11がシフトした場合の感度(物理量変換値)ahと内部オフセット量bhが求まる。  ここで、傾きahと、切片である内部オフセット量bhは、下記式(2)、式(3)で算出される。【0050】  ここで、xiは区間K1〜K5の各シフト量、yiは対応す各電流差を表す。【0051】【数2】【0052】【数3】  又、CPU52は、相関係数rhを下式(4)により算出する。【0053】【数4】  図6は、相関係数rhの概念を示す図である。同図に示すように、縦軸がy、横軸がxとなるデータ個数n個のデータ分布を想定した場合、相関係数rhは、上記式(4)となる。本実施形態では、CPU52は算出して得られた平均差分値に基づいて相関係数rhを算出する。【0054】  ただし、sxy、sx、syは下式(5)である。【0055】【数5】  前記のように求めた回帰直線の傾きが正の場合は1に近づくほど、負の場合は−1に近づくほど、散布状況と求めた回帰直線の相関性が高いといえる。【0056】  本実施形態のS50は、溶接トーチ11が左右方向にシフトした場合における、回帰直線及び相関係数取得工程に相当し、CPU52は、回帰直線及び相関係数取得手段に相当する。【0057】  次の、S60では、CPU52は、区間K6及び上下方向にシフトした区間K7〜K10において、1ウィービング周期毎に、溶接電流の電流平均を算出し、該算出した電流平均と、溶接電流の基準値である目標電流値との差分値を算出する。【0058】  ここで、S60は上下方向にシフトした場合、すなわち、教示線Kと左右にシフトする方向とは直交する方向にシフトした場合において、平均化工程に相当し、この処理を行うCPU52は、平均化手段に相当する。【0059】  又、S60は、前記算出した電流平均と、基準値である目標電流値との差分値を算出するようにしており、溶接トーチ11が上下方向にシフトした場合における、差分値算出工程に相当する。又、CPU52は上下方向にシフトした場合における差分値算出手段に相当する。【0060】  次のS70では、CPU52は、S60において算出した1ウィービング毎の差分値に基づき、区間K6〜K10毎に前記差分値の平均値を算出する。  ここで、S70は、溶接トーチ11が上下方向にシフトした場合における、区間毎の前記差分値の平均差分値を算出する平均差分値算出工程に相当し、CPU52は、平均差分値算出手段に相当する。【0061】  次のS80では、CPU52は、S70で区間K6〜K10毎に算出された差分値の平均値に基づいて、回帰直線(すなわち、近似直線)を算出する。【0062】【数6】  上記式(6)では、yは溶接トーチ11が上下方向にシフトした場合の電流差(差分値)であり、xはシフト量である。avは、上下方向に溶接トーチ11がシフトした場合の傾きであり、感度(すなわち、物理量変換値)である。又、bvは、上下方向に溶接トーチ11がシフトした場合の内部オフセット量である。前記式(6)からなる回帰直線は、式(1)と同様にシフト量と平均差分値の分布を回帰分析することにより求め、感度(物理量変換値)av、及び内部オフセット量bvを取得する。又、CPU52は、相関係数rhを算出したときと同様に、相関係数rvを算出する。【0063】  なお、本明細書で電流差とは、上述したようにシフト方向が左右の場合は、溶接トーチがウィービング正振幅した時とウィービング負振幅した時の平均電流値の両者の差分値をいう。又、シフト方向が、上下の場合は、電流差とは、平均電流値と目標電流値の差分値をいう。【0064】  本実施形態のS80は、溶接トーチ11が上下方向にシフトした場合における、回帰直線及び相関係数取得工程に相当し、CPU52は、回帰直線及び相関係数取得手段に相当する。【0065】  S90では、CPU52は、S50,S80で算出した相関係数rh,rvの大きさ、すなわち、相関の強さに基づいて求めたパラメータであるah,bh,av,bvの判定を行う。例えば、相関係数rh,rvが、評価基準±0.7〜±1.0、又は±0.4〜±0.7の間であれば、強い相関、又は、中程度の相関があると判定し、これらのパラメータの使用許可をロボット制御装置20に通知する設定を行う。又、相関係数rh,rvが、評価基準±0.2〜±0.4、又は0〜±0.2であれば、弱い相関、又はほとんど相関がないとして、前記パラメータの使用を禁ずる設定をする。なお、ここで示した評価基準の設定は例示であり、評価基準は適宜設定すればよい。【0066】  S90は、溶接トーチ11が左右方向にシフトした場合及び溶接トーチ11が上下方向にシフトした場合における評価工程に相当し、CPU52は評価手段に相当する。  次に、S100では、CPU52は、評価された前記パラメータと、評価結果をロボット制御装置20に通知し、S110では、試行溶接の終了を行う。【0067】  ロボット制御装置20は、通知されたパラメータの評価が、使用できると評価されていれば、試行ではなく実際のワークの開先に対してウィービングを行いながら溶接する際、前記ah,bh、avおよびbvを使用して、溶接トーチ11の左右および上下方向の補正を行う。【0068】  (溶接トーチのウィービング時における左右方向の補正)  溶接トーチ11がウィービングを行っている状態で、ウィービング中心位置の軌道が教示線から左右方向にずれた場合、溶接電流におけるウィービング正振幅領域(ウィービング左領域)とウィービング負振幅領域(ウィービング右領域)の電流差(すなわち、左右電流差分値)に影響が出る。この左右電流差分値を、溶接電流を検出しているアークセンサ50が算出し、ロボット制御装置20では、前記左右電流差分値に内部オフセット量bhを加算(或いは減算)して補正指令値とする。又、ロボット制御装置20では、傾きahを物理量変換値(すなわち、電流差分値ずれ補正量に変換する補正係数(ゲイン))として使用して、前記補正指令値を「アンペア(A)」から「(mm)」に変換する。この変換後の補正指令値を左右ゲイン調整Ghで調整して左右補正量(mm)として、マニピュレータ10に出力する。このようにして左右補正量は、内部オフセット量bhの影響を受けない補正量となる。【0069】  (溶接トーチのウィービング時における上下方向の補正)  図7(b)に示すように溶接トーチ11がウィービングを行っている状態で、ウィービング中心位置の軌道が教示線から上下方向にずれた場合、溶接電流の平均電流に影響が出る。この平均電流(A)と目標電流の差分値を、溶接電流を検出しているアークセンサ50が算出し、ロボット制御装置20では、前記差分値に内部オフセット量bvとを加算(或いは減算)して補正指令値とする。又、ロボット制御装置20では、傾きavを物理量変換値(すなわち、電流差分値をずれ補正量に変換する補正係数(ゲイン))として使用して、前記補正指令値を「アンペア(A)」から「(mm)」に変換する。この変換後の補正指令値を上下ゲイン調整Gvで調整して上下補正量(mm)として、マニピュレータ10に出力する。このようにして上下補正量は、内部オフセット量bvの影響を受けない補正量となる。【0070】  さて、上記のように構成された溶接ロボットシステムは、下記の特徴がある。  (1)  本実施形態のロボット用アークセンサの倣いパラメータの設定方法は、S10では、移動工程として、シフト量が異なる複数の区間K1〜K5(第1区間群)で区切られた教示線K上に沿って溶接トーチ11をウィービングしながら移動させる際、前記区間毎に定められているシフト量に応じて溶接トーチ11をシフトさせて移動させる。S30では、平均化工程として、区間K1〜K5毎に移動中の溶接トーチ11に供給され、サンプリング周期で、ウィービング正振幅領域と負振幅領域でそれぞれサンプリングされた溶接電流(電気量)を、前記サンプリング周期よりも長いウィービング周期を所定周期として該所定周期毎に、それぞれ平均化する。又、S30は、差分値算出工程として、前記平均化した値と基準値との差分値を算出する。この場合、S30ではウィービング正振幅領域と負振幅領域でサンプリングした溶接電流をそれぞれ平均化した値の一方を前記基準値として、他方との差分値を算出する。さらに、S40は、平均差分値算出工程として、前記区間K1〜K5毎の前記差分値の平均差分値を算出する。S50は、回帰直線及び相関係数取得工程として、前記区間K1〜K5毎の前記差分値の平均差分値に基づいて回帰直線及び該回帰直線と前記平均差分値との相関係数rhを求める。そして、S90は、評価工程として、前記回帰直線の傾きah、及び切片に関係する倣いに関するパラメータを前記相関係数rhに基づいて評価して、該パラメータを倣いパラメータとして設定する。【0071】  この結果、回帰直線の傾き、及び切片に関係する倣いに関するパラメータ、具体的には、溶接線倣いに使用されるゲイン及び補正量のパラメータの信頼性を高くして自動的に最適化できる。又、特に、本実施形態によれば、ウィービングを行う倣い溶接の際、教示線Kに対して溶接トーチ11が左右方向に補正する場合、教示線Kに対して溶接トーチ11の左右方向において、溶接線倣いに使用されるゲイン及び補正量のパラメータの信頼性を高くして自動的に最適化できる。【0072】  (2)  本実施形態のロボット用アークセンサの倣いパラメータの設定方法は、S10では、移動工程として、シフト量が異なる複数の区間K6〜K10(第2区間群)で区切られた教示線K上に沿って溶接トーチ11を移動させる際、前記区間K6〜K10毎に定められているシフト量に応じて溶接トーチ11をシフトさせて移動させる。この場合、教示線Kを中心にして溶接トーチ11の進行方向において教示線Kと左右にシフトする方向とは直交する方向(すなわち、上下方向)に溶接トーチ11をシフトさせる。S60では、平均化工程として、区間K6〜K10毎に移動中の溶接トーチ11に供給され、サンプリング周期でサンプリングされた溶接電流(電気量)を、前記サンプリング周期よりも長いウィービング周期(所定周期)毎に平均化する。又、S60では、差分値算出工程として、前記平均化した値と、基準値としての目標電流値との差分値を算出する。【0073】  さらに、S70は、平均差分値算出工程として、前記区間K6〜K10毎の前記差分値の平均差分値を算出する。S80は、回帰直線及び相関係数取得工程として、前記区間K6〜K10毎の前記差分値の平均差分値に基づいて回帰直線及び該回帰直線と前記平均差分値との相関係数rvを求める。そして、S90は、評価工程として、前記回帰直線の傾きav、及び切片に関係する倣いに関するパラメータを前記相関係数rvに基づいて評価して、該パラメータを倣いパラメータとして設定する。【0074】  この結果、本実施形態では、回帰直線の傾き、及び切片に関係する倣いに関するパラメータ、具体的には、溶接線倣いに使用されるゲイン及び補正量のパラメータの信頼性を高くして自動的に最適化できる。特に、本実施形態では、ウィービングを行う倣い溶接の際、教示線に対して溶接トーチの上下方向において補正する場合、溶接線倣いに使用されるゲイン及び補正量のパラメータの信頼性を高くして自動的に最適化できる。【0075】  (3)  本実施形態のアーク溶接ロボットシステムでは、ロボット制御装置20は、移動手段として、シフト量が異なる複数の区間K1〜K5(第1区間群)で区切られた教示線K上に沿って溶接トーチ11をウィービングしながら移動させる際、前記区間毎に定められているシフト量に応じて溶接トーチ11をシフトさせて移動させる。アークセンサ50のCPU52は、平均化手段として、区間K1〜K5毎に移動中の溶接トーチ11に供給され、サンプリング周期で、ウィービング正振幅領域と負振幅領域でそれぞれサンプリングされた溶接電流(電気量)を、前記サンプリング周期よりも長いウィービング周期を所定周期として該所定周期毎に、それぞれ平均化する。アークセンサ50のCPU52は、差分値算出手段として、前記平均化した値と基準値との差分値を算出する。この場合、CPU52は、ウィービング正振幅領域と負振幅領域でサンプリングした溶接電流をそれぞれ平均化した値の一方を前記基準値として、他方との差分値を算出する。アークセンサ50のCPU52は、平均差分値算出手段として、前記区間K1〜K5毎の前記差分値の平均差分値を算出する。又、アークセンサ50のCPU52は、回帰直線及び相関係数取得手段として、前記区間K1〜K5毎の前記差分値の平均差分値に基づいて回帰直線及び該回帰直線と前記平均差分値との相関係数rhを求める。そして、アークセンサ50のCPU52は、評価手段として、前記回帰直線の傾きah、及び切片に関係する倣いに関するパラメータを前記相関係数rhに基づいて評価して、該パラメータを倣いパラメータとして設定する。【0076】  この結果、回帰直線の傾き、及び切片に関係する倣いに関するパラメータ、具体的には、溶接線倣いに使用されるゲイン及び補正量のパラメータの信頼性を高くして自動的に最適化できるロボット用アークセンサの倣いパラメータの設定装置を提供できる。又、特に、本実施形態によれば、ウィービングを行う倣い溶接の際、教示線Kに対して溶接トーチ11が左右方向に補正する場合、教示線Kに対して溶接トーチ11の左右方向において、溶接線倣いに使用されるゲイン及び補正量のパラメータの信頼性を高くして自動的に最適化できるロボット用アークセンサの倣いパラメータの設定装置を提供できる。【0077】  (4)  本実施形態のアーク溶接ロボットシステムでは、ロボット制御装置20は、移動手段として、シフト量が異なる複数の区間K6〜K10(第2区間群)で区切られた教示線K上に沿って溶接トーチ11を移動させる際、前記区間K6〜K10毎に定められているシフト量に応じて溶接トーチ11をシフトさせて移動させる。この場合、教示線Kを中心にして溶接トーチ11の進行方向において教示線Kと左右にシフトする方向とは直交する方向(すなわち、上下方向)に溶接トーチ11をシフトさせる。【0078】  又、アークセンサ50のCPU52は、平均化手段として、区間K6〜K10毎に移動中の溶接トーチ11に供給され、サンプリング周期でサンプリングされた溶接電流(電気量)を、前記サンプリング周期よりも長いウィービング周期(所定周期)毎に平均化する。又、CPU52は、差分値算出手段として、前記平均化した値と、基準値としての目標電流値との差分値を算出する。【0079】  CPU52は、平均差分値算出手段として、前記区間K6〜K10毎の前記差分値の平均差分値を算出する。さらに、CPU52は、回帰直線及び相関係数取得手段として、前記区間K6〜K10毎の前記差分値の平均差分値に基づいて回帰直線及び該回帰直線と前記平均差分値との相関係数rvを求める。CPU52は、評価手段として、前記回帰直線の傾きav、及び切片に関係する倣いに関するパラメータを前記相関係数rvに基づいて評価して、該パラメータを倣いパラメータとして設定する。【0080】  この結果、本実施形態のアーク溶接ロボットシステムは、回帰直線の傾き、及び切片に関係する倣いに関するパラメータ、具体的には、溶接線倣いに使用されるゲイン及び補正量のパラメータの信頼性を高くして自動的に最適化できる。特に、本実施形態のアーク溶接ロボットシステムは、ウィービングを行う倣い溶接の際、教示線に対して溶接トーチの上下方向において補正する場合、溶接線倣いに使用されるゲイン及び補正量のパラメータの信頼性を高くして自動的に最適化できる。【0081】  (他の実施形態)  次に、他の実施形態を説明する。本実施形態は、TIG溶接を行うTIG溶接ロボットシステムに具体化したものである。なお、システムにおいて、前記実施形態と同一構成又は相当する構成については同一符号を付してその詳細な説明は省略する。【0082】  本実施形態では、図1に示すようにアークセンサ50の代わりにTIGアークセンサ50Aを使用する。この場合、図1において、溶接トーチ11は、TIG溶接を行うマニピュレータ10とし、図2において、アークセンサ50は、TIGアークセンサとして機能するものと理解されたい。なお、TIGアークセンサ50Aは、電流検出器58の代わりにワークWと溶接トーチ先端の電極間に発生する溶接電圧を検出する電圧センサ58Aとする。【0083】  又、本実施形態で教示される教示線Kは、図4に示す区間のうち、K1〜K6が省略されて、区間K0、K6〜K10の順で構成されているものとする。本実施形態の区間K6〜K10は第3区間群に相当する。【0084】  そして、図8のフローチャートにおいて、S10Aでは、ロボット制御装置20は、データ取得モードが開始されると、ロボット制御装置20は、開始の地点から溶接トーチ11を進行方向に向かって区間K0を移動し、区間K6に移動すると、アークセンサ50のCPU52は、電圧センサ58Aによる電気量としての溶接電圧のサンプリングを開始する。このとき、CPU52は、サンプリング周期で、溶接電流のサンプリングを行う。【0085】  又、S10A,S20が終了すると、S60Aでは、CPU52は、区間K6及び上下方向にシフトした区間K7〜K10において、サンプリング周期よりも長い所定周期毎に、溶接電圧の電圧平均を算出し、該算出した電圧平均と、溶接電圧の基準値である目標電圧値との差分値を算出する。なお、このサンプリング周期よりも長い所定周期は、各区間毎に、複数の溶接電圧値がサンプリングできる周期である。ここで、S60Aは上下方向にシフトした場合、すなわち、教示線Kと左右にシフトする方向とは直交する方向にシフトした場合において、平均化工程に相当し、この処理を行うCPU52は、平均化手段に相当する。【0086】  又、S60Aは、前記算出した電圧平均と、基準値である目標電圧値との差分値を算出するようにしており、溶接トーチ11が上下方向にシフトした場合における、差分値算出工程に相当する。又、CPU52は上下方向にシフトした場合における差分値算出手段に相当する。【0087】  次のS70Aでは、CPU52は、S60Aにおいて算出した前記所定周期毎の差分値に基づき、区間K6〜K10毎に前記差分値の平均値を算出する。ここで、S70Aは、溶接トーチ11が上下方向にシフトした場合における、区間毎の前記差分値の平均差分値を算出する平均差分値算出工程に相当し、CPU52は、平均差分値算出手段に相当する。【0088】  次のS80Aでは、CPU52は、S70で区間K6〜K10毎に算出された差分値の平均値に基づいて、回帰直線(すなわち、近似直線)を算出する。この算出は、前記実施形態と同様に行うことにより得られる。【0089】【数7】  上記式(7)では、yは溶接トーチ11が上下方向にシフトした場合の電圧差(差分値)であり、xはシフト量である。awは、上下方向に溶接トーチ11がシフトした場合の傾きであり、感度(すなわち、物理量変換値)である。又、bwは、上下方向に溶接トーチ11がシフトした場合の内部オフセット量である。前記式(7)からなる回帰直線は、式(1)と同様にシフト量と平均差分値の分布を回帰分析することにより求め、感度(物理量変換値)aw、及び内部オフセット量bwを取得する。又、CPU52は、相関係数rhを算出したときと同様に、相関係数rwを算出する。なお、本明細書で電圧差とは、平均電圧値(すなわち、前記電圧平均)と目標電圧値の差分値をいう。【0090】  本実施形態のS80Aは、溶接トーチ11が上下方向にシフトした場合における、回帰直線及び相関係数取得工程に相当し、CPU52は、回帰直線及び相関係数取得手段に相当する。【0091】  S90Aでは、CPU52は、S80Aで算出した相関係数rwの大きさ、すなわち、相関の強さに基づいて求めたパラメータであるaw,bwの判定を行う。例えば、相関係数rwが、評価基準±0.7〜±1.0、又は±0.4〜±0.7の間であれば、強い相関、又は、中程度の相関があると判定し、これらのパラメータの使用許可をロボット制御装置20に通知する設定を行う。又、相関係数rwが、評価基準±0.2〜±0.4、又は0〜±0.2であれば、弱い相関、又はほとんど相関がないとして、前記パラメータの使用を禁ずる設定をする。なお、ここで示した評価基準の設定は例示であり、評価基準は適宜設定すればよい。【0092】  S90Aは、溶接トーチ11が上下方向にシフトした場合における評価工程に相当し、CPU52は評価手段に相当する。  次に、S100Aでは、CPU52は、評価された前記パラメータと、評価結果をロボット制御装置20に通知し、S110Aでは、試行溶接の終了を行う。ロボット制御装置20は、通知されたパラメータの評価が、使用できると評価されていれば、試行ではなく実際のワークの開先に対して溶接する際、前記aw,bwを使用して溶接トーチ11の上下方向の補正を行う。【0093】  上記のように構成されたTIG溶接ロボットシステムは、下記の特徴がある。  (1)  本実施形態のロボット用アークセンサの倣いパラメータの設定方法では、シフト量が異なる複数の区間は、教示線Kを中心にして溶接トーチ11の進行方向及び前記教示線の左右方向とは直交する方向(すなわち、上下方向)にシフトするシフト量が異なる複数の区間からなる第3区間群を含む。S10Aでは、移動工程として、シフト量が異なる複数の区間K6〜K10(第3区間群)で区切られた教示線K上に沿って溶接トーチ11を移動させる際、前記区間K6〜K10毎に定められているシフト量に応じて溶接トーチ11をシフトさせて移動させる。この場合、教示線Kを中心にして溶接トーチ11の進行方向において教示線Kと左右にシフトする方向とは直交する方向(すなわち、上下方向)に溶接トーチ11をシフトさせる。そして、S60Aは、平均化工程として、溶接トーチ11に印加される溶接電圧を電気量としてサンプリング周期でサンプリングして、所定周期毎に、サンプリングした電圧を平均化する。又、S60Aは、差分値算出工程として、前記平均化した値と、基準値としての目標電圧値との差分値を算出する。さらに、S70Aは、平均差分値算出工程として、区間K6〜K10毎の前記差分値の平均差分値を算出する。S80Aは、回帰直線及び相関係数取得工程として、区間K6〜K10毎の前記差分値の平均差分値に基づいて回帰直線及び該回帰直線と前記平均差分値との相関係数rwを求める。そして、S90Aは、評価工程として、前記回帰直線の傾きaw、及び切片(bw)に関係する倣いに関するパラメータを前記相関係数rwに基づいて評価して、該パラメータを倣いパラメータとして設定する。【0094】  この結果、本実施形態では、TIG溶接の倣い溶接の際、教示線に対して溶接トーチの上下方向において、溶接線倣いに使用されるゲイン及び補正量のパラメータの信頼性を高くして自動的に最適化できるロボット用アークセンサの倣いパラメータの設定方法を提供できる。【0095】  (2)  本実施形態のTIG溶接ロボットシステムでは、ロボット制御装置20は、移動手段として、シフト量が異なる複数の区間K6〜K10(第3区間群)で区切られた教示線K上に沿って溶接トーチ11を移動させる際、前記区間K6〜K10毎に定められているシフト量に応じて溶接トーチ11をシフトさせて移動させる。この場合、教示線Kを中心にして溶接トーチ11の進行方向において教示線Kと左右にシフトする方向とは直交する方向(すなわち、上下方向)に溶接トーチ11をシフトさせる。そして、CPU52は、平均化手段として、溶接トーチ11に印加される溶接電圧を電気量としてサンプリング周期でサンプリングして、所定周期毎に、サンプリングした電圧を平均化する。又、CPU52は、差分値算出手段として、前記平均化した値と、基準値としての目標電圧値との差分値を算出する。さらに、CPU52は、平均差分値算出手段として、区間K6〜K10毎の前記差分値の平均差分値を算出する。又、CPU52は、回帰直線及び相関係数取得手段として、区間K6〜K10毎の前記差分値の平均差分値に基づいて回帰直線及び該回帰直線と前記平均差分値との相関係数rwを求める。そして、CPU52は、評価手段として、前記回帰直線の傾きaw、及び切片bwに関係する倣いに関するパラメータを前記相関係数rwに基づいて評価して、該パラメータを倣いパラメータとして設定する。【0096】  この結果、本実施形態によれば、TIG溶接の倣い溶接の際、教示線に対して溶接トーチの上下方向において、溶接線倣いに使用されるゲイン及び補正量のパラメータの信頼性を高くして自動的に最適化できるロボット用アークセンサの倣いパラメータの設定装置を提供できる。【0097】  なお、本発明の実施形態は以下のように変更してもよい。    前記実施形態では、第1区間群は、5つとしたが、シフト量が異なる区間の数は限定されるものでない。又、シフト量は、例えば、−1、−0.5、0、+0.5、+1の5段階としているが、複数段階は5段階に限定されるものではなく、段階数は限定されるものではない。【0098】    前記実施形態では、第2区間群は、5つとしたが、シフト量が異なる区間の数は限定されるものでない。    前記実施形態において、K1〜K5の順でデータ取りを行ったが、K1〜K5の順序は限定されるものではない。適宜順序を入れ替えても良い。【0099】    前記実施形態において、K6〜K10の順でデータ取りを行ったが、K6〜K10の順序は限定されるものではない。適宜順序を入れ替えても良い。【図面の簡単な説明】【0100】【図1】本発明を具体化した一実施形態の溶接ロボットシステムの概略構成図。【図2】同じく溶接ロボットシステムの電気ブロック図。【図3】同じくアークセンサのCPU52が実行するフローチャート。【図4】教示線Kの説明図。【図5】回帰直線の説明図。【図6】相関係数の概念の説明図。【図7】(a)、(b)はそれぞれ溶接トーチの左右方向の補正と、上下方向の補正を行う場合の概念図。【図8】他の実施形態のアークセンサのCPU52が実行するフローチャート。【符号の説明】【0101】  10…マニピュレータ、11…溶接トーチ、  20…ロボット制御装置(移動手段)、30…溶接電源、  40…ティーチペンダント、50…アークセンサ、  52…CPU(平均化手段、差分値算出手段、平均差分値算出手段、回帰直線及び相関係数取得手段、評価手段)。
【特許請求の範囲】【請求項1】  シフト量が異なる複数の区間で区切られた教示線上に沿って溶接トーチを溶接させながら移動させる際、前記区間毎に定められているシフト量に応じて前記溶接トーチをシフトさせて移動させる移動工程と、  前記区間毎に移動中の溶接トーチに供給されてサンプリングされた電気量を、該サンプリングする周期(以下、サンプリング周期という)よりも長い所定周期毎に平均化する平均化工程と、  該平均化した値と基準値との差分値を算出する差分値算出工程と、  前記区間毎の前記差分値の平均差分値を算出する平均差分値算出工程と、  前記区間毎の前記差分値の平均差分値に基づいて回帰直線及び該回帰直線と前記平均差分値との相関係数を求める回帰直線及び相関係数取得工程と、  前記回帰直線の傾き、及び切片に関係する倣いに関するパラメータを前記相関係数に基づいて評価して、該パラメータを倣いパラメータとして設定する評価工程を含むことを特徴とするロボット用アークセンサの倣いパラメータの設定方法。【請求項2】  前記移動工程では前記溶接トーチにウィービングさせ、  前記シフト量が異なる複数の区間は、前記教示線を中心にして前記溶接トーチの進行方向において左右にシフトするシフト量が異なる複数の区間(以下、第1区間群という)を含み、  前記平均化工程では、前記溶接トーチに供給される溶接電流を前記電気量として前記サンプリング周期で、ウィービング正振幅領域と負振幅領域でそれぞれサンプリングして、ウィービング周期を前記所定周期として該所定周期毎に、前記ウィービング正振幅領域と負振幅領域でサンプリングした溶接電流をそれぞれ平均化し、  前記差分値算出工程では、前記ウィービング正振幅領域と負振幅領域でサンプリングした溶接電流をそれぞれ平均化した値の一方を前記基準値として、他方との差分値を算出することを特徴とする請求項1に記載のロボット用アークセンサの倣いパラメータの設定方法。【請求項3】  前記シフト量が異なる複数の区間は、前記教示線を中心にして前記溶接トーチの進行方向において前記教示線と左右にシフトする方向とは直交する方向にシフトするシフト量が異なる複数の区間(以下、第2区間群という)を含み、  前記平均化工程では、前記溶接トーチに供給される溶接電流を前記電気量として前記サンプリング周期でサンプリングして、前記所定周期毎に、サンプリングした溶接電流を平均化し、  前記差分値算出工程では、前記平均化した値と、基準値としての目標電流値との差分値を算出することを特徴とする請求項1に記載のロボット用アークセンサの倣いパラメータの設定方法。【請求項4】  前記シフト量が異なる複数の区間は、前記教示線を中心にして前記溶接トーチの進行方向及び前記教示線の左右方向とは直交する方向にシフトするシフト量が異なる複数の区間(以下、第3区間群という)を含み、  前記平均化工程では、前記溶接トーチに印加される電圧を前記電気量として前記サンプリング周期でサンプリングして、前記所定周期毎に、サンプリングした電圧を平均化し、  前記差分値算出工程では、前記平均化した値と、基準値としての目標電圧値との差分値を算出することを特徴とする請求項1に記載のロボット用アークセンサの倣いパラメータの設定方法。【請求項5】  シフト量が異なる複数の区間で区切られた教示線上に沿って溶接トーチを溶接させながら移動させる際、前記区間毎に定められているシフト量に応じて前記溶接トーチをシフトさせて移動させる移動手段と、  前記区間毎に移動中の溶接トーチに供給されてサンプリングされた電気量を、該サンプリングする周期(以下、サンプリング周期という)よりも長い所定周期毎に平均化する平均化手段と、  該平均化した値と基準値との差分値を算出する差分値算出手段と、  前記区間毎の前記差分値の平均差分値を算出する平均差分値算出手段と、  前記区間毎の前記差分値の平均差分値に基づいて回帰直線及び該回帰直線と前記平均差分値との相関係数を求める回帰直線及び相関係数取得手段と、  前記回帰直線の傾き、及び切片に関係する倣いに関するパラメータを前記相関係数に基づいて評価して、該パラメータを倣いパラメータとして設定する評価手段を含むことを特徴とするロボット用アークセンサの倣いパラメータの設定装置。【請求項6】  前記シフト量が異なる複数の区間は、前記教示線を中心にして前記溶接トーチの進行方向において左右にシフトするシフト量が異なる複数の区間(以下、第1区間群という)を含み、  前記移動手段は前記溶接トーチをウィービングさせながら、前記第1区間群を移動させ、  前記平均化手段は、前記溶接トーチに供給される溶接電流を前記電気量として前記サンプリング周期で、ウィービング正振幅領域と負振幅領域でそれぞれサンプリングして、ウィービング周期を前記所定周期として該所定周期毎に、前記ウィービング正振幅領域と負振幅領域でサンプリングした溶接電流をそれぞれ平均化し、  前記差分値算出手段は、前記ウィービング正振幅領域と負振幅領域でサンプリングした溶接電流をそれぞれ平均化した値の一方を前記基準値として、他方との差分値を算出することを特徴とする請求項5に記載のロボット用アークセンサの倣いパラメータの設定装置。【請求項7】  前記シフト量が異なる複数の区間は、前記教示線を中心にして前記溶接トーチの進行方向において前記教示線と左右にシフトする方向とは直交する方向にシフトするシフト量が異なる複数の区間(以下、第2区間群という)を含み、  前記移動手段は、前記第2区間群を移動させ、  前記平均化手段は、前記溶接トーチに供給される溶接電流を前記電気量として前記サンプリング周期でサンプリングして、前記所定周期毎に、サンプリングした溶接電流を平均化し、  前記差分値算出手段は、前記平均化した値と、基準値としての目標電流値との差分値を算出することを特徴とする請求項5に記載のロボット用アークセンサの倣いパラメータの設定装置。【請求項8】  前記シフト量が異なる複数の区間は、前記教示線を中心にして前記溶接トーチの進行方向及び前記教示線の左右方向とは直交する方向にシフトするシフト量が異なる複数の区間(以下、第3区間群という)を含み、  前記平均化手段は、前記溶接トーチに印加される電圧を前記電気量として前記サンプリング周期でサンプリングして、前記所定周期毎に、サンプリングした電圧を平均化し、  前記差分値算出手段では、前記平均化した値と、基準値としての目標電圧値との差分値を算出することを特徴とする請求項5に記載のロボット用アークセンサの倣いパラメータの設定装置。
ロボット用アークセンサの倣いパラメータの設定方法、及びロボット用アークセンサの倣いパラメータの設定装置
