 Q: ドメインネームシステム(DNS)サービスとは何ですか?
DNSは、人が読み取り可能な名前(www.example.com など)を数字の IP アドレス(192.0.2.1など)に変換して、コンピュータが互いに接続できるようにします。インターネットの DNS システムは、名前と数値間のマッピングを管理することにより、電話帳のように働きます。DNS では、名前は覚えやすいドメイン名(www.example.com)で、数字はインターネット上のコンピュータの位置を特定する IP アドレス(192.0.2.1)です。DNS サーバーは、エンドユーザーがドメイン名をウェブブラウザに入力する際にどのサーバーに接続するかを管理しながら、ドメイン名のリクエストを IP アドレスに変換します。
Q: Amazon Route 53 とは何ですか?
Amazon Route 53 では、可用性と拡張性に優れたドメインネームシステム(DNS)、ドメイン名登録、ヘルスチェックの各ウェブサービスが提供されます。example.com のような名前を、コンピュータが互いに接続するための数字の IP アドレス(192.0.2.1 など)に変換することにより、開発者や企業がエンドユーザーをインターネットアプリケーションにルーティングする際に、極めて信頼性が高く、コスト効率のよい方法を提供するように設計されています。DNS をヘルスチェックサービスと合わせて使用することで、トラフィックを正常なエンドポイントにルーティングしたり、独立してエンドポイントをモニタリングしたり、アラームを設定したりすることができます。また、example.com のようなドメイン名を購入して管理したり、お客様のドメインの DNS 設定を自動的に構成したりできます。Route 53 は、Amazon EC2 インスタンス、Elastic Load Balancing ロードバランサー、Amazon S3 バケットなどの AWS で実行するインフラストラクチャにユーザーリクエストを効率的に接続します。これはユーザーを AWS 外のインフラストラクチャにルーティングするためにも使用できます。
Q: Amazon Route 53 でできることは何ですか?
Amazon Route 53 では、パブリック DNS レコードの作成と管理ができす。 Amazon Route 53 は、電話帳のように、インターネットの DNS 電話帳でドメイン名がリストアップされている IP アドレスを管理します。また、特定のドメイン名(www.example.com など)を対応する IP アドレス(192.0.2.1など)に変換するリクエストに返答します。Route 53 を使用して、新規ドメイン用に DNS レコードを作成したり、既存ドメインの DNS レコードを変換します。シンプルで標準的な REST API for Route 53 を使えば、DNS レコードの作成、更新、管理も簡単です。さらに、Route 53 には、アプリケーションだけでなく、ウェブサーバーやその他のリソースの正常性やパフォーマンスをモニタリングするヘルスチェック機能も用意されています。新しいドメイン名を登録したり、既存のドメイン名を移転して Route 53 で管理したりすることもできます。
Q: Amazon Route 53 を開始するにはどうすればよいですか?
Amazon Route 53 は、シンプルなウェブサービスインターフェイスで、数分で開始できます。DNS レコードは、AWS Management Console または Route 53 の API で設定する「ホストゾーン」にまとめられます。Route 53 を使うには、以下を行います。
サービスページの [登録] ボタンをクリックしてサービスを購入します。
ドメイン名が既にある場合は、以下を実行します。
AWS Management Console または CreateHostedZone API を使用して、ドメインの DNS レコードを格納できるホストゾーンを作成します。ホストゾーンが作成されると、高水準の可用性を約束するための、4 つの異なるトップレベルドメインで 4 つの Route 53 のネームサーバーを受信します。
また、AWS マネジメントコンソールまたは API を使用して、ドメイン名を移転して Route 53 で管理することもできます。
ドメイン名がない場合は、以下を実行します。
AWS マネジメントコンソールまたは API を使用して、新しいドメイン名を登録します。
Route 53 により、ドメインの DNS レコードを保存するホストゾーンが自動的に作成されます。また、高水準の可用性を約束するための、4 つの異なるトップレベルドメインでの 4 つの Route 53 のネームサーバーがお客様に送信されます。
ホストゾーンには、ドメインのクエリに返答する 4 つのバーチャルネームサーバーを含め、当初 DNS レコードの基本セットのデータが読み込まれます。AWS Management Console を使用して、または ChangeResourceRecordSet API を呼び出すことにより、このセットでレコードを追加、削除、または変更できます。サポートされる DNS レコードのリストは、ここでご覧になれます。
ドメイン名を Route 53 で管理していない場合、ドメイン名の登録に使用したレジストラを通知し、ドメインのネームサーバーをホストゾーンに関連付けられたネームサーバーに更新する必要があります。ドメイン名を Route 53 で既に管理している場合は、ドメイン名が、ゾーンをホストするネームサーバーに自動的に関連付けられます。
Q: Amazon Route 53 は高可用性と低いレイテンシーをどのように提供しますか?
Route 53 は、AWS の可用性と信頼性の高いインフラストラクチャを使用して構築しています。当社 DNS サーバーの世界的に分散された機能により、インターネットやネットワーク関連問題を迂回し、お客様のエンドユーザーをお客様のアプリケーションに転送する能力を安定して確保します。Route 53 は、重要なアプリケーションで要求されるレベルの信頼性を提供します。Route 53 は、全世界の DNS サーバーのグローバルエニーキャストネットワークを使用し、ネットワークの状況に応じて、お客様のユーザーを適切なロケーションに転送するように設計されています。その結果、お客様のエンドユーザーのクエリの待ち時間が削減されます。
Q: Amazon Route 53 サービスの DNS サーバー名は何ですか?
お客様に高可用性サービスを提供するために、Amazon Route 53 の各ホストゾーンは、そのゾーンのバーチャル DNS サーバーのセットによりサービスを受けています。 各ホストゾーンの DNS サーバー名は、そのホストゾーンが作成されるシステムにより割り当てられます。
Q: 既存のドメイン名の登録を既存のウェブトラフィックを中断せずに Amazon Route 53 に移転するには、どうすればよいでしょうか?
最初に、ドメイン名の DNS レコードデータのリストを取得します。リストは一般に、既存の DNS プロバイダーから取得可能な「ゾーンファイル」のフォーマットです。DNS レコードデータを取得したら、Route 53 のマネジメントコンソールまたは単にウェブサービスのインターフェイスを使用して、ドメイン名の DNS レコードを保存するためのホストゾーンを作成し、その移転プロセスに従います。このプロセスには、ドメイン名のネームサーバーを、ホストゾーンに関連付けられたネームサーバーに更新するステップなどが含まれます。ドメイン名の移転プロセスを完了するには、ドメイン名の登録に使用したレジストラに連絡し、その移転プロセスに従います。このプロセスには、ドメイン名のネームサーバーを、ホストゾーンに関連付けられたネームサーバーに更新するステップなどが含まれます。レジストラが新しいネームサーバーの委託を配布するとすぐに、お客様のエンドユーザーからの DNS クエリが Route 53 DNS サーバーにより返答を開始します。
Q: Amazon Route 53 はどの DNS レコードタイプをサポートしますか?
Amazon Route 53 は現在、以下の DNS レコードタイプをサポートしています。
A(アドレスレコード)
AAAA(IPv6 アドレスレコード)
CNAME(正規名レコード)
MX(メール交換レコード)
NS(ネームサーバーレコード)
PTR(ポインターレコード)
SOA(管理情報の始点レコード)
SPF(センダー ポリシー フレームワーク)
SRV(サービス ロケーター)
TXT(テキストレコード)
加えて、Route 53 は「エイリアス」レコードを提供します(Route 53 固有の仮想レコード)。エイリアスレコードの用途は、ホストゾーン内のリソースレコードセットを、Elastic Load Balancing ロードバランサー、CloudFront ディストリビューション、またはウェブサイトとして設定されている S3 バケットにマッピングすることです。エイリアスレコードは CNAME レコードのように機能するので、DNS 名(example.com)を別の「ターゲット」DNS 名(elb1234.elb.amazonaws.com)にマッピングできます。それらはリソルバーに表示されていないという点で、CNAME レコードと異なります。リソルバーには、A レコードと結果として生じるターゲットレコードの IP アドレスだけが表示されます。
今後さらに多くのレコードタイプを追加する予定です。
Q: Amazon Route 53 はワイルドカードエントリをサポートしますか? サポートする場合は、どのレコードタイプをサポートしますか?
はい。ドメインへの DNS 設定をしやすくするために、Amazon Route 53 は、すべてのレコードタイプに対してワイルドカードエントリをサポートします。ワイルドカードエントリは、DNS ゾーンのレコードで、設定に基づき、ドメイン名のリクエストを一致させます。例えば、*.example.com などのワイルドカード DNS は、クエリ www.example.com と subdomain.example.com に一致します。
Q: Amazon Route 53 は、加重ラウンドロビン(WRR)をサポートしていますか?
はい。加重ラウンドロビンにより、異なる応答が提供される頻度を指定するために、リソースレコードセットにその量を割り当てることができます。ソフトウェアの変更を加えたサーバーへトラフィックの一部を送信して A/B テストを行うのに、この機能を使用することができます。例えば、加重3と加重1の、1つ DNS 名に関連付けられている2つのレコードがあるとします。この場合、Route 53 の75%の時間は加重3のレコードセットに返答し、Route 53 の25%の時間は加重1のレコードセットに返答されます。0〜255の間で加重を指定できます。
Q: Elastic Load Balancing で zone apex(www.example.com ではなく example.com)を指定することはできますか?
はい。Amazon Route 53 には、「エイリアス」レコードと呼ばれる特別なタイプのレコードがあり、これを利用して zone apex(example.com)DNS 名を ELB DNS 名(つまり、elb1234.elb.amazonaws.com)にマッピングできます。Elastic Load Balancing に関連付けられている IP アドレスは、拡張、縮小、ソフトウェア更新などのためにいつでも変更することができます。Route 53 にエイリアスレコードをリクエストすると、ロードバランサーの IP アドレスが 1 つ以上返されます。Elastic Load Balancing にマッピングされているエイリアスレコードに対するクエリは無料です。このようなクエリは、Amazon Route 53 の使用状況レポートに「Intra-AWS-DNS-Queries」として記載されます。
Q: Amazon S3 上でホスティングされているウェブサイトで zone apex(www.example.com ではなく example.com)を指定することはできますか?
はい。Amazon Route 53 には、「エイリアス」レコードと呼ばれる特別なタイプのレコードがあり、これを利用して zone apex(example.com)DNS 名を Amazon S3 ウェブサイトバケット(つまり example.com.s3-website-us-west-2.amazonaws.com)にマッピングできます。Amazon S3 ウェブサイトエンドポイントに関連付けられている IP アドレスは、拡張、縮小、ソフトウェア更新などのためにいつでも変更できます。Route 53 は、エイリアスレコードのリクエストを受け取ると、応答としてバケットの IP アドレスを 1 つ返します。クエリの対象がエイリアスレコードであり、そのマッピング先が、ウェブサイトとして設定されている S3 バケットである場合は、クエリに対する Route 53 の料金は発生しません。このようなクエリは、Amazon Route 53 の使用状況レポートに「Intra-AWS-DNS-Queries」として記載されます。
Q: Amazon CloudFront ディストリビューションで zone apex を指定できますか(例: www.example.com ではなく example.com)?
はい。Amazon Route 53 には、「エイリアス」レコードと呼ばれる特別なタイプのレコードがあり、これを利用して zone apex(example.com)DNS 名を Amazon CloudFront ディストリビューション(d123.cloudfront.net など)にマッピングできます。Amazon CloudFront のエンドポイントの IP アドレスは、(エンドユーザーを最寄りの CloudFront エッジロケーションに転送するため)エンドユーザーのロケーションによって変更されるほか、拡張、縮小、またはソフトウェア更新によって随時変更される可能性があります。Route 53 は、エイリアスレコードのリクエストを受け取ると、応答としてディストリビューションの IP アドレスを返します。Route 53 では、CloudFront ディストリビューションにマッピングされているエイリアスレコードへのクエリは課金されません。このようなクエリは、Amazon Route 53 の使用状況レポートに「Intra-AWS-DNS-Queries」として記載されます。
Q: サブドメインで「エイリアスレコード」を使用することはできますか?
はい。エイリアスレコードは、サブドメイン(www.example.com、pictures.example.com など)をELB ロードバランサーや CloudFront ディストリビューション、S3 ウェブサイトバケットにマッピングするときにも使用できます。
Q: Amazon Route 53 は DNSSEC をサポートしていますか?
いいえ。現時点では、Amazon Route 53 は DNSSEC をサポートしていません。
Q: Amazon Route 53 はウェブサイトホスティングも提供しますか?
いいえ。Amazon Route 53 は、権威ある(authoritative)DNSサービスであり、ウェブサイトホスティングを提供しません。ただし、静的ウェブサイトをホストするには、Amazon Simple Storage Service(Amazon S3)を使用することができます。動的ウェブサイトやその他のウェブアプリケーションをホストするには、Amazon Elastic Compute Cloud(Amazon EC2)を使います。従来のウェブホストソリューションと比較して、柔軟性とコントロールに優れ、大幅なコスト削減をもたらします。Amazon EC2 の詳細については、ここをご覧ください。静的なウェブサイトでも動的なウェブサイトでも、Amazon CloudFront を使用すれば、全世界のエンドユーザーに対して低いレイテンシーで配信を行うことができます。Amazon CloudFront の詳細については、ここをご覧ください。
Q: Amazon Route 53 を Amazon Simple Storage Service(Amazon S3)と Amazon CloudFront でどのように使用しますか?
Amazon CloudFront で配信されているウェブサイトまたは Amazon S3 でホストされている静的ウェブサイトでは、Amazon Route 53 サービスを使用して、CloudFront ディストリビューションまたは S3 ウェブサイトバケットを指すエイリアスレコードをドメインに作成することができます。静的なウェブサイトをホストするよう設定されていない S3 バケットには、ドメイン用の CNAME レコードと Amazon S3 バケット名を作成できます。いずれの場合も、お客様のドメイン名とバケットまたは配布用 AWS ドメイン名との間のエイリアスを確実に確立するには、代替のドメイン名エントリを使用して、S3 バケット名または CloudFront 配布名をそれぞれ設定する必要があります。
静的なウェブサイトをホストするよう設定されている CloudFront ディストリビューションおよび S3 バケットには、CNAME を使用する代わりに、CloudFront ディストリビューションまたは S3 ウェブサイトバケットにマッピングされる「エイリアス」レコードを作成することをお勧めします。エイリアスレコードには 2 つの利点があります。1 つは、CNAME とは異なり、エイリアスレコードは zone apex(例えば、www.example.com ではなく example.com)に対しても作成できることです。もう 1 つは、エイリアスレコードへのクエリは無料であることです。
Q: Amazon Route 53 上の DNS 設定の変更はどのくらい速く世界中に広まりますか?
Amazon Route 53 は、通常の状況では60秒以内に DNS レコードへのアップデートを全世界の権威ある(authoritative)DNS サーバーのネットワークに広めます。API が INSYNC ステータスリストを返すと、変更が全世界に広まっていることを意味します。
DNS リソルバーは、Amazon Route 53 サービスのコントロール外にあり、活動時間(TTL)に合わせてリソースレコードセットをキャッシュします。 INSYNC または PENDING ステータスの変更とは、Route 53 の権威ある(authoritative)DNS サーバーの状況のみを意味します。
Q: Amazon Route 53 はエニーキャストネットワークを使用しますか?
はい。エニーキャストは、ネットワーキングとルーティングのテクノロジーで、お客様のエンドユーザーの DNS クエリが、任意のネットワーク状況下で最適化された Route 53 ロケーションから返信されるサポートをします。その結果、Route 53 はお客様のユーザーに高可用性をもたらし、パフォーマンスが改善されます。
Q: 各種レコードタイプのデフォルト TTL は何ですか? これらの値は変更できますか?
DNS リソルバーが返答をキャッシュする時間の長さは、各レコードに関連付けられた存続時間(TTL)と呼ばれる値によって設定されます。Amazon Route 53 には、いずれかのレコードタイプのデフォルトの TTL はありません。キャッシュする DNS リソルバーが TTL を介して DNS レコードを指定した時間の長さにキャッシュされるように、各レコードの TTL を常に指定する必要があります。
Q:ドメインとホストゾーンの違いは何ですか?
ドメインは、一般的な DNS の概念です。ドメイン名は、容易に認識可能なインターネットリソース名で、数字でアドレスが割り当てられます。例えば amazon.com はドメインです。ホストゾーンは、Amazon Route 53 の概念です。 ホストゾーンは、従来の DNS ゾーンファイルと類似しています。シングルの親ドメイン名に属し、まとめて管理可能なレコードの集合を表します。ホストゾーン内のすべてのリソースレコードセットは、ホストゾーンのドメイン名をサフィックスとして持っていなければなりません。例えば、amazon.com ホストゾーンには、www.amazon.com と www.aws.amazon.com という名前のレコードが含まれますが、www.amazon.ca は含まれません。Route 53 マネジメントコンソールまたは API は、ホストゾーンの作成、調査、修正、削除に使用できます。また、Route 53 マネジメントコンソールまたは API を使用して、新しいドメイン名を登録したり、既存のドメイン名を移転して Route 53 で管理したりすることもできます。
Q: リソースレコードセットに対する変更はトランザクショナルですか?
はい。トランザクショナルな変更は、変更が首尾一貫し、信頼性が高く、他の変更とは無関係です。Amazon Route 53 は、変更が個別の DNS サーバー上で完全に終了するか、または全く行われないように設計されています。これにより、DNS クエリは常に着実に返信されます。目的地サーバー間のフリッピングなどの変更時には重要です。API を使用する際、ChangeResourceRecordSets への各呼び出しは、変更ステータスのトラッキングに使うことができる識別子を返します。ステータスが INSYNC とレポートされると、変更はすべての Route 53 サーバーで実施されます。
Q: Amazon Route 53 の利用料金はいくらですか?
Amazon Route 53 の利用料金は、ホストゾーン、クエリ、ヘルスチェック、およびドメイン名のサービスの実際の利用状況に応じて決まります。詳細については、Amazon Route 53 の料金表のページをご覧ください。
使用料金は従量課金制となっています。最低料金、最低使用量、超過使用量は課されません。AWS 簡易見積りツールを使用して、月間の請求額を見積もることができます。
Q: Amazon Route 53 でドメイン名を登録できますか?
はい。AWS マネジメントコンソールまたは API を使用して、Route 53 で新しいドメイン名を登録できます。また、他のレジストラから既存のドメイン名を移転して Route 53 で管理するようにリクエストすることもできます。ドメイン名登録サービスは、ドメイン名登録の利用規約に基づいて提供されます。
Q: Amazon Route 53 でドメインを管理するには、どのタイプのアクセスコントロールを設定できますか?
Amazon Route 53 ホストゾーンへの管理アクセスをコントロールするには、AWS Identity and Access Management(IAM)サービスを使用します。AWS IAM を使えば、複数ユーザーを作成し、AWS Account 内で各ユーザーのユーザー権限を管理することにより、お客様の組織で DNS レコードを変更するユーザーをコントロールできます。ここで、AWS の詳細をご覧ください。
Q: 同じドメイン名で複数のホストゾーンを作成できますか?
はい。複数のホストゾーンを作成すると、DNS 設定を「テスト」環境で検証し、「プロダクション」ホストゾーンで設定を複製できます。例えば、ホストゾーン Z1234 は、example.com のテストバージョンで、ネームサーバー ns-1、 ns-2、 ns-3、ns-4 上にホストされます。同様に、ホストゾーン Z5678 は、example.com のプロダクションバージョンであり、ns-5、 ns-6、 ns-7、ns-8 上にホストされます。各ホストゾーンには、そのゾーンに関連するネームサーバーのバーチャルセットがあるため、Route 53 は DNS クエリに送信するネームサーバーに応じて、別々に example.com の DNS クエリに返信します。
Q: Amazon Route 53 を使用して管理可能なホストゾーン数に制限はありますか?
各 Amazon Route 53 アカウントでは、ホストゾーンが最大 500、各ホストゾーンに付きリソースレコードセットが 10,000 に制限されています。制限値の変更については、こちらから申請してください。2 営業日以内に返答いたします。
Q: Amazon Route 53 は IPv6 をサポートしますか?
Amazon Route 53 は、フォワード(AAAA)とリバース(PTR)IPv6 のレコードを両方サポートします。 ただし、Route 53 サービス自体は、現在 IPv6 上では利用できません。
Q: 複数の IP アドレスを単一のレコードと関連付けられますか?
はい。複数の IP アドレスの単一のレコードへの関連付けは、地理的に分散されたウェブサーバーの負荷のバランスを取るために使用されます。Amazon Route 53 は、Aレコードに対して複数の IP アドレスを一覧表示し、構成された IP アドレスのリストを使って DNS リクエストに返信します。 
Q: Amazon Route 53 を使用して組織のプライベート IP アドレスを管理できますか?
Amazon Route 53 は、現在プライベート DNS サービスを提供していません。Route 53 ではプライベート IP アドレス(RFC5735からのアドレス)を返す DNS レコードを定義できます。ただし、これらのレコードは、それ自体がプライベートではなく、依頼者がレコード名を知っている場合は、値をクエリします。
Q: Amazon Route 53 に登録していますが、サービスを利用しようとすると、「サービスの登録には AWS アクセスキー ID が必要です」と表示されます。
新しい AWS サービスにサインアップいただく際、アクティベーションが完了するまでに最大24時間かかる場合があります。この間は、再度サービスにサインアップすることができません。24時間経ってもアクティベーションの確認Eメールを受信しない場合は、お客様のアカウントもしくはお支払い詳細の認可に問題が発生している可能性があります。こちらから AWS カスタマーサービスにご連絡ください。
Q: Amazon Route 53 のレイテンシーベースルーティング(LBR)は、どのような機能ですか?
Amazon Route 53 に新たに追加された LBR(Latency Based Routing)機能は、グローバルにユーザーが分散するアプリケーションのパフォーマンスを高めるのに役立ちます。アプリケーションを複数の AWS リージョンで、世界各地の多数のエッジロケーションを使用して実行するときに Amazon Route 53 を利用すると、エンドユーザーからのリクエストは、レイテンシーが最小の AWS リージョンにルーティングされます。
Q: Amazon Route 53 のレイテンシーベースルーティング(LBR)の利用を開始するには、どうすればよいですか?
Amazon Route 53 の新しい LBR 機能の利用を開始するのは簡単です。AWS Management Console からでも、単純な API からでも可能です。レコードセットを作成し、この中でさまざまな AWS エンドポイントの IP アドレスまたは ELB 名を指定し、そのレコードセットを「LBR 対応レコードセット」と指定してください(加重レコードセットと指定するのと同様です)。後の処理は、Amazon Route 53 によって自動的に行われます。リクエストごとに最適なエンドポイントを特定し、それに応じてエンドユーザーからのリクエストをルーティングします。Amazon のグローバルコンテンツ配信サービスである Amazon CloudFront の機能によく似ています。レイテンシーベースルーティングの使用方法の詳細については、Amazon Route 53 Developer Guideをご覧ください。
Q: Route 53 のレイテンシーベースルーティング(LBR)機能の料金はどのくらいですか?
AWS の他のサービスと同様に、Amazon Route 53 と LBR を使用するときも、前払い金や長期契約は不要です。お支払いいただくのは、実際に使用したホストゾーンとクエリに対する料金のみです。レイテンシーベースルーティングのクエリに対する料金の詳細については、Amazon Route 53 の料金表のページをご覧ください。
Q: Amazon Route 53 の Geo DNS 機能とは何ですか?
Route 53 の Geo DNS では、リクエスト元の地理的な場所に基づいて、リクエストを特定のエンドポイントに転送することで負荷を均等に分散できます。Geo DNS では、ローカライズされたコンテンツをカスタマイズできます(詳細ページを適切な言語で提示する、コンテンツのディストリビューションをライセンス許可した市場のみに制限するなど)。また、Geo DNS を使用すると、予測可能な管理しやすい方法でエンドポイント全体に負荷を分散でき、各エンドユーザーの位置を一貫して同じエンドポイントにルーティングすることができます。Geo DNS には 3 つのレベルの地理的粒度(大陸、国、州)とグローバルレコードが用意されています。グローバルレコードは、エンドユーザーの位置が作成したいずれの Geo DNS レコードにも一致しない場合に使用できます。Geo DNS を、レイテンシーベースルーティングや DNS フェイルオーバーなどの他のルーティングタイプと組み合わせて、さまざまな低レイテンシー/フォルトトレラントアーキテクチャを実現することもできます。各種ルーティングタイプの構成方法の詳細については、Amazon Route 53 のドキュメントをご覧ください。
Q: Amazon Route 53 の Geo DNS 機能の利用を開始するには、どうすればよいでしょうか?
Amazon Route 53 の Geo DNS 機能の利用を開始するのは簡単です。AWS マネジメントコンソールからでも、Route 53 API からでも可能です。レコードセットを作成し、そのレコードセットに適切な値を指定して Geo DNS 対応レコードセットとしてマーキングし、レコードに適用する地理的な地域(グローバル、大陸、国、または州)を選択するだけです。Geo DNS の使用方法の詳細については、Amazon Route 53 Developer Guide をご覧ください。
Q: Geo DNS の利用時に、「グローバル」レコードは必要ですか?このレコードは、Route 53 でいつ返されますか?
はい、グローバルレコードを構成することを強くお勧めします。これにより、エンドユーザーが位置する各大陸、国、または州の特定のレコードを作成していたとしても、Route 53 がすべての可能性のある場所からの DNS クエリに返答できるようになります。Route 53 は、次の場合に、グローバルレコードに含まれる値を返します。
DNS クエリが Route 53 の Geo IP データベースで識別されない IP アドレスからのものである場合。
DNS クエリが、作成した Geo DNS レコードのいずれにも含まれない場所からのものである場合。
Q: 大陸に指定した Geo DNS レコードとは異なる Geo DNS レコードをその大陸内の国に指定できますか?または、国に指定した Geo DNS レコードとは異なる Geo DNS レコードをその国内の州に指定できますか?
はい、Geo DNS レコードは重複する地理的地域(ある大陸とその大陸内の国、またはある国とその国内の州など)に対して指定できます。各エンドユーザーの場所について、Route 53 は、その場所を含む最も詳細な Geo DNS レコードを返します。つまり、対象のエンドユーザーの場所について、Route 53 は最初に州レコードを返し、州レコードが見つからない場合、国レコードを返します。国レコードが見つからない場合は大陸レコードを返します。大陸レコードが見つからない場合はグローバルレコードを返します。
Q: Route 53 の Geo DNS 機能の利用料金を教えてください。
AWS の他のサービスと同様に、Amazon Route 53 と Geo DNS を使用するときも、前払い金や長期契約は不要です。お支払いいただくのは、実際に使用したホストゾーンとクエリに対する料金のみです。Geo DNS クエリに対する料金の詳細については、Amazon Route 53 の料金表のページをご覧ください。
Q: Amazon Route 53 はサービスレベルアグリーメント(SLA)を提供しますか?
はい。Amazon Route 53 SLA では、任意の請求期間中にお客様の月間使用可能時間の割合が、当社のサービス義務を下回る場合は、サービスクレジットを提供しています。詳細については、こちらをご覧ください。
Q: DNS フェイルオーバーとは何ですか?
DNS フェイルオーバーは、「ヘルスチェック」と「フェイルオーバー」の 2 つの要素で構成されます。ヘルスチェックとは自動化されたリクエストであり、インターネットを介してお客様のアプリケーションに送信されます。この目的は、アプリケーションが到達可能で、使用可能で、機能していることを確認することです。このヘルスチェックは、アプリケーションのユーザーからの典型的なリクエスト(例えば、特定 URL のウェブページをリクエスト)に似たものとなるように設定することもできます。DNS フェイルオーバーを利用すると、リソースが正常な状態で外部から到達可能である場合にのみ、そのリソースに対する回答が返されるようになります。お客様のアプリケーションの中に正常に動作していない部分がある場合は、その部分へのエンドユーザーからのアクセスは別の場所にルーティングされます。
Q: DNS フェイルオーバーの使用を開始するには、どうすればよいですか?
始めるための詳しい情報については、『Amazon Route 53 Developer Guide』をご覧ください。DNS フェイルオーバーの設定は、Route 53 コンソールから行うこともできます。
Q: DNS フェイルオーバーは、Elastic Load Balancing(ELB)エンドポイントをサポートしますか?
はい。Elastic Load Balancing(ELB)の DNS フェイルオーバーを設定することができます。ELB エンドポイントの DNS フェイルオーバーを有効にするには、ELB を指定したエイリアスレコードを作成し、「Evaluate Target Health」パラメータを true に設定します。Route 53 が ELB のヘルスチェックを自動的に作成し、管理します。Route 53 による ELB ヘルスチェックを独自に作成する必要はありません。ユーザーが ELB のリソースレコードセットを独自のヘルスチェックに関連付ける必要もありません。ユーザーに代わって Route 53 が管理するヘルスチェックに、リソースレコードセットが自動的に関連付けられます。また、ELB ヘルスチェックは、その ELB の背後にあるバックエンドインスタンスの状態を継承します。ELB エンドポイントで DNS フェイルオーバーを使用する方法について詳しくは、Route 53 Developer Guide を参照してください。
Q: ヘルスチェック不合格のときにのみバックアップサイトを使用するように設定することはできますか?
はい。DNS フェイルオーバーを使用すると、バックアップサイトを用意しておいて(例えば、静的サイトを Amazon S3 ウェブサイトバケット上で運用する)、プライマリサイトが到達不可能になったときに、このバックアップサイトにフェイルオーバーさせることができます。
Q: どの DNS レコードタイプを Route 53 のヘルスチェックと関連付けることができますか?
SOA および NS レコード以外の、Route 53 でサポートされるレコードタイプを関連付けることができます。
Q: エンドポイントのヘルスチェックは、その IP アドレスが不明でも実行できますか?
はい。独自にヘルスチェックを作成しなくても、Amazon Route 53 コンソールから、Elastic Load Balancingおよび Amazon S3 ウェブサイトバケットの DNS フェイルオーバーを設定できます。このようなエンドポイントタイプについては、ユーザーに代わって Route 53 がヘルスチェックを自動的に作成し、管理します。このヘルスチェックは、ユーザーが ELB または S3 ウェブサイトバケットを指定したエイリアスレコードを作成し、エイリアスレコードで [Evaluate Target Health] パラメータを有効にすると使用されます。
その他すべてのエンドポイントについては、DNS 名(www.example.com など)か、またはエンドポイントの IP アドレス(そのエンドポイントのヘルスチェックを作成する場合)を指定できます。
Q: エンドポイントの 1 つが AWS の外部にあります。このエンドポイントに対して DNS フェイルオーバーを設定できますか?
はい。Route 53 リソースレコードを作成するときに AWS 外部のアドレスを指定できるのと同様に、ヘルスチェックの対象として、アプリケーションのうち、AWS の外部で実行される部分を指定することができます。エンドポイントの場所にかかわらず、どのエンドポイントへのフェイルオーバーも可能です。例えば、レガシーのアプリケーションが AWS 外部のデータセンターで実行されており、そのアプリケーションのバックアップインスタンスが AWS 内部で実行されているとします。AWS 外部で実行されるレガシーアプリケーションのヘルスチェックをセットアップしておき、アプリケーションのヘルスチェックが不合格となったときに、自動的に AWS 内のバックアップインスタンスにフェイルオーバーすることができます。
Q: フェイルオーバーが発生した時点で正常なエンドポイントが複数残っている場合は、障害状態のエンドポイントからのトラフィック送信先を Route 53 が決定するときに、正常なエンドポイントの負荷は考慮されるのですか?
いいえ。Route 53 は、ルーティングに関する決定を行うときに、エンドポイントの負荷やトラフィックキャパシティの空きを考慮しません。障害状態となったエンドポイントに向かっていたトラフィックを処理できるようにするには、他のエンドポイントのキャパシティの空きがあることや、エンドポイントのスケーリングが可能であることの保証を、お客様側で行っていただく必要があります。
Q: ヘルスチェックによる監視が連続して何回失敗すると、エンドポイントは「障害状態」と見なされますか?
デフォルトのヘルスチェックによる監視のしきい値は 3 回です。3 回連続してエンドポイントのヘルスチェックに失敗すると、Route 53 はエンドポイントを障害状態と見なします。ただし、そのエンドポイントに対するヘルスチェックは引き続き実行され、再び合格すると、そのエンドポイントへのトラフィック送信が再開されます。このしきい値は 1 から 10 回の値に変更できます。詳しくは、Amazon Route 53 開発者ガイドを参照してください。
Q: 障害状態のエンドポイントが再び正常状態となったときに、DNS フェイルオーバーはどのようにして反転されるのですか?
障害状態のエンドポイントが、ヘルスチェックを作成するときに指定したヘルスチェックによる監視の回数(デフォルトのしきい値は 3 回)に連続して合格すると、Route 53 は DNS レコードを自動的に復元し、そのエンドポイントに対するトラフィックは再開されます。お客様が何か操作する必要はありません。
Q: ヘルスチェックによる監視の間隔はどれくらいですか?
ヘルスチェックによる監視は、デフォルトで 30 秒間隔で行われます。必要に応じて、10 秒という短い監視間隔を選択できます。
ヘルスチェックの監視間隔が 3 倍速くなるため、Route 53 がエンドポイントの障害状態をすばやく確認し、DNS フェイルオーバーに必要な時間が短縮され、エンドポイントの障害に対応してトラフィックをリダイレクトできるようになります。
このような短いヘルスチェック間隔にすると、エンドポイントに対するリクエスト数も 3 倍になります。この点は、エンドポイントのウェブトラフィックに対応する容量が制限されている場合、考慮事項の 1 つになる可能性があります。短いヘルスチェック間隔と他のオプションのヘルスチェック機能の料金の詳細については、Route 53 の料金表のページを参照してください。詳しくは、Amazon Route 53 開発者ガイドを参照してください。
Q: ヘルスチェックによってエンドポイント(ウェブサーバーなど)には、どのくらいの負荷が生じますか?
各ヘルスチェックは、世界中の複数の場所から実行されます。各場所では、選択した間隔で独立してエンドポイントが確認されます(デフォルトは 30 秒間隔、必要に応じて 10 秒間隔)。現在のヘルスチェック場所の数に基づくと、標準のヘルスチェック間隔の場合、エンドポイントは平均して 2～3 秒ごとに 1 リクエストを受け取り、短いヘルスチェック間隔の場合は 1 秒につき 1 件以上のリクエストを受け取ります。今後、ヘルスチェックを行なう場所の数は変わる可能性があることにご留意ください。
Q: Route 53 のヘルスチェックは HTTP リダイレクトにしたがいますか?
いいえ。Route 53 のヘルスチェックでは、HTTP の 3xx コードを成功応答と見なします。そのため、リダイレクトにしたがいません。これにより、文字列マッチングのヘルスチェックの場合は、予期しない結果になる可能性があります。ヘルスチェックは、指定した文字列をリダイレクトの本文から検索します。ヘルスチェックはリダイレクトにしたがわないため、リダイレクトが指す場所にリクエストを送信しません。また、その場所から応答を受け取りません。文字列マッチングのヘルスチェックの場合、HTTP リダイレクトを返す場所のヘルスチェックを指定することは避けることをお勧めします。
Q: フェイルオーバーが発生したときは、どのような順序でイベントが実行されるのですか?
要約すると、ヘルスチェックが不合格となってフェイルオーバーが発生した場合は次のイベントが実行されます。
Route 53 によって、アプリケーションのヘルスチェックが実行されます。この例では、アプリケーションは 3 回連続してヘルスチェックに不合格となり、次のイベントがトリガーされます。
Route 53 によって、障害状態のエンドポイントのリソースレコードが無効化されます。それ以降は、そのレコードが返されることはありません。これがフェイルオーバーのステップであり、これ以降、トラフィックは障害状態のエンドポイントではなく正常なエンドポイントにルーティングされるようになります。
Q: DNS フェイルオーバーを使用するために、レコードの TTL を調整することは必要ですか?
DNS リゾルバーが返答をキャッシュする時間の長さは、各レコードに関連付けられた存続時間(TTL)と呼ばれる値によって設定されます。DNS フェイルオーバーを使用するときは、TTL を 60 秒以下にすることをお勧めします。これは、障害状態のエンドポイントへのトラフィックルーティングを停止するのに要する時間を最小化するためです。ELB および S3 ウェブサイトエンドポイントの DNS フェイルオーバーを設定するには、固定 TTL が 60 秒のエイリアスレコードを使用する必要があります。これらのエンドポイントタイプについては、DNS フェイルオーバーを使用するための TTL の調整は必要ありません。
Q: すべてのエンドポイントが障害状態である場合は、どうなりますか?
Route 53 によるエンドポイントへのフェイルオーバーは、そのエンドポイントが正常である場合に限られます。リソースレコードセット内に正常なエンドポイントが 1 つも残っていない場合は、Route 53 はすべてのヘルスチェックが合格であるものとして動作します。
Q: レイテンシーベースルーティング(LBR)を使用せずに DNS フェイルオーバーを使用することはできますか?
はい。DNS フェイルオーバーは、LBR を使用していなくても設定できます。特に、DNS フェイルオーバーを使用する目的が単純なフェイルオーバーシナリオであり、プライマリウェブサイトを Route 53 でモニタリングしてそのサイトが使用不可能になったときにバックアップサイトにフェイルオーバーするという場合です。
Q: HTTPS 経由でしかアクセスできないサイトに対してもヘルスチェックを設定できますか?
はい。Route 53 では、HTTPS、HTTP、または TCP を経由するヘルスチェックがサポートされます。
Q: HTTPS ヘルスチェックはエンドポイントの SSL 証明書確認しますか?
いいえ。HTTP ヘルスチェックでは、SSL でエンドポイントに接続できるかどうか、エンドポイントが有効な HTTP 応答コードを返すかどうかが確認されますが、エンドポイントから返される SSL 証明書は検証されません。
Q: HTTPS ヘルスチェックは Server Name Indication(SNI)をサポートしていますか?
いいえ。現在のところ、HTTPS ヘルスチェックは SNI をサポートしていません。
Q: ウェブサーバーが正しいコンテンツを返していることをヘルスチェックを使用して確認するには、どうすればよいですか?
Route 53 のヘルスチェックを使用して、サーバー応答の中に指定の文字列があるかどうかを調べることができます。このようにするには、[Enable String Matching] オプションを選択します。このオプションを使用すると、ウェブサーバーから配信される HTML の中に指定の文字列があることを確認できます。または、専用のステータスページを作成します。このページを使用して、サーバーの稼働状態を内部または運用の視点から調べることができます。詳しくは、Amazon Route 53 開発者ガイドを参照してください。
Q: 作成したヘルスチェックの状態はどのように確認できますか?
ヘルスチェックの結果は、CloudWatch メトリックスとして公開されます。Route 53 コンソールの [health checks] タブに CloudWatch メトリックスのグラフが表示され、そこで現在と過去のヘルスチェックのステータスを確認できます。ヘルスチェックの状態が変更した場合に通知を送信できるよう、メトリックスで CloudWatch アラームを作成することもできます。
すべての Route 53 ヘルスチェックの CloudWatch メトリックスも CloudWatch コンソールで確認できます。メトリックスの名前は「HealthCheckStatus」です。CloudWatch メトリックスには、ヘルスチェック ID(例: 01beb6a3-e1c2-4a2b-a0b7-7031e9060a6a)が含まれます。この ID を基に、メトリックスが追跡しているヘルスチェックを特定できます。
Q: エンドポイントがヘルスチェックに不合格になった場合、どのように通知を受けますか?
Route 53 ヘルスチェックの結果は、CloudWatch メトリックスとして公開されます。そのため、ヘルスチェックの値が指定したしきい値を超えた場合にトリガーされるよう、様々な CloudWatch 通知と自動アクションを設定できます。まず、Route 53 または CloudWatch コンソールのヘルスチェックメトリックスで CloudWatch アラームを設定します。次に、通知アクションを追加し、通知の発行先の E メールアドレスまたは SNS トピックを指定します。詳細については、『Route 53 Developer Guide』を参照してください。
Q: ヘルスチェックのアラームを作成しましたが、アラームの SNS トピックの確認メールを再送する必要があります。確認メールを再送するにはどうすればよいですか?
確認メールは SNS コンソールから再送することができます。アラームに関連付けられた SNS トピック名を探すには、Route 53 コンソール内でアラーム名をクリックし、[Send notification to] ボックスを見ます。
SNS コンソール内で、トピック リストを展開し、アラームのトピックを選択します。[Create Subscription] ボックスを開き、プロトコルとして [Email] を選択し、目的のメールアドレスを入力します。[Subscribe] をクリックすると、確認メールが再送されます。
Q: Elastic Load Balancing(ELB)でエンドポイントとして DNS フェイルオーバーを使用しています。これらのエンドポイントの状態はどのように確認できますか?
ELB エンドポイントについて DNS フェイルオーバーを作成するお勧めの方法は、[Evaluate Target Health] オプションを有効にしたエイリアスレコードを使用することです。このオプションを使う場合は、ELB エンドポイント用に独自のヘルスチェックを作成しないため、Route 53 はこうしたエンドポイント用に特に CloudWatch メトリックスは生成しません。
ロードバランサーの状態に関するメトリックスを取得するには、2 つの方法があります。1 つ目の方法は、ロードバランサーの状態と、その背後にある正常なインスタンスの数を示すメトリックスを Elastic Load Balancing で公開することです。ELB の CloudWatch メトリックスを設定する方法の詳細については、ELB 開発者ガイドをご覧ください。2 つ目の方法は、elb-example-123456678.us-west-2.elb.amazonaws.com など、ELB で提供された CNAME に対するヘルスチェックを独自に作成することです。このヘルスチェックは DNS フェイルオーバー自体に対しては使用しません([Evaluate Target Health] オプションにより自動的に DNS フェイルオーバーが行われるため)が、このヘルスチェックの CloudWatch メトリックスを表示したり、ヘルスチェックで異常が検出された場合に通知するアラームを作成したりすることはできます。
ELB エンドポイントで DNS フェイルオーバーを使用する方法の詳細については、Route 53 Developer Guide を参照してください。
Q: Route 53 ヘルスチェックでの CloudWatch メトリックスの利用料金はいくらですか?
Route 53 ヘルスチェックでの CloudWatch メトリックスは無料で利用できます。
Q: Route 53 にゾーンをインポートする方法
Route 53 では標準 DNS ゾーンファイルのインポートをサポートしており、このゾーンファイルは多くの DNS プロバイダーおよび BIND などの標準 DNS サーバーソフトウェアからエクスポートできます。新しく作成されたホストゾーン、および既定の NS と SOA レコード以外の空の既存のホストゾーンの場合は、ゾーンファイルを直接 Route 53 コンソールへ貼り付けることができ、Route 53 が自動的にホストゾーンにレコードを作成します。ゾーンファイルのインポートを開始するには、『Amazon Route 53 開発者ガイド』をご覧ください。
Q: Route 53 でドメイン名を登録するには、どうすればよいでしょうか?
まずアカウントにログインし、[Domains] をクリックします。次に、大きな青い [Register Domain] ボタンをクリックし、登録プロセスを完了します。
Q: どのようなトップレベルドメイン(TLD)が用意されていますか?
Route 53 では、一般的なトップレベルドメイン(「gTLD」: .com や .net など)と国コードのトップレベルドメイン(「ccTLD」: .de や .fr など)の両方の幅広い選択肢が提供されます。完全な一覧については、Route 53 Domain Registration Price List をご覧ください。
Q: ドメイン名の登録にかかる時間を教えてください。
選択した TLD に応じて、数分から数時間かかります。ドメインが正常に登録されたら、アカウントにその旨が表示されます。
Q: ドメイン名を登録するために提供する必要のある情報を教えてください。
ドメイン名を登録するには、ドメインのレジストラの連絡先情報(名前、住所、電話番号、電子メールアドレスなど)を提供する必要があります。管理用と技術用の連絡先が異なる場合は、もう一方の連絡先も提供する必要があります。
Q: ドメインの登録に個人情報の提供が必要な理由を教えてください。
ドメイン登録の管理機関 ICANN は、すべてのドメイン名登録について、レジストラで連絡先情報(名前、住所、電話番号、電子メールアドレスなど)が提供されていること、また、そのレジストラで Whois データベースによりこの情報が公開されていることを義務付けています。(会社や組織ではなく)個人として登録するドメイン名の場合、Route 53 ではプライバシー保護が提供され(無償)、個人の電話番号、電子メールアドレス、住所が公開されることはありません。代わりに、レジストラの名前、電子メールアドレスが、レジストラが生成した転送電子メールアドレスとともに Whois に保存され、この情報が必要に応じて、サードパーティがお客様に連絡を取る際に使用される場合があります。
Q: 特定の TLD の要件はどこで確認できますか?
TLD のリストについては料金表を、各 TLD の特定の登録要件については Amazon Route 53 Developer Guide および当社の Domain Name Registration Agreement をご覧ください。
Q: ドメイン名の登録に使用するネームサーバーを教えてください。
ドメイン名を作成するとき、当社がお客様のドメインを 4 つの一意の Route 53 ネームサーバー(別名、委託セット)と自動的に関連付けます。ドメインの委託セットは、Amazon Route 53 コンソールで確認できます。これらは、お客様のドメインの登録時に当社で自動的に作成するホストゾーンに表示されます。
Q: ネームサーバーに料金はかかりますか?
Route 53 がお客様のドメイン名用に作成したホストゾーン、また、Route 53 がサービス提供するこのホストゾーンに対する DNS クエリに対して料金が発生します。Route 53 ホストゾーンを削除して、Route 53 の DNS サービスで料金を発生させないようにすることもできます。一部の TLD では、ドメイン名登録の一環として有効なネームサーバーを使用する必要があることにご注意ください。これらの TLD のいずれかのドメイン名の場合、そのドメイン名の Route 53 ホストゾーンを安全に削除するには、他のプロバイダーから DNS サービスを入手し、そのプロバイダーのネームサーバーアドレスを入力する必要があります。
Q: Gandi とは何ですか?
Amazon は、レジストラ Gandi のリセラーです。レコードのレジストラとして Gandi を利用して登録者に問い合わせ、その連絡先情報を初期登録時に検証することが ICANN により義務付けられています。ドメイン名が中断されることがないよう、Gandi のリクエストに応じて、登録日の 15 日以内に連絡先情報を確認してください。また、ドメインの更新時期には、Gandi によりリマインダー通知が送信されます。
Q: ドメイン名はどのくらいの期間登録されますか?
最初の登録期間はお客様が決定します(1 年単位)。ドメイン名は、失効日に、追加の期間(当初の登録期間と同じ期間)更新されるように自動的に設定されています。
Q: ドメイン名を Route 53 に移転するには、どうすればよいですか?
まずアカウントにログインし、[Domains] をクリックします。次に、画面上部にある [Transfer Domain] ボタンをクリックし、移転プロセスを完了します。移転プロセスを開始する前に、以下について確認してください。(1) ドメイン名が、現在のレジストラでロック解除されている、(2) ドメイン名でプライバシー保護が無効になっている(該当する場合)、および (3) 有効な認証コード(または「authcode」)を現在のレジストラから入手している。このコードは、移転プロセスで入力する必要があります。
Q: 自身の移転リクエストのステータスを確認するには、どうすればよいでしょうか?
ドメイン名移転のステータスは、Route 53 コンソールのホームページの [Alerts] セクションで確認できます。
Q: 移転に失敗した場合は、どうすればよいでしょうか?
現在のレジストラに連絡し、移転が失敗した理由を特定する必要があります。問題が解決されると、移転リクエストを再提出できるようになります。
Q: ドメイン名を他のレジストラに移転するには、どうすればいいでしょうか?
ドメイン名を Route 53 から移転するには、新しいレジストラで移転リクエストを開始する必要があります。新しいレジストラが、ドメイン名が移転され新しいレジストラで管理されるようリクエストします。
Q: Whois とは何ですか?自身の情報が Whois に表示される理由を教えてください。
Whois とはドメイン名の公開データベースで、連絡先情報と、ドメイン名に関連付けられたネームサーバーが記載されています。ICANN(The Internet Corporation for Assigned Names and Numbers)では、ドメイン名の所有者に連絡を取る必要がある場合に備えて、すべてのドメイン名に対して連絡先情報の公開を義務付けています。
Q: Route 53 では、登録したドメイン名に対するプライバシー保護は提供されますか?
はい、Route 53 では、お客様が個人として登録したドメイン名に対して無料でプライバシー保護を提供しています。このため、個人の電話番号、電子メールアドレス、住所などが公開されることはありません。代わりに、レジストラの名前、電子メールアドレスが、レジストラが生成した転送電子メールアドレスとともに Whois に保存され、この情報が必要に応じて、サードパーティがお客様に連絡を取る際に使用される場合があります。会社または組織が登録したドメイン名は、プライバシー保護の対象ではありません。
Q: Amazon Route 53 を使用して管理可能なドメイン数に制限はありますか?
Amazon Route 53 の各アカウントは、最大 10 までのドメインに限定されています。制限値の変更については、このリクエストフォームから申請してください。2 営業日以内に返答いたします。
よくある質問
