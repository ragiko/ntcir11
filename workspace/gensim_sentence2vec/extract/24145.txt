kazeburoさんが開発をされているサーバリソースの可視化ツール「CloudForecast」ですが、個人的に使ってみていてとても使いやすいなと思っています。もっと使ってくれる人が増えるといいなと思い、自重せずに入門エントリを書いてみました。
CloudForecastって何?
そもそも何なの?という話ですが、CloudForecastとはリソースのグラフ作成ツールとして有名な「RRDTool」の薄いラッパーとして作られています。記述言語はPerlですので、PerlとRRDToolの使い方が大体分かっている人にとっては導入さえしてしまえばかなりかゆいところまで手が届く=カスタマイズが簡単かつ自由自在なツールだと思います。とりあえずのイントロとしてはkazeburoさんのYAPC::Asia 2010でのこちらのスライドをご覧頂ければと思います。
RRDToolって何よ?という人もいるかと思いますが、リソースモニタリングとしてよく使われるMunin, Ganglia, Cactiなどはどれもそのグラフ作成部分をRRDToolに依存していますので、実は結構みなさんおなじみだったりします(表示されているグラフの右上の方をみると「RRDTOOL / TOBI OETIKER」と入っていると思います。)。Zabbixは独自にRDBにレコードを突っ込んでグラフ描画をしているようですが、それ以外はRRDToolを使って、RRD(ラウンドロビンDB)に値を記録しておき、それを使ってグラフ描画を行っています。
ただ、どのツールも統合環境として富豪化し過ぎていて、「簡単にグラフを出したい」というだけの欲求に使うには大掛かりすぎます。その点、CloudForecastは非常にシンプルなPerlのコードで組み立てられており、CPANモジュールさえ入れてしまえば、データ取得デーモンやWEBサーバなども、スクリプトを叩くだけで動作させることができます。
また、小規模だけでなく大規模環境での動作も想定されており、Gearmanを使ってデータ取得部分を並列分散処理させることも非常に簡単にできますし、自分が取りたいデータもPerlスクリプトを1枚書くだけで柔軟に追加することができます。
さらには作りが非常にシンプルなので全体のカスタマイズも非常に見通しが良いです。自分はサーバ構成情報をYAMLに書くのが面倒だったので、RDBに入っている構成情報を取得して動作させるように改造したりしていますが、1日で作ることができました。
お仕事でこういうプロダクトを使うときには「導入が容易」なことと「カスタマイズが容易」なことが重要だと思いますが、リソースモニタリングに特化したツールとしては現状最適じゃないかなーと個人的に思っています。
では試してみよう!の前に
お手元に試せるサーバのある方はとりあえずそちらをご利用頂くとして、そうでない方は今ならAmazonEC2を使うのが簡単かなと思いますので、とりあえずそのイントロをスライドにしました。適当に作ったので間違ってたらすいません。
リソースモニタリングツール「CloudForecast」入門 - As a Futurist...
