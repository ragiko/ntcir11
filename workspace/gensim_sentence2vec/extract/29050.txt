db2iprune の使用方法
--------------------
db2iprune は、DB2 Windows 製品のインストール・イメージのサイズを小さくするために使用できる
コマンド行ユーティリティーです。このツールは大規模な DB2 のデプロイメントや、アプリケーション
内に DB2 を組み込む場合に役立ちます。これは、入力ファイルと db2iprune 実行可能ファイルで
構成されています。入力ファイル (".prn" ファイル) には、取り外し可能なコンポーネントの全リスト
が含まれ、インストール・イメージから除外するフィーチャーおよび言語を指示するために使用します。
db2iprune 実行可能ファイル (db2iprune.exe) は、それらのフィーチャーおよび言語に関連した
キャビネット (.cab) ファイルを除去します。その結果、通常の DB2 インストール方式によって
インストールできる、より小さな新規 DB2 インストール・イメージが生成されます。
db2iprune の使用方法は以下のとおりです。
1. db2iprune ディレクトリーにある入力ファイル、つまり ".prn" ファイルを開き、DB2
インストール・イメージから除去したいすべてのフィーチャーと言語のコメントを外します。
コメントにはアスタリスク (*) が付いています。db2iprune 入力ファイルには、3 つの
キーワード、すなわち PROD、LANG、および COMP が含まれています。
- PROD キーワードは、DB2 インストール・イメージを整理することを示します。
このキーワードは必須ですから、変更しないでください。
- LANG キーワードは、DB2 インストール・イメージから取り外す言語を指定するのに使用します。
ある言語の .cab ファイル、およびその言語のインストール・イメージ内の doc ファイルを
除去するには、相当する LANG キーワードのコメントを外してください。
- COMP キーワードは、DB2 インストール・イメージから取り外すフィーチャーを表します。
あるフィーチャーの .cab ファイルを除去するには、相当する COMP キーワードのコメントを
外してください。
いくつかのフィーチャーまたは言語を取り外すために、同じ入力ファイル内でいくつかの COMP
または LANG キーワードのコメントを外すこともできます。
db2iprune 入力ファイルは、DB2 応答ファイル (サイレント・インストールに使用されるもの) とは
働きが異なります。
DB2 応答ファイルはインストールしたいコンポーネントを指定するために使用するのに対し、
db2iprune 入力ファイルはイメージから除去したいコンポーネントを指定する (それらは
アンインストールできません) ために使用します。
2. 次の構文に従って、コマンド行で db2iprune.exe を実行します。
db2iprune.exe -r  -p  -o 
- "-r" スイッチに続くパラメーターは db2iprune 入力ファイルの絶対パスを判別します。
- "-p" スイッチに続くパラメーターは、ソース・イメージのルート・ディレクトリーの
絶対パスを判別します。このディレクトリーには setup.exe が含まれており、DB2 インストール
CD のルート・ディレクトリーでもあります。
- "-o" スイッチに続くパラメーターは、新しい DB2 整理済みイメージのコピー先の絶対パスを
判別します。このディレクトリーへの書き込みアクセス権限があることを確認してください。
例として、DB2 Run-Time Client イメージを整理しようとしており、入力ファイルは
c:\db2rtcl.prn にあるとします。
DB2 setup.exe ファイルが d:\ にあり、整理された DB2 Run-Time Client イメージを
e:\compact_rtcl ディレクトリーにコピーしたい場合、次のコマンドをコマンド・プロンプトに
入力できます。
db2iprune.exe -r c:\db2rtcl.prn -p d:\ -o e:\compact_rtcl
3.  整理された DB2 インストール・イメージは次のようにインストールおよび保守します。
通常の DB2 インストール方式をどれでも使用して、整理された DB2 イメージをインストール
および保守することができます。
DB2 セットアップ・ウィザードによるインストール:
- 標準インストールでは、その製品の通常の「標準」(TYPICAL) コンポーネントから、db2iprune
で除去されたコンポーネント以外のものがインストールされます。
- コンパクト・インストールでは、その製品の通常の「コンパクト」(COMPACT) コンポーネント
から、db2iprune で除去されたコンポーネント以外のものがインストールされます。
- カスタム・インストールでは、残ったコンポーネントだけがフィーチャー選択パネルに
表示されます。db2iprune で除去されたコンポーネントは、インストール対象のオプションとして
表示されません。しかし、除去された言語は、依然として言語選択パネルに表示されます。したがって、
db2iprune によってイメージから除去した言語を選択することがないようにしてください。
除去した言語を選択した場合は、エラー・メッセージが出されます。
応答ファイルによるインストール:
無人インストールのために応答ファイルを使用する予定の場合、整理済み DB2 インストール・
イメージで使用可能な言語およびフィーチャーだけを指定するようにしてください。db2iprune によって
除去されたコンポーネントを選択した場合は、エラー・メッセージが出されます。
フィックスパックのインストール:
Windows DB2 フィックスパックは完全インストール・イメージなので、db2iprune ユーティリティー
をフィックスパック・イメージで使用することもできます。フィックスパック・アプリケーション・
プロセスは、完全および整理済みのイメージの場合と同じです。DB2 フィックスパックがインストール
される際、db2iprune によってインストールされたコンポーネントだけが検出および更新され、
未インストールのコンポーネントは無視されます。
注: db2iprune をフィックスパック・イメージで使用する場合、最初にインストールされた
コンポーネントがすべてフィックスパック・イメージに含まれていることを確認してください。
すべてのインストール済みコンポーネントがフィックスパック・イメージに含まれていない場合は、
フィックスパック・アプリケーションの試行の際に .cab ファイルの欠落に関するエラーが出されます。

