初心者が混乱しやすいRubyの変数
Rubyの初心者にありがちなことだと思うが、
変数を代入した時や関数を呼び出した時に、値渡しであるか参照渡しであるか混乱すると思う。
私もよくわからずにかつては混乱した。
次のページを見つけてようやく頭の整理がついた。
Rubyのメソッドの引数は値渡しで、Rubyの変数は全てオブジェクトを指し示すポインタに似た何かだと考えればよいのだ。eel3 引数の参照渡し(変数渡し)なのか単なるオブジェクトへの参照なのか、それが問題
なるほどわかりやすい。
Rubyのメソッドの引数は値渡し
Rubyの変数は全てオブジェクトを指し示すポインタに似た何か
Rubyの変数はラベル
Cにおける変数は箱だと例えられるが、Rubyにおける変数はラベルと例えられることがある。
Cの変数では、メモリ上の箱に値がそのまま入っている。代入をすれば、箱が複製される。
一方、Rubyではメモリ上の箱のどこかに値が入っており、変数はラベル(箱への参照)を持っているだけにすぎない。
変数を代入すると、メモリ上のデータはそのままに、ラベルだけがコピーされるのである。
破壊的操作で意図しない変更が起きる例
次の例のようにbにaを代入した後、aに破壊的変更をすると、bの値まで変わってしまう。
なぜならば、aとbは同じラベルを持っているので、同じ箱を共有した状態にあるからだ。
初心者が混乱しやすいRubyの変数 - gam0022.net
