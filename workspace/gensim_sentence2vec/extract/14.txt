  
　アクセル開度信号の変化は運転手の意向が一番初めに反映される。そのため、アクセル開度信号を報知音の変化に反映させることは、周囲への注意喚起が最も早く出力され、安全面で非常に効果的である。一方、上記の特許文献に記載された技術には次のような課題がある。すなわち、アクセル開度信号をそのまま報知音に反映させると、アクセルワークの変化が速すぎて不自然な音になってしまうという問題がある。
　本発明は、以上のような従来の車両接近通報装置の問題点を解消するためになされたもので、単純な制御で、より自然な報知音を発生でき、歩行者などが、より自然な感覚で電動移動体の存在に気付き、自主的な危険回避行動ができる報知音を発生する車両接近通報装置を提供することを目的とする。
　この発明は、少なくとも一部の駆動力を電動機によって発生する電動移動体に備えられた発音体から、この電動移動体の外部へ放射するための報知音の信号を発生する、車両接近通報装置の報知音制御ユニットにおいて、電動移動体の車両情報信号のうちのアクセル開度信号を時間変化処理により変換して変換後アクセル開度信号を出力する挙動変換処理部と、変換後アクセル開度信号に基づいて、音素から出力される音素信号のピッチおよび音量を変換して報知音信号を発生する報知音信号生成処理部と、を備えるようにしたものである。
　この発明によれば、電動移動体の報知音として、種々の車両の状態において、より自然な音を発することができるので、歩行者などがより従来の自動車に近い感覚で電動移動体の存在に気付き、自主的な危険回避行動ができるようになる。
本発明の実施の形態１による車両接近通報装置の報知音制御ユニットにおけるサウンド倍率変換処理部の内部構成を示すブロック図である。 本発明の車両接近通報装置の報知音制御ユニットを適用する車両接近通報装置の概念図である。 本発明による車両接近通報装置の報知音制御ユニットの概略構成のブロック図である。 本発明の実施の形態１による車両接近通報装置の報知音制御ユニットにおける挙動変換処理部の内部構成を示すブロック図である。 本発明の実施の形態１による車両接近通報装置の報知音制御ユニットにおける挙動変換処理部による処理の一例を模式的に示す線図である。 本発明の実施の形態１による車両接近通報装置の報知音制御ユニットにおける変化量判定部における判定の様子の一例を示す線図である。 本発明の実施の形態１による車両接近通報装置の報知音制御ユニットにおける挙動変換処理部の動作を示すフロー図である。 本発明の実施の形態１による車両接近通報装置の報知音制御ユニットにおける時間変化処理部の動作の一例を示すフロー図である。 本発明の実施の形態１による車両接近通報装置の報知音制御ユニットにおける時間変化処理部の動作の別の例を示すフロー図である。 本発明の実施の形態１による車両接近通報装置の報知音制御ユニットにおける時間変化処理部の動作のさらに別の例を示すフロー図である。 本発明の実施の形態１による車両接近通報装置の報知音制御ユニットにおける報知音信号生成処理部の内部構成を示すブロック図である。 本発明の実施の形態２による車両接近通報装置の報知音制御ユニットにおける挙動変換処理部の動作を示すフロー図である。 本発明の実施の形態２による車両接近通報装置の報知音制御ユニットにおける変化量判定部における判定の様子の一例を示す線図である。 本発明の実施の形態３による車両接近通報装置の報知音制御ユニットにおける挙動変換処理部の動作を示すフロー図である。 本発明の実施の形態３による車両接近通報装置の報知音制御ユニットにおける変化量判定部における判定の様子の一例を示す線図である。 本発明の実施の形態４による車両接近通報装置の報知音制御ユニットにおける報知音信号生成処理部の内部構成を示すブロック図である。 本発明の実施の形態４による車両接近通報装置の報知音制御ユニットにおけるサウンド倍率変換処理部の内部構成を示すブロック図である。 本発明の実施の形態５による車両接近通報装置の報知音制御ユニットにおけるサウンド倍率変換処理部の内部構成を示すブロック図である。 本発明の実施の形態５による車両接近通報装置の報知音制御ユニットにおける挙動変換処理部の内部構成を示すブロック図である。 本発明の実施の形態５による車両接近通報装置の報知音制御ユニットにおける挙動変換処理部の動作を示すフロー図である。 
実施の形態１．
　図２に車両接近通報装置の概念図を、図３に、本発明による車両接近通報装置の報知音制御ユニットの概略構成のブロック図を示す。車両接近通報装置１００は、電気自動車やハイブリッド自動車などのように、少なくとも一部の駆動力を電動機によって発生する電動移動体２００に備えられている。車両接近通報装置１００は、報知音信号を出力する報知音制御ユニット１０とその報知音信号によって報知音を車外に発生するスピーカなどの発音体４０を備えている。報知音制御ユニット１０は、車両情報信号１を用いてサウンド倍率変換処理を行うサウンド倍率変換処理部２と、報知音信号生成処理部３とを備え、報知音信号を出力する。本明細書においては、歩行者などに自車両の存在を報知するために車両外に出す音を、報知音と呼ぶことにする。ここでの報知音は車両の走行状態を想起させる音であり、従来の自動車のエンジン音を想起させる音でも良いし、そうでなくても良い。
　車両情報信号１は、車両から取得される車両の挙動を示す情報の信号である。本発明の報知音制御ユニット１０が用いる車両情報信号１は、少なくともアクセル開度信号を含む。車両情報信号１はアクセル開度信号のみでも良いし、アクセル開度信号以外にも車速信号やブレーキ信号といった、１つ、もしくは複数の車両の挙動を示す信号を含めても良い。車両情報信号１は、ハードワイヤから取得される信号でも良いし、CAN(Controller　Area　Network)やLIN(Local　Interconnect　Network)などといった車載通信から取得される信号でも良い。
　報知音信号生成処理部３では、基になる音の信号、すなわち音素信号に対して、ピッチや音量を変化させる処理を行って報知音信号を出力する。サウンド倍率変換処理部２では、ピッチや音量を変化させるための、ピッチや音量の倍率を報知音信号生成処理部３に出力する。サウンド倍率変換処理部２では、車両情報信号１から得られた信号に連動して報知音を変化させるために、車両情報信号１に基づいてピッチや音量の倍率を算出し、それらの倍率を出力する。またサウンド倍率変換処理部２では、車両情報信号１に挙動変換処理を行うことにより、よりリアルな車両の挙動を模擬する報知音を発生させる。
　図１は、本実施の形態１によるサウンド倍率変換処理部２の内部構成を示すブロック図である。このサウンド倍率変換処理部２は、挙動変換処理部２１と、ピッチ倍率算出部２２と、音量倍率算出部２３と、各車両信号によってピッチや音量を変換するためのテーブルによって構成されている。ここでは車両情報１として、アクセル開度信号１１と車速信号１２を用いているが、それ以外の信号を用いても良い。
　図４は、本実施の形態１による挙動変換処理部２１の内部構成を示すブロック図である。挙動変換処理部２１は変化量判定部２１１と、時間変化処理部２１２とを備える。変化量判定部２１１は、アクセル開度信号１１の時間変化に基づいてアクセル開度の変化の状態を判別する。時間変化処理部２１２は、変化量判定部２１１において判定されたアクセル開度の変化の状態に応じて、アクセル開度信号に異なる時間変化処理を行い、処理後アクセル開度信号をピッチ倍率算出部２２と音量倍率算出部２３に出力する。本システムは、以上の処理を行うことにより、入力されたアクセル開度原信号をそのまま使用して音素のピッチや音量を変換して報知音信号を発生させるよりも、アクセル開度の変化に基づく、より自然で実車に近い報知音を表現することが出来る。
　図５は、挙動変換処理部２１による処理の一例を模式的に示す線図である。図５において、横軸は時間、縦軸はアクセル開度を示す。上段の図５（ａ）の実線の曲線は、挙動変換処理部２１に入力されるアクセル開度信号の一例を示し、下段の図５（ｂ）の実線の曲線は、挙動変換処理部２１で処理された処理後アクセル開度信号を示す。図５（ｂ）には、破線で入力されるアクセル開度信号も示している。図５で示す処理では、アクセル開度信号の増加時、減少時に応じて、挙動変換処理部２１における時間変化の処理が異なる。ここでは、アクセル開度信号の増加時である踏込み時は、細矢印線で示すように遅延時間が短い、すなわち少しだけ遅らせる処理を行い、アクセル開度信号の減少時である踏戻し時は、太矢印線で示すように遅延時間が長い、すなわち大きく遅らせる処理をしている。従来のエンジン自動車において、アクセル踏込み時、すなわち加速時はアクセル開度に比較的追随してエンジン回転速度が増加し、アクセル踏戻し時、すなわち減速時は、アクセルを戻しても慣性によりエンジン回転速度の減少は遅れる。図５はこのような、従来のエンジン自動車の、アクセル開度の変化とエンジン回転速度の変化の関係を模擬したものとなっており、処理後アクセル開度信号に基づいて報知音を変化させることで、周辺の歩行者などにより自然な音の感覚で自車両の存在を報知できる。
　次に、本実施の形態１による変化量判定部２１１における判定の様子の一例を図６に示す。縦軸は入力されたアクセル開度信号を、横軸は時間を示す。図６は、変化量判定部２１１がアクセル開度信号１１の変化に応じて、変化の状態を複数のモードに分類・判定している様子を示している。ここでは、変化量判定部２１１は変化の状態を、「踏込みモード」と、「踏戻しモード」の２つのモードに分ける。変化量判定部２１１はアクセル開度信号１１が増加するとアクセル開度信号の変化の状態を「踏込みモード」と判定する。同様に、アクセル開度信号１１が減少するとアクセル開度信号の変化の状態を「踏戻しモード」と判定する。変化量判定部２１１は、アクセル開度信号１１が取得される度に変化の状態を判定しても良いし、任意の周期ごとに変化の状態を判定しても良い。また１サンプルごとの変化により変化の状態を判定しても良いし、平均値の変化により変化の状態を判定しても良い。
　本実施の形態１による挙動変換処理部２１の動作フローを図７に示す。この実施の形態１では、挙動変換処理を実施する周期になり(Ｓ１　ＹＥＳ)、変化量判定部２１１がアクセル開度の変化量を正(「踏込みモード」)と判定した場合（Ｓ２　正）、時間変化処理部２１２は時間変化処理１（Ｓ３）を実施する。一方、変化量判定部２１１がアクセル開度の変化量を負(「踏戻しモード」)と判定した場合（Ｓ２　負）、時間変化処理部２１２は時間変化処理２（Ｓ４）を実施する。このとき、時間変化処理１と時間変化処理２は、異なる処理でも良いし、同じ処理でも良い。またパラメータのみを変化させても良い。アクセル開度信号の増加時(踏込み時)は車両が加速するため、より安全な時間変化の処理が必要となるので、変化にかかる時間を短く、すなわち遅延時間を短くすると良い。一方、減少時では車両が減速するため、変化にかかる時間を長く、すなわち遅延時間を長くすることにより、報知音の自然さを重視しても良い。また挙動変換処理を実施する周期(Ｓ１)は、アクセル開度信号１１が取得される毎の周期であっても良いし、任意の周期であっても良い。またアクセル開度の変化量の判定(Ｓ２)は、１サンプルごとの変化により変化の状態を判定しても良いし、平均値の変化により変化の状態を判定しても良い。
　以上のように、時間変化処理部２１２は、アクセル開度信号の立ち上りや立ち下りに遅延を付加する処理や、傾きを変化させる処理、すなわち時間変化処理を行い、アクセル開度信号を時間に応じて変化させる。時間変化処理は、単純な時間遅延ではなく、フィルタ処理で実現しても良い。フィルタ処理を用いることにより、音の変化の開始を遅らせることなく、時間変化処理を付加させることが出来る。またフィルタのタップ数やフィルタ係数を変化させることで、アクセルペダルを踏込んだり、踏戻したりしたときの音の変化を自由に調整することが出来る。テーブル値によって実現する時間変化の処理では新たにアクセル開度信号が更新されると過去のテーブル値との間に不連続性が発生するが、フィルタ処理は単純なアルゴリズムで常に変化し続けるアクセル開度入力信号にも対応し、音の変化を滑らかにすることが出来る。
　フィルタ処理には単純移動平均処理を用いても良い。図８に、単純移動平均によって時間変化処理を実現する場合の動作フローの一例を示す。単純移動平均を用いた時間変化処理では、計算に必要となるアクセル開度入力信号の過去のサンプルをBufferに保持しておく。この過去サンプルのBufferは新しいアクセル開度信号が入力されるたびに、更新される(Ｓ７)。このBufferを使用して、任意の数（TAP数）の過去サンプルの平均値を演算し（Ｓ１１）、処理後アクセル開度信号（出力信号）として出力する。また、アクセル開度信号の変化の状態のモードが変化し、時間変化処理に変更がある（Ｓ８・変更有り）場合は、平均を行うサンプル数（TAP数）を変化させると良い（Ｓ１０）。TAP数を変化させることにより、時間変化処理の変化の状態を自由に変更することが出来る。ただし、TAP数を変化させるだけでは、モード切り替え時に音に不連続性が発生するため、例えばBufferのすべての要素に前回の処理後アクセル開度信号を格納し、初期化すると良い（Ｓ９）。
　また、フィルタ処理には指数移動平均を用いても良い。図９に、指数移動平均によって時間変化処理を実現する場合の動作フローの一例を示す。指数移動平均処理による時間変化処理では、処理後アクセル開度信号（出力信号）は前の処理後アクセル開度信号とアクセル開度入力信号より算出される（Ｓ１４）。アクセル開度信号の変化の状態のモードが変化し、時間変化処理に変更がある（Ｓ１２・変更有）場合は、算出式（Ｓ１４）の前の処理後アクセル開度信号とアクセル開度入力信号の割合（TAP）を変化させると良い（Ｓ１３）。単純移動平均と異なり、指数移動平均では過去サンプルが前回の処理後アクセル開度信号値で良いため、過去のサンプルを保持するBufferは不要である。そのため指数移動平均処理を時間変化処理に使用すると、メモリ容量を小さくすることが出来る。単純移動平均処理や指数移動平均処理を用いることにより、通常のFIR（Finite　Impulse　Response）やIIR（Infinite　Impulse　Response）フィルタよりも更に簡単なアルゴリズムで、且つ、処理負荷や使用メモリが小さい状態で、自然で高級感のある報知音を実現することが出来る。
　時間変化処理部２１２は、時間変化処理を乗算、除算、加算、減算の１つ、あるいは複数を組み合わせた計算式によって実現しても良い。図１０に、時間変化処理を除算によって実現する場合の動作フローの一例を示す。除算による時間変化処理では、処理後アクセル開度信号（出力信号）はアクセル開度入力信号に特定の値Ｘを除算してやることにより算出される（Ｓ１８）。アクセル開度信号の変化の状態のモードが変化し、時間変化処理に変更がある（Ｓ１５・変更有）場合は、値Ｘに任意の値TAPを代入し（Ｓ１６）、時間変化処理に変化がない（Ｓ１５・変化無）場合は１サンプルごとにＸをデクリメントする（Ｓ１７）。この除算による時間変化処理は主に踏込みモードのときに、値を徐々に増加させる方法として使用することが出来る。時間変化処理を単純な時間遅延ではなく計算式により算出することにより、音の変化の開始のタイミングを遅らせることなく、音の変化の余韻を自由に変化させることが出来る。時間変化処理は、微分や積分による処理としても良い。時間変化処理に微分を使用することにより、変化量に応じた音の変化の余韻を付加させることが出来る。また積分を使用することにより、滑らかな音の変化の余韻を付加させることが出来る。
　ピッチ倍率算出部２２では、ピッチ倍率算出部２２に入力された車両情報信号の値と車両情報－ピッチテーブルを比較して、各車両情報に対応したピッチ倍率を出力する。例えば、車両情報信号がアクセル開度信号の場合、挙動変換処理部２１から取得した処理後アクセル開度信号の値とアクセル開度－ピッチテーブル２４を比較して、アクセル開度に対応したピッチ倍率を出力する。同様に、車両情報信号が車速信号の場合は、車速信号１２と車速－ピッチテーブル２５を比較して、車速に対応したピッチ倍率を出力する。
　音量倍率算出部２３では、音量倍率算出部２３に入力された車両情報信号の値と車両情報－音量テーブルを比較して、各車両情報に対応した音量倍率を出力する。例えば、車両情報信号がアクセル開度信号の場合、挙動変換処理部２１から取得した処理後アクセル開度信号の値とアクセル開度－音量テーブル２６を比較して、処理後アクセル開度信号の値に対応した音量倍率を出力する。同様に、車両情報信号が車速信号の場合は、車速信号１２と車速－音量テーブル２７を比較して、車速に対応した音量倍率を出力する。
　報知音信号生成処理部３は、サウンド倍率変換処理部２から取得したピッチや音量の倍率から音素のピッチや音量を調整して合成し、増幅器を通じてスピーカに出力する。図１１は、本実施の形態１による報知音信号生成処理部３の内部構成を示すブロック図である。報知音信号生成処理部３は音素３１と、ピッチ変換部３２と、音量変換部３３とによって構成されている。
　音素３１は、報知音の基になる音のデータとして、例えばＰＣＭによる音のディジタルデータを所定時間分記憶させたループ音である。所定時間は、例えば１秒間といった音として認識できる短い時間である。ピッチ変換部３２ではピッチ倍率算出部２２で算出されたピッチ倍率により、音素３１の音の信号を変更して出力する。例えばピッチ倍率が２．０の場合、ピッチ、すなわち音の高さを倍にするために、音素のデータを１／２に間引いたもの、すなわち元の音素が１秒間のデータであれば、０．５秒間のデータとして、この０．５秒間のデータを繰り返す音のデータとして出力する。音量変換部３３では音量倍率算出部２３で算出された音量倍率により、ピッチ変換部３２から出力された音のデータの音量、すなわち振幅を変更する。音素は従来のエンジン音を想起するものだけに制限されず、正弦波やホワイトノイズ、メロディ音など、どのようなものでも良い。また音素３１は内部メモリや外部メモリのＲＯＭやＲＡＭに保存されたデータが好ましいが、リアルタイムに入力されるデータでも良い。
　なお、ピッチ変換部３２は、複数ある車両情報に対応したピッチ倍率をどの割合で反映させるかなどの調整も行う。また、音量変換部３３は、複数ある車両情報に対応した音量倍率をどの割合で反映させるかなどの調整も行う。
　以上、本実施の形態１によれば、アクセル開度の踏込みや踏戻しの変化の状態に応じて、必要なときは速いレスポンスで、不要なときは遅いレスポンスになるよう時間変化の処理を可変させることができる。これにより、安全で、且つ、より自然で高級感のある音を再現させる。またアクセルの踏込み時や踏戻し時の音を好みで自由に変化させることが出来る。
実施の形態２．
　図１２は、本発明の実施の形態２による車両接近通報装置の報知音制御ユニットにおける挙動変換処理部２１の動作フローを示すフロー図である。この実施の形態２では、変化量判定部２１１が、アクセル開度は一定か変化しているかを判定する（Ｓ２０）。変化量判定部２１１がアクセル開度は一定であると判定した場合（Ｓ２０・一定）、時間変化処理部２１２は時間変化処理３（Ｓ２４・一定モード時の処理）を実施する。変化量判定部２１１がアクセル開度は変化していると判定した場合（Ｓ２０・変化）、変化量判定部２１１は、次にアクセル開度の変化量を調べる（Ｓ２１）。変化量判定部２１１がアクセル開度の変化量が正(踏込み)と判定した場合（Ｓ２１・正）、時間変化処理部２１２は時間変化処理１（Ｓ２２・踏込みモード時の処理）を実施する。一方、変化量判定部２１１がアクセル開度の変化量が負（踏戻し）と判定した場合（Ｓ２１・負）、時間変化処理部２１２は時間変化処理２（Ｓ２３・踏戻しモード時の処理）を実施する。またこの挙動変換処理を実施する周期(Ｓ１９)は、アクセル開度信号１１が取得される度に実施しても良いし、任意の周期ごとに実施しても良い。またアクセル開度が一定か変化しているかの判定(Ｓ２０)やアクセル開度の変化量(Ｓ２１)は、１サンプルごとの変化により変化の状態を判定しても良いし、平均値の変化により変化の状態を判定しても良い。
　時間変化処理１（Ｓ２２）、時間変化処理２（Ｓ２３）、時間変化処理３（Ｓ２４）は、異なる処理でも良いし、同じ処理でも良い。またパラメータのみを変化させても良い。アクセル開度信号の増加時(踏込み時)は車両が加速するため、より安全な時間変化の処理が必要となるので、変化にかかる時間を短くすると良い。一方、減少時では車両が減速するため、変化にかかる時間を長くすることにより、報知音の自然さを重視しても良い。またアクセル開度信号の一定時は変化時と異なり、そのままのアクセル開度信号を音に反映させても、生成した音に違和感は発生しにくい。そのため、アクセル開度一定モード時に実施する時間変化処理３（Ｓ２４）は、時間変化の処理を行わなくても良いし、または踏込み時よりも変化にかかる時間をさらに短くしても良い。
　実施の形態２による変化量判定部２１１における判定の様子の一例を図１３に示す。縦軸は入力されたアクセル開度信号を、横軸は時間を示す。図１３は、変化量判定部２１１がアクセル開度信号１１の変化に応じて、変化の状態を複数のモードに判定している様子を示している。この実施の形態では、変化量判定部２１１は、変化の状態を「踏込みモード」と、「踏戻しモード」と、「一定モード」の３つのモードに分類して、入力されたアクセル開度信号の変化の状態がどのモードであるかを判定する。変化量判定部２１１はアクセル開度信号１１が増加するとアクセル開度信号の変化の状態を「踏込みモード」と判定する。同様に、アクセル開度信号１１が減少するとアクセル開度信号の変化の状態を「踏戻しモード」と判定する。また、アクセル開度信号１１の変化がない場合はアクセル開度信号の変化の状態を「一定モード」と判定する。変化量判定部２１１は、アクセル開度信号１１が取得される度に変化の状態を判定しても良いし、所定の周期ごとに変化の状態を判定しても良い。また１サンプルごとの変化量により変化の状態を判定しても良いし、平均値の変化量により変化の状態を判定しても良い。
　アクセル開度信号の一定時は変化時と異なり、そのままのアクセル開度信号を音に反映させても、生成した音に違和感は発生しにくい。本実施の形態２によれば、アクセル開度信号が一定のときは、時間変化の処理を行わない、もしくは、変化時よりも変化にかかる時間を短くすることにより、安全で、且つ、より自然で高級感のある音をより少ない処理負荷で実現させることが出来る。
実施の形態３．
　図１４は、本発明の実施の形態３による車両接近通報装置の報知音制御ユニットにおける挙動変換処理部２１の動作フローを示すフロー図である。本実施の形態３は実施の形態２における挙動変換処理部２１の変化の状態のモードに強モードと弱モードが追加されたものである。
　実施の形態３による変化量判定部２１１における判定の様子の一例を図１５に示す。縦軸は入力されたアクセル開度信号を、横軸は時間を示す。図１５は、変化量判定部２１１がアクセル開度信号１１の変化に応じて変化の状態を複数のモードに判定している様子を示している。この実施の形態３では、変化量判定部２１１は変化の状態を「踏込み強モード」、「踏込み弱モード」、「踏戻し強モード」、「踏戻し弱モード」、「一定モード」の５つのモードに分ける。変化量判定部２１１はアクセル開度信号１１が大きく増加するとアクセル開度信号の変化の状態を「踏込み強モード」、小さく増加するとアクセル開度信号の変化の状態を「踏込み弱モード」と判定する。同様に、アクセル開度信号１１の変化量が、大きく減少するとアクセル開度信号の変化の状態を「踏戻し強モード」、小さく減少するとアクセル開度信号の変化の状態を「踏戻し弱モード」と判定する。また、アクセル開度信号１１の変化がない場合はアクセル開度信号の変化の状態を「一定モード」と判定する。変化量判定部２１１は、アクセル開度信号１１が取得される度に変化の状態を判定しても良いし、任意の周期ごとに変化の状態を判定しても良い。また１サンプルごとの変化量により変化の状態を判定しても良いし、平均値の変化量により変化の状態を判定しても良い。
　本実施の形態３による挙動変換処理部２１の動作を、図１４の動作フローに従って説明する。まず、挙動変換処理を実施する周期になると(Ｓ２６　ＹＥＳ)、変化量判定部２１１がアクセル開度は一定か変化しているかを判定する（Ｓ２７）。変化量判定部２１１がアクセル開度は一定であると判定した場合（Ｓ２７・一定）、時間変化処理部２１２は時間変化処理５（Ｓ３５）を実施する。変化量判定部２１１がアクセル開度が変化していると判定した場合（Ｓ２７・変化）、変化量判定部２１１は、次にアクセル開度の変化量を調べる（Ｓ２８）。変化量判定部２１１がアクセル開度の変化量を正(踏込み)と判定した場合（Ｓ２８・正）、変化量判定部２１１はアクセル開度の踏込み量が所定の閾値よりも大きいか、小さいかを調べる（Ｓ２９）。変化量判定部２１１は踏込み量が閾値よりも大きいと判定した場合（Ｓ２９・強）、時間変化処理部２１２は時間変化処理１（Ｓ３０・踏込み強モード時の処理）を実施する。変化量判定部２１１は踏込み量が閾値よりも小さいと判定した場合（Ｓ２９・弱）、時間変化処理部２１２は時間変化処理２（Ｓ３１・踏込み弱モード時の処理）を実施する。
　一方、変化量判定部２１１がアクセル開度の変化量を負（「踏戻しモード」）と判定した場合（Ｓ２８・負）、変化量判定部２１１はアクセル開度の踏戻し量が所定の閾値よりも大きいか、小さいかを調べる（Ｓ３２）。変化量判定部２１１は踏戻し量が閾値よりも大きいと判断した場合（Ｓ３２・強)、時間変化処理部２１２は時間変化処理３（Ｓ３３・踏戻し強モード時の処理）を実施する。変化量判定部２１１は踏戻し量が閾値よりも小さいと判断した場合（Ｓ３２・弱）、時間変化処理部２１２は時間変化処理４（Ｓ３４・踏戻し弱モード時の処理）を実施する。このとき、時間変化処理１（Ｓ３０）、時間変化処理２（Ｓ３１）、時間変化処理３（Ｓ３２）、時間変化処理４（Ｓ３３）、時間変化処理５（Ｓ３４）は、異なる処理でも良いし、同じ処理でも良い。またパラメータのみを変化させても良い。挙動変換処理を実施する周期(Ｓ２６)は、アクセル開度信号１１が取得される毎の周期であっても良いし、任意の周期であっても良い。またアクセル開度が一定か変化しているかの判定(Ｓ２７)やアクセル開度の変化量(Ｓ２８)、踏込み変化量(Ｓ２９)、踏戻し変化量(Ｓ３２)は、１サンプルごとの変化により変化の状態を判定しても良いし、平均値の変化により変化の状態を判定しても良い。
　例えば、アクセル開度信号の増加時（踏込み時）は車両が加速するため、より安全な時間変化の処理が必要となるので、変化にかかる時間を短くすると良い。一方、減少時では車両が減速するため、変化にかかる時間を長くすることにより、報知音の自然さを重視しても良い。またアクセル開度信号の一定時は変化時と異なり、アクセル開度信号そのままを音に反映させても、生成した音に違和感は発生しにくい。そのため、アクセル開度一定モード時に実施する時間変化処理５（Ｓ３５）は、時間変化の処理を行わなくても良いし、または変化時よりも変化にかかる時間を短くしても良い。アクセル開度信号の変化量が大きいときは急加速や急減速が想定されるので、安全性を高めるために変化にかかる時間をより短くしても良い。逆にアクセル開度信号の変化量が大きいときは急激に音が変化するため、違和感が発生しやすいので、変化にかかる時間を長くしても良い。この方法によれば、アクセル開度の変化量の大きさで異なる時間変化の処理を行うことが出来るので、安全性をより向上させることが出来る。また、変化の大きさで異なる時間変化の処理を行うことにより、これらの音の変化を状況や好みによって臨機応変に調整することが出来る。
実施の形態４．
　図１６は、本発明の実施の形態４による車両接近通報装置の報知音発生ユニットにおける報知音信号生成処理部３の内部構成を示すブロック図である。本実施の形態４による報知音信号生成処理部３は、音素として音素１、音素２、音素３の複数の音素３１０を有している。図１７は、本発明の実施の形態４による車両接近通報装置の報知音発生ユニットにおけるサウンド倍率変換処理部２の内部構成を示すブロック図である。
　ピッチ倍率算出部２２０では、ピッチ倍率算出部２２０に入力された車両情報信号の値と音素ごとの車両情報－ピッチテーブルを比較して、各車両情報に対応した音素ごとのピッチ倍率を出力する。例えば、車両情報信号がアクセル開度信号の場合、挙動変換処理部２１から取得した処理後アクセル開度信号の値と音素ごとのアクセル開度－ピッチテーブル２４０を比較して、アクセル開度に対応した音素ごとのピッチ倍率を出力する。同様に、車両情報信号が車速信号の場合は、車速信号１２と音素ごとの車速－ピッチテーブル２５０を比較して、車速に対応した音素ごとのピッチ倍率を出力する。なお、挙動変換処理部２１では、アクセル開度信号１１に対し、実施の形態１～実施の形態３で説明したいずれかと同様の挙動変換処理を行う。
　音量倍率算出部２３０では、音量倍率算出部２３０に入力された車両情報信号の値と音素ごとの車両情報－音量テーブルを比較して、各車両情報に対応した音素ごとの音量倍率を出力する。例えば、車両情報信号がアクセル開度信号の場合、挙動変換処理部２１から取得した処理後アクセル開度信号の値と音素ごとのアクセル開度－音量テーブル２６０を比較して、処理後アクセル開度信号の値に対応した音素ごとの音量倍率を出力する。同様に、車両情報信号が車速信号の場合は、車速信号１２と音素ごとの車速－音量テーブル２７を比較して、車速に対応した音素ごとの音量倍率を出力する。
　報知音信号生成処理部３におけるピッチ変換部３２０では、ピッチ倍率算出部２２０から出力される音素ごとのピッチ倍率を用いて、音素３１０の音素１、音素２、音素３の音素ごとにピッチを変更する。また、音量変換部３３０では、音量倍率算出部２３０から出力される音素ごとの音量倍率を用いて、音素ごとにピッチ変換部３２０から出力される音の信号の音量を変更する。合成処理部３４は、ピッチおよび音量を変換された複数の音素データを合成し、最終的な音圧の調整を行い、報知音信号を出力する。
　以上のように、本実施の形態４では、複数の音素を設け、音素ごとにピッチや音量の倍率を変更するように構成したので、単一音素ではピッチが必要以上に上がる事で高域に偏った報知音になるのに対して、音素毎に独立してピッチや音量の制御を行うのでその偏りが無くなるというメリットがある。例えば、ある音素はアクセル開度信号が大きくなるに従い、ピッチを上げていく一方で、ある音素はピッチの上がり具合を少なくする、あるいはピッチを一定に保つ事で報知音がアクセル開度によらず、低域まで帯域を持った報知音を出力する事が出来る。
実施の形態５．
　図１８は、本発明の実施の形態５による車両接近通報装置の報知音制御ユニットのサウンド倍率変換処理部２の内部構成の例を示すブロック図である。図１８は、車両情報１にギア信号１３を加えた場合のサウンド倍率変換処理部２の内部構造を示している。また図１９に本実施の形態５による挙動変換処理部２１の内部構造を示す。ギア信号反映部２１３は、時間変化処理部２１２から出力された信号をギア信号１３の状態によって異なる比率で正規化する。例えば、ギア信号１３がＤ（ドライブ）レンジの場合は、処理後アクセル開度信号の最大値が50[%]になるように正規化し、ギア信号１３がＮ（ニュートラル）レンジの場合は、処理後アクセル開度信号の最大値が100[%]になるように正規化すれば良い。これにより、ギア信号を変化させたときの音の違いを再現させることが出来る。
　図２０に本実施の形態５による挙動変換処理の動作フローを示す。これは実施の形態１の図７に示した動作フローにギア信号を反映させる処理（Ｓ６）を加えた動作フローである。例えば、ギア反映処理（Ｓ６）はギア信号によって処理後アクセル開度信号の正規化を実施しても良いし、ゲインを調整しても良い。ここではギア信号反映部２１３を新たに設けてギア信号１３を処理後アクセル開度信号に反映させているが、ギア信号１３を変化量判定部２１１に入力することによって、アクセル開度の変化の状態のモードにギア信号を反映させても良い。あるいは、ギア信号１３を時間変化処理部２１２に入力することによって、時間変化の処理にギア信号を反映させても良い。ここでは、挙動変換処理としてギア信号１３を反映させるようにしたが、ギア信号１３以外の車両情報を挙動変換処理に反映させるようにしても良い。
　従来のエンジン音は、ギア信号によって、車両の慣性による時間変化やピッチの変化が異なる。ギア信号やその他の車両情報を挙動処理に反映させることで、報知音として、より車両の挙動に合った、自然な報知音となり、自車両周辺の歩行者らが自然な感覚で自車両の接近を認識できるようになる。
　なお、本発明は、その発明の範囲内において、各実施の形態を組み合わせたり、各実施の形態を適宜、変形、省略したりすることが可能である。
　１：車両情報信号　　　　　　　　　　２：サウンド倍率変換処理部
　３：報知音信号生成処理部　　　　　　１０：報知音制御ユニット
１１：アクセル開度信号　　　　　　　　１２：車速信号
２１：挙動変換処理部　　　　　　　　　２２、２２０：ピッチ倍率算出部
２３、２３０：音量倍率算出部　　　　　２１１：変化量判定部
２１２：時間変化処理部　　　　　　　　３１、３１０：音素
３２、３２０：ピッチ変換部　　　　　　３３、３３０：音量変換部
３４：合成処理部　　　　　　　　　　　４０：発音体
１００：車両接近通報装置　　　　　　　２００：電動移動体
Patent WO2013136505A1 - 車両接近通報装置の報知音制御ユニット - Google Patents
