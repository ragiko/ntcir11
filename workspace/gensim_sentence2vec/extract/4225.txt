
1.はじめに〜背景  &dagger;
大規模で高速なストレージ評価の一環として、ISILON Cluster Storageを評価しましたので紹介いたします。
まず、評価結果の前に、どういった背景でこのようなストレージの必要性が出てきたのか、
またISILONとはどのような特長を持った製品なのかを説明します。
多数のユーザー、増え続けるデータ容量
増大の一途を辿るデータ容量、使用するユーザー数の増加、そしてCPUコア数の増加、
そうした状況でもパフォーマンスを低下させず、
逆にストレージを増やすことでパフォーマンスが向上する、
そんなストレージの必要性が高まっています。
分散ファイルシステム
そのようなストレージシステムを構築するためにオープンソースの世界でも
LustreやGlusterFS、Gfarmといったものをはじめ様々なものがあり
その種類や内容も多様化してきています。
それぞれ少なくない違いを特長として持ってはいますが、
ネットワーク上に存在する複数のストレージを、まとめて一つの領域として
各クライアントのマシンからマウントできる、という点では概ね共通しています。
例えば、5TBのファイルサーバーが4台ある場合に、クライアントマシンからは
これらをまとめて20TBの領域としてマウントできるようなものです。
ISILONとはどんなストレージなのか
簡単に言ってしまうと、アプライアンスの分散ファイルシステムと言っていいものです。
Isilon Nodeと呼ばれるストレージ筐体と、
Isilon Node間の通信に用いられるInfiniband Switchから構成されています。
クライアントマシンとなる計算ノードは、複数あるIsilon Nodeのある特定の一台をNFSマウントして読み書きを行います。
クライアントマシンからは、その一台がNFSサーバーとして存在している、という意識だけで使用できるため
構成は非常にシンプルです。
このように、クライアントマシンとIsilonを繋ぐ入口と出口はGigabit Ethernetであるため、その帯域以上の性能が出ることはありません。
一度Isilonに書き込まれたデータは、均等なサイズに分割されて全てのIsilon Nodeに配られます。
また、読み出しの際は各Isilon Nodeに分割されたデータを並列で読み込んできます。
これらのIsilon Node間の通信は、非常に高速なInfinibandで行われるため、複数のクライアントマシンから
同時に読み書きの要求が合った場合でも性能の低下がおさえられます。
また、オープンソースの分散ファイルシステムにはない運用面での簡易さ、利便性、安全性があります。
Isilon Node追加の際も、システムを止めることなく約60秒で追加可能ですし、
冗長構成もパリティの持ちかたをファイル単位で設定することができ柔軟性に富んでいます。 
NFSとの比較
NFSサーバーとNFSクライアント、そしてIsilon Cluster Storageとそのクライアントマシン、
この二つを図を使って比較してみます。
NFSサーバーとNFSクライアントの場合、
NFSサーバーとNFSクライアント間のNetwork(下図水色の部分)は、
ユーザー数とストレージ容量が増えても変わらないため、
ここがボトルネックとなって性能が低下してしまうことがあります。
(NFSクライアントの台数がある程度までの数であれば、10GbEやInfiniband、あるいは複数のGbEポートを持たせることで、かなりの改善ができます。)
Isilonを使った場合、ノードを増やした分だけネットワークの口が増え、帯域が増加するため
NFSにおけるボトルネックが解消されます。
図1:NFSサーバーとNFSクライアント
ISILON Cluster Storageの評価 - Takeruでこのようなものを動かしてみました
