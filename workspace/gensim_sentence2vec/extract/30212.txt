
【特許名】図形認識装置及び認識誤り修正装置製造方法
【産業上の利用分野】この発明は図面に書かれている情報を自動的に計算機等に入力するために、図面中の文字、シンボル、接続線等を検出して認識する図形認識装置及びその認識誤りを修正する認識誤り修正装置に関するものである。
【従来の技術】図15は例えば特開昭63−140372号公報に示された従来の図形認識装置の構成を示すブロック図であり、図において、1は図面中の文字、シンボル、接続線を検出して認識する図形認識装置において、図面を読み取って2値の画像情報を作成する画像入力手段、2はこの画像入力手段1によって作成された画像情報を記憶する画像記憶手段、3はこの画像記憶手段2によって記憶されている画像情報を入力し、この画像情報中の線の抽出及び塗りつぶし領域の抽出を行い、線情報及び領域情報を作成する画像処理手段、4はこの画像処理手段3によって記憶されている線情報と領域情報を記憶する線−領域情報記憶手段、5はこの線−領域情報を入力し、形状の決まった定形シンボルを検出して認識する定形シンボル検出手段、6は上記線−領域情報記憶手段4によって記憶されている線情報と領域情報を入力し、形状の不定な不定形シンボルを検出して認識する不定形シンボル検出手段、7は上記線−領域情報記憶手段4によって記憶されている線情報と領域情報を入力し、接続線を検出して認識する接続線検出手段、8は上記線−領域情報記憶手段4によって記憶されている線情報と領域情報を入力とし、文字を検出して認識する文字検出手段、9は上記定形シンボル検出手段5、上記不定形シンボル検出手段6、上記接続線検出手段7、上記文字検出手段8の各々によって検出し認識された結果を記憶する図形情報記憶手段、10はこの図形情報記憶手段9によって記憶されている認識結果を入力し、定形シンボル、不定形シンボル、接続線の接続関係及び文字との関係を認識して接続情報を作成する接続情報作成手段、11はこの接続情報作成手段10によって作成された接続情報を記憶する接続情報記憶手段である。
次に動作について説明する。今、例えば図2に示すような図面を画像入力手段1により入力すると、太さを持った2値ディジタルの画像データとして画像記憶手段2に記憶される。画像処理手段3は、画像データに対し膨張−収縮や画像間の論理演算を行うことにより塗りつぶし領域の位置を表す領域情報を作成し、また、太さを持った画像データを細めていくことにより線の中心の座標列である線情報を取り出す。領域情報や線情報は線−領域情報記憶手段4に記憶される。定形シンボル検出手段5は、定形シンボルを構成する特徴的な要素、例えば小さな閉曲線をもとに線−領域情報の探索を行い、定形シンボルを検出して図形情報記憶手段9に記憶する。不定形シンボル検出手段6は、まず、線−領域情報の探索を行い閉曲線を検出し、この閉曲線の長さが予め定められた範囲にある場合にその形状の不定な不定形シンボルを検出して、このシンボルの形状と位置を図形情報記憶手段9に記憶する。接続線検出手段7は、水平垂直の長い線の追跡を行うことにより、線−領域情報記憶手段4から接続線を取り出して図形情報記憶手段9に記憶する。文字検出手段8は、線の分岐点における連結成分の数及び文字を構成する線の数、長さをもとに線−領域情報の探索を行い、文字を検出して図形情報記憶手段9に記憶する。接続情報作成手段10は、定形シンボル、不定形シンボル、文字、接続線の接続関係を調べ、接続情報を作成して接続情報記憶手段11に記憶する。
【発明が解決しようとする課題】従来の図形認識装置は以上のように構成されているので、シンボルが誤って認識された場合にこの誤りを修正する手段を備えておらず、例えば図2に示すような不定形シンボルの描かれている図面を認識する場合に、図面入力時のノイズや図面密度の高さ等によって不定形シンボルが図3のように閉曲線を構成していないものとして入力されてしまった場合に、不定形シンボルがシンボルとしてではなく図4のように接続線として検出されてしまい、これを人手で修正しなければならないという問題点があった。
この発明は上記のような問題点を解消するためになされたもので、既に計算機上に記憶された認識対象とする図面に関連する情報を有効に活用して、閉曲線を構成しない不定形シンボルでも検出でき、さらに定形シンボル、接続線などの検出,認識や接続情報の認識誤りを正しく修正でき、修正のための人的工数を削減できる図形認識装置及び認識誤り修正装置を得ることを目的とする。
【課題を解決するための手段】この発明に係る図形認識装置は、図形情報記憶手段9に記憶されている図形情報と接続情報記憶手段11に記憶されている接続情報とから認識結果の特徴を抽出し特徴記述情報を作成する認識情報抽出手段12と、認識対象とする図面に関連した特徴記述情報を得ることのできる図面情報を入力する図面情報入力手段13と、この図面情報入力手段13から入力した図面情報を記憶する図面情報記憶手段14と、この図面情報記憶手段14に記憶された図面情報から図面情報の特徴を抽出し特徴記述情報を作成する図面情報抽出手段15と、上記認識情報抽出手段12と上記図面情報抽出手段15とにより抽出された2つの特徴記述情報から図面の認識誤りを検出する認識誤り検出手段16と、この認識誤り検出手段16によって検出された認識誤りから上記図形情報記憶手段9と上記接続情報記憶手段11に記憶された認識結果の誤りを修正する認識誤り修正手段17と、この認識誤り修正手段17によって修正された認識結果を記憶する修正結果記憶手段18とを備えたものである。即ち、請求項1の発明は従来の図形認識装置に上記各手段を付加したものである。
また、この発明に係る認識誤り修正装置は上記各手段を備えたものである。即ち、請求項2の発明は図形認識装置とは別に認識誤り修正装置を設けたものである。
【作用】認識情報抽出手段12は図形情報記憶手段9に記憶されている図形情報と接続情報記憶手段11に記憶されている接続情報とから認識結果の特徴を抽出し特徴記述情報を作成する。図面情報入力手段13は認識対象とする図面に関連した特徴記述情報を得ることのできる図面情報を入力して図面情報記憶手段14に記憶させる。図面情報抽出手段15は図面情報記憶手段14に記憶された図面情報から図面情報の特徴を抽出し特徴記述情報を作成する。認識誤り検出手段16は認識情報抽出手段12と図面情報抽出手段15とにより抽出された2つの特徴記述情報から図面の認識誤りを検出する。認識誤り修正手段17は認識誤り検出手段16によって検出された認識誤りから図形情報記憶手段9と接続情報記憶手段11に記憶された認識結果の誤りを修正して修正結果記憶手段18に記憶させる。
【実施例】
(実施例1)図1はこの発明の一実施例に係る図形認識装置の構成を示すブロック図である。図1において、図15に示す構成要素に対応するものには同一の符号を付し、その説明を省略する。図1において、12は図形情報記憶手段9に記憶されている図形情報と接続情報記憶手段11に記憶されている接続情報とから認識結果の特徴を抽出し特徴記述情報を作成する認識情報抽出手段である。この認識情報抽出手段12は、図形情報記憶手段9及び接続情報記憶手段11に記憶されている内容から、各シンボルの持つ属性と接続線によって接続されているシンボルとシンボルの論理的な接続関係に着目し、シンボルを節点、接続関係を枝とするグラフ構造(特徴記述情報)を抽出する。13は認識対象とする図面に関連した特徴記述情報を得ることのできる図面情報を入力する図面情報入力手段である。この図面情報入力手段13は、手動入力等の方法によって認識対象すとる図面のシンボルに対応する情報の要素が、認識対象とする図面のシンボルと同じ接続関係を持つ図面情報を入力する。14は図面情報入力手段13から入力された図面情報を記憶する図面情報記憶手段である。15は図面情報記憶手段14に記憶された図面情報から図面情報の特徴を抽出し特徴記述情報を作成する図面情報抽出手段である。この図面情報抽出手段15は、図面情報記憶手段14に記憶された図面情報から、シンボルに対応する要素を節点、要素の接続関係を枝とするグラフ構造を抽出する。16は認識情報抽出手段12と図面情報抽出手段15とにより抽出された2つの特徴記述情報から図面の認識誤りを検出する認識誤り検出手段である。この認識誤り検出手段16は、認識情報抽出手段12と図面情報抽出手段15から得られた2つのグラフ構造から、図形情報記憶手段9と接続情報記憶手段11に記憶されている認識結果の誤りを検出する。17は認識誤り検出手段16によって検出された認識誤りから図形情報記憶手段9と接続情報記憶手段11に記憶された認識結果の誤りを修正する認識誤り修正手段である。18は認識誤り修正手段17によって修正された認識結果を記憶する修正結果記憶手段である。
次に、上記の実施例1の動作を図2−図10を参照しながら説明する。図2は、図1の図形認識装置が認識対象とする図面の一例を示す図、図3は画像入力手段1によって入力され、画像記憶手段2に記憶された画像データの一例、図4は画像記憶手段2に記憶された画像データを認識した認識結果の一例、図5は図形情報記憶手段9と接続情報記憶手段11に記憶された内容から、認識情報抽出手段12によって抽出されたグラフ構造の一例、図6は図面情報入力手段13より入力され、図面情報記憶手段14によって記憶された図面情報の一例、図7は図面情報記憶手段14によって記憶された図面情報から、図面情報抽出手段15によって抽出されたグラフ構造の一例、図8は認識情報抽出手段12及び図面情報抽出手段15によって得られた2つのグラフ構造から、認識誤り検出手段16によって得られた最適なグラフのマッチングの一例、図9は検出された認識誤りを示す図、図10は認識誤り検出手段16から検出された認識誤りを認識誤り修正手段17によって修正した結果を示す図である。
まず例えば図2に示すような定形シンボル、不定形シンボル、接続線、及び文字が描かれた図面を画像入力手段1によって入力すると、太さを持った2値ディジタルの画像データとして画像記憶手段2に記憶される。このとき図3に示すように、認識対象である図面の画像データが入力時のノイズや図面の品質等の原因により、不定形シンボルを表す線情報が閉曲線で構成されていないものとして記憶されているとする。画像処理手段3は、画像データに対し膨張−収縮や画像間の論理演算を行うことにより塗りつぶし領域の位置を表す領域情報を作成し、また、太さを持った線を構成する画像データを細めていくことにより線の中心の座標列である線情報を取り出す。領域情報や線情報は線−領域情報記憶手段4に記憶される。定形シンボル検出手段5は、定形シンボルを構成する特徴的な要素、例えば小さな閉曲線をもとに線−領域情報の探索を行い、定形シンボルを検出して図形情報記憶手段9に記憶する。不定形シンボル検出手段6は、まず、線−領域情報の探索を行い閉曲線を検出し、この閉曲線の長さが予め定められた範囲にある場合にその形状の不定な不定形シンボルを検出して、シンボルの形状と位置を図形情報記憶手段9に記憶する。ただしこの例では不定形シンボルが閉曲線で構成されていないので、不定形シンボルは検出されない。接続線検出手段7は、水平垂直の長い線の追跡を行うことにより、線−領域情報記憶手段4から接続線を取り出して図形情報記憶手段9に記憶する。文字検出手段8は、線の分岐点における連結成分の数及び文字を構成する線の数、長さをもとに線−領域情報の探索を行い、文字を検出して図形情報記憶手段9に記憶する。接続情報作成手段10は、定形シンボル、不定形シンボル、文字、接続線の接続関係を調べ、接続情報を作成して接続情報記憶手段11に記憶する。図4は以上の手段によって得られた画像記憶手段2に記憶された画像データの認識結果である。このように閉曲線を構成しない不定形シンボルは、複数の接続線として認識される。
認識情報抽出手段12は、図形情報記憶手段9と接続情報記憶手段11に記憶されている内容から、各シンボルの持つ属性と接続線によって接続されているシンボルとシンボルの論理的な接続関係に着目し、シンボルを節点、接続関係を枝とする図5に示すようなグラフ構造を抽出する。一方、図6は認識対象とする図面の正しいグラフ構造と同一のグラフ構造を特徴記述情報として抽出することのできる図面情報の一例である。ここでは認識対象とする図面のシンボルと図6の機器番号は一対一の関係にある。図6の図面情報は、図面情報入力手段13によって入力され、図面情報記憶手段14によって記憶される。図面情報抽出手段15は、図面情報記憶手段14によって記憶された図面情報から、図7に示すようなグラフ構造を抽出する。認識誤り検出手段16は、認識情報抽出手段12と図面情報抽出手段15からそれぞれ抽出された図5及び図7に示すような二つのグラフ構造から、図8に示すような最適なマッチングを探索し、図9に示すような認識誤りを検出する。ここでは定形シンボル「e1」と「e2」の間に不定形シンボル「f」が未検出されていることがわかる。認識誤り修正手段17は、認識誤り検出手段16によって検出された認識誤りから図4の認識結果を修正して図10のような正しい認識結果を得て、修正結果記憶手段18に記憶する。
(実施例2)なお、上記実施例1では図面情報入力手段13から入力する図面情報は、認識対象とする図面と同一のグラフ構造を抽出できる一枚の図面であったが、入力する図面情報として、次の,のいずれかを含むグラフ構造が抽出できる複数の図面情報であってもよい。
認識対象とする図面から抽出したグラフ構造の全部または一部のグラフ構造認識対象とする図面から抽出したグラフ構造の全部または一部に類似したグラフ構造このことの結果としては、上記実施例1では認識対象とする図面と同一のグラフ構造を抽出できる図形情報を与えなければならないので、認識対象とする図面一枚に対し一つの図形情報を必要とする。しかし実施例2のように図面情報入力手段13より入力する図面情報の条件を拡張することによって、図面情報の共有化やライブラリ化を行うことができる。図11はこのような図面情報のライブラリの一例を示したもので(a)及び(b)の図面情報から抽出されたグラフ構造は、図5の認識結果から得られたグラフ構造に対して、図12に示すようにそれぞれ(1)及び(2)のようにマッチングさせることができる。(a)のマッチングによって、図9で得られたのと同じようにシンボル「f」が未検出であることを知ることができる。
(実施例3)なお、上記実施例1では認識情報抽出手段12及び図形情報抽出手段15において、図形情報からシンボルを節点、接続線による接続関係を枝としたグラフ構造を抽出したが、グラフ構造の作成は他の基準で行ってもよい。例えば図面上の相対的な位置関係から、近いシンボル同志の間に枝を張れば、図13に示すようなグラフ構造を作成することができる。
(実施例4)なお、上記実施例1では図形情報から図形情報抽出手段15によってグラフ構造を抽出しているが、抽出するものは認識誤り検出手段16において認識誤りが検出できればどんなものでもよい。例えば図形情報から抽出するものとして次の,がある。
定形シンボル、不定形シンボル、接続線の数や大きさなどの特徴量シンボルとシンボルの特徴的な接続関係や接続数などを記述したルールこれは認識情報抽出手段12においても適用できる。例えば図14に示すルールは図6の図面情報から得られたものであるが、同様に図5の認識結果からルールの抽出を行っても、タンク(f)が検出されていないためにルール2は抽出されない。このことからシンボル「f」が未検出であることを知ることができる。
ところで上記説明では、この発明を図面の認識誤りを修正する場合について述べたが、この図面の概念はその他のパターン等も含み、したがって、その他のパターン認識におけるすべての認識誤りの修正に利用できることはいうまでもない。
【発明の効果】以上のように、この発明によれば認識結果である図形情報記憶手段と接続情報記憶手段からグラフ構造などの特徴記述情報を作成する認識情報抽出手段と、認識対象とする図面に関連した図面情報を入力する図面情報入力手段と、入力した図面情報を記憶する図面情報記憶手段と、この図面情報記憶手段に記憶された図面情報から特徴記述を作成する図面情報抽出手段と、上記認識情報抽出手段と上記図面情報抽出手段により得られた2つの特徴記述から認識誤りを検出する認識誤り検出手段と、この認識誤り検出手段の検出した認識誤りをもとに、上記図形情報記憶手段と上記接続情報記憶手段に記憶された認識情報を修正する認識誤り修正手段と、この認識誤り修正手段で修正された認識情報を記憶する修正結果記憶手段を従来の図面認識装置に付加するように構成したので、認識対象する図面に関連した正しい特徴記述を得ることのできる図面情報を入力して利用することによって不定形シンボルの未検出などの図面の認識誤りを修正できるという効果がある。即ち、この発明によれば、既に計算機上に記憶された認識対象とする図面に関連する情報を有効に活用して、閉曲線を構成しない不定形シンボルでも検出ができ、さらに定形シンボル、接続線などの検出,認識や接続情報の認識誤りを正しく修正でき、修正のための人的工数を削減できるという効果が得られる。
また、上記各手段により認識誤り修正装置を構成した場合も、同様な効果が得られる。
【特許請求の範囲】
【請求項1】 図面を読み取って2値の画像情報を作成する画像入力手段と、この画像入力手段によって作成された画像情報を記憶する画像記憶手段と、この画像記憶手段に記憶されている画像情報を入力してこの画像情報中の線の抽出及び塗つぶし領域の抽出を行い線情報及び領域情報を記憶する線−領域情報記憶手段と、この線−領域情報記憶手段に記憶されている線情報及び領域情報を入力し形状の決まった定形シンボルを検出して認識する定形シンボル検出手段と、上記線−領域情報記憶手段に記憶されている線情報及び領域情報を入力し形状の不定な不定形シンボルを検出して認識する不定形シンボル検出手段と、上記線−領域情報記憶手段に記憶されている線情報及び領域情報を入力し接続線を検出して認識する接続線検出手段と、上記線−領域情報記憶手段に記憶されている線情報及び領域情報を入力し文字を検出して認識する文字検出手段と、上記定形シンボル検出手段と上記不定形シンボル検出手段と上記接続線検出手段と上記文字検出手段の各々によって検出し認識された結果を記憶する図形情報記憶手段と、この図形情報記憶手段に記憶されている認識結果を入力し定形シンボルと不定形シンボルと接続線の接続関係と文字との関係を認識して接続情報を作成する接続情報作成手段と、この接続情報作成手段によって作成された接続情報を記憶する接続情報記憶手段とを備え、図面中の文字、シンボル、接続線等を検出して図形を認識する図形認識装置において、上記図形情報記憶手段に記憶されている図形情報と上記接続情報記憶手段に記憶されている接続情報とから認識結果の特徴を抽出し特徴記述情報を作成する認識情報抽出手段と、認識対象とする図面に関連した特徴記述情報を得ることのできる図面情報を入力する図面情報入力手段と、この図面情報入力手段から入力した図面情報を記憶する図面情報記憶手段と、この図面情報記憶手段に記憶された図面情報から図面情報の特徴を抽出し特徴記述情報を作成する図面情報抽出手段と、上記認識情報抽出手段と上記図面情報抽出手段とにより抽出された2つの特徴記述情報から図面の認識誤りを検出する認識誤り検出手段と、この認識誤り検出手段によって検出された認識誤りから上記図形情報記憶手段と上記接続情報記憶手段に記憶された認識結果の誤りを修正する認識誤り修正手段と、この認識誤り修正手段によって修正された認識結果を記憶する修正結果記憶手段とを設けたことを特徴とする図形認識装置。
【請求項2】図形情報記憶手段に記憶されている図形情報と上記接続情報記憶手段に記憶されている接続情報とから認識結果の特徴を抽出し特徴記述情報を作成する認識情報抽出手段と、認識対象とする図面に関連した特徴記述情報を得ることのできる図面情報を入力する図面情報入力手段と、この図面情報入力手段から入力した図面情報を記憶する図面情報記憶手段と、この図面情報記憶手段に記憶された図面情報から図面情報の特徴を抽出し特徴記述情報を作成する図面情報抽出手段と、上記認識情報抽出手段と上記図面情報抽出手段とにより抽出された2つの特徴記述情報から図面の認識誤りを検出する認識誤り検出手段と、この認識誤り検出手段によって検出された認識誤りから上記図形情報記憶手段と上記接続情報記憶手段に記憶された認識結果の誤りを修正する認識誤り修正手段と、この認識誤り修正手段によって修正された認識結果を記憶する修正結果記憶手段とを備えたことを特徴とする認識誤り修正装置。
【要約】
【目的】 認識対象とする図面の認識において、認識誤りを検出し、認識誤りを修正することのできる図形認識装置を得る。
【構成】 画像入力手段1によって入力した認識対象とする図面について、定形シンボル検出手段5、不定形シンボル検出手段6、接続線検出手段7、文字検出手段8によって図形情報を認識し、接続情報作成手段10によって接続情報を作成する。このとき認識対象とする図面の品質の低さや入力時のノイズ等によって、認識情報は認識誤りを含んでいる。そこで図面情報入力手段13より認識対象とする図面に関連した図面情報を入力し、この図面情報を使用して認識誤り検出手段16において認識誤りを検出し、この認識誤りから認識誤り修正手段17によって認識結果を修正する。
【IPC分類】G06F
【公開番号】特開平5−54089
【公開日】平成5年(1993)3月5日
【発明の名称】図形認識装置及び認識誤り修正装置
【出願番号】特願平3−237274
【出願日】平成3年(1991)8月23日
【出願人】
【識別番号】000006013
【氏名又は名称】三菱電機株式会社
【代理人】
【弁理士】
【氏名又は名称】宮園 純一
図形認識装置及び認識誤り修正装置製造方法
