
増井雄一郎( @masuidrive )さんの「メロスを形態素解析せよ」問題解説記事 #mecab #ruby    
2014.03.28      Category:コード解説 ,リーダーボード・コード殿堂
Tag:masuidrive ,Ruby 
増井雄一郎です。
今回の問題は、形態素解析に関する問題でした。
問題
文書をパーツごとに分解する事を形態素解析と言います。
普段聞くことのない技術ですが、IMEなどの日本語入力や検索エンジンの裏側など、「文」を扱う処理では多用されている基礎的な技術です。
日本語形態素解析で有名なものに、MeCabというのものがあります。
これを導入し、
"文書をパーツごとに分解する事を形態素解析と言います。"
を解析すると、下記のように分解されます。
この様に文章を品詞ごとに分解する事で色々な処理ができるようになります。
文書  名詞,一般,*,*,*,*,文書,ブンショ,ブンショ
を   助詞,格助詞,一般,*,*,*,を,ヲ,ヲ
パーツ 名詞,一般,*,*,*,*,パーツ,パーツ,パーツ
ごと  名詞,接尾,一般,*,*,*,ごと,ゴト,ゴト
に   助詞,格助詞,一般,*,*,*,に,ニ,ニ
分解  名詞,サ変接続,*,*,*,*,分解,ブンカイ,ブンカイ
する  動詞,自立,*,*,サ変・スル,基本形,する,スル,スル
事   名詞,非自立,一般,*,*,*,事,コト,コト
を   助詞,格助詞,一般,*,*,*,を,ヲ,ヲ
形態素 名詞,一般,*,*,*,*,形態素,ケイタイソ,ケイタイソ
解析  名詞,サ変接続,*,*,*,*,解析,カイセキ,カイセキ
と   助詞,格助詞,引用,*,*,*,と,ト,ト
言い  動詞,自立,*,*,五段・ワ行促音便,連用形,言う,イイ,イイ
ます  助動詞,*,*,*,特殊・マス,基本形,ます,マス,マス
。   記号,句点,*,*,*,*,。,。,。
問題
青空文庫の走れメロスを形態素解析し、その単語を下記の文章にランダムに当てはめ、文を一つ作りなさい。なお形態素解析には、MeCabとIPA辞書を使うこと。
"[名詞]は最近、[名詞]を[動詞]している。"
解説
形態素解析とは、文章を「形態素」と呼ばれる最小構成に分解し、品詞を判別する事を言います。
今回の問題では、走れメロスを形態素解析し単語を取り出し、それを元に新しい文章を自動生成するものです。
形態素解析のプログラムは多数リリースされており、オープンソースで有名なものにKAKASI, MeCab, ChaSenがあり、市販ではRosette言語処理プラットフォームが最も有名です。
今回、問題では形態素解析にMeCabを使う事を指定しています。これは形態素解析のアプリによって結果が異なるためです。また辞書を使うタイプの形態素解析アプリでは、辞書によっても結果が異なります。
今回は、IPAがリリースしている辞書を元に作られたIPA辞書を指定しました。
MeCabとIPA辞書のインストール方法はOSに依存します。多くのLinuxディストリビューションで標準のパッケージシステムで提供されています。Windowsでは公式パッケージが用意されているのでそちらを使ってください。
前処理として、青空文庫の走れメロスをテキスト化します。
次にMeCabを使い、走れメロスを形態素解析します。
mecab meros.txt > meros.parsed.txt
形態素解析されると、meros.parsed.txtの様なファイルが生成されます。これで単語ごとに分解され品詞が付いているので、それをテンプレートに当てはめるコードを書きます。
今回は例としてRubyで書いてみます。
# 単語を配列に入れて品詞をキーにしハッシュに入れる
words = Hash.new
# MeCabから出力されたテキストを解析
# pos: part of speech = 品詞 
STDIN.each do |line|
word, pos = /(.*?)\t(.*?),/.match(line).to_a[1..2]
words[pos] ||= []
words[pos].push(word)
end
# 単語の重複を取り除く
words.values.each(&:uniq!)
# テンプレートを展開する
TEMPLATE = "[名詞]は最近、[名詞]を[動詞]している。"
result = TEMPLATE.gsub(/\[.*?\]/) do |str|
pos = str[1..-2]
words[pos][rand(words[pos].count)]
end
puts result
# 出力例> 愛は最近、見事を立ち去りしている。
このようにテンプレートを用意することで、適当な文章を自動生成することができます。
今回の問題では、これで正解ですが、botなどを作るためにはもっと自然な文章を生成するために、単語の活用形を合わせるなどの処理を行う必要があります。
これらのテキスト処理については、書籍など出ているので興味がある人はぜひ調べてみてください。
正解者発表
正解者のニックネームを公開です!(提出新着順です。)
※正解した方全員にバッジを付与しています。
チェシャ猫様
せきゅあ様
フォール様
ている様
fmhr様
tbpgr様
まままま様
ksword様
kuwa72様
taksski様
ykchat様
NeoCat様
javaBeginner様
Masato様
ゆうだい様
knightrogen様
ryosy383様
次回作問題のお知らせ
増井雄一郎さんの新作問題が公開中です!
ぜひチャレンジしてみてください!正解するとmasuidriveバッジが付与されます!
英語でなんて読むか知ってる?(受付締切:2014年4月21日 AM10:00まで)
https://codeiq.jp/ace/masui_yuichiro/q813
増井雄一郎( @masuidrive )さんの「メロスを形態素解析せよ」問題解説記事 #mecab #ruby｜CodeIQ MAGAZINE
