※この記事は、http://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q12137761112に対する答えの続きとして作成されました。 始めてご覧になる方は上記リンクを参照の上、読み下さい。 …さて。 上記回答を簡単に説明すると Q:モデルにかぶせた王冠のアクセサリを頭に沿ってずらしたいです! A:ダミーボーンを使いましょう。というものでした。 上記のご質問には ・MikuMikuDance(以下、MMD)のVer9以降で実装された「外部親」を利用する。 ・王冠を被らせたいモデルの「頭」ボーンに、MMD標準付属の「ダミーボーン.pmd」をくっつける。 ・王冠アクセサリは「ダミーボーン」に取り付ける …という方法でご説明したのですが、この方法では以下のような欠点があります。 ・王冠がずれるキーをフレーム登録するときに、「人物モデル」と「ダミーボーン」が別モデル扱いになってしまうので、タイミングの調整がめんどくさい。 ・外部親登録するよりも、モデル改造した方が早くない?…と言う訳で、「Pmxエディタ入門編:モデルにダミーボーンを追加しよう」と題してお送りします。※手の位置にアクセサリ用のダミーボーンを追加する場合は、そぼろ様作の「準標準ボーン追加プラグイン」を使用した方が楽に改造できます。  今回は、任意の位置にダミーボーンを増設する事についてご説明いたします。用意する物・Pmxエディタ(またはPmdエディタ)お使いのPCのスペックにあわせてお選び下さい。以下の解説では表記を「Pmxエディタ」で統一しますが、Pmdエディタでも作業可能です。・改造したいモデル・メモ帳手書きのメモ帳でも、Windows付属の「メモ帳」でもお好きな物を。<作業手順>1:Pmxエディタを起動し、改造したいモデルを読み込みます。2:「Pmx編集」窓から「ボーン」タブをクリックします。 ・左側にずらっと、ボーンの一覧が並んでいると思います。 ・まずは、その中から「頭」ボーンを探して下さい。 ・ボーン名は「x:(ボーン名)」のように先頭に数字が付いていますので  お手元のメモ帳に「頭ボーン」の番号を控えておいて下さい。3:頭ボーンの番号が控え終わったら、「ダミーボーン」の作成に入ります。 ・左側のリストの最後までスクロールさせ、一番最後のボーンをクリックして指定します。 ・ボーン名が青くなったら、右クリックから「追加(I)」「最後尾に追加(P)」をクリックします。4:リストの最後尾に「新規ボーン1」というボーンができました。 ・まずは名前を変更しましょう。  「ボーン名:」欄の「新規ボーン1」をお好みの名前に変更して下さい。  ここでは、説明の都合上「王冠用ダミー」としたことにします。5:ボーンを移動させましょう。 ・現在ボーンは、座標の原点、つまりXYZ=0の位置にあります。 ・「全ての親」ボーンがあるモデルでは、重なってしまっているため見つけにくいかと思います。 ・ちょっと位置をずらして上げましょう 「ボーン名:」の下に「位置:」という項目があり、現在は0,0,0になっているはずです。 ・真ん中の枠の『0』を『1』に変更してみましょう。 ・モデルの足先にボーンが移動しましたか?赤いが足下にあれば成功です。 ・Pmxエディタではボーン位置変更を確定させるためには、一端、他のボーンをクリックします。とりあえず今作った「王冠用ダミー」以外のボーンをリストから一つクリックして、すぐに「王冠用ダミー」をクリックして下さい。 ・さて、「位置:」が「0,1,0」でお気づきかと思いますが、「位置:」の3つの数字は、「x,y,z」の座標位置を示しています。 ・先ほどメモして頂いた、「頭ボーン」の座標位置を、「王冠用ダミー」の座標位置にコピペすると「頭ボーンの位置にダミーボーン」が移動します。 ・その方法でも、もちろんいいのですが、今回はPmxエディタの操作方法を練習する為に、「ハンドル」による移動を練習してみましょう。6:ボーンをハンドルで移動します。 ・モデルが映っている画面が「PMXView」窓です。 ・左上に「選択:」という項目があり、「頂」「面」「骨」「剛」「J」というボタンがあります。それぞれ…「頂」…「頂点」を選択します。 ・MMDで使われるモデルは「3Dポリゴン」で作られています。 「Pmxview」窓のモデルが表示されている画面下に「mode」というボタンがありますので「Wire+」を選択してみて下さい。モデル状に沢山の線が表示されました。 MMD上ではモデルは「細かい三角形の集合体」であることが分かります。 ・先と先が交差している場所が「頂点」です。この位置を変えるとモデルの形が変形します。「面」…「面」を選択します。 ・3つの「頂点」の間にある「色の付いた部分」が「面」です。 ・「面」を選択し、移動させると「接続する3つの頂点」がそれぞれ移動します。画面が見にくいので、先ほどの「mode」から「通常」に戻しましょう。「骨」…「ボーン」を選択します。 ・今回操作するのが、この「ボーン」です。 ・本来はモデルの「可動箇所」に入れる物ですが、今回のように「アクセサリ取り付け用ボーン」や「MMEのエフェクト取り付け用」に作られるボーンを「ダミーボーン(仮のボーン)と言います。「剛」…「剛体」を選択します。 ・スカートやマント、髪の毛などは、我々が暮らしている3次元の世界では人体にぶつかると「跳ね返ります」。 ・MMDのモデルでは、「ぶつかって跳ね返る」かどうか?を一つ一つ設定します。 ・「物体の跳ね返り方」=「衝突判定」を決める「剛体」を操作する際にこのボタンを選択します。 ・なお「剛体」は通常表示されませんが、モデルの左下の左から7つ目にある「緑の楕円」のボタンを押すと表示されますので、試しに一回押して見て下さい。 ・もう一度押して、元の表示に戻しましょう。「J」…「Joint」を選択します。 ・上記の剛体を連結させるために使われるのが「Joint」です。 ・長い髪の毛やスカートなど、「重力で動く、複雑な部分」に入っています。 ・こちらも表示されませんが、表示させるためには先ほどのモデルの下のボタンの一番右にある「四角い立方体」を押します。(もう一度押すと戻ります。) …さて、余計な説明が長くなりました。 ・現在は「頂」がONになっていますので、一端クリックしてOFFにします。引き続き「骨」をクリックしてONにして下さい。 ・MMDと同じ操作方法で、先ほど作った「王冠用ダミー」をアップにしてみて下さい。 ・充分近くに寄ったら、ボーン周辺を「範囲選択」します。 ・すると画面上に下図のような「ハンドル」が表示されます。http://gyazo.com/3a2a3d262aef133b70e1672c7ce0085c  ・3色の三角矢印は「移動」用です  ・3色のリングは「回転」に使用します。  ・なかに小さな立方体が4つありますが、これは「スケール」つまり「拡大縮小」に使用します。水色の立方体は「3軸同時の拡大縮小」を操作できます。 ・ハンドル中央の「水色の立方体」付近で「右クリック」すると「操作の内容」が選べます。  ・今回は「ボーンの位置を変更したい」だけですので、上記操作から「移動(M)」を選択して矢印だけのシンプルな画面にして下さい ・Y軸移動を示す「緑の矢印」を操作して、ダミーボーンを頭の位置に移動しましょう。 ・同じく「青の矢印」でz軸移動させ、使いやすそうな位置に調整して下さい。 ・モデルをグルグル動かして、「ボーンの位置」を微調整して下さい。 ・大体の位置が決まったら、「ボーンの位置」を決定させるために、一端、他のボーンをリストからクリックします。 ・再調整するにはもう一度ボーンを範囲選択して下さい。 Tips(小技) ・モデルが表示されている画面右上にある4つの矢印のボタンを右クリックし、「視点の回転中心(C)」「選択ボーン(B)」を選ぶと、選択したボーンを中心に回転できます。  ・ショートカットキーは「ctrl+3」です。  ・よく使いますので覚えておくと便利です。 ・今回は範囲選択だけ使用しましたが、その他にも選択方法があります。モデルの表示されている上に「範囲:」ボタンがあります。マウスオーバーで内容が説明されますので、ご興味があれば練習してみて下さい。7:ボーンの位置が決まったら、ボーンの内容について設定していきます。 ・「Pmx編集」窓に戻ります。「ボーン」タブで「王冠用アクセサリ」ボーンを選択します。 ・「位置:」の右側に「性能:」という5つのボタンがあります。  ・水色になっていればその項目が使用可能という意味です。  ・今回は、「回転」「移動」「表示」「操作」の4つをONにして下さい。(「IK」以外ですね)  ・「親ボーン:」欄に、最初の方でメモして頂いた「頭ボーンの番号」を入力します。  ・「親ボーン」とは、「そのボーンが追従する」ボーンを示します。    ・詳しくは…http://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q11137655691…にて、ご説明していますのでご興味があればお読み下さい。 ・「表示先(>)」欄で「ボーン」を選び「-1」を指定します。…ここまでで、ボーンの設定が終わりました。ファイル(F)名前を付けて保存(S)を選択して、元のモデルがあった場所に 『別名で保存』して下さい。くれぐれも、元のモデルを上書きしないように注意して下さい。これでモデル自体は改造できましたが、このままMMDに読み込ませると「キーフレーム」欄にせっかく作ったダミーボーンが表示されませんので、モデルの表示枠を修正します。8:モデル表示枠の修正 ・「Pmx編集」窓から「表示枠」タブを開きます。 ・左の共通表示枠欄からどこに表示されるのか選びます。 ・新しく枠を増やすことも出来ます。どれか枠を選んだら右クリックで「新規追加(P)」で新しい枠が作れます。「枠名:」で名前を付けましょう。 ・どの枠に入れるか決まったら、右側の下の方にある「ボーン:」の「」が書かれたボタンを押下します。 ・このボタンを押すと「表示枠に設定されていないボーン」の一覧が出てきます。 ・「王冠用アクセサリ」を選択して、その右の「+追加」を押下すれば、表示枠への登録は終了です。  Tips(小技) ・表示枠の並び順は変更できます。 ・モーションを自作される方は、体幹まわりのボーン(両目、頭、首、上半身2、上半身、下半身)を1つの表示枠にまとめると、モーション作成が捗ります。 ・さらに指を左右に分け「左指」と「右指」で管理してもいいでしょう。9:モデル情報の編集 ・「Pmx編集」窓の「情報」タブを開きます。  ・「モデル名」がMMDに読み込ませたときに「モデル操作」に表示されるモデル名です。   大規模なモデル改造をしたときは変更しておくといいでしょう。  ・「コメント」は、MMDにモデルを読み込んだ際に表示されるコメントです。   モデル改造したときには、「どのような改造をしたのか」追加しておくと   MMDで作業する際の混乱が防げます。10:モデルを別名で保存します。…これで作業は終了です。 今回は、「王冠」用にご説明しましたが、その他にも ・メガネ用のダミーボーン ・MMEエフェクトを取り付けるためのダミーボーン…などにも、応用できますのでご興味があればお試し下さい。 以上、文字にすると長いけど実際の改造内容は対したことやってない改造講座でした。 ここまで、長々と失礼いたしました。 それでは楽しいMMDライフを!
Pmxエディタ入門編:モデルにダミーボーンを追加しよう - Yahoo!知恵袋
