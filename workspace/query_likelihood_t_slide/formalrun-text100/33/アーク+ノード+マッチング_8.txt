
　しかし、上記技術では、対象物体を、その周囲に配された複数のマーカーと一緒に撮影しなければ、対象物体の３次元モデルを生成することはできない。
　そこで、本発明は、マーカー等を一緒に撮影することなく、物品の測定結果に基づいて自動的に３次元モデルを生成することができる３次元モデル生成装置、３次元モデル生成方法及び３次元モデル生成プログラムを提供する。
　上記課題を解決すべく、本発明に係る３次元モデル生成装置は、三次元空間内に設けられた部材の位置を示す情報を点情報の集合体である点群データとして取得する点群データ取得部と、３次元ＣＡＤデータを取得するＣＡＤデータ取得部と、前記点群データ及び前記３次元ＣＡＤデータを複数のセグメントに分割するセグメント算出部と、前記点群データについてのグラフであって、前記点群データを分割したセグメントをノードとしたグラフである第１のグラフ、及び前記３次元ＣＡＤデータについてのグラフであって、前記３次元ＣＡＤデータを分割したセグメントをノードとしたグラフである第２のグラフを生成するグラフ生成部と、前記第１のグラフと前記第２のグラフとをマッチングするマッチング部と、前記マッチング部によるマッチング結果に基づいて、前記点群データの基となる部材を前記３次元ＣＡＤデータが存在する部品と、前記３次元ＣＡＤデータが存在しない部品とに分類する分類部と、前記分類部による分類結果に基づいて前記点群データに基づいた３次元モデルを生成する３次元モデル生成部であって、前記点群データの基となる部材について前記３次元ＣＡＤデータが存在すると分類された場合には、前記３次元ＣＡＤデータを参照して３次元モデルを生成する３次元モデル生成部と、を備えることを特徴とする。
　本発明によれば、マーカー等を一緒に撮影することなく、物品の測定結果に基づいて自動的に３次元モデルを生成することができる。
本発明の実施形態に係る３次元モデル生成装置１の構成例を示す図である。
部材識別モデルＤＢに格納される学習データのデータ構造を示す図である。
形状フィッティングＤＢに格納されるフィッティングデータのデータ構造を示す図である。
制御部のハードウェア構成を示す図である。
３次元モデル生成装置１の処理の流れを示すフローチャートである。
マッチング処理の流れを示すフローチャートである。
マッチング処理を説明する図である。
部品に基づくモデル作成処理の流れを示すフローチャートである。
３次元モデル生成装置１の出力結果の一例を示す図である。
３次元モデル生成装置１の出力結果の一例を示す図である。
　以下、実施例を図面を用いて説明する。
　［構成の説明］図１は、本発明の一実施形態である３次元モデル生成装置１を示す図である。３次元モデル生成装置１は、主として、制御部１１と、出力部１２と、入力部１３と、通信部１４と、記憶部１５とを有する。３次元モデル生成装置１には、主として、３次元測定器２０と、部材識別モデルＤＢ（データベース）２１と、形状フィッティングＤＢ２２と、表示装置２５と、図示しない３次元ＣＡＤサーバとが有線又は無線で接続されている。
　制御部１１は、３次元モデル生成装置１の全体を制御する処理を行う。制御部１１の内部の構成については、後に詳述する。
　出力部１２は、プログラムの実行状態、処理結果等の出力を行う。
　入力部１３は、ユーザからのプログラム実行開始指示や中止指示等の入力を行う。
　通信部１４は、３次元モデル生成装置１の各部間のデータ交換を行う。また、通信部１４は、他装置（例えば図示しない３次元ＣＡＤサーバ）と通信してデータ交換を行う。
　記憶部１５は、取得した各種データを一時的に保存したり、作成したデータを記憶したりする。
　３次元測定器２０は、プラント等の内部にある部品の各部位にレーザビームを照射し、三次元の測定結果を取得する。測定結果は、図示しない処理部等でデータ処理され、測定データ２３として３次元モデル生成装置１に出力される。測定データ２３は、点情報の集合体である点群データである。
　さらに、３次元モデル生成装置１には、３次元ＣＡＤデータ２４が図示しない３次元ＣＡＤサーバから出力される。３次元ＣＡＤデータ２４は、プラント等の内部にある部品の３次元設計データである３次元ＣＡＤデータである。なお、本実施の形態では、３次元設計データはポリゴンデータである。本実施の形態では、３次元ＣＡＤサーバには、計測対象の部品のうち、全ての設計部品の３次元ＣＡＤデータ２４が記憶されている。
　部材識別モデルＤＢ２１は、学習データ２１０を格納する。学習データ２１０は、設計部品ではない部品、例えば配管、足場、補器等のサンプルデータである。
　図２は、学習データ２１０のデータ構造を示す図である。学習データ２１０は、部品格納領域２１０１と、サンプルデータ格納領域２１０２とを有する。部品格納領域２１０１と、サンプルデータ格納領域２１０２とは関連付けられている。
　部品格納領域２１０１には、配管、足場、補器等の部品名が格納される。サンプルデータ格納領域２１０２には、部品格納領域２１０１に部品名が格納された部品のサンプルデータが格納される。なお、サンプルデータは、３次元の点群データである。図２においては、サンプルデータとして線図が記載されているが、これは説明のためであり、実際には３次元形状が認識可能な点群データである。
　学習データとして、１つの部品に対して複数のサンプルデータが格納される必要がある。そのため、部品格納領域２１０１には、同じ名称の部品が複数格納される。ただし、サンプルデータ格納領域２１０２には、すべて異なるサンプルデータが格納され、同一のサンプルデータは２個以上格納されない。
　図１の説明に戻る。形状フィッティングＤＢ２２は、部材識別モデルＤＢ２１に学習データが記憶された部品について、フィッティングに必要な情報であるフィッティング情報２２０が記憶される。
　図３は、フィッティング情報２２０のデータ構造を示す図である。フィッティング情報２２０は、部品格納領域２２０１と、フィッティングデータ格納領域２２０２とを有する。部品格納領域２２０１と、フィッティングデータ格納領域２２０２とは関連付けられている。
　部品格納領域２２０１には、配管、足場、補器等の部品名が格納される。フィッティングデータ格納領域２２０２には、部品格納領域２１０１に格納された部品についてのフィッティングに必要な情報、すなわちどういうフィッティングをすればよいかを示す情報（以下、フィッティングデータという）が記憶される。
　フィッティングデータについて、部品が足場である場合を例に説明する。足場は、鉄パイプ等の円管と、円管に取り付けられた板材とで構成される。したがって、部品格納領域２１０１に「足場」が格納された場合には、フィッティングデータ格納領域２２０２には「平面と円管との組み合わせ」という情報、すなわち平面と円管面とで点群データをフィッティングすればよいことを示すフィッティングデータが格納される。
　図１の説明に戻る。表示装置２５は、ＣＲＴモニタ、液晶モニタ等のディスプレイ装置により構成される。
　次に、制御部１１の各構成について詳細に説明する。図１に示すように、制御部１１は、主として、セグメント算出部１１１と、グラフネットワーク算出部１１２と、グラフマッチング部１１３と、点群特徴量算出部１１４と、部品識別部１１５と、形状フィッティング部１１６と、ＣＡＤフィッティング部１１７とを有する。
　セグメント算出部１１１は、測定データ２３及び３次元ＣＡＤデータ２４のそれぞれについて、平面セグメントや曲面セグメント等の複数のセグメントに分割する。セグメント算出部１１１が求めたデータは、グラフネットワーク算出部１１２に出力される。セグメント算出部１１１がセグメントに分割する具体的な処理は、既に公知であるため、説明を省略する。
　グラフネットワーク算出部１１２は、セグメント算出部１１１が分割した測定データ２３のセグメント及び３次元ＣＡＤデータ２４のセグメントのそれぞれについて、セグメントのつながり、具体的には、どのセグメントとどのセグメントが連結するか、連結の位置はどこか、連結の角度は何度か、等を算出する。グラフネットワーク算出部１１２は、算出したセグメントのつながり（以下、グラフネットワークという）を、構造情報としてグラフマッチング部１１３に出力する。なお、グラフネットワーク算出部１１２の行う具体的な処理は、すでに公知であるため、詳細な説明を省略する。
　グラフマッチング部１１３は、グラフネットワーク算出部１１２が生成した測定データ２３のグラフネットワークと３次元ＣＡＤデータ２４のグラフネットワークとのマッチングを行う。具体的には、グラフマッチング部１１３は、測定データ２３のグラフネットワークと３次元ＣＡＤデータ２４のグラフネットワークとを比較し、ネットワークの構造体としての近さを求める。また、グラフマッチング部１１３は、マッチング結果に基づいて、測定データ２３の基となる部品は３次元設計データがある部品なのか、測定データ２３の基となる部品は３次元設計データがない部品なのかを分類する。グラフマッチング部１１３が行う処理については、後に詳述する。
　点群特徴量算出部１１４は、グラフマッチング部１１３において測定データ２３の基となる部品が３次元設計データのない部品であると分類された場合に、測定データ２３から特徴量を算出する。例えば、点群特徴量算出部１１４は、測定データ２３のある部分のｘ方向、ｙ方向、ｚ方向の分散、大きさ、重心距離等の点群の持っている特徴を特徴量として算出する。さらに、点群特徴量算出部１１４は、部材識別モデルＤＢ２１に記憶されたサンプルデータについても、特徴量を算出する。サンプルデータについて算出された特徴量は、学習モデルを作る際に用いられる。なお、点群特徴量算出部１１４の行う具体的な処理は、すでに公知であるため、詳細な説明を省略する。
　部品識別部１１５は、サポートベクトルマシン等の公知の手法を用いて、点群特徴量算出部１１４が算出した特徴量に基づいて部品を識別する。部品識別部１１５は、点群特徴量算出部１１４が算出した測定データ２３の特徴量と、部材識別モデルＤＢ２１に記憶されたサンプルデータの特徴量とを比較し、測定データ２３の基となる部品が、部材識別モデルＤＢ２１にサンプルデータが格納された部品のどの部品に該当するかを識別する。なお、部品識別部１１５が用いる手法は、サポートベクトルマシンに限定されず、識別規則に基づいて識別を行う識別手法であればどのような手法を用いてもよい。また、部品識別部１１５の行う処理には、すでに公知の方法を用いるため、詳細な説明を省略する。
　形状フィッティング部１１６は、部品識別部１１５の識別結果に基づいて、測定データ２３をフィッティングする。形状フィッティング部１１６の処理については、後に詳述する。
　ＣＡＤフィッティング部１１７は、３次元ＣＡＤデータ２４を用いて、測定データ２３をフィッティングする。ＣＡＤフィッティング部１１７の処理については、後に詳述する。
　図４は、３次元モデル生成装置１の概略構成の一例を示すブロック図である。図示するように、例えばコンピューターなどで構成される３次元モデル生成装置１は、演算装置であるＣＰＵ（Ｃｅｎｔｒａｌ　Ｐｒｏｃｅｓｓｉｎｇ　Ｕｎｉｔ）１０１と、揮発性の記憶装置であるＲＡＭ（Ｒａｎｄｏｍ　Ａｃｃｅｓｓ　Ｍｅｍｏｒｙ）や不揮発性の記憶装置であるＲＯＭ（Ｒｅａｄ　ｏｎｌｙ　Ｍｅｍｏｒｙ）からなるメモリ１０２と、外部記憶装置１０３と、外部の装置と通信を行う通信装置１０４と、ユーザからの入力を受け付けるキーボード、マウス、或いはタッチパネル等のユーザインターフェイスで構成される入力装置１０５と、ディスプレイ等の出力装置１０６と、ＣＤドライブ、ＤＶＤドライブ等の読み書き装置１０７と、制御部１１と他のユニットを接続するインターフェイス（Ｉ／Ｆ）１０８とを備える。
　上記の制御部１１の各機能部は、例えば、ＣＰＵ１０１がメモリ１０２に格納された所定のプログラムをメモリ３２に読み出して実行することにより実現される。なお、所定のプログラムは、例えば、予めメモリ１０２にインストールされてもよいし、通信装置１０４を介してネットワークからダウンロードされてインストール又は更新されてもよいし、外部記憶装置１０３からインストール又は更新されてもよいし、読み書き装置１０７を介してＣＤドライブ、ＤＶＤドライブからインストール又は更新されてもよい。入力部１３は入力装置１０５により実現される。出力部１２及び通信部１４は通信装置１０４及びＩ／Ｆ１０８により実現される。記憶部１５はメモリ１０２により実現される。表示装置２５は出力装置１０６により実現される。なお、出力装置１０６は３次元モデル生成装置１の構成として必須ではなく、Ｉ／Ｆ１０８を介して接続されていればよい。
　以上の３次元モデル生成装置１の構成は、本実施形態の特徴を説明するにあたって主要構成を説明したのであって、上記の構成に限られなるものではない。
　［動作の説明］次に、本実施形態における３次元モデル生成装置１の動作を説明する。
　図５は、本実施形態における３次元モデル生成装置１の全体の処理の流れを示すフローチャートである。
　制御部１１は、通信部１４を介して、３次元測定器２０に指示を出し、部品の３次元計測を行う（ステップＳ１０）。制御部１１は、通信部１４を介して、３次元測定器２０で計測された測定データ２３を取得する（ステップＳ１２）。また、制御部１１は、通信部１４を介して、図示しない３次元ＣＡＤサーバに記憶されたすべての３次元ＣＡＤデータ２４を取得する（ステップＳ１４）。ステップＳ１２で取得した測定データ２３及びステップＳ１４で取得した３次元ＣＡＤデータ２４は、記憶部１５に記憶される。
　セグメント算出部１１１は、ステップＳ１２で取得した測定データ２３をセグメンテーション化し、かつステップＳ１４で取得した３次元ＣＡＤデータ２４を要素面（セグメントと同義）に分割することにより、平面セグメントや曲面セグメント等の複数のセグメントに分割する（ステップＳ１６）。
　グラフネットワーク算出部１１２は、ステップＳ１６で複数のセグメントに分割された測定データ２３及び３次元ＣＡＤデータ２４のそれぞれについて、グラフネットワーク化を行う（ステップＳ１８）。具体的には、グラフネットワーク算出部１１２は、測定データ２３のセグメントをノード、連結しているセグメント間をアーク、連結している角度をアークに付加する情報としてグラフネットワーク化する。また、グラフネットワーク算出部１１２は、３次元ＣＡＤデータ２４の要素面をノード、連結している要素面間をアーク、連結している角度をアークに付加する情報としてグラフネットワーク化する。
　グラフマッチング部１１３は、ステップＳ１８で算出された測定データ２３のグラフネットワークと３次元ＣＡＤデータ２４のグラフネットワークとのマッチングを行う（ステップＳ２０）。以下、ステップＳ２０について、具体的に説明する。
　図６は、マッチング処理（ステップＳ２０）の処理の流れを示すフローチャートである。
　まず、グラフマッチング部１１３は、測定データ２３のグラフネットワーク２３０と３次元ＣＡＤデータ２４のグラフネットワーク２４０とを比較し、最も類似したノード、アークの集合体を抽出する（ステップＳ２０１）。測定データ２３のグラフネットワーク２３０と３次元ＣＡＤデータ２４のグラフネットワーク２４０とを比較した結果、測定データ２３のグラフネットワーク２３０と３次元ＣＡＤデータ２４のグラフネットワーク２４０とが一致する領域が複数抽出されることがある。この場合には、グラフマッチング部１１３は、複数の領域のうちの最も大きい集合体、最も類似度が高い領域等を抽出する。
　図７は、測定データ２３のグラフネットワーク２３０と３次元ＣＡＤデータ２４のグラフネットワーク２４０を示す図である。グラフネットワーク２３０、２４０において、ノード（図７の黒丸参照）がセグメントであり、アーク（図７の線参照）がセグメントのつながりを示す。図７に示す例においては、マッチングした結果、点線で囲まれた領域が、測定データ２３のグラフネットワーク２３０と３次元ＣＡＤデータ２４のグラフネットワーク２４０とが類似する集合体として抽出される。
　次に、グラフマッチング部１１３は、ステップＳ２０１で測定データ２３のグラフネットワーク２３０から抽出された集合体に、ステップＳ２０１で３次元ＣＡＤデータ２４のグラフネットワーク２４０から抽出された集合体の部分につけられた部品名称を対応付ける（ステップＳ２０２）。ステップＳ２０１で集合体が抽出されなかった場合には、グラフマッチング部１１３は、ステップＳ２０２で名称を対応付けず、次のステップへ進む。
　グラフマッチング部１１３は、測定データ２３のグラフネットワーク２３０と３次元ＣＡＤデータ２４のグラフネットワーク２４０とを比較した結果、マッチするノード、アークの集合体があるか否かを判断する（ステップＳ２０３）。
　マッチするノード、アークの集合体がある場合（ステップＳ２０３でＹＥＳ）は、測定データ２３のグラフネットワーク２３０と３次元ＣＡＤデータ２４のグラフネットワーク２４０とが複数の領域で一致する場合である。この場合には、グラフマッチング部１１３は、再度ステップＳ２０１を行う。
　マッチするノード、アークの集合体がない場合（ステップＳ２０３でＮＯ）は、グラフマッチング部１１３は、マッチング処理を終了する。
　これにより、測定データ２３のグラフネットワーク２３０と３次元ＣＡＤデータ２４のグラフネットワーク２４０との構造体としての近さが求められる。なお、構造体としての近さは、部分一致する領域の数、領域の面積比等により算出することもできる。
　次に、グラフマッチング部１１３は、マッチング結果に基づいて、測定データ２３の基となる部品は３次元設計データがある部品なのか、測定データ２３の基となる部品は３次元設計データがない部品なのかを分類し、測定データ２３の基となる部品は３次元設計データがある部品であるか否かを判断する（ステップＳ２２）。以下、ステップＳ２２について具体的に説明する。
　ステップＳ２０（詳しくはステップＳ２０２）で３次元ＣＡＤデータ２４の部品名称と関連付けられた領域があった場合には、グラフマッチング部１１３は、点群データの基となる部品の３次元ＣＡＤデータ２４が入力されたと判断する。そして、グラフマッチング部１１３は、測定データ２３の基となる部品を３次元設計データがある部品に分類する。
　なお、グラフマッチング部１１３は、測定データ２３のグラフネットワーク２３０と３次元ＣＡＤデータ２４のグラフネットワーク２４０の一致する領域が複数あった場合や、測定データ２３のグラフネットワーク２３０と３次元ＣＡＤデータ２４のグラフネットワーク２４０の一致する領域の面積比が所定の閾値（例えば７０％）以上の場合に、測定データ２３の基となる部品を３次元設計データがある部品に分類することもできる。
　それに対し、測定データ２３のグラフネットワーク２３０と３次元ＣＡＤデータ２４のグラフネットワーク２４０とがほとんど一致しない場合等には、グラフマッチング部１１３は、点群データの基となる部品の３次元ＣＡＤデータ２４が入力されていないと判断する。そして、グラフマッチング部１１３は、測定データ２３の基となる部品を３次元設計データがない部品に分類する。
　測定データ２３の基となる部品が、３次元設計データがない部品に分類された場合（ステップＳ２２でＮＯ）には、制御部１１は、測定データ２３の基となる部品が３次元モデル作成の対象か否かを判断する（ステップＳ２４）。以下、ステップＳ２４について、具体的に説明する。
　点群特徴量算出部１１４は、測定データ２３及び部材識別モデルＤＢ２１に記憶されたサンプルデータの特徴量を算出する。部品識別部１１５は、点群特徴量算出部１１４が算出した測定データ２３の特徴量と、部材識別モデルＤＢ２１に記憶されたサンプルデータの特徴量とを比較し、測定データ２３の基となる部品が、部材識別モデルＤＢ２１にサンプルデータが格納された部品のどの部品に該当するかを識別する。
　測定データ２３の基となる部品が、部材識別モデルＤＢ２１にサンプルデータが格納された部品のどの部品にも該当しない場合、すなわち測定データ２３の基となる部品が３次元モデル作成の対象でない場合（ステップＳ２４でＮＯ）は、形状フィッティング部１１６は、測定データ２３を記憶部１５から削除する（ステップＳ２６）。
　測定データ２３の基となる部品が、部材識別モデルＤＢ２１にサンプルデータが格納された部品のどれかに該当する場合、すなわち測定データ２３の基となる部品が３次元モデル作成の対象である場合（ステップＳ２４でＹＥＳ）は、形状フィッティング部１１６は、部品識別結果に基づいてフィッティングを行い、３次元モデルを生成する（ステップＳ２８）。以下、ステップＳ２８について、具体的に説明する。
　図８は、部品識別結果に基づいてフィッティングを行って、３次元モデルを生成する処理の流れを示すフローチャートである。
　形状フィッティング部１１６は、ステップＳ２４で識別された、測定データ２３の基となる部品の特徴を、形状フィッティングＤＢ２２から取得する。例えば、ステップＳ２４において、測定データ２３の基となる部品が足場と識別された場合には、形状フィッティング部１１６は、フィッティングデータ格納領域２２０２から「平面と円管との組み合わせ」という情報を取得する（ステップＳ２８０）。
　その後、形状フィッティング部１１６は、ステップＳ２８０で取得された情報に基づいて測定データ２３をフィッティングする（ステップＳ２８２～Ｓ２８８）。図３に示すように、本実施の形態では、３次元モデルの基となる部品は、足場に限らず、平面と円管とを結合させることにより形成することができる。したがって、形状フィッティング部１１６は、以下に説明するように、平面、円筒を別々にフィッティングする。
　形状フィッティング部１１６は、測定データ２３から平面成分の点群を抽出する（ステップＳ２８２）。形状フィッティング部１１６は、ステップＳ２８２で抽出した点群に対して平面フィッティングを行う（ステップＳ２８４）。
　次に、形状フィッティング部１１６は、測定データ２３から平面成分の点群を除去する（ステップＳ２８６）。これにより、測定データ２３の円筒面の成分のみが残るため、形状フィッティング部１１６は、ステップＳ２８６で平面成分の点群を除去した点群に円筒面をフィッティングする（ステップＳ２８８）。
　一般的に、平面のフィッティングの方が処理が単純で、精度が比較的高い。また、一般的に、曲面に属する点群より平面に属する点群の方が多い。したがって、平面をフィッティングした後で、曲面のフィッティングを行うことが望ましい。
　図５の説明に戻る。測定データ２３の基となる部品が、３次元設計データがある部品に分類された場合（ステップＳ２２でＹＥＳ）には、ＣＡＤフィッティング部１１７は、３次元ＣＡＤデータ２４を用いて測定データ２３をフィッティングする（ステップＳ３０）。
　ステップＳ３０の処理について一例を用いて説明する。ＣＡＤフィッティング部１１７は、グラフマッチング部１１３でのマッチング結果、３次元ＣＡＤデータ２４と一致した部分については、３次元ＣＡＤデータ２４と同じ形状となるように、測定データ２３のフィッティングを行う。ここでいう形状は、線、平面、曲面、円管等である。その後、ＣＡＤフィッティング部１１７は、３次元ＣＡＤデータ２４と一致しなかった部分についてフィッティングを行う。このように、３次元ＣＡＤデータ２４を用いてフィッティングすることにより、他の部分に隠れてしまう等により測定データ２３がない部分についても、フィッティングを行うことができる。
　ＣＡＤフィッティング部１１７は、３次元ＣＡＤデータ２４を用いて、ステップＳ３０で生成したフィッティング結果を修正し、３次元モデルを生成する（ステップＳ３２）。具体的には、ＣＡＤフィッティング部１１７は、３次元ＣＡＤデータ２４における規格情報を用いて、フィッティング結果を修正する。規格情報とは、例えば配管の径等の大きさに関する情報である。これにより、測定結果に基づく３次元モデルと設計データとの誤差を吸収し、高精度の３次元モデルを生成することができる。
　しかしながら、ステップＳ３２では、位置のズレ等の規格に関しない部分については、フィッティング結果の修正を行わない。本実施の形態においては、あくまで計測された結果を再現することが重要であるためである。なお、３次元ＣＡＤデータ２４と、生成した３次元モデルとの位置のずれの大きさ等の情報（以下、差異情報という）を保持するようにしてもよい。
　制御部１１は、このようにして生成された３次元モデル及び差異情報を、記憶部１５に記憶する。出力部１２は、必要に応じて、３次元ＣＡＤデータ２４、３次元モデル及び差異情報を表示装置２５に出力する。
　［出力例１］図９は、３次元モデル及び差異情報を出力した場合の表示装置２５の表示例である。図９に示すように、表示装置２５には、３次元ＣＡＤデータ２４及び３次元モデルに基づいて、３次元ＣＡＤデータ２４を表示した画像２５１と、生成した３次元モデルの画像２５２が表示される。これにより、設計データと、実際の状態とを一目で比較することができる。
　また、表示装置２５には、３次元ＣＡＤデータ２４が存在する部品を表示する表示領域２５３と、３次元ＣＡＤデータが存在しない部品を表示する表示領域２５４とが表示される。これにより、３次元ＣＡＤデータ２４が存在するか否かを容易に確認することができる。
　さらに、表示装置２５には、差異情報に基づいて、３次元ＣＡＤデータ２４が存在する部品について、３次元ＣＡＤデータ２４と位置が異なることを表示する表示領域２５５と、３次元ＣＡＤデータ２４と形状が異なることを表示する表示領域２５６が表示される。これにより、３次元モデルと３次元ＣＡＤデータ２４との差異について容易に把握することができる。
　なお、３次元ＣＡＤデータ２４と位置や形状が異なる場合には、生成した３次元モデルの画像２５２上でも差異が分かるような表示を行ってもよい。図９においては、３次元モデルにあって、３次元ＣＡＤデータ２４に無い部分については、黒塗りで表示をしている。また、３次元ＣＡＤデータ２４と位置や形状が異なる部分については、網掛けをしている。
　なお、図９は、３次元モデル及び差異情報を出力した場合の表示装置２５の表示の一例であり、表示形態はこれに限定されない。
　［出力例２］図１０は、３次元モデルを出力した場合の表示装置２５の表示例である。図１０に示すように、表示装置２５には、生成した３次元モデルの画像２５２が表示される。これにより、３次元モデルを確認することができる。
　本実施の形態によれば、測定結果から自動的に３次元モデルを生成することができる。３次元ＣＡＤデータがある場合には、３次元ＣＡＤデータを参照して３次元モデルの生成を行うため、早く、高精度に３次元モデルを生成することができる。特に、規格のある形状等については、３次元ＣＡＤデータに基づいて生成した３次元モデルを修正することにより、精度の高い３次元モデルを生成することができる。
　また、本実施の形態によれば、３次元ＣＡＤデータがない場合には、サンプルデータを参照して部品を識別し、部品の特徴に基づいて３次元モデルを生成することにより、精度の高い３次元モデルを生成することができる。
　また、本実施の形態によれば、３次元モデルの生成の対象外である場合には、計測データを削除することで、ノイズをなくし、処理を高速化かつ高精度にすることができる。
　なお、本発明は上記した実施例に限定されるものではなく、様々な変形例が含まれる。例えば、上記した実施例は本発明を分かりやすく説明するために詳細に説明したものであり、必ずしも説明したすべての構成を備えるものに限定されるものではない。また、ある実施例の構成に他の実施例の構成を加えることも可能である。また、各実施例の構成の一部について、他の構成の追加・削除・置換をすることが可能である。
　また、上記の各構成、機能、処理部、処理手段等は、それらの一部又は全部を、例えば修正機会とで設計する等によりハードウェアで実現してもよい。また、上記の各構成、機能等は、プロセッサがそれぞれの機能を実現するプログラムを解釈し、実行することよりソフトウェアで実現してもよい。各機能を実現するプログラム、テーブル、ファイル等の情報は、メモリや、ハードディスク、ＳＳＤ（Ｓｏｌｉｄ　Ｓｔａｔｅ　Ｄｒｉｖｅ）等の記録装置、又は、ＩＣカード、ＳＤカード、ＤＶＤ等の記録媒体に置くことができる。
　また、制御線や情報線は説明上必要と考えられるものを示しており、製品上必ずしもすべての制御線や情報戦を示しているとは限らない。実際には殆どすべての構成が相互に接続されていると考えてもよい。
１：３次元モデル生成装置、１１：制御部、１２：出力部、１３：入力部、１４：通信部、１５：記憶部、２０：３次元測定器、２１：部材識別モデルＤＢ、２２：形状フィッティングＤＢ、２３：測定データ、２４：３次元ＣＡＤデータ、２５：表示装置、１１１：セグメント算出部、１１２：グラフネットワーク算出部、１１３：グラフマッチング部、１１４：点群特徴量算出部、１１５：部品識別部、１１６：形状フィッティング部、１１７：ＣＡＤフィッティング部、２１０：学習データ、２２０：フィッティング情報
Patent WO2014091837A1 - ３次元モデル生成装置、３次元モデル生成方法及び３次元モデル生成プログラム - Google Patents
