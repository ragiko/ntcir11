概要
Amebaの検索で利用される検索クエリ(「検索キーワード」とも呼ばれる)を用いて、これまでに検索クエリ分析基盤のプロトタイピングを実施してきた。本稿ではこの経過を報告する。主な目的は、検索クエリの分析を通じ検索品質の向上と検索クエリから垣間見えるユーザ像を追究することである。ここでは、プロトタイプシステムの機能リストと出力を眺望することを通じ、検索クエリ分析の重要性の考察を行う。この結果として、検索クエリの持つ情報の多様さや分析結果の応用の広範さを改めて知ることとなった。本稿で、今回のプロトタイピングによって検索クエリを分析することは検索エンジンの質的向上とユーザの意図への気づき促進の効果があることを強調したい。また今後の課題として、ユーザの検索意図を汲み取りそれらを的確にサービスとして反映する手段等について検討したい。
目次
序論
Amebaの主要サービスに組み込まれている検索機能の利用動向を基に,適時適切なキーワードの提示などによる検索品質の向上や、サービス利用ユーザの傾向把握を目指す. 具体的には検索クエリ分析基盤を構築し,検索クエリに関連する基礎的な統計データを簡単に利用することが可能となる状態目指す.そもそも検索クエリは, ブログや掲示板,プロフィール等とともにユーザが積極的に入力する貴重なデータ源の一つである.特に検索クエリについてはユーザが検索意図を明確に意識せずにデータを与えているケースが多いと考えられるため, 他のデータに比べより活き活きとして多様性に富んだ情報が日々が蓄積されている。ここではこれらのデータに潜在的に含まれている意図や関心の束を可視化することを試みる. 本稿では設計のためのプロトタイピングの経過報告が主眼となる.
内容
はじめに
Amebaでは,ブログをはじめ,なう,グルっぽ,プロフィール等,複数のサービスで検索システムが利用されている. 本稿では,検索システムが出力するログ,特に検索クエリに着眼した分析を適用することにより,ユーザ属性ごとの関心や、関心の時系列推移をはじめとする豊富な情報が可視化されることをプロトタイピングを通じて示す.
以下の章で, 検索クエリ分析の目的,関連研究分野の動向,プロトタイプについて,いくつかの分析事例,まとめについてそれぞれ順を追って述べる.
検索クエリ分析の目的
検索クエリの分析には以下のような目的がある. 
検索システムの品質向上
例) 入力したクエリに関連する語彙の推薦: 典型的には,検索入力インターフェース付近にリンクとして提示される.
検索以外のシステムとの連携
例) スパムユーザの検出: 異常な検索行為を行うユーザを抽出する. ユーザIDなどで紐づいている他サービスに広く適用が見込める.
例) 新語の獲得: 検索エンジンには,世間の動向に敏感に応じたさまざまな用語や名称が日々入力される. これらの新語を適宜利用することにより, 自然言語処理などを伴うタスクの精度が向上することが期待される
その他分析
時系列トレンド分析: 検索クエリを時系列にプロットすることにより, その語彙の推移をはじめ,急上昇度や周期性, 類似時系列推移パターンの抽出が可能となる.
ユーザ属性分析: ユーザの属性情報データが利用可能な状況では, ある検索クエリが,いつ・どこで・どんな人に検索されたかが特定できる.
研究動向
これまでの検索クエリ関連の研究としては以下のジャンルが存在する:
検索クエリ拡張
クエリの再構成情報を検索エンジンのランク学習に用いるもの[1]
検索ログからの集合知データの適用に関するジャンル
(クリックスルーや閲覧データも含めた)検索セッションの分析
上記のクエリ・クリックログを用いた広告最適化
検索意図に関する心理学・社会学的な研究
1はクエリに特化した研究ジャンルとしてはもっとも古く,その応用はこれまで多くの検索エンジンのユーザインタフェースとして実装された. 2も広義では1に属するが, ランキングデータや時系列データの作成など,検索エンジンの質的向上に直接関連しないテーマも現れるようになった. 3,4は行動ログ分析の一部として位置づけられている.5はクエリログ分析が応用される最大の領域である.6については,検索クエリ分析の前提としてもかたられることの多い「Broderの分類」[2]を以下に紹介する:
ナビゲーショナルクエリ
多くの人がそのクエリで単一のURLを意図しているようなケース. 例えば, "ameba"というクエリで"ameba.jp"に遷移したい人が多いようなクエリである. クエリと検索エンジンをブックマーク的に利用しているケースともいえる. 特に人気の高いページに関しては,近年のクエリ補完技術の進化も相まって,ナビゲーショナルクエリが短縮・省略され,もはや独立の単語としては意味をなさないような形にまで変形されることもある.
インフォメ—ショナルクエリ
ユーザがそのクエリが指す対象を「知りたい」「学習したい」という意図を持って検索されるような語である. 典型的には" とは"や" 意味"等のクエリが該当する. 急上昇中のような異常ケース場合は" 意味"の意図で""のみのクエリが上昇することもある.
トランザクショナルクエリ
検索語の行先のWebページにおいて購入や何らかのサービスを利用したいという意図が存在するようなクエリである. 「オークション」や「アップルストア MacBook」」などが該当する.
Amebaのサービスのうち, プロフィールやなう,グルっぽへのクエリはトランザクショナルクエリの比率が高いと予測できる. また,ブログの「記事タイトル検索」では「すでに知っているブログを閲覧ためのクエリ入力」のように,ナビゲーショナルクエリと見られるものも存在する. ブログの記事検索においては上記の分類にうまく当てはまらないケースも多い. 例えば, 「田助 彼女いるのに」「原宿 購入品」というキーワードはどこに分類されるべきだろうか? 無理やり分類するのならインフォメーショナルクエリだろうが, このようなクエリに対しては「共感・価値観形成クエリ」なる分類を提案したい. このクエリは「自分や知人と同じ状況の人」や「同じものを買った人」「同じ行動をとった人」の感想を知りたいのだという仮説を立てたい. このようなクエリを用いるユーザは,特定の言動をするユーザに共感したい,あるいは自分の言動に正当性を持たせたい,等の意図があるのではないだろうか.
学術的には上記3分類(「4分類」も存在する)を想定するのが一般的であるが,Amebaのブログ検索のような,個別の検索システムを考える場合,実サービスの運用上, 影響の大きい(PV,CTRに影響を与えるという意味で)他の意図を考慮することもできるだろう. 例えばAmebaでは,以下の派生的な検索意図は特に注目すべきものと考えられる.
芸能人の動向や噂を知りたい(上記「インフォメーショナルクエリ」の一種)
一般ブロガの子育て等のライフサイクルを参照したい(上記「インフォメーショナルクエリ」の一種)
Amebaサービス(特にピグやゲーム)関連の情報を知りたい(上記「インフォメーショナルクエリ」の一種)
Amebaを通じて繋がっている友人とコミュニケートしたい(上記「トランザクショナルクエリ」の一種)
本報告では上記Ameba特有の検索意図に関する詳細な分析は行わないが,近い将来の課題として考慮している.
プロトタイピングについて
ここでは,Ameba検索クエリ分析基盤のプロトタイプ"AQB48"(an Analyzer for Query Bunch with 48 facets)について報告する.
分析対象データは以下のサービスの検索ログである. 生ログから今回の目的に必要な情報のみを抽出したサマリログデータのサイズ(日次,MB)を記す.
(尚,サービスによりログデータのフィールド定義が異なる場合もあり,各サービスにおけるデータセットのレコード数とデータサイズは必ずしも比例関係にはない)
利用データセット
【CyberAgent】技術情報/TechReport - テックレポート/検索クエリからユーザを識る | 株式会社サイバーエージェント
