VMFSを開発したサティヤム・ヴァガーニ氏は、今後ストレージに求められるのは、アプリケーション指向のデータサービスを提供できる、新たな抽象化レイヤだと話す。同氏の設立したPernix Dataは、こうしたプラットフォームを提供することで、ストレージの世界のヴイエムウェアになることを目指しているのだという。
サーバ機内蔵のフラッシュ(サーバサイドフラッシュ)を用いた分散キャッシュにより、ストレージI/Oを高速化するソフトウェア、「Pernix Data FVP」を提供している米Pernix Data(パーニックスデータ)。同社の共同創立者で、CTOを務めているサティヤム・ヴァガーニ(Satyam Vaghani)氏は、ヴイエムウェアでクラスタファイルシステムのVMFSを開発したのをはじめ、数々のストレージ機能の開発を率い、VMware ESX/vSphereの競合優位性を向上、ヴイエムウェアの成長を支えてきた人だ。ストレージCTOを務めていたが、2012年にPernix Dataを設立。2013年2月には現在の製品、FVPを発表している。
しかし、FVPのようなサーバサイドフラッシュを活用したデータキャッシュには、Fusion-ioのioTurbineなど、競合となる製品が複数存在する。ヴイエムウェアの「VMware VSAN」は、ストレージ全体をサーバ側に持ってくるという点で、FVPとは異なる。だが、ストレージI/Oの高速化を実現するというメリットは共通だ。何よりも、「データ高速化ソフトウェアは単なるツールであり、ニッチ製品でしかない」と考える人は多数いるだろう。
そこでヴァガーニ氏に、なぜヴイエムウェアにおけるキャリアを捨ててまで、「単なるデータ高速化ツール」の会社をつくったのかと聞くと、同氏は次のように答えた。
「ヴイエムウェアが(サーバ仮想化製品の)ESXを出した2001年ごろ、人々は『サーバの台数を減らして節約できるが、それだけの製品だ』と考えた。誰も、ヴイエムウェアがこれほどまでの存在になるとは考えていなかった。Pernix Dataはいま、これと同じ段階にいる。私にはFVPの将来が見えるが、多くの人々には現在の『データ高速化製品』という姿しか見えていない」。
ではヴァガーニ氏は、他の人には見えない、何を見ているのか。
「VSANなどの製品は、ストレージをアプリケーションやサーバのレイヤに引き上げようとしている。だが、既存のストレージシステムを排除するやり方をとっている。われわれは、『問題の本質的な解決策は、ストレージシステムと分離された、ストレージ・インテリジェンスのためのレイヤを作り出すことだ』と考えている。このストレージ・インテリジェンス・レイヤは、どんなストレージシステムを導入しているユーザーでも、活用できるものでなければならない。そして(Pernix Dataが取り組む)最初の重要なストレージ・インテリジェンスが、データ高速化だ」(ヴァガーニ氏)。
サーバ上のフラッシュでキャッシュクラスタをつくるFVP
FVPは、「単なるデータ高速化ツール」として考えても、非常に特徴的な製品だ。
FVPでは、複数の物理サーバに搭載されたフラッシュ/SSDをまとめ上げ、既存ストレージシステムの前段で、1つの論理的なキャッシュプールを構築できる。PCIeフラッシュ1枚単位でリードキャッシュを行うだけの製品とは、この点で大きく異なる。FVPではリードキャッシュ、ライトキャッシュが可能で、ライトキャッシュではライトスルー、ライトバックの双方に対応する。ライトバック・キャッシュの場合、書き込み時点で複数のレプリカを作成し、データを保護するようになっている。
仮想化環境での利用にフォーカスしているのも、FVPの重要な特徴だ。FVPは1つ1つの仮想マシンを識別し、これを単位に機能を提供するようになっている。このため、vMotionやスナップショットなど、VMware vSphereの機能をそのまま利用できる。仮想マシンが別の物理サーバへ移動する場合、この仮想マシンは元の物理サーバのフラッシュに存在するアプリケーションデータ(キャッシュ)にアクセスし続けることができる。とはいえ、仮想マシンとそのデータが別の場所では、パフォーマンス上不利になる。このため、FVPでは仮想マシンの存在する物理サーバに対し、そのデータをバックグラウンドで徐々に移行させる作業を行っている。
FVPは、こうしたデータ高速化機能を、VDIやデータベースといった特定用途に限定されることなく、あらゆるアプリケーションに、それぞれのニーズに応じて自動的に適用できる製品であり、どんなバックエンド・ストレージを使う組織でも使える「プラットフォーム」なのだとヴァガーニ氏はいう。
ストレージの世界におけるヴイエムウェアを目指す
「あらゆるユーザーが活用できる技術でありたい。そのため、われわれはストレージのキャパシティ(データ格納機能)自体を提供しない。重要なのはストレージの頭脳部分であり、当社はこれだけを提供していく。キャパシティは将来、大きな問題ではなくなる。そのうち、あまりにも安価になり過ぎて、誰も気にしなくなるからだ。当社は仮想化データセンターにおける、あらゆるストレージオペレーションのための制御ポイントになることができる。つまり、『ストレージ界のヴイエムウェア』になれる可能性がある」。
ヴァガーニ氏が言いたいのはこういうことだ。現在、ストレージI/O高速化のため、PCIeフラッシュやオールフラッシュストレージが注目されている。だが、これらの製品は一般的に、可用性、スナップショット、レプリケーションをはじめとした「データサービス」と呼ばれる機能が不十分なことが多い。
PCIeフラッシュでは、Fusion-ioが最近発表したように、アダプタ1枚で6.4TBといった大容量の製品が登場している。これだけの容量があれば、特定のデータベース全体を格納できるケースも増えてくる。だが、データベース全体を格納できたとしても、スナップショットや冗長化などのデータサービス機能がないと、一般的な企業では使いにくい。また、データの配置を意識しなければならない。このため、現在のデータベースサイズなら1枚のフラッシュアダプタに収まったとしても、その後にデータ量が急増したらどうするのか、といった問題が起こる。
「データサービス機能というと、多くの人たちは高価なストレージシステムが必要だと考える。しかし、私はこうした人たちが、非常に安価なストレージシステムを考えるようになってもらいたい。安いストレージシステムを順次調達していけば済むなら、それは素晴らしいストレージ設計だと思う。なぜなら、来年10倍のストレージ容量が必要になったとしても、ユーザーはどうすればいいか悩まなくていいからだ」(ヴァガーニ氏)。
今後求められるのはアプリケーション指向のデータサービス
では、EMCなどの既存ストレージシステムが現在提供しているデータサービスを、すべてFVPで提供するというのだろうか。ヴァガーニ氏は、イエスと答える。すべてのデータサービスを提供し、さらにこれらの製品にはできないような新しいデータサービスを実現すると話す。
「(新しいデータサービスを提供すると)自信を持って言える理由は、われわれが(既存ストレージベンダとは)根本的に異なる方法を採用しているからだ。既存ストレージシステムは、LUNやNFSボリューム単位でしか、スナップショットなどのデータサービスを実行できない。しかし、今後必要となってくるのはアプリケーション単位(つまり仮想マシン単位)のデータサービスだ。われわれはデータサービスを、インフラ指向ではなく、アプリケーション指向で設計できる。アプリケーション指向のデータサービスを提供するには、アプリケーションを理解したうえで、個々の動作を制御する必要が出てくる。これには、サーバ上で何らかのコンポーネントを動かさなければならない」。
ヴァガーニ氏は、上記の「新しいデータサービス」の例について、具体的には語ろうとしない。だが、「ぼかした形でなら話せる」として、次のように説明した。
「CPUやメモリに関しては、各仮想マシンに対する割り当てによって、パフォーマンスを具体的に保証できる。ところがストレージI/Oだけは、これまで各アプリケーション単位(仮想マシン単位)でパフォーマンスを保証することができなかった。ティントリはこの問題を克服するためがんばっているが、その製品には、アプリケーションから離れた場所にいるという課題がある。アプリケーションからのI/Oが、彼らのストレージ装置に到達してはじめて、仮想マシン単位のQoS制御ができる。I/Oボトルネックがサーバ上で発生していても検知できない。サーバのレイヤで制御が実行できない限り、エンド・ツー・エンドのQoSは確保できない」。
では、例えばオンプレミスとクラウドにまたがったストレージ・ティアリング(データの階層管理)も考えているのか。「考えている。現状では、ネットワークの速度やセキュリティなど、クラウドストレージの利用には技術的あるいはビジネス的な課題がある。だが、そのうちユーザー組織は、キャパシティとしてのストレージを購入しなくなるだろう。アプリケーションに近いところで必要なのは、パフォーマンスであり、データサービスだ。データ容量はWANの向こう側にあるかどうかにかかわらず、最も安価なところから調達するようになっていくだろう。フラッシュ媒体の容量がこれだけ大きくなってくると、データのワーキングセット全体を格納するのに十分といえるようになる。ワーキングセットはサーバのそばにないと、遅くて使いものにならないが、(最終的なデータ保存先としての)ストレージはクラウドにあってもいい。ほとんどアクセスすらしないかもしれないし、データの場所を誰も気にしなくなると思う」。
米Pernix Data CTOに聞く:「VMFSの父」が語る、フラッシュとストレージの未来 - @IT
